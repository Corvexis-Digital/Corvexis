const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-ocr-BM3qSzF3.js","assets/vendor-lottie-BKil9D5R.js","assets/vendor-pdf-CTzZ0cJF.js","assets/AIDocTool-DcdqYj1h.js","assets/Toast-DpFMzWfU.js","assets/AssignmentScanner-BlHg3JPr.js","assets/ModuleImport-DWBzHt9D.js","assets/AIStudyLab-BJtJGrxo.js"])))=>i.map(i=>d[i]);
import{r as ae,R as YP,b as XP}from"./vendor-lottie-BKil9D5R.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var hI={exports:{}},l0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QP=ae,JP=Symbol.for("react.element"),ZP=Symbol.for("react.fragment"),eD=Object.prototype.hasOwnProperty,tD=QP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nD={key:!0,ref:!0,__self:!0,__source:!0};function dI(n,e,t){var r,i={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)eD.call(e,r)&&!nD.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:JP,type:n,key:s,ref:a,props:i,_owner:tD.current}}l0.Fragment=ZP;l0.jsx=dI;l0.jsxs=dI;hI.exports=l0;var j=hI.exports,pI={exports:{}},Er={},mI={exports:{}},gI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(ce,q){var he=ce.length;ce.push(q);e:for(;0<he;){var Ae=he-1>>>1,G=ce[Ae];if(0<i(G,q))ce[Ae]=q,ce[he]=G,he=Ae;else break e}}function t(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var q=ce[0],he=ce.pop();if(he!==q){ce[0]=he;e:for(var Ae=0,G=ce.length,Y=G>>>1;Ae<Y;){var K=2*(Ae+1)-1,W=ce[K],ie=K+1,pe=ce[ie];if(0>i(W,he))ie<G&&0>i(pe,W)?(ce[Ae]=pe,ce[ie]=he,Ae=ie):(ce[Ae]=W,ce[K]=he,Ae=K);else if(ie<G&&0>i(pe,he))ce[Ae]=pe,ce[ie]=he,Ae=ie;else break e}}return q}function i(ce,q){var he=ce.sortIndex-q.sortIndex;return he!==0?he:ce.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,m=3,g=!1,v=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(ce){for(var q=t(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=ce)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=t(c)}}function k(ce){if(_=!1,y(ce),!v)if(t(l)!==null)v=!0,ke(V);else{var q=t(c);q!==null&&Ee(k,q.startTime-ce)}}function V(ce,q){v=!1,_&&(_=!1,w(A),A=-1),g=!0;var he=m;try{for(y(q),h=t(l);h!==null&&(!(h.expirationTime>q)||ce&&!D());){var Ae=h.callback;if(typeof Ae=="function"){h.callback=null,m=h.priorityLevel;var G=Ae(h.expirationTime<=q);q=n.unstable_now(),typeof G=="function"?h.callback=G:h===t(l)&&r(l),y(q)}else r(l);h=t(l)}if(h!==null)var Y=!0;else{var K=t(c);K!==null&&Ee(k,K.startTime-q),Y=!1}return Y}finally{h=null,m=he,g=!1}}var L=!1,I=null,A=-1,C=5,P=-1;function D(){return!(n.unstable_now()-P<C)}function N(){if(I!==null){var ce=n.unstable_now();P=ce;var q=!0;try{q=I(!0,ce)}finally{q?M():(L=!1,I=null)}}else L=!1}var M;if(typeof T=="function")M=function(){T(N)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,me=ye.port2;ye.port1.onmessage=N,M=function(){me.postMessage(null)}}else M=function(){E(N,0)};function ke(ce){I=ce,L||(L=!0,M())}function Ee(ce,q){A=E(function(){ce(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,ke(V))},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(ce){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var he=m;m=q;try{return ce()}finally{m=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ce,q){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var he=m;m=ce;try{return q()}finally{m=he}},n.unstable_scheduleCallback=function(ce,q,he){var Ae=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ae+he:Ae):he=Ae,ce){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=he+G,ce={id:u++,callback:q,priorityLevel:ce,startTime:he,expirationTime:G,sortIndex:-1},he>Ae?(ce.sortIndex=he,e(c,ce),t(l)===null&&ce===t(c)&&(_?(w(A),A=-1):_=!0,Ee(k,he-Ae))):(ce.sortIndex=G,e(l,ce),v||g||(v=!0,ke(V))),ce},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(ce){var q=m;return function(){var he=m;m=q;try{return ce.apply(this,arguments)}finally{m=he}}}})(gI);mI.exports=gI;var rD=mI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iD=ae,_r=rD;function fe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vI=new Set,gu={};function lo(n,e){pl(n,e),pl(n+"Capture",e)}function pl(n,e){for(gu[n]=e,n=0;n<e.length;n++)vI.add(e[n])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),om=Object.prototype.hasOwnProperty,sD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sx={},ax={};function aD(n){return om.call(ax,n)?!0:om.call(sx,n)?!1:sD.test(n)?ax[n]=!0:(sx[n]=!0,!1)}function oD(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function lD(n,e,t,r){if(e===null||typeof e>"u"||oD(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jn(n,e,t,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){yn[n]=new jn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];yn[e]=new jn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){yn[n]=new jn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){yn[n]=new jn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){yn[n]=new jn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){yn[n]=new jn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){yn[n]=new jn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){yn[n]=new jn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){yn[n]=new jn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Jg=/[\-:]([a-z])/g;function Zg(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Jg,Zg);yn[e]=new jn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Jg,Zg);yn[e]=new jn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Jg,Zg);yn[e]=new jn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){yn[n]=new jn(n,1,!1,n.toLowerCase(),null,!1,!1)});yn.xlinkHref=new jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){yn[n]=new jn(n,1,!1,n.toLowerCase(),null,!0,!0)});function ev(n,e,t,r){var i=yn.hasOwnProperty(e)?yn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lD(e,t,i,r)&&(t=null),r||i===null?aD(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ns=iD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hf=Symbol.for("react.element"),zo=Symbol.for("react.portal"),Ho=Symbol.for("react.fragment"),tv=Symbol.for("react.strict_mode"),lm=Symbol.for("react.profiler"),_I=Symbol.for("react.provider"),xI=Symbol.for("react.context"),nv=Symbol.for("react.forward_ref"),cm=Symbol.for("react.suspense"),um=Symbol.for("react.suspense_list"),rv=Symbol.for("react.memo"),ms=Symbol.for("react.lazy"),yI=Symbol.for("react.offscreen"),ox=Symbol.iterator;function mc(n){return n===null||typeof n!="object"?null:(n=ox&&n[ox]||n["@@iterator"],typeof n=="function"?n:null)}var kt=Object.assign,up;function Pc(n){if(up===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);up=e&&e[1]||""}return`
`+up+n}var fp=!1;function hp(n,e){if(!n||fp)return"";fp=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{fp=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Pc(n):""}function cD(n){switch(n.tag){case 5:return Pc(n.type);case 16:return Pc("Lazy");case 13:return Pc("Suspense");case 19:return Pc("SuspenseList");case 0:case 2:case 15:return n=hp(n.type,!1),n;case 11:return n=hp(n.type.render,!1),n;case 1:return n=hp(n.type,!0),n;default:return""}}function fm(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ho:return"Fragment";case zo:return"Portal";case lm:return"Profiler";case tv:return"StrictMode";case cm:return"Suspense";case um:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case xI:return(n.displayName||"Context")+".Consumer";case _I:return(n._context.displayName||"Context")+".Provider";case nv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case rv:return e=n.displayName||null,e!==null?e:fm(n.type)||"Memo";case ms:e=n._payload,n=n._init;try{return fm(n(e))}catch{}}return null}function uD(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fm(e);case 8:return e===tv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ws(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function EI(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fD(n){var e=EI(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function $f(n){n._valueTracker||(n._valueTracker=fD(n))}function TI(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=EI(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function ed(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function hm(n,e){var t=e.checked;return kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function lx(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ws(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wI(n,e){e=e.checked,e!=null&&ev(n,"checked",e,!1)}function dm(n,e){wI(n,e);var t=Ws(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?pm(n,e.type,t):e.hasOwnProperty("defaultValue")&&pm(n,e.type,Ws(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function cx(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function pm(n,e,t){(e!=="number"||ed(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Dc=Array.isArray;function tl(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ws(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function mm(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return kt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ux(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(fe(92));if(Dc(t)){if(1<t.length)throw Error(fe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ws(t)}}function II(n,e){var t=Ws(e.value),r=Ws(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function fx(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function SI(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gm(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?SI(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Wf,AI=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Wf=Wf||document.createElement("div"),Wf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wf.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function vu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var $c={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hD=["Webkit","ms","Moz","O"];Object.keys($c).forEach(function(n){hD.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),$c[e]=$c[n]})});function CI(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||$c.hasOwnProperty(n)&&$c[n]?(""+e).trim():e+"px"}function kI(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=CI(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var dD=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vm(n,e){if(e){if(dD[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function _m(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xm=null;function iv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ym=null,nl=null,rl=null;function hx(n){if(n=of(n)){if(typeof ym!="function")throw Error(fe(280));var e=n.stateNode;e&&(e=d0(e),ym(n.stateNode,n.type,e))}}function RI(n){nl?rl?rl.push(n):rl=[n]:nl=n}function PI(){if(nl){var n=nl,e=rl;if(rl=nl=null,hx(n),e)for(n=0;n<e.length;n++)hx(e[n])}}function DI(n,e){return n(e)}function NI(){}var dp=!1;function FI(n,e,t){if(dp)return n(e,t);dp=!0;try{return DI(n,e,t)}finally{dp=!1,(nl!==null||rl!==null)&&(NI(),PI())}}function _u(n,e){var t=n.stateNode;if(t===null)return null;var r=d0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(fe(231,e,typeof t));return t}var Em=!1;if(ji)try{var gc={};Object.defineProperty(gc,"passive",{get:function(){Em=!0}}),window.addEventListener("test",gc,gc),window.removeEventListener("test",gc,gc)}catch{Em=!1}function pD(n,e,t,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Wc=!1,td=null,nd=!1,Tm=null,mD={onError:function(n){Wc=!0,td=n}};function gD(n,e,t,r,i,s,a,o,l){Wc=!1,td=null,pD.apply(mD,arguments)}function vD(n,e,t,r,i,s,a,o,l){if(gD.apply(this,arguments),Wc){if(Wc){var c=td;Wc=!1,td=null}else throw Error(fe(198));nd||(nd=!0,Tm=c)}}function co(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function MI(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function dx(n){if(co(n)!==n)throw Error(fe(188))}function _D(n){var e=n.alternate;if(!e){if(e=co(n),e===null)throw Error(fe(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return dx(i),n;if(s===r)return dx(i),e;s=s.sibling}throw Error(fe(188))}if(t.return!==r.return)t=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,r=s;break}if(o===r){a=!0,r=i,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,r=i;break}if(o===r){a=!0,r=s,t=i;break}o=o.sibling}if(!a)throw Error(fe(189))}}if(t.alternate!==r)throw Error(fe(190))}if(t.tag!==3)throw Error(fe(188));return t.stateNode.current===t?n:e}function OI(n){return n=_D(n),n!==null?LI(n):null}function LI(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=LI(n);if(e!==null)return e;n=n.sibling}return null}var bI=_r.unstable_scheduleCallback,px=_r.unstable_cancelCallback,xD=_r.unstable_shouldYield,yD=_r.unstable_requestPaint,Bt=_r.unstable_now,ED=_r.unstable_getCurrentPriorityLevel,sv=_r.unstable_ImmediatePriority,VI=_r.unstable_UserBlockingPriority,rd=_r.unstable_NormalPriority,TD=_r.unstable_LowPriority,UI=_r.unstable_IdlePriority,c0=null,_i=null;function wD(n){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(c0,n,void 0,(n.current.flags&128)===128)}catch{}}var ri=Math.clz32?Math.clz32:AD,ID=Math.log,SD=Math.LN2;function AD(n){return n>>>=0,n===0?32:31-(ID(n)/SD|0)|0}var qf=64,Kf=4194304;function Nc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function id(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?r=Nc(o):(s&=a,s!==0&&(r=Nc(s)))}else a=t&~i,a!==0?r=Nc(a):s!==0&&(r=Nc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-ri(e),i=1<<t,r|=n[t],e&=~i;return r}function CD(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kD(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-ri(s),o=1<<a,l=i[a];l===-1?(!(o&t)||o&r)&&(i[a]=CD(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}}function wm(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function BI(){var n=qf;return qf<<=1,!(qf&4194240)&&(qf=64),n}function pp(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function sf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ri(e),n[e]=t}function RD(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-ri(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function av(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-ri(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var st=0;function GI(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var zI,ov,HI,$I,WI,Im=!1,jf=[],Ds=null,Ns=null,Fs=null,xu=new Map,yu=new Map,vs=[],PD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mx(n,e){switch(n){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":xu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(e.pointerId)}}function vc(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=of(e),e!==null&&ov(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function DD(n,e,t,r,i){switch(e){case"focusin":return Ds=vc(Ds,n,e,t,r,i),!0;case"dragenter":return Ns=vc(Ns,n,e,t,r,i),!0;case"mouseover":return Fs=vc(Fs,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return xu.set(s,vc(xu.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yu.set(s,vc(yu.get(s)||null,n,e,t,r,i)),!0}return!1}function qI(n){var e=Na(n.target);if(e!==null){var t=co(e);if(t!==null){if(e=t.tag,e===13){if(e=MI(t),e!==null){n.blockedOn=e,WI(n.priority,function(){HI(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ch(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Sm(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);xm=r,t.target.dispatchEvent(r),xm=null}else return e=of(t),e!==null&&ov(e),n.blockedOn=t,!1;e.shift()}return!0}function gx(n,e,t){Ch(n)&&t.delete(e)}function ND(){Im=!1,Ds!==null&&Ch(Ds)&&(Ds=null),Ns!==null&&Ch(Ns)&&(Ns=null),Fs!==null&&Ch(Fs)&&(Fs=null),xu.forEach(gx),yu.forEach(gx)}function _c(n,e){n.blockedOn===e&&(n.blockedOn=null,Im||(Im=!0,_r.unstable_scheduleCallback(_r.unstable_NormalPriority,ND)))}function Eu(n){function e(i){return _c(i,n)}if(0<jf.length){_c(jf[0],n);for(var t=1;t<jf.length;t++){var r=jf[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ds!==null&&_c(Ds,n),Ns!==null&&_c(Ns,n),Fs!==null&&_c(Fs,n),xu.forEach(e),yu.forEach(e),t=0;t<vs.length;t++)r=vs[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<vs.length&&(t=vs[0],t.blockedOn===null);)qI(t),t.blockedOn===null&&vs.shift()}var il=ns.ReactCurrentBatchConfig,sd=!0;function FD(n,e,t,r){var i=st,s=il.transition;il.transition=null;try{st=1,lv(n,e,t,r)}finally{st=i,il.transition=s}}function MD(n,e,t,r){var i=st,s=il.transition;il.transition=null;try{st=4,lv(n,e,t,r)}finally{st=i,il.transition=s}}function lv(n,e,t,r){if(sd){var i=Sm(n,e,t,r);if(i===null)Ip(n,e,r,ad,t),mx(n,r);else if(DD(i,n,e,t,r))r.stopPropagation();else if(mx(n,r),e&4&&-1<PD.indexOf(n)){for(;i!==null;){var s=of(i);if(s!==null&&zI(s),s=Sm(n,e,t,r),s===null&&Ip(n,e,r,ad,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ip(n,e,r,null,t)}}var ad=null;function Sm(n,e,t,r){if(ad=null,n=iv(r),n=Na(n),n!==null)if(e=co(n),e===null)n=null;else if(t=e.tag,t===13){if(n=MI(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ad=n,null}function KI(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ED()){case sv:return 1;case VI:return 4;case rd:case TD:return 16;case UI:return 536870912;default:return 16}default:return 16}}var Ss=null,cv=null,kh=null;function jI(){if(kh)return kh;var n,e=cv,t=e.length,r,i="value"in Ss?Ss.value:Ss.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var a=t-n;for(r=1;r<=a&&e[t-r]===i[s-r];r++);return kh=i.slice(n,1<r?1-r:void 0)}function Rh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Yf(){return!0}function vx(){return!1}function Tr(n){function e(t,r,i,s,a){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yf:vx,this.isPropagationStopped=vx,this}return kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Yf)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Yf)},persist:function(){},isPersistent:Yf}),e}var Vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uv=Tr(Vl),af=kt({},Vl,{view:0,detail:0}),OD=Tr(af),mp,gp,xc,u0=kt({},af,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xc&&(xc&&n.type==="mousemove"?(mp=n.screenX-xc.screenX,gp=n.screenY-xc.screenY):gp=mp=0,xc=n),mp)},movementY:function(n){return"movementY"in n?n.movementY:gp}}),_x=Tr(u0),LD=kt({},u0,{dataTransfer:0}),bD=Tr(LD),VD=kt({},af,{relatedTarget:0}),vp=Tr(VD),UD=kt({},Vl,{animationName:0,elapsedTime:0,pseudoElement:0}),BD=Tr(UD),GD=kt({},Vl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),zD=Tr(GD),HD=kt({},Vl,{data:0}),xx=Tr(HD),$D={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KD(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=qD[n])?!!e[n]:!1}function fv(){return KD}var jD=kt({},af,{key:function(n){if(n.key){var e=$D[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Rh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?WD[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fv,charCode:function(n){return n.type==="keypress"?Rh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Rh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),YD=Tr(jD),XD=kt({},u0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yx=Tr(XD),QD=kt({},af,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fv}),JD=Tr(QD),ZD=kt({},Vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),eN=Tr(ZD),tN=kt({},u0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nN=Tr(tN),rN=[9,13,27,32],hv=ji&&"CompositionEvent"in window,qc=null;ji&&"documentMode"in document&&(qc=document.documentMode);var iN=ji&&"TextEvent"in window&&!qc,YI=ji&&(!hv||qc&&8<qc&&11>=qc),Ex=" ",Tx=!1;function XI(n,e){switch(n){case"keyup":return rN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QI(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $o=!1;function sN(n,e){switch(n){case"compositionend":return QI(e);case"keypress":return e.which!==32?null:(Tx=!0,Ex);case"textInput":return n=e.data,n===Ex&&Tx?null:n;default:return null}}function aN(n,e){if($o)return n==="compositionend"||!hv&&XI(n,e)?(n=jI(),kh=cv=Ss=null,$o=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YI&&e.locale!=="ko"?null:e.data;default:return null}}var oN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wx(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!oN[n.type]:e==="textarea"}function JI(n,e,t,r){RI(r),e=od(e,"onChange"),0<e.length&&(t=new uv("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Kc=null,Tu=null;function lN(n){cS(n,0)}function f0(n){var e=Ko(n);if(TI(e))return n}function cN(n,e){if(n==="change")return e}var ZI=!1;if(ji){var _p;if(ji){var xp="oninput"in document;if(!xp){var Ix=document.createElement("div");Ix.setAttribute("oninput","return;"),xp=typeof Ix.oninput=="function"}_p=xp}else _p=!1;ZI=_p&&(!document.documentMode||9<document.documentMode)}function Sx(){Kc&&(Kc.detachEvent("onpropertychange",eS),Tu=Kc=null)}function eS(n){if(n.propertyName==="value"&&f0(Tu)){var e=[];JI(e,Tu,n,iv(n)),FI(lN,e)}}function uN(n,e,t){n==="focusin"?(Sx(),Kc=e,Tu=t,Kc.attachEvent("onpropertychange",eS)):n==="focusout"&&Sx()}function fN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return f0(Tu)}function hN(n,e){if(n==="click")return f0(e)}function dN(n,e){if(n==="input"||n==="change")return f0(e)}function pN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var oi=typeof Object.is=="function"?Object.is:pN;function wu(n,e){if(oi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!om.call(e,i)||!oi(n[i],e[i]))return!1}return!0}function Ax(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Cx(n,e){var t=Ax(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Ax(t)}}function tS(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?tS(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function nS(){for(var n=window,e=ed();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=ed(n.document)}return e}function dv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function mN(n){var e=nS(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&tS(t.ownerDocument.documentElement,t)){if(r!==null&&dv(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Cx(t,s);var a=Cx(t,r);i&&a&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var gN=ji&&"documentMode"in document&&11>=document.documentMode,Wo=null,Am=null,jc=null,Cm=!1;function kx(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Cm||Wo==null||Wo!==ed(r)||(r=Wo,"selectionStart"in r&&dv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jc&&wu(jc,r)||(jc=r,r=od(Am,"onSelect"),0<r.length&&(e=new uv("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Wo)))}function Xf(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var qo={animationend:Xf("Animation","AnimationEnd"),animationiteration:Xf("Animation","AnimationIteration"),animationstart:Xf("Animation","AnimationStart"),transitionend:Xf("Transition","TransitionEnd")},yp={},rS={};ji&&(rS=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function h0(n){if(yp[n])return yp[n];if(!qo[n])return n;var e=qo[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in rS)return yp[n]=e[t];return n}var iS=h0("animationend"),sS=h0("animationiteration"),aS=h0("animationstart"),oS=h0("transitionend"),lS=new Map,Rx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ta(n,e){lS.set(n,e),lo(e,[n])}for(var Ep=0;Ep<Rx.length;Ep++){var Tp=Rx[Ep],vN=Tp.toLowerCase(),_N=Tp[0].toUpperCase()+Tp.slice(1);ta(vN,"on"+_N)}ta(iS,"onAnimationEnd");ta(sS,"onAnimationIteration");ta(aS,"onAnimationStart");ta("dblclick","onDoubleClick");ta("focusin","onFocus");ta("focusout","onBlur");ta(oS,"onTransitionEnd");pl("onMouseEnter",["mouseout","mouseover"]);pl("onMouseLeave",["mouseout","mouseover"]);pl("onPointerEnter",["pointerout","pointerover"]);pl("onPointerLeave",["pointerout","pointerover"]);lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fc));function Px(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,vD(r,e,void 0,n),n.currentTarget=null}function cS(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Px(i,o,c),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Px(i,o,c),s=l}}}if(nd)throw n=Tm,nd=!1,Tm=null,n}function mt(n,e){var t=e[Nm];t===void 0&&(t=e[Nm]=new Set);var r=n+"__bubble";t.has(r)||(uS(e,n,2,!1),t.add(r))}function wp(n,e,t){var r=0;e&&(r|=4),uS(t,n,r,e)}var Qf="_reactListening"+Math.random().toString(36).slice(2);function Iu(n){if(!n[Qf]){n[Qf]=!0,vI.forEach(function(t){t!=="selectionchange"&&(xN.has(t)||wp(t,!1,n),wp(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Qf]||(e[Qf]=!0,wp("selectionchange",!1,e))}}function uS(n,e,t,r){switch(KI(e)){case 1:var i=FD;break;case 4:i=MD;break;default:i=lv}t=i.bind(null,e,t,n),i=void 0,!Em||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Ip(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Na(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}FI(function(){var c=s,u=iv(t),h=[];e:{var m=lS.get(n);if(m!==void 0){var g=uv,v=n;switch(n){case"keypress":if(Rh(t)===0)break e;case"keydown":case"keyup":g=YD;break;case"focusin":v="focus",g=vp;break;case"focusout":v="blur",g=vp;break;case"beforeblur":case"afterblur":g=vp;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=_x;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=bD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=JD;break;case iS:case sS:case aS:g=BD;break;case oS:g=eN;break;case"scroll":g=OD;break;case"wheel":g=nN;break;case"copy":case"cut":case"paste":g=zD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=yx}var _=(e&4)!==0,E=!_&&n==="scroll",w=_?m!==null?m+"Capture":null:m;_=[];for(var T=c,y;T!==null;){y=T;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,w!==null&&(k=_u(T,w),k!=null&&_.push(Su(T,k,y)))),E)break;T=T.return}0<_.length&&(m=new g(m,v,null,t,u),h.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&t!==xm&&(v=t.relatedTarget||t.fromElement)&&(Na(v)||v[Yi]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=t.relatedTarget||t.toElement,g=c,v=v?Na(v):null,v!==null&&(E=co(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(_=_x,k="onMouseLeave",w="onMouseEnter",T="mouse",(n==="pointerout"||n==="pointerover")&&(_=yx,k="onPointerLeave",w="onPointerEnter",T="pointer"),E=g==null?m:Ko(g),y=v==null?m:Ko(v),m=new _(k,T+"leave",g,t,u),m.target=E,m.relatedTarget=y,k=null,Na(u)===c&&(_=new _(w,T+"enter",v,t,u),_.target=y,_.relatedTarget=E,k=_),E=k,g&&v)t:{for(_=g,w=v,T=0,y=_;y;y=Ro(y))T++;for(y=0,k=w;k;k=Ro(k))y++;for(;0<T-y;)_=Ro(_),T--;for(;0<y-T;)w=Ro(w),y--;for(;T--;){if(_===w||w!==null&&_===w.alternate)break t;_=Ro(_),w=Ro(w)}_=null}else _=null;g!==null&&Dx(h,m,g,_,!1),v!==null&&E!==null&&Dx(h,E,v,_,!0)}}e:{if(m=c?Ko(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var V=cN;else if(wx(m))if(ZI)V=dN;else{V=fN;var L=uN}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=hN);if(V&&(V=V(n,c))){JI(h,V,t,u);break e}L&&L(n,m,c),n==="focusout"&&(L=m._wrapperState)&&L.controlled&&m.type==="number"&&pm(m,"number",m.value)}switch(L=c?Ko(c):window,n){case"focusin":(wx(L)||L.contentEditable==="true")&&(Wo=L,Am=c,jc=null);break;case"focusout":jc=Am=Wo=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,kx(h,t,u);break;case"selectionchange":if(gN)break;case"keydown":case"keyup":kx(h,t,u)}var I;if(hv)e:{switch(n){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else $o?XI(n,t)&&(A="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(A="onCompositionStart");A&&(YI&&t.locale!=="ko"&&($o||A!=="onCompositionStart"?A==="onCompositionEnd"&&$o&&(I=jI()):(Ss=u,cv="value"in Ss?Ss.value:Ss.textContent,$o=!0)),L=od(c,A),0<L.length&&(A=new xx(A,n,null,t,u),h.push({event:A,listeners:L}),I?A.data=I:(I=QI(t),I!==null&&(A.data=I)))),(I=iN?sN(n,t):aN(n,t))&&(c=od(c,"onBeforeInput"),0<c.length&&(u=new xx("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=I))}cS(h,e)})}function Su(n,e,t){return{instance:n,listener:e,currentTarget:t}}function od(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_u(n,t),s!=null&&r.unshift(Su(n,s,i)),s=_u(n,e),s!=null&&r.push(Su(n,s,i))),n=n.return}return r}function Ro(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Dx(n,e,t,r,i){for(var s=e._reactName,a=[];t!==null&&t!==r;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=_u(t,s),l!=null&&a.unshift(Su(t,l,o))):i||(l=_u(t,s),l!=null&&a.push(Su(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var yN=/\r\n?/g,EN=/\u0000|\uFFFD/g;function Nx(n){return(typeof n=="string"?n:""+n).replace(yN,`
`).replace(EN,"")}function Jf(n,e,t){if(e=Nx(e),Nx(n)!==e&&t)throw Error(fe(425))}function ld(){}var km=null,Rm=null;function Pm(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dm=typeof setTimeout=="function"?setTimeout:void 0,TN=typeof clearTimeout=="function"?clearTimeout:void 0,Fx=typeof Promise=="function"?Promise:void 0,wN=typeof queueMicrotask=="function"?queueMicrotask:typeof Fx<"u"?function(n){return Fx.resolve(null).then(n).catch(IN)}:Dm;function IN(n){setTimeout(function(){throw n})}function Sp(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Eu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Eu(e)}function Ms(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Mx(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ul=Math.random().toString(36).slice(2),pi="__reactFiber$"+Ul,Au="__reactProps$"+Ul,Yi="__reactContainer$"+Ul,Nm="__reactEvents$"+Ul,SN="__reactListeners$"+Ul,AN="__reactHandles$"+Ul;function Na(n){var e=n[pi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Yi]||t[pi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Mx(n);n!==null;){if(t=n[pi])return t;n=Mx(n)}return e}n=t,t=n.parentNode}return null}function of(n){return n=n[pi]||n[Yi],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ko(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(fe(33))}function d0(n){return n[Au]||null}var Fm=[],jo=-1;function na(n){return{current:n}}function gt(n){0>jo||(n.current=Fm[jo],Fm[jo]=null,jo--)}function ct(n,e){jo++,Fm[jo]=n.current,n.current=e}var qs={},Mn=na(qs),rr=na(!1),$a=qs;function ml(n,e){var t=n.type.contextTypes;if(!t)return qs;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ir(n){return n=n.childContextTypes,n!=null}function cd(){gt(rr),gt(Mn)}function Ox(n,e,t){if(Mn.current!==qs)throw Error(fe(168));ct(Mn,e),ct(rr,t)}function fS(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(fe(108,uD(n)||"Unknown",i));return kt({},t,r)}function ud(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||qs,$a=Mn.current,ct(Mn,n),ct(rr,rr.current),!0}function Lx(n,e,t){var r=n.stateNode;if(!r)throw Error(fe(169));t?(n=fS(n,e,$a),r.__reactInternalMemoizedMergedChildContext=n,gt(rr),gt(Mn),ct(Mn,n)):gt(rr),ct(rr,t)}var Fi=null,p0=!1,Ap=!1;function hS(n){Fi===null?Fi=[n]:Fi.push(n)}function CN(n){p0=!0,hS(n)}function ra(){if(!Ap&&Fi!==null){Ap=!0;var n=0,e=st;try{var t=Fi;for(st=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Fi=null,p0=!1}catch(i){throw Fi!==null&&(Fi=Fi.slice(n+1)),bI(sv,ra),i}finally{st=e,Ap=!1}}return null}var Yo=[],Xo=0,fd=null,hd=0,Rr=[],Pr=0,Wa=null,Oi=1,Li="";function wa(n,e){Yo[Xo++]=hd,Yo[Xo++]=fd,fd=n,hd=e}function dS(n,e,t){Rr[Pr++]=Oi,Rr[Pr++]=Li,Rr[Pr++]=Wa,Wa=n;var r=Oi;n=Li;var i=32-ri(r)-1;r&=~(1<<i),t+=1;var s=32-ri(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Oi=1<<32-ri(e)+i|t<<i|r,Li=s+n}else Oi=1<<s|t<<i|r,Li=n}function pv(n){n.return!==null&&(wa(n,1),dS(n,1,0))}function mv(n){for(;n===fd;)fd=Yo[--Xo],Yo[Xo]=null,hd=Yo[--Xo],Yo[Xo]=null;for(;n===Wa;)Wa=Rr[--Pr],Rr[Pr]=null,Li=Rr[--Pr],Rr[Pr]=null,Oi=Rr[--Pr],Rr[Pr]=null}var gr=null,hr=null,yt=!1,Jr=null;function pS(n,e){var t=Dr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function bx(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,gr=n,hr=Ms(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,gr=n,hr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Wa!==null?{id:Oi,overflow:Li}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Dr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,gr=n,hr=null,!0):!1;default:return!1}}function Mm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Om(n){if(yt){var e=hr;if(e){var t=e;if(!bx(n,e)){if(Mm(n))throw Error(fe(418));e=Ms(t.nextSibling);var r=gr;e&&bx(n,e)?pS(r,t):(n.flags=n.flags&-4097|2,yt=!1,gr=n)}}else{if(Mm(n))throw Error(fe(418));n.flags=n.flags&-4097|2,yt=!1,gr=n}}}function Vx(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;gr=n}function Zf(n){if(n!==gr)return!1;if(!yt)return Vx(n),yt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Pm(n.type,n.memoizedProps)),e&&(e=hr)){if(Mm(n))throw mS(),Error(fe(418));for(;e;)pS(n,e),e=Ms(e.nextSibling)}if(Vx(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(fe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){hr=Ms(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}hr=null}}else hr=gr?Ms(n.stateNode.nextSibling):null;return!0}function mS(){for(var n=hr;n;)n=Ms(n.nextSibling)}function gl(){hr=gr=null,yt=!1}function gv(n){Jr===null?Jr=[n]:Jr.push(n)}var kN=ns.ReactCurrentBatchConfig;function yc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(fe(309));var r=t.stateNode}if(!r)throw Error(fe(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(fe(284));if(!t._owner)throw Error(fe(290,n))}return n}function eh(n,e){throw n=Object.prototype.toString.call(e),Error(fe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Ux(n){var e=n._init;return e(n._payload)}function gS(n){function e(w,T){if(n){var y=w.deletions;y===null?(w.deletions=[T],w.flags|=16):y.push(T)}}function t(w,T){if(!n)return null;for(;T!==null;)e(w,T),T=T.sibling;return null}function r(w,T){for(w=new Map;T!==null;)T.key!==null?w.set(T.key,T):w.set(T.index,T),T=T.sibling;return w}function i(w,T){return w=Vs(w,T),w.index=0,w.sibling=null,w}function s(w,T,y){return w.index=y,n?(y=w.alternate,y!==null?(y=y.index,y<T?(w.flags|=2,T):y):(w.flags|=2,T)):(w.flags|=1048576,T)}function a(w){return n&&w.alternate===null&&(w.flags|=2),w}function o(w,T,y,k){return T===null||T.tag!==6?(T=Fp(y,w.mode,k),T.return=w,T):(T=i(T,y),T.return=w,T)}function l(w,T,y,k){var V=y.type;return V===Ho?u(w,T,y.props.children,k,y.key):T!==null&&(T.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ms&&Ux(V)===T.type)?(k=i(T,y.props),k.ref=yc(w,T,y),k.return=w,k):(k=Lh(y.type,y.key,y.props,null,w.mode,k),k.ref=yc(w,T,y),k.return=w,k)}function c(w,T,y,k){return T===null||T.tag!==4||T.stateNode.containerInfo!==y.containerInfo||T.stateNode.implementation!==y.implementation?(T=Mp(y,w.mode,k),T.return=w,T):(T=i(T,y.children||[]),T.return=w,T)}function u(w,T,y,k,V){return T===null||T.tag!==7?(T=Va(y,w.mode,k,V),T.return=w,T):(T=i(T,y),T.return=w,T)}function h(w,T,y){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Fp(""+T,w.mode,y),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Hf:return y=Lh(T.type,T.key,T.props,null,w.mode,y),y.ref=yc(w,null,T),y.return=w,y;case zo:return T=Mp(T,w.mode,y),T.return=w,T;case ms:var k=T._init;return h(w,k(T._payload),y)}if(Dc(T)||mc(T))return T=Va(T,w.mode,y,null),T.return=w,T;eh(w,T)}return null}function m(w,T,y,k){var V=T!==null?T.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return V!==null?null:o(w,T,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hf:return y.key===V?l(w,T,y,k):null;case zo:return y.key===V?c(w,T,y,k):null;case ms:return V=y._init,m(w,T,V(y._payload),k)}if(Dc(y)||mc(y))return V!==null?null:u(w,T,y,k,null);eh(w,y)}return null}function g(w,T,y,k,V){if(typeof k=="string"&&k!==""||typeof k=="number")return w=w.get(y)||null,o(T,w,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Hf:return w=w.get(k.key===null?y:k.key)||null,l(T,w,k,V);case zo:return w=w.get(k.key===null?y:k.key)||null,c(T,w,k,V);case ms:var L=k._init;return g(w,T,y,L(k._payload),V)}if(Dc(k)||mc(k))return w=w.get(y)||null,u(T,w,k,V,null);eh(T,k)}return null}function v(w,T,y,k){for(var V=null,L=null,I=T,A=T=0,C=null;I!==null&&A<y.length;A++){I.index>A?(C=I,I=null):C=I.sibling;var P=m(w,I,y[A],k);if(P===null){I===null&&(I=C);break}n&&I&&P.alternate===null&&e(w,I),T=s(P,T,A),L===null?V=P:L.sibling=P,L=P,I=C}if(A===y.length)return t(w,I),yt&&wa(w,A),V;if(I===null){for(;A<y.length;A++)I=h(w,y[A],k),I!==null&&(T=s(I,T,A),L===null?V=I:L.sibling=I,L=I);return yt&&wa(w,A),V}for(I=r(w,I);A<y.length;A++)C=g(I,w,A,y[A],k),C!==null&&(n&&C.alternate!==null&&I.delete(C.key===null?A:C.key),T=s(C,T,A),L===null?V=C:L.sibling=C,L=C);return n&&I.forEach(function(D){return e(w,D)}),yt&&wa(w,A),V}function _(w,T,y,k){var V=mc(y);if(typeof V!="function")throw Error(fe(150));if(y=V.call(y),y==null)throw Error(fe(151));for(var L=V=null,I=T,A=T=0,C=null,P=y.next();I!==null&&!P.done;A++,P=y.next()){I.index>A?(C=I,I=null):C=I.sibling;var D=m(w,I,P.value,k);if(D===null){I===null&&(I=C);break}n&&I&&D.alternate===null&&e(w,I),T=s(D,T,A),L===null?V=D:L.sibling=D,L=D,I=C}if(P.done)return t(w,I),yt&&wa(w,A),V;if(I===null){for(;!P.done;A++,P=y.next())P=h(w,P.value,k),P!==null&&(T=s(P,T,A),L===null?V=P:L.sibling=P,L=P);return yt&&wa(w,A),V}for(I=r(w,I);!P.done;A++,P=y.next())P=g(I,w,A,P.value,k),P!==null&&(n&&P.alternate!==null&&I.delete(P.key===null?A:P.key),T=s(P,T,A),L===null?V=P:L.sibling=P,L=P);return n&&I.forEach(function(N){return e(w,N)}),yt&&wa(w,A),V}function E(w,T,y,k){if(typeof y=="object"&&y!==null&&y.type===Ho&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Hf:e:{for(var V=y.key,L=T;L!==null;){if(L.key===V){if(V=y.type,V===Ho){if(L.tag===7){t(w,L.sibling),T=i(L,y.props.children),T.return=w,w=T;break e}}else if(L.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ms&&Ux(V)===L.type){t(w,L.sibling),T=i(L,y.props),T.ref=yc(w,L,y),T.return=w,w=T;break e}t(w,L);break}else e(w,L);L=L.sibling}y.type===Ho?(T=Va(y.props.children,w.mode,k,y.key),T.return=w,w=T):(k=Lh(y.type,y.key,y.props,null,w.mode,k),k.ref=yc(w,T,y),k.return=w,w=k)}return a(w);case zo:e:{for(L=y.key;T!==null;){if(T.key===L)if(T.tag===4&&T.stateNode.containerInfo===y.containerInfo&&T.stateNode.implementation===y.implementation){t(w,T.sibling),T=i(T,y.children||[]),T.return=w,w=T;break e}else{t(w,T);break}else e(w,T);T=T.sibling}T=Mp(y,w.mode,k),T.return=w,w=T}return a(w);case ms:return L=y._init,E(w,T,L(y._payload),k)}if(Dc(y))return v(w,T,y,k);if(mc(y))return _(w,T,y,k);eh(w,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,T!==null&&T.tag===6?(t(w,T.sibling),T=i(T,y),T.return=w,w=T):(t(w,T),T=Fp(y,w.mode,k),T.return=w,w=T),a(w)):t(w,T)}return E}var vl=gS(!0),vS=gS(!1),dd=na(null),pd=null,Qo=null,vv=null;function _v(){vv=Qo=pd=null}function xv(n){var e=dd.current;gt(dd),n._currentValue=e}function Lm(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function sl(n,e){pd=n,vv=Qo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(er=!0),n.firstContext=null)}function Lr(n){var e=n._currentValue;if(vv!==n)if(n={context:n,memoizedValue:e,next:null},Qo===null){if(pd===null)throw Error(fe(308));Qo=n,pd.dependencies={lanes:0,firstContext:n}}else Qo=Qo.next=n;return e}var Fa=null;function yv(n){Fa===null?Fa=[n]:Fa.push(n)}function _S(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,yv(e)):(t.next=i.next,i.next=t),e.interleaved=t,Xi(n,r)}function Xi(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var gs=!1;function Ev(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xS(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function zi(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Os(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Xi(n,t)}return i=r.interleaved,i===null?(e.next=e,yv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Xi(n,t)}function Ph(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,av(n,t)}}function Bx(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function md(n,e,t,r){var i=n.updateQueue;gs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=n.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;a=0,u=c=l=null,o=s;do{var m=o.lane,g=o.eventTime;if((r&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=n,_=o;switch(m=e,g=t,_.tag){case 1:if(v=_.payload,typeof v=="function"){h=v.call(g,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,m=typeof v=="function"?v.call(g,h,m):v,m==null)break e;h=kt({},h,m);break e;case 2:gs=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=g,l=h):u=u.next=g,a|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ka|=a,n.lanes=a,n.memoizedState=h}}function Gx(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(fe(191,i));i.call(r)}}}var lf={},xi=na(lf),Cu=na(lf),ku=na(lf);function Ma(n){if(n===lf)throw Error(fe(174));return n}function Tv(n,e){switch(ct(ku,e),ct(Cu,n),ct(xi,lf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gm(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=gm(e,n)}gt(xi),ct(xi,e)}function _l(){gt(xi),gt(Cu),gt(ku)}function yS(n){Ma(ku.current);var e=Ma(xi.current),t=gm(e,n.type);e!==t&&(ct(Cu,n),ct(xi,t))}function wv(n){Cu.current===n&&(gt(xi),gt(Cu))}var wt=na(0);function gd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cp=[];function Iv(){for(var n=0;n<Cp.length;n++)Cp[n]._workInProgressVersionPrimary=null;Cp.length=0}var Dh=ns.ReactCurrentDispatcher,kp=ns.ReactCurrentBatchConfig,qa=0,St=null,Qt=null,on=null,vd=!1,Yc=!1,Ru=0,RN=0;function wn(){throw Error(fe(321))}function Sv(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!oi(n[t],e[t]))return!1;return!0}function Av(n,e,t,r,i,s){if(qa=s,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dh.current=n===null||n.memoizedState===null?FN:MN,n=t(r,i),Yc){s=0;do{if(Yc=!1,Ru=0,25<=s)throw Error(fe(301));s+=1,on=Qt=null,e.updateQueue=null,Dh.current=ON,n=t(r,i)}while(Yc)}if(Dh.current=_d,e=Qt!==null&&Qt.next!==null,qa=0,on=Qt=St=null,vd=!1,e)throw Error(fe(300));return n}function Cv(){var n=Ru!==0;return Ru=0,n}function di(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?St.memoizedState=on=n:on=on.next=n,on}function br(){if(Qt===null){var n=St.alternate;n=n!==null?n.memoizedState:null}else n=Qt.next;var e=on===null?St.memoizedState:on.next;if(e!==null)on=e,Qt=n;else{if(n===null)throw Error(fe(310));Qt=n,n={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},on===null?St.memoizedState=on=n:on=on.next=n}return on}function Pu(n,e){return typeof e=="function"?e(n):e}function Rp(n){var e=br(),t=e.queue;if(t===null)throw Error(fe(311));t.lastRenderedReducer=n;var r=Qt,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((qa&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,St.lanes|=u,Ka|=u}c=c.next}while(c!==null&&c!==s);l===null?a=r:l.next=o,oi(r,e.memoizedState)||(er=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,St.lanes|=s,Ka|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Pp(n){var e=br(),t=e.queue;if(t===null)throw Error(fe(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do s=n(s,a.action),a=a.next;while(a!==i);oi(s,e.memoizedState)||(er=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function ES(){}function TS(n,e){var t=St,r=br(),i=e(),s=!oi(r.memoizedState,i);if(s&&(r.memoizedState=i,er=!0),r=r.queue,kv(SS.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||on!==null&&on.memoizedState.tag&1){if(t.flags|=2048,Du(9,IS.bind(null,t,r,i,e),void 0,null),ln===null)throw Error(fe(349));qa&30||wS(t,e,i)}return i}function wS(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function IS(n,e,t,r){e.value=t,e.getSnapshot=r,AS(e)&&CS(n)}function SS(n,e,t){return t(function(){AS(e)&&CS(n)})}function AS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!oi(n,t)}catch{return!0}}function CS(n){var e=Xi(n,1);e!==null&&ii(e,n,1,-1)}function zx(n){var e=di();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pu,lastRenderedState:n},e.queue=n,n=n.dispatch=NN.bind(null,St,n),[e.memoizedState,n]}function Du(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function kS(){return br().memoizedState}function Nh(n,e,t,r){var i=di();St.flags|=n,i.memoizedState=Du(1|e,t,void 0,r===void 0?null:r)}function m0(n,e,t,r){var i=br();r=r===void 0?null:r;var s=void 0;if(Qt!==null){var a=Qt.memoizedState;if(s=a.destroy,r!==null&&Sv(r,a.deps)){i.memoizedState=Du(e,t,s,r);return}}St.flags|=n,i.memoizedState=Du(1|e,t,s,r)}function Hx(n,e){return Nh(8390656,8,n,e)}function kv(n,e){return m0(2048,8,n,e)}function RS(n,e){return m0(4,2,n,e)}function PS(n,e){return m0(4,4,n,e)}function DS(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function NS(n,e,t){return t=t!=null?t.concat([n]):null,m0(4,4,DS.bind(null,e,n),t)}function Rv(){}function FS(n,e){var t=br();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Sv(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function MS(n,e){var t=br();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Sv(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function OS(n,e,t){return qa&21?(oi(t,e)||(t=BI(),St.lanes|=t,Ka|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,er=!0),n.memoizedState=t)}function PN(n,e){var t=st;st=t!==0&&4>t?t:4,n(!0);var r=kp.transition;kp.transition={};try{n(!1),e()}finally{st=t,kp.transition=r}}function LS(){return br().memoizedState}function DN(n,e,t){var r=bs(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},bS(n))VS(e,t);else if(t=_S(n,e,t,r),t!==null){var i=Hn();ii(t,n,r,i),US(t,e,r)}}function NN(n,e,t){var r=bs(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(bS(n))VS(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(i.hasEagerState=!0,i.eagerState=o,oi(o,a)){var l=e.interleaved;l===null?(i.next=i,yv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=_S(n,e,i,r),t!==null&&(i=Hn(),ii(t,n,r,i),US(t,e,r))}}function bS(n){var e=n.alternate;return n===St||e!==null&&e===St}function VS(n,e){Yc=vd=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function US(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,av(n,t)}}var _d={readContext:Lr,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},FN={readContext:Lr,useCallback:function(n,e){return di().memoizedState=[n,e===void 0?null:e],n},useContext:Lr,useEffect:Hx,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Nh(4194308,4,DS.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Nh(4194308,4,n,e)},useInsertionEffect:function(n,e){return Nh(4,2,n,e)},useMemo:function(n,e){var t=di();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=di();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=DN.bind(null,St,n),[r.memoizedState,n]},useRef:function(n){var e=di();return n={current:n},e.memoizedState=n},useState:zx,useDebugValue:Rv,useDeferredValue:function(n){return di().memoizedState=n},useTransition:function(){var n=zx(!1),e=n[0];return n=PN.bind(null,n[1]),di().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=St,i=di();if(yt){if(t===void 0)throw Error(fe(407));t=t()}else{if(t=e(),ln===null)throw Error(fe(349));qa&30||wS(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,Hx(SS.bind(null,r,s,n),[n]),r.flags|=2048,Du(9,IS.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=di(),e=ln.identifierPrefix;if(yt){var t=Li,r=Oi;t=(r&~(1<<32-ri(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ru++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=RN++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},MN={readContext:Lr,useCallback:FS,useContext:Lr,useEffect:kv,useImperativeHandle:NS,useInsertionEffect:RS,useLayoutEffect:PS,useMemo:MS,useReducer:Rp,useRef:kS,useState:function(){return Rp(Pu)},useDebugValue:Rv,useDeferredValue:function(n){var e=br();return OS(e,Qt.memoizedState,n)},useTransition:function(){var n=Rp(Pu)[0],e=br().memoizedState;return[n,e]},useMutableSource:ES,useSyncExternalStore:TS,useId:LS,unstable_isNewReconciler:!1},ON={readContext:Lr,useCallback:FS,useContext:Lr,useEffect:kv,useImperativeHandle:NS,useInsertionEffect:RS,useLayoutEffect:PS,useMemo:MS,useReducer:Pp,useRef:kS,useState:function(){return Pp(Pu)},useDebugValue:Rv,useDeferredValue:function(n){var e=br();return Qt===null?e.memoizedState=n:OS(e,Qt.memoizedState,n)},useTransition:function(){var n=Pp(Pu)[0],e=br().memoizedState;return[n,e]},useMutableSource:ES,useSyncExternalStore:TS,useId:LS,unstable_isNewReconciler:!1};function Xr(n,e){if(n&&n.defaultProps){e=kt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function bm(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:kt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var g0={isMounted:function(n){return(n=n._reactInternals)?co(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Hn(),i=bs(n),s=zi(r,i);s.payload=e,t!=null&&(s.callback=t),e=Os(n,s,i),e!==null&&(ii(e,n,i,r),Ph(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Hn(),i=bs(n),s=zi(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Os(n,s,i),e!==null&&(ii(e,n,i,r),Ph(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Hn(),r=bs(n),i=zi(t,r);i.tag=2,e!=null&&(i.callback=e),e=Os(n,i,r),e!==null&&(ii(e,n,r,t),Ph(e,n,r))}};function $x(n,e,t,r,i,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!wu(t,r)||!wu(i,s):!0}function BS(n,e,t){var r=!1,i=qs,s=e.contextType;return typeof s=="object"&&s!==null?s=Lr(s):(i=ir(e)?$a:Mn.current,r=e.contextTypes,s=(r=r!=null)?ml(n,i):qs),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=g0,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function Wx(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&g0.enqueueReplaceState(e,e.state,null)}function Vm(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},Ev(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Lr(s):(s=ir(e)?$a:Mn.current,i.context=ml(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(bm(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&g0.enqueueReplaceState(i,i.state,null),md(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function xl(n,e){try{var t="",r=e;do t+=cD(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Dp(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Um(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var LN=typeof WeakMap=="function"?WeakMap:Map;function GS(n,e,t){t=zi(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){yd||(yd=!0,Ym=r),Um(n,e)},t}function zS(n,e,t){t=zi(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Um(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Um(n,e),typeof r!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function qx(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new LN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=XN.bind(null,n,e,t),e.then(n,n))}function Kx(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function jx(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=zi(-1,1),e.tag=2,Os(t,e,1))),t.lanes|=1),n)}var bN=ns.ReactCurrentOwner,er=!1;function Un(n,e,t,r){e.child=n===null?vS(e,null,t,r):vl(e,n.child,t,r)}function Yx(n,e,t,r,i){t=t.render;var s=e.ref;return sl(e,i),r=Av(n,e,t,r,s,i),t=Cv(),n!==null&&!er?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Qi(n,e,i)):(yt&&t&&pv(e),e.flags|=1,Un(n,e,r,i),e.child)}function Xx(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!bv(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,HS(n,e,s,r,i)):(n=Lh(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:wu,t(a,r)&&n.ref===e.ref)return Qi(n,e,i)}return e.flags|=1,n=Vs(s,r),n.ref=e.ref,n.return=e,e.child=n}function HS(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(wu(s,r)&&n.ref===e.ref)if(er=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(er=!0);else return e.lanes=n.lanes,Qi(n,e,i)}return Bm(n,e,t,r,i)}function $S(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Zo,cr),cr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ct(Zo,cr),cr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,ct(Zo,cr),cr|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,ct(Zo,cr),cr|=r;return Un(n,e,i,t),e.child}function WS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Bm(n,e,t,r,i){var s=ir(t)?$a:Mn.current;return s=ml(e,s),sl(e,i),t=Av(n,e,t,r,s,i),r=Cv(),n!==null&&!er?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Qi(n,e,i)):(yt&&r&&pv(e),e.flags|=1,Un(n,e,t,i),e.child)}function Qx(n,e,t,r,i){if(ir(t)){var s=!0;ud(e)}else s=!1;if(sl(e,i),e.stateNode===null)Fh(n,e),BS(e,t,r),Vm(e,t,r,i),r=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=Lr(c):(c=ir(t)?$a:Mn.current,c=ml(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&Wx(e,a,r,c),gs=!1;var m=e.memoizedState;a.state=m,md(e,r,a,i),l=e.memoizedState,o!==r||m!==l||rr.current||gs?(typeof u=="function"&&(bm(e,t,u,r),l=e.memoizedState),(o=gs||$x(e,t,o,r,m,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,xS(n,e),o=e.memoizedProps,c=e.type===e.elementType?o:Xr(e.type,o),a.props=c,h=e.pendingProps,m=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Lr(l):(l=ir(t)?$a:Mn.current,l=ml(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||m!==l)&&Wx(e,a,r,l),gs=!1,m=e.memoizedState,a.state=m,md(e,r,a,i);var v=e.memoizedState;o!==h||m!==v||rr.current||gs?(typeof g=="function"&&(bm(e,t,g,r),v=e.memoizedState),(c=gs||$x(e,t,c,r,m,v,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),a.props=r,a.state=v,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return Gm(n,e,t,r,s,i)}function Gm(n,e,t,r,i,s){WS(n,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Lx(e,t,!1),Qi(n,e,s);r=e.stateNode,bN.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&a?(e.child=vl(e,n.child,null,s),e.child=vl(e,null,o,s)):Un(n,e,o,s),e.memoizedState=r.state,i&&Lx(e,t,!0),e.child}function qS(n){var e=n.stateNode;e.pendingContext?Ox(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Ox(n,e.context,!1),Tv(n,e.containerInfo)}function Jx(n,e,t,r,i){return gl(),gv(i),e.flags|=256,Un(n,e,t,r),e.child}var zm={dehydrated:null,treeContext:null,retryLane:0};function Hm(n){return{baseLanes:n,cachePool:null,transitions:null}}function KS(n,e,t){var r=e.pendingProps,i=wt.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ct(wt,i&1),n===null)return Om(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,n=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=x0(a,r,0,null),n=Va(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Hm(t),e.memoizedState=zm,n):Pv(e,a));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return VN(n,e,a,r,o,i,t);if(s){s=r.fallback,a=e.mode,i=n.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Vs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Vs(o,s):(s=Va(s,a,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=n.child.memoizedState,a=a===null?Hm(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=zm,r}return s=n.child,n=s.sibling,r=Vs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Pv(n,e){return e=x0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function th(n,e,t,r){return r!==null&&gv(r),vl(e,n.child,null,t),n=Pv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function VN(n,e,t,r,i,s,a){if(t)return e.flags&256?(e.flags&=-257,r=Dp(Error(fe(422))),th(n,e,a,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=x0({mode:"visible",children:r.children},i,0,null),s=Va(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&vl(e,n.child,null,a),e.child.memoizedState=Hm(a),e.memoizedState=zm,s);if(!(e.mode&1))return th(n,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(fe(419)),r=Dp(s,r,void 0),th(n,e,a,r)}if(o=(a&n.childLanes)!==0,er||o){if(r=ln,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xi(n,i),ii(r,n,i,-1))}return Lv(),r=Dp(Error(fe(421))),th(n,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=QN.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,hr=Ms(i.nextSibling),gr=e,yt=!0,Jr=null,n!==null&&(Rr[Pr++]=Oi,Rr[Pr++]=Li,Rr[Pr++]=Wa,Oi=n.id,Li=n.overflow,Wa=e),e=Pv(e,r.children),e.flags|=4096,e)}function Zx(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Lm(n.return,e,t)}function Np(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function jS(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Un(n,e,r.children,t),r=wt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Zx(n,t,e);else if(n.tag===19)Zx(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ct(wt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&gd(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Np(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&gd(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Np(e,!0,t,null,s);break;case"together":Np(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fh(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Qi(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ka|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(fe(153));if(e.child!==null){for(n=e.child,t=Vs(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Vs(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function UN(n,e,t){switch(e.tag){case 3:qS(e),gl();break;case 5:yS(e);break;case 1:ir(e.type)&&ud(e);break;case 4:Tv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ct(dd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ct(wt,wt.current&1),e.flags|=128,null):t&e.child.childLanes?KS(n,e,t):(ct(wt,wt.current&1),n=Qi(n,e,t),n!==null?n.sibling:null);ct(wt,wt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return jS(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ct(wt,wt.current),r)break;return null;case 22:case 23:return e.lanes=0,$S(n,e,t)}return Qi(n,e,t)}var YS,$m,XS,QS;YS=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};$m=function(){};XS=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Ma(xi.current);var s=null;switch(t){case"input":i=hm(n,i),r=hm(n,r),s=[];break;case"select":i=kt({},i,{value:void 0}),r=kt({},r,{value:void 0}),s=[];break;case"textarea":i=mm(n,i),r=mm(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=ld)}vm(t,r);var a;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(gu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(gu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&mt("scroll",n),s||o===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};QS=function(n,e,t,r){t!==r&&(e.flags|=4)};function Ec(n,e){if(!yt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function In(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function BN(n,e,t){var r=e.pendingProps;switch(mv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(e),null;case 1:return ir(e.type)&&cd(),In(e),null;case 3:return r=e.stateNode,_l(),gt(rr),gt(Mn),Iv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Zf(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jr!==null&&(Jm(Jr),Jr=null))),$m(n,e),In(e),null;case 5:wv(e);var i=Ma(ku.current);if(t=e.type,n!==null&&e.stateNode!=null)XS(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return In(e),null}if(n=Ma(xi.current),Zf(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[pi]=e,r[Au]=s,n=(e.mode&1)!==0,t){case"dialog":mt("cancel",r),mt("close",r);break;case"iframe":case"object":case"embed":mt("load",r);break;case"video":case"audio":for(i=0;i<Fc.length;i++)mt(Fc[i],r);break;case"source":mt("error",r);break;case"img":case"image":case"link":mt("error",r),mt("load",r);break;case"details":mt("toggle",r);break;case"input":lx(r,s),mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},mt("invalid",r);break;case"textarea":ux(r,s),mt("invalid",r)}vm(t,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Jf(r.textContent,o,n),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Jf(r.textContent,o,n),i=["children",""+o]):gu.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&mt("scroll",r)}switch(t){case"input":$f(r),cx(r,s,!0);break;case"textarea":$f(r),fx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ld)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=SI(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=a.createElement(t,{is:r.is}):(n=a.createElement(t),t==="select"&&(a=n,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):n=a.createElementNS(n,t),n[pi]=e,n[Au]=r,YS(n,e,!1,!1),e.stateNode=n;e:{switch(a=_m(t,r),t){case"dialog":mt("cancel",n),mt("close",n),i=r;break;case"iframe":case"object":case"embed":mt("load",n),i=r;break;case"video":case"audio":for(i=0;i<Fc.length;i++)mt(Fc[i],n);i=r;break;case"source":mt("error",n),i=r;break;case"img":case"image":case"link":mt("error",n),mt("load",n),i=r;break;case"details":mt("toggle",n),i=r;break;case"input":lx(n,r),i=hm(n,r),mt("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=kt({},r,{value:void 0}),mt("invalid",n);break;case"textarea":ux(n,r),i=mm(n,r),mt("invalid",n);break;default:i=r}vm(t,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?kI(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&AI(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&vu(n,l):typeof l=="number"&&vu(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&mt("scroll",n):l!=null&&ev(n,s,l,a))}switch(t){case"input":$f(n),cx(n,r,!1);break;case"textarea":$f(n),fx(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ws(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?tl(n,!!r.multiple,s,!1):r.defaultValue!=null&&tl(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=ld)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return In(e),null;case 6:if(n&&e.stateNode!=null)QS(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(t=Ma(ku.current),Ma(xi.current),Zf(e)){if(r=e.stateNode,t=e.memoizedProps,r[pi]=e,(s=r.nodeValue!==t)&&(n=gr,n!==null))switch(n.tag){case 3:Jf(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Jf(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[pi]=e,e.stateNode=r}return In(e),null;case 13:if(gt(wt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(yt&&hr!==null&&e.mode&1&&!(e.flags&128))mS(),gl(),e.flags|=98560,s=!1;else if(s=Zf(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(fe(317));s[pi]=e}else gl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;In(e),s=!1}else Jr!==null&&(Jm(Jr),Jr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||wt.current&1?Jt===0&&(Jt=3):Lv())),e.updateQueue!==null&&(e.flags|=4),In(e),null);case 4:return _l(),$m(n,e),n===null&&Iu(e.stateNode.containerInfo),In(e),null;case 10:return xv(e.type._context),In(e),null;case 17:return ir(e.type)&&cd(),In(e),null;case 19:if(gt(wt),s=e.memoizedState,s===null)return In(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Ec(s,!1);else{if(Jt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=gd(n),a!==null){for(e.flags|=128,Ec(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ct(wt,wt.current&1|2),e.child}n=n.sibling}s.tail!==null&&Bt()>yl&&(e.flags|=128,r=!0,Ec(s,!1),e.lanes=4194304)}else{if(!r)if(n=gd(a),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ec(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!yt)return In(e),null}else 2*Bt()-s.renderingStartTime>yl&&t!==1073741824&&(e.flags|=128,r=!0,Ec(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Bt(),e.sibling=null,t=wt.current,ct(wt,r?t&1|2:t&1),e):(In(e),null);case 22:case 23:return Ov(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?cr&1073741824&&(In(e),e.subtreeFlags&6&&(e.flags|=8192)):In(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function GN(n,e){switch(mv(e),e.tag){case 1:return ir(e.type)&&cd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return _l(),gt(rr),gt(Mn),Iv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return wv(e),null;case 13:if(gt(wt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));gl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return gt(wt),null;case 4:return _l(),null;case 10:return xv(e.type._context),null;case 22:case 23:return Ov(),null;case 24:return null;default:return null}}var nh=!1,Pn=!1,zN=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Jo(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Dt(n,e,r)}else t.current=null}function Wm(n,e,t){try{t()}catch(r){Dt(n,e,r)}}var ey=!1;function HN(n,e){if(km=sd,n=nS(),dv(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,c=0,u=0,h=n,m=null;t:for(;;){for(var g;h!==t||i!==0&&h.nodeType!==3||(o=a+i),h!==s||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===n)break t;if(m===t&&++c===i&&(o=a),m===s&&++u===r&&(l=a),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Rm={focusedElem:n,selectionRange:t},sd=!1,Re=e;Re!==null;)if(e=Re,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Re=n;else for(;Re!==null;){e=Re;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,E=v.memoizedState,w=e.stateNode,T=w.getSnapshotBeforeUpdate(e.elementType===e.type?_:Xr(e.type,_),E);w.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(k){Dt(e,e.return,k)}if(n=e.sibling,n!==null){n.return=e.return,Re=n;break}Re=e.return}return v=ey,ey=!1,v}function Xc(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Wm(e,t,s)}i=i.next}while(i!==r)}}function v0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function qm(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function JS(n){var e=n.alternate;e!==null&&(n.alternate=null,JS(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[pi],delete e[Au],delete e[Nm],delete e[SN],delete e[AN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ZS(n){return n.tag===5||n.tag===3||n.tag===4}function ty(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ZS(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Km(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ld));else if(r!==4&&(n=n.child,n!==null))for(Km(n,e,t),n=n.sibling;n!==null;)Km(n,e,t),n=n.sibling}function jm(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(jm(n,e,t),n=n.sibling;n!==null;)jm(n,e,t),n=n.sibling}var pn=null,Qr=!1;function us(n,e,t){for(t=t.child;t!==null;)eA(n,e,t),t=t.sibling}function eA(n,e,t){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(c0,t)}catch{}switch(t.tag){case 5:Pn||Jo(t,e);case 6:var r=pn,i=Qr;pn=null,us(n,e,t),pn=r,Qr=i,pn!==null&&(Qr?(n=pn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):pn.removeChild(t.stateNode));break;case 18:pn!==null&&(Qr?(n=pn,t=t.stateNode,n.nodeType===8?Sp(n.parentNode,t):n.nodeType===1&&Sp(n,t),Eu(n)):Sp(pn,t.stateNode));break;case 4:r=pn,i=Qr,pn=t.stateNode.containerInfo,Qr=!0,us(n,e,t),pn=r,Qr=i;break;case 0:case 11:case 14:case 15:if(!Pn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Wm(t,e,a),i=i.next}while(i!==r)}us(n,e,t);break;case 1:if(!Pn&&(Jo(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){Dt(t,e,o)}us(n,e,t);break;case 21:us(n,e,t);break;case 22:t.mode&1?(Pn=(r=Pn)||t.memoizedState!==null,us(n,e,t),Pn=r):us(n,e,t);break;default:us(n,e,t)}}function ny(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new zN),e.forEach(function(r){var i=JN.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function qr(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:pn=o.stateNode,Qr=!1;break e;case 3:pn=o.stateNode.containerInfo,Qr=!0;break e;case 4:pn=o.stateNode.containerInfo,Qr=!0;break e}o=o.return}if(pn===null)throw Error(fe(160));eA(s,a,i),pn=null,Qr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Dt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tA(e,n),e=e.sibling}function tA(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(qr(e,n),ui(n),r&4){try{Xc(3,n,n.return),v0(3,n)}catch(_){Dt(n,n.return,_)}try{Xc(5,n,n.return)}catch(_){Dt(n,n.return,_)}}break;case 1:qr(e,n),ui(n),r&512&&t!==null&&Jo(t,t.return);break;case 5:if(qr(e,n),ui(n),r&512&&t!==null&&Jo(t,t.return),n.flags&32){var i=n.stateNode;try{vu(i,"")}catch(_){Dt(n,n.return,_)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&wI(i,s),_m(o,a);var c=_m(o,s);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];u==="style"?kI(i,h):u==="dangerouslySetInnerHTML"?AI(i,h):u==="children"?vu(i,h):ev(i,u,h,c)}switch(o){case"input":dm(i,s);break;case"textarea":II(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?tl(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?tl(i,!!s.multiple,s.defaultValue,!0):tl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Au]=s}catch(_){Dt(n,n.return,_)}}break;case 6:if(qr(e,n),ui(n),r&4){if(n.stateNode===null)throw Error(fe(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(_){Dt(n,n.return,_)}}break;case 3:if(qr(e,n),ui(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Eu(e.containerInfo)}catch(_){Dt(n,n.return,_)}break;case 4:qr(e,n),ui(n);break;case 13:qr(e,n),ui(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Fv=Bt())),r&4&&ny(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Pn=(c=Pn)||u,qr(e,n),Pn=c):qr(e,n),ui(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Re=n,u=n.child;u!==null;){for(h=Re=u;Re!==null;){switch(m=Re,g=m.child,m.tag){case 0:case 11:case 14:case 15:Xc(4,m,m.return);break;case 1:Jo(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){Dt(r,t,_)}}break;case 5:Jo(m,m.return);break;case 22:if(m.memoizedState!==null){iy(h);continue}}g!==null?(g.return=m,Re=g):iy(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=CI("display",a))}catch(_){Dt(n,n.return,_)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){Dt(n,n.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qr(e,n),ui(n),r&4&&ny(n);break;case 21:break;default:qr(e,n),ui(n)}}function ui(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(ZS(t)){var r=t;break e}t=t.return}throw Error(fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vu(i,""),r.flags&=-33);var s=ty(n);jm(n,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=ty(n);Km(n,o,a);break;default:throw Error(fe(161))}}catch(l){Dt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function $N(n,e,t){Re=n,nA(n)}function nA(n,e,t){for(var r=(n.mode&1)!==0;Re!==null;){var i=Re,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||nh;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Pn;o=nh;var c=Pn;if(nh=a,(Pn=l)&&!c)for(Re=i;Re!==null;)a=Re,l=a.child,a.tag===22&&a.memoizedState!==null?sy(i):l!==null?(l.return=a,Re=l):sy(i);for(;s!==null;)Re=s,nA(s),s=s.sibling;Re=i,nh=o,Pn=c}ry(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Re=s):ry(n)}}function ry(n){for(;Re!==null;){var e=Re;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pn||v0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pn)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Xr(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Gx(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Gx(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Eu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Pn||e.flags&512&&qm(e)}catch(m){Dt(e,e.return,m)}}if(e===n){Re=null;break}if(t=e.sibling,t!==null){t.return=e.return,Re=t;break}Re=e.return}}function iy(n){for(;Re!==null;){var e=Re;if(e===n){Re=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Re=t;break}Re=e.return}}function sy(n){for(;Re!==null;){var e=Re;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{v0(4,e)}catch(l){Dt(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dt(e,i,l)}}var s=e.return;try{qm(e)}catch(l){Dt(e,s,l)}break;case 5:var a=e.return;try{qm(e)}catch(l){Dt(e,a,l)}}}catch(l){Dt(e,e.return,l)}if(e===n){Re=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Re=o;break}Re=e.return}}var WN=Math.ceil,xd=ns.ReactCurrentDispatcher,Dv=ns.ReactCurrentOwner,Fr=ns.ReactCurrentBatchConfig,Je=0,ln=null,jt=null,vn=0,cr=0,Zo=na(0),Jt=0,Nu=null,Ka=0,_0=0,Nv=0,Qc=null,Jn=null,Fv=0,yl=1/0,Ni=null,yd=!1,Ym=null,Ls=null,rh=!1,As=null,Ed=0,Jc=0,Xm=null,Mh=-1,Oh=0;function Hn(){return Je&6?Bt():Mh!==-1?Mh:Mh=Bt()}function bs(n){return n.mode&1?Je&2&&vn!==0?vn&-vn:kN.transition!==null?(Oh===0&&(Oh=BI()),Oh):(n=st,n!==0||(n=window.event,n=n===void 0?16:KI(n.type)),n):1}function ii(n,e,t,r){if(50<Jc)throw Jc=0,Xm=null,Error(fe(185));sf(n,t,r),(!(Je&2)||n!==ln)&&(n===ln&&(!(Je&2)&&(_0|=t),Jt===4&&_s(n,vn)),sr(n,r),t===1&&Je===0&&!(e.mode&1)&&(yl=Bt()+500,p0&&ra()))}function sr(n,e){var t=n.callbackNode;kD(n,e);var r=id(n,n===ln?vn:0);if(r===0)t!==null&&px(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&px(t),e===1)n.tag===0?CN(ay.bind(null,n)):hS(ay.bind(null,n)),wN(function(){!(Je&6)&&ra()}),t=null;else{switch(GI(r)){case 1:t=sv;break;case 4:t=VI;break;case 16:t=rd;break;case 536870912:t=UI;break;default:t=rd}t=uA(t,rA.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function rA(n,e){if(Mh=-1,Oh=0,Je&6)throw Error(fe(327));var t=n.callbackNode;if(al()&&n.callbackNode!==t)return null;var r=id(n,n===ln?vn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Td(n,r);else{e=r;var i=Je;Je|=2;var s=sA();(ln!==n||vn!==e)&&(Ni=null,yl=Bt()+500,ba(n,e));do try{jN();break}catch(o){iA(n,o)}while(!0);_v(),xd.current=s,Je=i,jt!==null?e=0:(ln=null,vn=0,e=Jt)}if(e!==0){if(e===2&&(i=wm(n),i!==0&&(r=i,e=Qm(n,i))),e===1)throw t=Nu,ba(n,0),_s(n,r),sr(n,Bt()),t;if(e===6)_s(n,r);else{if(i=n.current.alternate,!(r&30)&&!qN(i)&&(e=Td(n,r),e===2&&(s=wm(n),s!==0&&(r=s,e=Qm(n,s))),e===1))throw t=Nu,ba(n,0),_s(n,r),sr(n,Bt()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:Ia(n,Jn,Ni);break;case 3:if(_s(n,r),(r&130023424)===r&&(e=Fv+500-Bt(),10<e)){if(id(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Hn(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Dm(Ia.bind(null,n,Jn,Ni),e);break}Ia(n,Jn,Ni);break;case 4:if(_s(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var a=31-ri(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WN(r/1960))-r,10<r){n.timeoutHandle=Dm(Ia.bind(null,n,Jn,Ni),r);break}Ia(n,Jn,Ni);break;case 5:Ia(n,Jn,Ni);break;default:throw Error(fe(329))}}}return sr(n,Bt()),n.callbackNode===t?rA.bind(null,n):null}function Qm(n,e){var t=Qc;return n.current.memoizedState.isDehydrated&&(ba(n,e).flags|=256),n=Td(n,e),n!==2&&(e=Jn,Jn=t,e!==null&&Jm(e)),n}function Jm(n){Jn===null?Jn=n:Jn.push.apply(Jn,n)}function qN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!oi(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _s(n,e){for(e&=~Nv,e&=~_0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ri(e),r=1<<t;n[t]=-1,e&=~r}}function ay(n){if(Je&6)throw Error(fe(327));al();var e=id(n,0);if(!(e&1))return sr(n,Bt()),null;var t=Td(n,e);if(n.tag!==0&&t===2){var r=wm(n);r!==0&&(e=r,t=Qm(n,r))}if(t===1)throw t=Nu,ba(n,0),_s(n,e),sr(n,Bt()),t;if(t===6)throw Error(fe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ia(n,Jn,Ni),sr(n,Bt()),null}function Mv(n,e){var t=Je;Je|=1;try{return n(e)}finally{Je=t,Je===0&&(yl=Bt()+500,p0&&ra())}}function ja(n){As!==null&&As.tag===0&&!(Je&6)&&al();var e=Je;Je|=1;var t=Fr.transition,r=st;try{if(Fr.transition=null,st=1,n)return n()}finally{st=r,Fr.transition=t,Je=e,!(Je&6)&&ra()}}function Ov(){cr=Zo.current,gt(Zo)}function ba(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,TN(t)),jt!==null)for(t=jt.return;t!==null;){var r=t;switch(mv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cd();break;case 3:_l(),gt(rr),gt(Mn),Iv();break;case 5:wv(r);break;case 4:_l();break;case 13:gt(wt);break;case 19:gt(wt);break;case 10:xv(r.type._context);break;case 22:case 23:Ov()}t=t.return}if(ln=n,jt=n=Vs(n.current,null),vn=cr=e,Jt=0,Nu=null,Nv=_0=Ka=0,Jn=Qc=null,Fa!==null){for(e=0;e<Fa.length;e++)if(t=Fa[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}t.pending=r}Fa=null}return n}function iA(n,e){do{var t=jt;try{if(_v(),Dh.current=_d,vd){for(var r=St.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vd=!1}if(qa=0,on=Qt=St=null,Yc=!1,Ru=0,Dv.current=null,t===null||t.return===null){Jt=1,Nu=e,jt=null;break}e:{var s=n,a=t.return,o=t,l=e;if(e=vn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Kx(a);if(g!==null){g.flags&=-257,jx(g,a,o,s,e),g.mode&1&&qx(s,c,e),e=g,l=c;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){qx(s,c,e),Lv();break e}l=Error(fe(426))}}else if(yt&&o.mode&1){var E=Kx(a);if(E!==null){!(E.flags&65536)&&(E.flags|=256),jx(E,a,o,s,e),gv(xl(l,o));break e}}s=l=xl(l,o),Jt!==4&&(Jt=2),Qc===null?Qc=[s]:Qc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=GS(s,l,e);Bx(s,w);break e;case 1:o=l;var T=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ls===null||!Ls.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=zS(s,o,e);Bx(s,k);break e}}s=s.return}while(s!==null)}oA(t)}catch(V){e=V,jt===t&&t!==null&&(jt=t=t.return);continue}break}while(!0)}function sA(){var n=xd.current;return xd.current=_d,n===null?_d:n}function Lv(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),ln===null||!(Ka&268435455)&&!(_0&268435455)||_s(ln,vn)}function Td(n,e){var t=Je;Je|=2;var r=sA();(ln!==n||vn!==e)&&(Ni=null,ba(n,e));do try{KN();break}catch(i){iA(n,i)}while(!0);if(_v(),Je=t,xd.current=r,jt!==null)throw Error(fe(261));return ln=null,vn=0,Jt}function KN(){for(;jt!==null;)aA(jt)}function jN(){for(;jt!==null&&!xD();)aA(jt)}function aA(n){var e=cA(n.alternate,n,cr);n.memoizedProps=n.pendingProps,e===null?oA(n):jt=e,Dv.current=null}function oA(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=GN(t,e),t!==null){t.flags&=32767,jt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Jt=6,jt=null;return}}else if(t=BN(t,e,cr),t!==null){jt=t;return}if(e=e.sibling,e!==null){jt=e;return}jt=e=n}while(e!==null);Jt===0&&(Jt=5)}function Ia(n,e,t){var r=st,i=Fr.transition;try{Fr.transition=null,st=1,YN(n,e,t,r)}finally{Fr.transition=i,st=r}return null}function YN(n,e,t,r){do al();while(As!==null);if(Je&6)throw Error(fe(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(fe(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(RD(n,s),n===ln&&(jt=ln=null,vn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||rh||(rh=!0,uA(rd,function(){return al(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Fr.transition,Fr.transition=null;var a=st;st=1;var o=Je;Je|=4,Dv.current=null,HN(n,t),tA(t,n),mN(Rm),sd=!!km,Rm=km=null,n.current=t,$N(t),yD(),Je=o,st=a,Fr.transition=s}else n.current=t;if(rh&&(rh=!1,As=n,Ed=i),s=n.pendingLanes,s===0&&(Ls=null),wD(t.stateNode),sr(n,Bt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(yd)throw yd=!1,n=Ym,Ym=null,n;return Ed&1&&n.tag!==0&&al(),s=n.pendingLanes,s&1?n===Xm?Jc++:(Jc=0,Xm=n):Jc=0,ra(),null}function al(){if(As!==null){var n=GI(Ed),e=Fr.transition,t=st;try{if(Fr.transition=null,st=16>n?16:n,As===null)var r=!1;else{if(n=As,As=null,Ed=0,Je&6)throw Error(fe(331));var i=Je;for(Je|=4,Re=n.current;Re!==null;){var s=Re,a=s.child;if(Re.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Re=c;Re!==null;){var u=Re;switch(u.tag){case 0:case 11:case 15:Xc(8,u,s)}var h=u.child;if(h!==null)h.return=u,Re=h;else for(;Re!==null;){u=Re;var m=u.sibling,g=u.return;if(JS(u),u===c){Re=null;break}if(m!==null){m.return=g,Re=m;break}Re=g}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var E=_.sibling;_.sibling=null,_=E}while(_!==null)}}Re=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Re=a;else e:for(;Re!==null;){if(s=Re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Xc(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Re=w;break e}Re=s.return}}var T=n.current;for(Re=T;Re!==null;){a=Re;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,Re=y;else e:for(a=T;Re!==null;){if(o=Re,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:v0(9,o)}}catch(V){Dt(o,o.return,V)}if(o===a){Re=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,Re=k;break e}Re=o.return}}if(Je=i,ra(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(c0,n)}catch{}r=!0}return r}finally{st=t,Fr.transition=e}}return!1}function oy(n,e,t){e=xl(t,e),e=GS(n,e,1),n=Os(n,e,1),e=Hn(),n!==null&&(sf(n,1,e),sr(n,e))}function Dt(n,e,t){if(n.tag===3)oy(n,n,t);else for(;e!==null;){if(e.tag===3){oy(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ls===null||!Ls.has(r))){n=xl(t,n),n=zS(e,n,1),e=Os(e,n,1),n=Hn(),e!==null&&(sf(e,1,n),sr(e,n));break}}e=e.return}}function XN(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Hn(),n.pingedLanes|=n.suspendedLanes&t,ln===n&&(vn&t)===t&&(Jt===4||Jt===3&&(vn&130023424)===vn&&500>Bt()-Fv?ba(n,0):Nv|=t),sr(n,e)}function lA(n,e){e===0&&(n.mode&1?(e=Kf,Kf<<=1,!(Kf&130023424)&&(Kf=4194304)):e=1);var t=Hn();n=Xi(n,e),n!==null&&(sf(n,e,t),sr(n,t))}function QN(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),lA(n,t)}function JN(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),lA(n,t)}var cA;cA=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||rr.current)er=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return er=!1,UN(n,e,t);er=!!(n.flags&131072)}else er=!1,yt&&e.flags&1048576&&dS(e,hd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fh(n,e),n=e.pendingProps;var i=ml(e,Mn.current);sl(e,t),i=Av(null,e,r,n,i,t);var s=Cv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ir(r)?(s=!0,ud(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ev(e),i.updater=g0,e.stateNode=i,i._reactInternals=e,Vm(e,r,n,t),e=Gm(null,e,r,!0,s,t)):(e.tag=0,yt&&s&&pv(e),Un(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Fh(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=eF(r),n=Xr(r,n),i){case 0:e=Bm(null,e,r,n,t);break e;case 1:e=Qx(null,e,r,n,t);break e;case 11:e=Yx(null,e,r,n,t);break e;case 14:e=Xx(null,e,r,Xr(r.type,n),t);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xr(r,i),Bm(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xr(r,i),Qx(n,e,r,i,t);case 3:e:{if(qS(e),n===null)throw Error(fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,xS(n,e),md(e,r,null,t);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=xl(Error(fe(423)),e),e=Jx(n,e,r,t,i);break e}else if(r!==i){i=xl(Error(fe(424)),e),e=Jx(n,e,r,t,i);break e}else for(hr=Ms(e.stateNode.containerInfo.firstChild),gr=e,yt=!0,Jr=null,t=vS(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(gl(),r===i){e=Qi(n,e,t);break e}Un(n,e,r,t)}e=e.child}return e;case 5:return yS(e),n===null&&Om(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,a=i.children,Pm(r,i)?a=null:s!==null&&Pm(r,s)&&(e.flags|=32),WS(n,e),Un(n,e,a,t),e.child;case 6:return n===null&&Om(e),null;case 13:return KS(n,e,t);case 4:return Tv(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=vl(e,null,r,t):Un(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xr(r,i),Yx(n,e,r,i,t);case 7:return Un(n,e,e.pendingProps,t),e.child;case 8:return Un(n,e,e.pendingProps.children,t),e.child;case 12:return Un(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ct(dd,r._currentValue),r._currentValue=a,s!==null)if(oi(s.value,a)){if(s.children===i.children&&!rr.current){e=Qi(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=zi(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Lm(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(fe(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),Lm(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Un(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,sl(e,t),i=Lr(i),r=r(i),e.flags|=1,Un(n,e,r,t),e.child;case 14:return r=e.type,i=Xr(r,e.pendingProps),i=Xr(r.type,i),Xx(n,e,r,i,t);case 15:return HS(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xr(r,i),Fh(n,e),e.tag=1,ir(r)?(n=!0,ud(e)):n=!1,sl(e,t),BS(e,r,i),Vm(e,r,i,t),Gm(null,e,r,!0,n,t);case 19:return jS(n,e,t);case 22:return $S(n,e,t)}throw Error(fe(156,e.tag))};function uA(n,e){return bI(n,e)}function ZN(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(n,e,t,r){return new ZN(n,e,t,r)}function bv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function eF(n){if(typeof n=="function")return bv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===nv)return 11;if(n===rv)return 14}return 2}function Vs(n,e){var t=n.alternate;return t===null?(t=Dr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Lh(n,e,t,r,i,s){var a=2;if(r=n,typeof n=="function")bv(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Ho:return Va(t.children,i,s,e);case tv:a=8,i|=8;break;case lm:return n=Dr(12,t,e,i|2),n.elementType=lm,n.lanes=s,n;case cm:return n=Dr(13,t,e,i),n.elementType=cm,n.lanes=s,n;case um:return n=Dr(19,t,e,i),n.elementType=um,n.lanes=s,n;case yI:return x0(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case _I:a=10;break e;case xI:a=9;break e;case nv:a=11;break e;case rv:a=14;break e;case ms:a=16,r=null;break e}throw Error(fe(130,n==null?n:typeof n,""))}return e=Dr(a,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Va(n,e,t,r){return n=Dr(7,n,r,e),n.lanes=t,n}function x0(n,e,t,r){return n=Dr(22,n,r,e),n.elementType=yI,n.lanes=t,n.stateNode={isHidden:!1},n}function Fp(n,e,t){return n=Dr(6,n,null,e),n.lanes=t,n}function Mp(n,e,t){return e=Dr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function tF(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pp(0),this.expirationTimes=pp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vv(n,e,t,r,i,s,a,o,l){return n=new tF(n,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Dr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ev(s),n}function nF(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zo,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function fA(n){if(!n)return qs;n=n._reactInternals;e:{if(co(n)!==n||n.tag!==1)throw Error(fe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ir(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(n.tag===1){var t=n.type;if(ir(t))return fS(n,t,e)}return e}function hA(n,e,t,r,i,s,a,o,l){return n=Vv(t,r,!0,n,i,s,a,o,l),n.context=fA(null),t=n.current,r=Hn(),i=bs(t),s=zi(r,i),s.callback=e??null,Os(t,s,i),n.current.lanes=i,sf(n,i,r),sr(n,r),n}function y0(n,e,t,r){var i=e.current,s=Hn(),a=bs(i);return t=fA(t),e.context===null?e.context=t:e.pendingContext=t,e=zi(s,a),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Os(i,e,a),n!==null&&(ii(n,i,a,s),Ph(n,i,a)),a}function wd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ly(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Uv(n,e){ly(n,e),(n=n.alternate)&&ly(n,e)}function rF(){return null}var dA=typeof reportError=="function"?reportError:function(n){console.error(n)};function Bv(n){this._internalRoot=n}E0.prototype.render=Bv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(fe(409));y0(n,e,null,null)};E0.prototype.unmount=Bv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ja(function(){y0(null,n,null,null)}),e[Yi]=null}};function E0(n){this._internalRoot=n}E0.prototype.unstable_scheduleHydration=function(n){if(n){var e=$I();n={blockedOn:null,target:n,priority:e};for(var t=0;t<vs.length&&e!==0&&e<vs[t].priority;t++);vs.splice(t,0,n),t===0&&qI(n)}};function Gv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function T0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function cy(){}function iF(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=wd(a);s.call(c)}}var a=hA(e,r,n,0,null,!1,!1,"",cy);return n._reactRootContainer=a,n[Yi]=a.current,Iu(n.nodeType===8?n.parentNode:n),ja(),a}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=wd(l);o.call(c)}}var l=Vv(n,0,!1,null,null,!1,!1,"",cy);return n._reactRootContainer=l,n[Yi]=l.current,Iu(n.nodeType===8?n.parentNode:n),ja(function(){y0(e,l,t,r)}),l}function w0(n,e,t,r,i){var s=t._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=wd(a);o.call(l)}}y0(e,a,n,i)}else a=iF(t,e,n,i,r);return wd(a)}zI=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Nc(e.pendingLanes);t!==0&&(av(e,t|1),sr(e,Bt()),!(Je&6)&&(yl=Bt()+500,ra()))}break;case 13:ja(function(){var r=Xi(n,1);if(r!==null){var i=Hn();ii(r,n,1,i)}}),Uv(n,1)}};ov=function(n){if(n.tag===13){var e=Xi(n,134217728);if(e!==null){var t=Hn();ii(e,n,134217728,t)}Uv(n,134217728)}};HI=function(n){if(n.tag===13){var e=bs(n),t=Xi(n,e);if(t!==null){var r=Hn();ii(t,n,e,r)}Uv(n,e)}};$I=function(){return st};WI=function(n,e){var t=st;try{return st=n,e()}finally{st=t}};ym=function(n,e,t){switch(e){case"input":if(dm(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=d0(r);if(!i)throw Error(fe(90));TI(r),dm(r,i)}}}break;case"textarea":II(n,t);break;case"select":e=t.value,e!=null&&tl(n,!!t.multiple,e,!1)}};DI=Mv;NI=ja;var sF={usingClientEntryPoint:!1,Events:[of,Ko,d0,RI,PI,Mv]},Tc={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aF={bundleType:Tc.bundleType,version:Tc.version,rendererPackageName:Tc.rendererPackageName,rendererConfig:Tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=OI(n),n===null?null:n.stateNode},findFiberByHostInstance:Tc.findFiberByHostInstance||rF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{c0=ih.inject(aF),_i=ih}catch{}}Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sF;Er.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gv(e))throw Error(fe(200));return nF(n,e,null,t)};Er.createRoot=function(n,e){if(!Gv(n))throw Error(fe(299));var t=!1,r="",i=dA;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Vv(n,1,!1,null,null,t,!1,r,i),n[Yi]=e.current,Iu(n.nodeType===8?n.parentNode:n),new Bv(e)};Er.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(fe(188)):(n=Object.keys(n).join(","),Error(fe(268,n)));return n=OI(e),n=n===null?null:n.stateNode,n};Er.flushSync=function(n){return ja(n)};Er.hydrate=function(n,e,t){if(!T0(e))throw Error(fe(200));return w0(null,n,e,!0,t)};Er.hydrateRoot=function(n,e,t){if(!Gv(n))throw Error(fe(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",a=dA;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=hA(e,null,n,1,t??null,i,!1,s,a),n[Yi]=e.current,Iu(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new E0(e)};Er.render=function(n,e,t){if(!T0(e))throw Error(fe(200));return w0(null,n,e,!1,t)};Er.unmountComponentAtNode=function(n){if(!T0(n))throw Error(fe(40));return n._reactRootContainer?(ja(function(){w0(null,null,n,!1,function(){n._reactRootContainer=null,n[Yi]=null})}),!0):!1};Er.unstable_batchedUpdates=Mv;Er.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!T0(t))throw Error(fe(200));if(n==null||n._reactInternals===void 0)throw Error(fe(38));return w0(n,e,t,!1,r)};Er.version="18.3.1-next-f1338f8080-20240426";function pA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pA)}catch(n){console.error(n)}}pA(),pI.exports=Er;var oF=pI.exports,mA,uy=oF;mA=uy.createRoot,uy.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fu(){return Fu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Fu.apply(this,arguments)}var Cs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Cs||(Cs={}));const fy="popstate";function lF(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return Zm("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Id(i)}return uF(e,t,null,n)}function At(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function zv(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cF(){return Math.random().toString(36).substr(2,8)}function hy(n,e){return{usr:n.state,key:n.key,idx:e}}function Zm(n,e,t,r){return t===void 0&&(t=null),Fu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Bl(e):e,{state:t,key:e&&e.key||r||cF()})}function Id(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function uF(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=Cs.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(Fu({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function h(){o=Cs.Pop;let E=u(),w=E==null?null:E-c;c=E,l&&l({action:o,location:_.location,delta:w})}function m(E,w){o=Cs.Push;let T=Zm(_.location,E,w);c=u()+1;let y=hy(T,c),k=_.createHref(T);try{a.pushState(y,"",k)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(k)}s&&l&&l({action:o,location:_.location,delta:1})}function g(E,w){o=Cs.Replace;let T=Zm(_.location,E,w);c=u();let y=hy(T,c),k=_.createHref(T);a.replaceState(y,"",k),s&&l&&l({action:o,location:_.location,delta:0})}function v(E){let w=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof E=="string"?E:Id(E);return T=T.replace(/ $/,"%20"),At(w,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,w)}let _={get action(){return o},get location(){return n(i,a)},listen(E){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(fy,h),l=E,()=>{i.removeEventListener(fy,h),l=null}},createHref(E){return e(i,E)},createURL:v,encodeLocation(E){let w=v(E);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:g,go(E){return a.go(E)}};return _}var dy;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(dy||(dy={}));function fF(n,e,t){return t===void 0&&(t="/"),hF(n,e,t)}function hF(n,e,t,r){let i=typeof e=="string"?Bl(e):e,s=El(i.pathname||"/",t);if(s==null)return null;let a=gA(n);dF(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=IF(s);o=TF(a[l],c)}return o}function gA(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(At(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Us([r,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(At(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),gA(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:yF(c,s.index),routesMeta:u})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of vA(s.path))i(s,a,l)}),e}function vA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=vA(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function dF(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:EF(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const pF=/^:[\w-]+$/,mF=3,gF=2,vF=1,_F=10,xF=-2,py=n=>n==="*";function yF(n,e){let t=n.split("/"),r=t.length;return t.some(py)&&(r+=xF),e&&(r+=gF),t.filter(i=>!py(i)).reduce((i,s)=>i+(pF.test(s)?mF:s===""?vF:_F),r)}function EF(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function TF(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=eg({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:Us([s,h.pathname]),pathnameBase:RF(Us([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=Us([s,h.pathnameBase]))}return a}function eg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=wF(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let _=o[h]||"";a=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const v=o[h];return g&&!v?c[m]=void 0:c[m]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:n}}function wF(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),zv(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function IF(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zv(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function El(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const SF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AF=n=>SF.test(n);function CF(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Bl(n):n,s;if(t)if(AF(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),zv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=my(t.substring(1),"/"):s=my(t,e)}else s=e;return{pathname:s,search:PF(r),hash:DF(i)}}function my(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Op(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kF(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Hv(n,e){let t=kF(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function $v(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Bl(n):(i=Fu({},n),At(!i.pathname||!i.pathname.includes("?"),Op("?","pathname","search",i)),At(!i.pathname||!i.pathname.includes("#"),Op("#","pathname","hash",i)),At(!i.search||!i.search.includes("#"),Op("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}o=h>=0?e[h]:"/"}let l=CF(i,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Us=n=>n.join("/").replace(/\/\/+/g,"/"),RF=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),PF=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,DF=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function NF(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const _A=["post","put","patch","delete"];new Set(_A);const FF=["get",..._A];new Set(FF);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Mu.apply(this,arguments)}const I0=ae.createContext(null),xA=ae.createContext(null),rs=ae.createContext(null),S0=ae.createContext(null),ia=ae.createContext({outlet:null,matches:[],isDataRoute:!1}),yA=ae.createContext(null);function MF(n,e){let{relative:t}=e===void 0?{}:e;Gl()||At(!1);let{basename:r,navigator:i}=ae.useContext(rs),{hash:s,pathname:a,search:o}=A0(n,{relative:t}),l=a;return r!=="/"&&(l=a==="/"?r:Us([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Gl(){return ae.useContext(S0)!=null}function zl(){return Gl()||At(!1),ae.useContext(S0).location}function EA(n){ae.useContext(rs).static||ae.useLayoutEffect(n)}function Hl(){let{isDataRoute:n}=ae.useContext(ia);return n?KF():OF()}function OF(){Gl()||At(!1);let n=ae.useContext(I0),{basename:e,future:t,navigator:r}=ae.useContext(rs),{matches:i}=ae.useContext(ia),{pathname:s}=zl(),a=JSON.stringify(Hv(i,t.v7_relativeSplatPath)),o=ae.useRef(!1);return EA(()=>{o.current=!0}),ae.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=$v(c,JSON.parse(a),s,u.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Us([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,a,s,n])}function A0(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=ae.useContext(rs),{matches:i}=ae.useContext(ia),{pathname:s}=zl(),a=JSON.stringify(Hv(i,r.v7_relativeSplatPath));return ae.useMemo(()=>$v(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function LF(n,e){return bF(n,e)}function bF(n,e,t,r){Gl()||At(!1);let{navigator:i}=ae.useContext(rs),{matches:s}=ae.useContext(ia),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=zl(),u;if(e){var h;let E=typeof e=="string"?Bl(e):e;l==="/"||(h=E.pathname)!=null&&h.startsWith(l)||At(!1),u=E}else u=c;let m=u.pathname||"/",g=m;if(l!=="/"){let E=l.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=fF(n,{pathname:g}),_=zF(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},o,E.params),pathname:Us([l,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Us([l,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,t,r);return e&&_?ae.createElement(S0.Provider,{value:{location:Mu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Cs.Pop}},_):_}function VF(){let n=qF(),e=NF(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ae.createElement(ae.Fragment,null,ae.createElement("h2",null,"Unexpected Application Error!"),ae.createElement("h3",{style:{fontStyle:"italic"}},e),t?ae.createElement("pre",{style:i},t):null,null)}const UF=ae.createElement(VF,null);class BF extends ae.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?ae.createElement(ia.Provider,{value:this.props.routeContext},ae.createElement(yA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GF(n){let{routeContext:e,match:t,children:r}=n,i=ae.useContext(I0);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),ae.createElement(ia.Provider,{value:e},r)}function zF(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let u=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);u>=0||At(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:m,errors:g}=t,v=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,h,m)=>{let g,v=!1,_=null,E=null;t&&(g=o&&h.route.id?o[h.route.id]:void 0,_=h.route.errorElement||UF,l&&(c<0&&m===0?(jF("route-fallback"),v=!0,E=null):c===m&&(v=!0,E=h.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,m+1)),T=()=>{let y;return g?y=_:v?y=E:h.route.Component?y=ae.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=u,ae.createElement(GF,{match:h,routeContext:{outlet:u,matches:w,isDataRoute:t!=null},children:y})};return t&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?ae.createElement(BF,{location:t.location,revalidation:t.revalidation,component:_,error:g,children:T(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):T()},null)}var TA=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(TA||{}),wA=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(wA||{});function HF(n){let e=ae.useContext(I0);return e||At(!1),e}function $F(n){let e=ae.useContext(xA);return e||At(!1),e}function WF(n){let e=ae.useContext(ia);return e||At(!1),e}function IA(n){let e=WF(),t=e.matches[e.matches.length-1];return t.route.id||At(!1),t.route.id}function qF(){var n;let e=ae.useContext(yA),t=$F(),r=IA();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function KF(){let{router:n}=HF(TA.UseNavigateStable),e=IA(wA.UseNavigateStable),t=ae.useRef(!1);return EA(()=>{t.current=!0}),ae.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Mu({fromRouteId:e},s)))},[n,e])}const gy={};function jF(n,e,t){gy[n]||(gy[n]=!0)}function YF(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function SA(n){let{to:e,replace:t,state:r,relative:i}=n;Gl()||At(!1);let{future:s,static:a}=ae.useContext(rs),{matches:o}=ae.useContext(ia),{pathname:l}=zl(),c=Hl(),u=$v(e,Hv(o,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(u);return ae.useEffect(()=>c(JSON.parse(h),{replace:t,state:r,relative:i}),[c,h,i,t,r]),null}function Yr(n){At(!1)}function XF(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Cs.Pop,navigator:s,static:a=!1,future:o}=n;Gl()&&At(!1);let l=e.replace(/^\/*/,"/"),c=ae.useMemo(()=>({basename:l,navigator:s,static:a,future:Mu({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=Bl(r));let{pathname:u="/",search:h="",hash:m="",state:g=null,key:v="default"}=r,_=ae.useMemo(()=>{let E=El(u,l);return E==null?null:{location:{pathname:E,search:h,hash:m,state:g,key:v},navigationType:i}},[l,u,h,m,g,v,i]);return _==null?null:ae.createElement(rs.Provider,{value:c},ae.createElement(S0.Provider,{children:t,value:_}))}function QF(n){let{children:e,location:t}=n;return LF(tg(e),t)}new Promise(()=>{});function tg(n,e){e===void 0&&(e=[]);let t=[];return ae.Children.forEach(n,(r,i)=>{if(!ae.isValidElement(r))return;let s=[...e,i];if(r.type===ae.Fragment){t.push.apply(t,tg(r.props.children,s));return}r.type!==Yr&&At(!1),!r.props.index||!r.props.children||At(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=tg(r.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sd(){return Sd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Sd.apply(this,arguments)}function AA(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function JF(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ZF(n,e){return n.button===0&&(!e||e==="_self")&&!JF(n)}const e4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],t4=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],n4="6";try{window.__reactRouterVersion=n4}catch{}const r4=ae.createContext({isTransitioning:!1}),i4="startTransition",vy=YP[i4];function s4(n){let{basename:e,children:t,future:r,window:i}=n,s=ae.useRef();s.current==null&&(s.current=lF({window:i,v5Compat:!0}));let a=s.current,[o,l]=ae.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},u=ae.useCallback(h=>{c&&vy?vy(()=>l(h)):l(h)},[l,c]);return ae.useLayoutEffect(()=>a.listen(u),[a,u]),ae.useEffect(()=>YF(r),[r]),ae.createElement(XF,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:r})}const a4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",o4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hi=ae.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,m=AA(e,e4),{basename:g}=ae.useContext(rs),v,_=!1;if(typeof c=="string"&&o4.test(c)&&(v=c,a4))try{let y=new URL(window.location.href),k=c.startsWith("//")?new URL(y.protocol+c):new URL(c),V=El(k.pathname,g);k.origin===y.origin&&V!=null?c=V+k.search+k.hash:_=!0}catch{}let E=MF(c,{relative:i}),w=c4(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:h});function T(y){r&&r(y),y.defaultPrevented||w(y)}return ae.createElement("a",Sd({},m,{href:v||E,onClick:_||s?r:T,ref:t,target:l}))}),Po=ae.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:c,children:u}=e,h=AA(e,t4),m=A0(l,{relative:h.relative}),g=zl(),v=ae.useContext(xA),{navigator:_,basename:E}=ae.useContext(rs),w=v!=null&&u4(m)&&c===!0,T=_.encodeLocation?_.encodeLocation(m).pathname:m.pathname,y=g.pathname,k=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(y=y.toLowerCase(),k=k?k.toLowerCase():null,T=T.toLowerCase()),k&&E&&(k=El(k,E)||k);const V=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let L=y===T||!a&&y.startsWith(T)&&y.charAt(V)==="/",I=k!=null&&(k===T||!a&&k.startsWith(T)&&k.charAt(T.length)==="/"),A={isActive:L,isPending:I,isTransitioning:w},C=L?r:void 0,P;typeof s=="function"?P=s(A):P=[s,L?"active":null,I?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(A):o;return ae.createElement(Hi,Sd({},h,{"aria-current":C,className:P,ref:t,style:D,to:l,viewTransition:c}),typeof u=="function"?u(A):u)});var ng;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(ng||(ng={}));var _y;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(_y||(_y={}));function l4(n){let e=ae.useContext(I0);return e||At(!1),e}function c4(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=Hl(),c=zl(),u=A0(n,{relative:a});return ae.useCallback(h=>{if(ZF(h,t)){h.preventDefault();let m=r!==void 0?r:Id(c)===Id(u);l(n,{replace:m,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,r,i,t,n,s,a,o])}function u4(n,e){e===void 0&&(e={});let t=ae.useContext(r4);t==null&&At(!1);let{basename:r}=l4(ng.useViewTransitionState),i=A0(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=El(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=El(t.nextLocation.pathname,r)||t.nextLocation.pathname;return eg(i.pathname,a)!=null||eg(i.pathname,s)!=null}const f4="modulepreload",h4=function(n){return"/"+n},xy={},Ks=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=h4(l),l in xy)return;xy[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":f4,c||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function d4(){return j.jsxs("aside",{className:"w-60 shrink-0 px-4 py-6",children:[j.jsxs(Hi,{to:"/",className:"flex items-center gap-2 mb-6",children:[j.jsx("div",{className:"h-9 w-9 rounded-2xl bg-gradient-to-br from-indigo-500 to-emerald-500 grid place-items-center text-white",children:"A"}),j.jsx("div",{className:"font-semibold",children:"AcademeMate"})]}),j.jsxs("nav",{className:"space-y-1",children:[j.jsx(Po,{to:"/",className:({isActive:n})=>`block px-3 py-2 rounded-xl ${n?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-50"}`,children:"Dashboard"}),j.jsx(Po,{to:"/doc",className:({isActive:n})=>`block px-3 py-2 rounded-xl ${n?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-50"}`,children:"AI Doc"}),j.jsx(Po,{to:"/scanner",className:({isActive:n})=>`block px-3 py-2 rounded-xl ${n?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-50"}`,children:"Assignments"}),j.jsx(Po,{to:"/import",className:({isActive:n})=>`block px-3 py-2 rounded-xl ${n?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-50"}`,children:"Module Import"}),j.jsx(Po,{to:"/lab",className:({isActive:n})=>`block px-3 py-2 rounded-xl ${n?"bg-emerald-50 text-emerald-600":"text-gray-700 hover:bg-gray-50"}`,children:"AI Study Lab"}),j.jsx(Po,{to:"/profile",className:({isActive:n})=>`block px-3 py-2 rounded-xl ${n?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:"Profile"})]}),j.jsxs("div",{className:"mt-6 rounded-2xl bg-gradient-to-br from-indigo-600 to-emerald-500 p-4 text-white",children:[j.jsx("div",{className:"font-medium",children:"AI Study Features"}),j.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Generate quizzes, summaries & explanations from your materials."}),j.jsx(Hi,{to:"/lab",className:"inline-block mt-3 px-3 py-1 rounded-lg bg-white/20",children:"Open Study Lab"})]})]})}var yy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},p4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},kA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=s>>2,h=(s&3)<<4|o>>4;let m=(o&15)<<2|c>>6,g=c&63;l||(g=64,a||(m=64)),r.push(t[u],t[h],t[m],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(CA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):p4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||c==null||h==null)throw new m4;const m=s<<2|o>>4;if(r.push(m),c!==64){const g=o<<4&240|c>>2;if(r.push(g),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class m4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g4=function(n){const e=CA(n);return kA.encodeByteArray(e,!0)},Ad=function(n){return g4(n).replace(/\./g,"")},RA=function(n){try{return kA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=()=>v4().__FIREBASE_DEFAULTS__,x4=()=>{if(typeof process>"u"||typeof yy>"u")return;const n=yy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},y4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&RA(n[1]);return e&&JSON.parse(e)},C0=()=>{try{return _4()||x4()||y4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},PA=n=>{var e,t;return(t=(e=C0())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},E4=n=>{const e=PA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},DA=()=>{var n;return(n=C0())===null||n===void 0?void 0:n.config},NA=n=>{var e;return(e=C0())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ad(JSON.stringify(t)),Ad(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function I4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function S4(){var n;const e=(n=C0())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function k4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function R4(){const n=tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FA(){return!S4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MA(){try{return typeof indexedDB=="object"}catch{return!1}}function P4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="FirebaseError";class Ii extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=D4,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cf.prototype.create)}}class cf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?N4(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Ii(i,o,r)}}function N4(n,e){return n.replace(F4,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const F4=/\{\$([^}]+)}/g;function M4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ou(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(Ey(s)&&Ey(a)){if(!Ou(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Ey(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Oc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function O4(n,e){const t=new L4(n,e);return t.subscribe.bind(t)}class L4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");b4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Lp),i.error===void 0&&(i.error=Lp),i.complete===void 0&&(i.complete=Lp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Lp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n){return n&&n._delegate?n._delegate:n}class js{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new T4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B4(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U4(n){return n===Sa?void 0:n}function B4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new V4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(We||(We={}));const z4={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},H4=We.INFO,$4={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},W4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=$4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wv{constructor(e){this.name=e,this._logLevel=H4,this._logHandler=W4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const q4=(n,e)=>e.some(t=>n instanceof t);let Ty,wy;function K4(){return Ty||(Ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j4(){return wy||(wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OA=new WeakMap,rg=new WeakMap,LA=new WeakMap,bp=new WeakMap,qv=new WeakMap;function Y4(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Bs(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&OA.set(t,n)}).catch(()=>{}),qv.set(e,n),e}function X4(n){if(rg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});rg.set(n,e)}let ig={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return rg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||LA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Q4(n){ig=n(ig)}function J4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Vp(this),e,...t);return LA.set(r,e.sort?e.sort():[e]),Bs(r)}:j4().includes(n)?function(...e){return n.apply(Vp(this),e),Bs(OA.get(this))}:function(...e){return Bs(n.apply(Vp(this),e))}}function Z4(n){return typeof n=="function"?J4(n):(n instanceof IDBTransaction&&X4(n),q4(n,K4())?new Proxy(n,ig):n)}function Bs(n){if(n instanceof IDBRequest)return Y4(n);if(bp.has(n))return bp.get(n);const e=Z4(n);return e!==n&&(bp.set(n,e),qv.set(e,n)),e}const Vp=n=>qv.get(n);function eM(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=Bs(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Bs(a.result),l.oldVersion,l.newVersion,Bs(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const tM=["get","getKey","getAll","getAllKeys","count"],nM=["put","add","delete","clear"],Up=new Map;function Iy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Up.get(e))return Up.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=nM.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tM.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[t](...o),i&&l.done]))[0]};return Up.set(e,s),s}Q4(n=>({...n,get:(e,t,r)=>Iy(e,t)||n.get(e,t,r),has:(e,t)=>!!Iy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(iM(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function iM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sg="@firebase/app",Sy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Wv("@firebase/app"),sM="@firebase/app-compat",aM="@firebase/analytics-compat",oM="@firebase/analytics",lM="@firebase/app-check-compat",cM="@firebase/app-check",uM="@firebase/auth",fM="@firebase/auth-compat",hM="@firebase/database",dM="@firebase/data-connect",pM="@firebase/database-compat",mM="@firebase/functions",gM="@firebase/functions-compat",vM="@firebase/installations",_M="@firebase/installations-compat",xM="@firebase/messaging",yM="@firebase/messaging-compat",EM="@firebase/performance",TM="@firebase/performance-compat",wM="@firebase/remote-config",IM="@firebase/remote-config-compat",SM="@firebase/storage",AM="@firebase/storage-compat",CM="@firebase/firestore",kM="@firebase/vertexai-preview",RM="@firebase/firestore-compat",PM="firebase",DM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="[DEFAULT]",NM={[sg]:"fire-core",[sM]:"fire-core-compat",[oM]:"fire-analytics",[aM]:"fire-analytics-compat",[cM]:"fire-app-check",[lM]:"fire-app-check-compat",[uM]:"fire-auth",[fM]:"fire-auth-compat",[hM]:"fire-rtdb",[dM]:"fire-data-connect",[pM]:"fire-rtdb-compat",[mM]:"fire-fn",[gM]:"fire-fn-compat",[vM]:"fire-iid",[_M]:"fire-iid-compat",[xM]:"fire-fcm",[yM]:"fire-fcm-compat",[EM]:"fire-perf",[TM]:"fire-perf-compat",[wM]:"fire-rc",[IM]:"fire-rc-compat",[SM]:"fire-gcs",[AM]:"fire-gcs-compat",[CM]:"fire-fst",[RM]:"fire-fst-compat",[kM]:"fire-vertex","fire-js":"fire-js",[PM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Map,FM=new Map,og=new Map;function Ay(n,e){try{n.container.addComponent(e)}catch(t){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ya(n){const e=n.name;if(og.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;og.set(e,n);for(const t of Cd.values())Ay(t,n);for(const t of FM.values())Ay(t,n);return!0}function k0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ei(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gs=new cf("app","Firebase",MM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=DM;function bA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ag,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gs.create("bad-app-name",{appName:String(i)});if(t||(t=DA()),!t)throw Gs.create("no-options");const s=Cd.get(i);if(s){if(Ou(t,s.options)&&Ou(r,s.config))return s;throw Gs.create("duplicate-app",{appName:i})}const a=new G4(i);for(const l of og.values())a.addComponent(l);const o=new OM(t,r,a);return Cd.set(i,o),o}function VA(n=ag){const e=Cd.get(n);if(!e&&n===ag&&DA())return bA();if(!e)throw Gs.create("no-app",{appName:n});return e}function yi(n,e,t){var r;let i=(r=NM[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ji.warn(o.join(" "));return}Ya(new js(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="firebase-heartbeat-database",bM=1,Lu="firebase-heartbeat-store";let Bp=null;function UA(){return Bp||(Bp=eM(LM,bM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Gs.create("idb-open",{originalErrorMessage:n.message})})),Bp}async function VM(n){try{const t=(await UA()).transaction(Lu),r=await t.objectStore(Lu).get(BA(n));return await t.done,r}catch(e){if(e instanceof Ii)Ji.warn(e.message);else{const t=Gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ji.warn(t.message)}}}async function Cy(n,e){try{const r=(await UA()).transaction(Lu,"readwrite");await r.objectStore(Lu).put(e,BA(n)),await r.done}catch(t){if(t instanceof Ii)Ji.warn(t.message);else{const r=Gs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ji.warn(r.message)}}}function BA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=1024,BM=30*24*60*60*1e3;class GM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ky();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=BM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ji.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ky(),{heartbeatsToSend:r,unsentEntries:i}=zM(this._heartbeatsCache.heartbeats),s=Ad(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Ji.warn(t),""}}}function ky(){return new Date().toISOString().substring(0,10)}function zM(n,e=UM){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Ry(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Ry(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class HM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MA()?P4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ry(n){return Ad(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(n){Ya(new js("platform-logger",e=>new rM(e),"PRIVATE")),Ya(new js("heartbeat",e=>new GM(e),"PRIVATE")),yi(sg,Sy,n),yi(sg,Sy,"esm2017"),yi("fire-js","")}$M("");var WM="firebase",qM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yi(WM,qM,"app");var Py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ua,GA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function C(){}C.prototype=A.prototype,I.D=A.prototype,I.prototype=new C,I.prototype.constructor=I,I.C=function(P,D,N){for(var M=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)M[ye-2]=arguments[ye];return A.prototype[D].apply(P,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,A,C){C||(C=0);var P=Array(16);if(typeof A=="string")for(var D=0;16>D;++D)P[D]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(D=0;16>D;++D)P[D]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=I.g[0],C=I.g[1],D=I.g[2];var N=I.g[3],M=A+(N^C&(D^N))+P[0]+3614090360&4294967295;A=C+(M<<7&4294967295|M>>>25),M=N+(D^A&(C^D))+P[1]+3905402710&4294967295,N=A+(M<<12&4294967295|M>>>20),M=D+(C^N&(A^C))+P[2]+606105819&4294967295,D=N+(M<<17&4294967295|M>>>15),M=C+(A^D&(N^A))+P[3]+3250441966&4294967295,C=D+(M<<22&4294967295|M>>>10),M=A+(N^C&(D^N))+P[4]+4118548399&4294967295,A=C+(M<<7&4294967295|M>>>25),M=N+(D^A&(C^D))+P[5]+1200080426&4294967295,N=A+(M<<12&4294967295|M>>>20),M=D+(C^N&(A^C))+P[6]+2821735955&4294967295,D=N+(M<<17&4294967295|M>>>15),M=C+(A^D&(N^A))+P[7]+4249261313&4294967295,C=D+(M<<22&4294967295|M>>>10),M=A+(N^C&(D^N))+P[8]+1770035416&4294967295,A=C+(M<<7&4294967295|M>>>25),M=N+(D^A&(C^D))+P[9]+2336552879&4294967295,N=A+(M<<12&4294967295|M>>>20),M=D+(C^N&(A^C))+P[10]+4294925233&4294967295,D=N+(M<<17&4294967295|M>>>15),M=C+(A^D&(N^A))+P[11]+2304563134&4294967295,C=D+(M<<22&4294967295|M>>>10),M=A+(N^C&(D^N))+P[12]+1804603682&4294967295,A=C+(M<<7&4294967295|M>>>25),M=N+(D^A&(C^D))+P[13]+4254626195&4294967295,N=A+(M<<12&4294967295|M>>>20),M=D+(C^N&(A^C))+P[14]+2792965006&4294967295,D=N+(M<<17&4294967295|M>>>15),M=C+(A^D&(N^A))+P[15]+1236535329&4294967295,C=D+(M<<22&4294967295|M>>>10),M=A+(D^N&(C^D))+P[1]+4129170786&4294967295,A=C+(M<<5&4294967295|M>>>27),M=N+(C^D&(A^C))+P[6]+3225465664&4294967295,N=A+(M<<9&4294967295|M>>>23),M=D+(A^C&(N^A))+P[11]+643717713&4294967295,D=N+(M<<14&4294967295|M>>>18),M=C+(N^A&(D^N))+P[0]+3921069994&4294967295,C=D+(M<<20&4294967295|M>>>12),M=A+(D^N&(C^D))+P[5]+3593408605&4294967295,A=C+(M<<5&4294967295|M>>>27),M=N+(C^D&(A^C))+P[10]+38016083&4294967295,N=A+(M<<9&4294967295|M>>>23),M=D+(A^C&(N^A))+P[15]+3634488961&4294967295,D=N+(M<<14&4294967295|M>>>18),M=C+(N^A&(D^N))+P[4]+3889429448&4294967295,C=D+(M<<20&4294967295|M>>>12),M=A+(D^N&(C^D))+P[9]+568446438&4294967295,A=C+(M<<5&4294967295|M>>>27),M=N+(C^D&(A^C))+P[14]+3275163606&4294967295,N=A+(M<<9&4294967295|M>>>23),M=D+(A^C&(N^A))+P[3]+4107603335&4294967295,D=N+(M<<14&4294967295|M>>>18),M=C+(N^A&(D^N))+P[8]+1163531501&4294967295,C=D+(M<<20&4294967295|M>>>12),M=A+(D^N&(C^D))+P[13]+2850285829&4294967295,A=C+(M<<5&4294967295|M>>>27),M=N+(C^D&(A^C))+P[2]+4243563512&4294967295,N=A+(M<<9&4294967295|M>>>23),M=D+(A^C&(N^A))+P[7]+1735328473&4294967295,D=N+(M<<14&4294967295|M>>>18),M=C+(N^A&(D^N))+P[12]+2368359562&4294967295,C=D+(M<<20&4294967295|M>>>12),M=A+(C^D^N)+P[5]+4294588738&4294967295,A=C+(M<<4&4294967295|M>>>28),M=N+(A^C^D)+P[8]+2272392833&4294967295,N=A+(M<<11&4294967295|M>>>21),M=D+(N^A^C)+P[11]+1839030562&4294967295,D=N+(M<<16&4294967295|M>>>16),M=C+(D^N^A)+P[14]+4259657740&4294967295,C=D+(M<<23&4294967295|M>>>9),M=A+(C^D^N)+P[1]+2763975236&4294967295,A=C+(M<<4&4294967295|M>>>28),M=N+(A^C^D)+P[4]+1272893353&4294967295,N=A+(M<<11&4294967295|M>>>21),M=D+(N^A^C)+P[7]+4139469664&4294967295,D=N+(M<<16&4294967295|M>>>16),M=C+(D^N^A)+P[10]+3200236656&4294967295,C=D+(M<<23&4294967295|M>>>9),M=A+(C^D^N)+P[13]+681279174&4294967295,A=C+(M<<4&4294967295|M>>>28),M=N+(A^C^D)+P[0]+3936430074&4294967295,N=A+(M<<11&4294967295|M>>>21),M=D+(N^A^C)+P[3]+3572445317&4294967295,D=N+(M<<16&4294967295|M>>>16),M=C+(D^N^A)+P[6]+76029189&4294967295,C=D+(M<<23&4294967295|M>>>9),M=A+(C^D^N)+P[9]+3654602809&4294967295,A=C+(M<<4&4294967295|M>>>28),M=N+(A^C^D)+P[12]+3873151461&4294967295,N=A+(M<<11&4294967295|M>>>21),M=D+(N^A^C)+P[15]+530742520&4294967295,D=N+(M<<16&4294967295|M>>>16),M=C+(D^N^A)+P[2]+3299628645&4294967295,C=D+(M<<23&4294967295|M>>>9),M=A+(D^(C|~N))+P[0]+4096336452&4294967295,A=C+(M<<6&4294967295|M>>>26),M=N+(C^(A|~D))+P[7]+1126891415&4294967295,N=A+(M<<10&4294967295|M>>>22),M=D+(A^(N|~C))+P[14]+2878612391&4294967295,D=N+(M<<15&4294967295|M>>>17),M=C+(N^(D|~A))+P[5]+4237533241&4294967295,C=D+(M<<21&4294967295|M>>>11),M=A+(D^(C|~N))+P[12]+1700485571&4294967295,A=C+(M<<6&4294967295|M>>>26),M=N+(C^(A|~D))+P[3]+2399980690&4294967295,N=A+(M<<10&4294967295|M>>>22),M=D+(A^(N|~C))+P[10]+4293915773&4294967295,D=N+(M<<15&4294967295|M>>>17),M=C+(N^(D|~A))+P[1]+2240044497&4294967295,C=D+(M<<21&4294967295|M>>>11),M=A+(D^(C|~N))+P[8]+1873313359&4294967295,A=C+(M<<6&4294967295|M>>>26),M=N+(C^(A|~D))+P[15]+4264355552&4294967295,N=A+(M<<10&4294967295|M>>>22),M=D+(A^(N|~C))+P[6]+2734768916&4294967295,D=N+(M<<15&4294967295|M>>>17),M=C+(N^(D|~A))+P[13]+1309151649&4294967295,C=D+(M<<21&4294967295|M>>>11),M=A+(D^(C|~N))+P[4]+4149444226&4294967295,A=C+(M<<6&4294967295|M>>>26),M=N+(C^(A|~D))+P[11]+3174756917&4294967295,N=A+(M<<10&4294967295|M>>>22),M=D+(A^(N|~C))+P[2]+718787259&4294967295,D=N+(M<<15&4294967295|M>>>17),M=C+(N^(D|~A))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(D+(M<<21&4294967295|M>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.u=function(I,A){A===void 0&&(A=I.length);for(var C=A-this.blockSize,P=this.B,D=this.h,N=0;N<A;){if(D==0)for(;N<=C;)i(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<A;)if(P[D++]=I.charCodeAt(N++),D==this.blockSize){i(this,P),D=0;break}}else for(;N<A;)if(P[D++]=I[N++],D==this.blockSize){i(this,P),D=0;break}}this.h=D,this.o+=A},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;var C=8*this.o;for(A=I.length-8;A<I.length;++A)I[A]=C&255,C/=256;for(this.u(I),I=Array(16),A=C=0;4>A;++A)for(var P=0;32>P;P+=8)I[C++]=this.g[A]>>>P&255;return I};function s(I,A){var C=o;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=A(I)}function a(I,A){this.h=A;for(var C=[],P=!0,D=I.length-1;0<=D;D--){var N=I[D]|0;P&&N==A||(C[D]=N,P=!1)}this.g=C}var o={};function l(I){return-128<=I&&128>I?s(I,function(A){return new a([A|0],0>A?-1:0)}):new a([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return E(c(-I));for(var A=[],C=1,P=0;I>=C;P++)A[P]=I/C|0,C*=4294967296;return new a(A,0)}function u(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return E(u(I.substring(1),A));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(A,8)),P=h,D=0;D<I.length;D+=8){var N=Math.min(8,I.length-D),M=parseInt(I.substring(D,D+N),A);8>N?(N=c(Math.pow(A,N)),P=P.j(N).add(c(M))):(P=P.j(C),P=P.add(c(M)))}return P}var h=l(0),m=l(1),g=l(16777216);n=a.prototype,n.m=function(){if(_(this))return-E(this).m();for(var I=0,A=1,C=0;C<this.g.length;C++){var P=this.i(C);I+=(0<=P?P:4294967296+P)*A,A*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(_(this))return"-"+E(this).toString(I);for(var A=c(Math.pow(I,6)),C=this,P="";;){var D=k(C,A).g;C=w(C,D.j(A));var N=((0<C.g.length?C.g[0]:C.h)>>>0).toString(I);if(C=D,v(C))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(var A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function _(I){return I.h==-1}n.l=function(I){return I=w(this,I),_(I)?-1:v(I)?0:1};function E(I){for(var A=I.g.length,C=[],P=0;P<A;P++)C[P]=~I.g[P];return new a(C,~I.h).add(m)}n.abs=function(){return _(this)?E(this):this},n.add=function(I){for(var A=Math.max(this.g.length,I.g.length),C=[],P=0,D=0;D<=A;D++){var N=P+(this.i(D)&65535)+(I.i(D)&65535),M=(N>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);P=M>>>16,N&=65535,M&=65535,C[D]=M<<16|N}return new a(C,C[C.length-1]&-2147483648?-1:0)};function w(I,A){return I.add(E(A))}n.j=function(I){if(v(this)||v(I))return h;if(_(this))return _(I)?E(this).j(E(I)):E(E(this).j(I));if(_(I))return E(this.j(E(I)));if(0>this.l(g)&&0>I.l(g))return c(this.m()*I.m());for(var A=this.g.length+I.g.length,C=[],P=0;P<2*A;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<I.g.length;D++){var N=this.i(P)>>>16,M=this.i(P)&65535,ye=I.i(D)>>>16,me=I.i(D)&65535;C[2*P+2*D]+=M*me,T(C,2*P+2*D),C[2*P+2*D+1]+=N*me,T(C,2*P+2*D+1),C[2*P+2*D+1]+=M*ye,T(C,2*P+2*D+1),C[2*P+2*D+2]+=N*ye,T(C,2*P+2*D+2)}for(P=0;P<A;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=A;P<2*A;P++)C[P]=0;return new a(C,0)};function T(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function y(I,A){this.g=I,this.h=A}function k(I,A){if(v(A))throw Error("division by zero");if(v(I))return new y(h,h);if(_(I))return A=k(E(I),A),new y(E(A.g),E(A.h));if(_(A))return A=k(I,E(A)),new y(E(A.g),A.h);if(30<I.g.length){if(_(I)||_(A))throw Error("slowDivide_ only works with positive integers.");for(var C=m,P=A;0>=P.l(I);)C=V(C),P=V(P);var D=L(C,1),N=L(P,1);for(P=L(P,2),C=L(C,2);!v(P);){var M=N.add(P);0>=M.l(I)&&(D=D.add(C),N=M),P=L(P,1),C=L(C,1)}return A=w(I,D.j(A)),new y(D,A)}for(D=h;0<=I.l(A);){for(C=Math.max(1,Math.floor(I.m()/A.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=c(C),M=N.j(A);_(M)||0<M.l(I);)C-=P,N=c(C),M=N.j(A);v(N)&&(N=m),D=D.add(N),I=w(I,M)}return new y(D,I)}n.A=function(I){return k(this,I).h},n.and=function(I){for(var A=Math.max(this.g.length,I.g.length),C=[],P=0;P<A;P++)C[P]=this.i(P)&I.i(P);return new a(C,this.h&I.h)},n.or=function(I){for(var A=Math.max(this.g.length,I.g.length),C=[],P=0;P<A;P++)C[P]=this.i(P)|I.i(P);return new a(C,this.h|I.h)},n.xor=function(I){for(var A=Math.max(this.g.length,I.g.length),C=[],P=0;P<A;P++)C[P]=this.i(P)^I.i(P);return new a(C,this.h^I.h)};function V(I){for(var A=I.g.length+1,C=[],P=0;P<A;P++)C[P]=I.i(P)<<1|I.i(P-1)>>>31;return new a(C,I.h)}function L(I,A){var C=A>>5;A%=32;for(var P=I.g.length-C,D=[],N=0;N<P;N++)D[N]=0<A?I.i(N+C)>>>A|I.i(N+C+1)<<32-A:I.i(N+C);return new a(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GA=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,Ua=a}).apply(typeof Py<"u"?Py:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zA,Lc,HA,bh,lg,$A,WA,qA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,x,S){return f==Array.prototype||f==Object.prototype||(f[x]=S.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var x=0;x<f.length;++x){var S=f[x];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function i(f,x){if(x)e:{var S=r;f=f.split(".");for(var F=0;F<f.length-1;F++){var X=f[F];if(!(X in S))break e;S=S[X]}f=f[f.length-1],F=S[f],x=x(F),x!=F&&x!=null&&e(S,f,{configurable:!0,writable:!0,value:x})}}function s(f,x){f instanceof String&&(f+="");var S=0,F=!1,X={next:function(){if(!F&&S<f.length){var ne=S++;return{value:x(ne,f[ne]),done:!1}}return F=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}i("Array.prototype.values",function(f){return f||function(){return s(this,function(x,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(f){var x=typeof f;return x=x!="object"?x:f?Array.isArray(f)?"array":x:"null",x=="array"||x=="object"&&typeof f.length=="number"}function c(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function u(f,x,S){return f.call.apply(f.bind,arguments)}function h(f,x,S){if(!f)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,F),f.apply(x,X)}}return function(){return f.apply(x,arguments)}}function m(f,x,S){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,m.apply(null,arguments)}function g(f,x){var S=Array.prototype.slice.call(arguments,1);return function(){var F=S.slice();return F.push.apply(F,arguments),f.apply(this,F)}}function v(f,x){function S(){}S.prototype=x.prototype,f.aa=x.prototype,f.prototype=new S,f.prototype.constructor=f,f.Qb=function(F,X,ne){for(var ve=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)ve[lt-2]=arguments[lt];return x.prototype[X].apply(F,ve)}}function _(f){const x=f.length;if(0<x){const S=Array(x);for(let F=0;F<x;F++)S[F]=f[F];return S}return[]}function E(f,x){for(let S=1;S<arguments.length;S++){const F=arguments[S];if(l(F)){const X=f.length||0,ne=F.length||0;f.length=X+ne;for(let ve=0;ve<ne;ve++)f[X+ve]=F[ve]}else f.push(F)}}class w{constructor(x,S){this.i=x,this.j=S,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function T(f){return/^[\s\xa0]*$/.test(f)}function y(){var f=o.navigator;return f&&(f=f.userAgent)?f:""}function k(f){return k[" "](f),f}k[" "]=function(){};var V=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function L(f,x,S){for(const F in f)x.call(S,f[F],F,f)}function I(f,x){for(const S in f)x.call(void 0,f[S],S,f)}function A(f){const x={};for(const S in f)x[S]=f[S];return x}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(f,x){let S,F;for(let X=1;X<arguments.length;X++){F=arguments[X];for(S in F)f[S]=F[S];for(let ne=0;ne<C.length;ne++)S=C[ne],Object.prototype.hasOwnProperty.call(F,S)&&(f[S]=F[S])}}function D(f){var x=1;f=f.split(":");const S=[];for(;0<x&&f.length;)S.push(f.shift()),x--;return f.length&&S.push(f.join(":")),S}function N(f){o.setTimeout(()=>{throw f},0)}function M(){var f=q;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class ye{constructor(){this.h=this.g=null}add(x,S){const F=me.get();F.set(x,S),this.h?this.h.next=F:this.g=F,this.h=F}}var me=new w(()=>new ke,f=>f.reset());class ke{constructor(){this.next=this.g=this.h=null}set(x,S){this.h=x,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,ce=!1,q=new ye,he=()=>{const f=o.Promise.resolve(void 0);Ee=()=>{f.then(Ae)}};var Ae=()=>{for(var f;f=M();){try{f.h.call(f.g)}catch(S){N(S)}var x=me;x.j(f),100>x.h&&(x.h++,f.next=x.g,x.g=f)}ce=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const S=()=>{};o.addEventListener("test",S,x),o.removeEventListener("test",S,x)}catch{}return f}();function W(f,x){if(Y.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var S=this.type=f.type,F=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget){if(V){e:{try{k(x.nodeName);var X=!0;break e}catch{}X=!1}X||(x=null)}}else S=="mouseover"?x=f.fromElement:S=="mouseout"&&(x=f.toElement);this.relatedTarget=x,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ie[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&W.aa.h.call(this)}}v(W,Y);var ie={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function _e(f,x,S,F,X){this.listener=f,this.proxy=null,this.src=x,this.type=S,this.capture=!!F,this.ha=X,this.key=++Ce,this.da=this.fa=!1}function ue(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function He(f){this.src=f,this.g={},this.h=0}He.prototype.add=function(f,x,S,F,X){var ne=f.toString();f=this.g[ne],f||(f=this.g[ne]=[],this.h++);var ve=ht(f,x,F,X);return-1<ve?(x=f[ve],S||(x.fa=!1)):(x=new _e(x,this.src,ne,!!F,X),x.fa=S,f.push(x)),x};function H(f,x){var S=x.type;if(S in f.g){var F=f.g[S],X=Array.prototype.indexOf.call(F,x,void 0),ne;(ne=0<=X)&&Array.prototype.splice.call(F,X,1),ne&&(ue(x),f.g[S].length==0&&(delete f.g[S],f.h--))}}function ht(f,x,S,F){for(var X=0;X<f.length;++X){var ne=f[X];if(!ne.da&&ne.listener==x&&ne.capture==!!S&&ne.ha==F)return X}return-1}var $e="closure_lm_"+(1e6*Math.random()|0),tt={};function Ge(f,x,S,F,X){if(Array.isArray(x)){for(var ne=0;ne<x.length;ne++)Ge(f,x[ne],S,F,X);return null}return S=Sr(S),f&&f[pe]?f.K(x,S,c(F)?!!F.capture:!1,X):Te(f,x,S,!1,F,X)}function Te(f,x,S,F,X,ne){if(!x)throw Error("Invalid event type");var ve=c(X)?!!X.capture:!!X,lt=Ir(f);if(lt||(f[$e]=lt=new He(f)),S=lt.add(x,S,F,ve,ne),S.proxy)return S;if(F=Et(),S.proxy=F,F.src=f,F.listener=S,f.addEventListener)K||(X=ve),X===void 0&&(X=!1),f.addEventListener(x.toString(),F,X);else if(f.attachEvent)f.attachEvent(wr(x.toString()),F);else if(f.addListener&&f.removeListener)f.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Et(){function f(S){return x.call(f.src,f.listener,S)}const x=ma;return f}function bn(f,x,S,F,X){if(Array.isArray(x))for(var ne=0;ne<x.length;ne++)bn(f,x[ne],S,F,X);else F=c(F)?!!F.capture:!!F,S=Sr(S),f&&f[pe]?(f=f.i,x=String(x).toString(),x in f.g&&(ne=f.g[x],S=ht(ne,S,F,X),-1<S&&(ue(ne[S]),Array.prototype.splice.call(ne,S,1),ne.length==0&&(delete f.g[x],f.h--)))):f&&(f=Ir(f))&&(x=f.g[x.toString()],f=-1,x&&(f=ht(x,S,F,X)),(S=-1<f?x[f]:null)&&Yn(S))}function Yn(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[pe])H(x.i,f);else{var S=f.type,F=f.proxy;x.removeEventListener?x.removeEventListener(S,F,f.capture):x.detachEvent?x.detachEvent(wr(S),F):x.addListener&&x.removeListener&&x.removeListener(F),(S=Ir(x))?(H(S,f),S.h==0&&(S.src=null,x[$e]=null)):ue(f)}}}function wr(f){return f in tt?tt[f]:tt[f]="on"+f}function ma(f,x){if(f.da)f=!0;else{x=new W(x,this);var S=f.listener,F=f.ha||f.src;f.fa&&Yn(f),f=S.call(F,x)}return f}function Ir(f){return f=f[$e],f instanceof He?f:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sr(f){return typeof f=="function"?f:(f[fn]||(f[fn]=function(x){return f.handleEvent(x)}),f[fn])}function dt(){G.call(this),this.i=new He(this),this.M=this,this.F=null}v(dt,G),dt.prototype[pe]=!0,dt.prototype.removeEventListener=function(f,x,S,F){bn(this,f,x,S,F)};function Vt(f,x){var S,F=f.F;if(F)for(S=[];F;F=F.F)S.push(F);if(f=f.M,F=x.type||x,typeof x=="string")x=new Y(x,f);else if(x instanceof Y)x.target=x.target||f;else{var X=x;x=new Y(F,f),P(x,X)}if(X=!0,S)for(var ne=S.length-1;0<=ne;ne--){var ve=x.g=S[ne];X=Ht(ve,F,!0,x)&&X}if(ve=x.g=f,X=Ht(ve,F,!0,x)&&X,X=Ht(ve,F,!1,x)&&X,S)for(ne=0;ne<S.length;ne++)ve=x.g=S[ne],X=Ht(ve,F,!1,x)&&X}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var f=this.i,x;for(x in f.g){for(var S=f.g[x],F=0;F<S.length;F++)ue(S[F]);delete f.g[x],f.h--}}this.F=null},dt.prototype.K=function(f,x,S,F){return this.i.add(String(f),x,!1,S,F)},dt.prototype.L=function(f,x,S,F){return this.i.add(String(f),x,!0,S,F)};function Ht(f,x,S,F){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();for(var X=!0,ne=0;ne<x.length;++ne){var ve=x[ne];if(ve&&!ve.da&&ve.capture==S){var lt=ve.listener,dn=ve.ha||ve.src;ve.fa&&H(f.i,ve),X=lt.call(dn,F)!==!1&&X}}return X&&!F.defaultPrevented}function ar(f,x,S){if(typeof f=="function")S&&(f=m(f,S));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:o.setTimeout(f,x||0)}function Be(f){f.g=ar(()=>{f.g=null,f.i&&(f.i=!1,Be(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class Tt extends G{constructor(x,S){super(),this.m=x,this.l=S,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Be(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rn(f){G.call(this),this.h=f,this.g={}}v(rn,G);var Rt=[];function li(f){L(f.g,function(x,S){this.g.hasOwnProperty(S)&&Yn(x)},f),f.g={}}rn.prototype.N=function(){rn.aa.N.call(this),li(this)},rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var To=o.JSON.stringify,ep=o.JSON.parse,tp=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function wo(){}wo.prototype.h=null;function sc(f){return f.h||(f.h=f.i())}function ac(){}var ga={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function oc(){Y.call(this,"d")}v(oc,Y);function as(){Y.call(this,"c")}v(as,Y);var Ci={},kf=null;function Io(){return kf=kf||new dt}Ci.La="serverreachability";function Rf(f){Y.call(this,Ci.La,f)}v(Rf,Y);function va(f){const x=Io();Vt(x,new Rf(x))}Ci.STAT_EVENT="statevent";function Pf(f,x){Y.call(this,Ci.STAT_EVENT,f),this.stat=x}v(Pf,Y);function hn(f){const x=Io();Vt(x,new Pf(x,f))}Ci.Ma="timingevent";function Df(f,x){Y.call(this,Ci.Ma,f),this.size=x}v(Df,Y);function ki(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},x)}function _a(){this.g=!0}_a.prototype.xa=function(){this.g=!1};function np(f,x,S,F,X,ne){f.info(function(){if(f.g)if(ne)for(var ve="",lt=ne.split("&"),dn=0;dn<lt.length;dn++){var et=lt[dn].split("=");if(1<et.length){var En=et[0];et=et[1];var Tn=En.split("_");ve=2<=Tn.length&&Tn[1]=="type"?ve+(En+"="+et+"&"):ve+(En+"=redacted&")}}else ve=null;else ve=ne;return"XMLHTTP REQ ("+F+") [attempt "+X+"]: "+x+`
`+S+`
`+ve})}function rp(f,x,S,F,X,ne,ve){f.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+X+"]: "+x+`
`+S+`
`+ne+" "+ve})}function R(f,x,S,F){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+O(f,S)+(F?" "+F:"")})}function U(f,x){f.info(function(){return"TIMEOUT: "+x})}_a.prototype.info=function(){};function O(f,x){if(!f.g)return x;if(!x)return null;try{var S=JSON.parse(x);if(S){for(f=0;f<S.length;f++)if(Array.isArray(S[f])){var F=S[f];if(!(2>F.length)){var X=F[1];if(Array.isArray(X)&&!(1>X.length)){var ne=X[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var ve=1;ve<X.length;ve++)X[ve]=""}}}}return To(S)}catch{return x}}var b={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},B={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},z;function J(){}v(J,wo),J.prototype.g=function(){return new XMLHttpRequest},J.prototype.i=function(){return{}},z=new J;function re(f,x,S,F){this.j=f,this.i=x,this.l=S,this.R=F||1,this.U=new rn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Z}function Z(){this.i=null,this.g="",this.h=!1}var ee={},te={};function le(f,x,S){f.L=1,f.v=Mf(Pi(x)),f.m=S,f.P=!0,ge(f,null)}function ge(f,x){f.F=Date.now(),we(f),f.A=Pi(f.v);var S=f.A,F=f.R;Array.isArray(F)||(F=[String(F)]),b1(S.i,"t",F),f.C=0,S=f.j.J,f.h=new Z,f.g=tx(f.j,S?x:null,!f.m),0<f.O&&(f.M=new Tt(m(f.Y,f,f.g),f.O)),x=f.U,S=f.g,F=f.ca;var X="readystatechange";Array.isArray(X)||(X&&(Rt[0]=X.toString()),X=Rt);for(var ne=0;ne<X.length;ne++){var ve=Ge(S,X[ne],F||x.handleEvent,!1,x.h||x);if(!ve)break;x.g[ve.key]=ve}x=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,x)):(f.u="GET",f.g.ea(f.A,f.u,null,x)),va(),np(f.i,f.u,f.A,f.l,f.R,f.m)}re.prototype.ca=function(f){f=f.target;const x=this.M;x&&Di(f)==3?x.j():this.Y(f)},re.prototype.Y=function(f){try{if(f==this.g)e:{const Tn=Di(this.g);var x=this.g.Ba();const ko=this.g.Z();if(!(3>Tn)&&(Tn!=3||this.g&&(this.h.h||this.g.oa()||$1(this.g)))){this.J||Tn!=4||x==7||(x==8||0>=ko?va(3):va(2)),ot(this);var S=this.g.Z();this.X=S;t:if(Se(this)){var F=$1(this.g);f="";var X=F.length,ne=Di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vt(this),rt(this);var ve="";break t}this.h.i=new o.TextDecoder}for(x=0;x<X;x++)this.h.h=!0,f+=this.h.i.decode(F[x],{stream:!(ne&&x==X-1)});F.length=0,this.h.g+=f,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=S==200,rp(this.i,this.u,this.A,this.l,this.R,Tn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,dn=this.g;if((lt=dn.g?dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(lt)){var et=lt;break t}}et=null}if(S=et)R(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ri(this,S);else{this.o=!1,this.s=3,hn(12),vt(this),rt(this);break e}}if(this.P){S=!0;let Wr;for(;!this.J&&this.C<ve.length;)if(Wr=de(this,ve),Wr==te){Tn==4&&(this.s=4,hn(14),S=!1),R(this.i,this.l,null,"[Incomplete Response]");break}else if(Wr==ee){this.s=4,hn(15),R(this.i,this.l,ve,"[Invalid Chunk]"),S=!1;break}else R(this.i,this.l,Wr,null),Ri(this,Wr);if(Se(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tn!=4||ve.length!=0||this.h.h||(this.s=1,hn(16),S=!1),this.o=this.o&&S,!S)R(this.i,this.l,ve,"[Invalid Chunked Response]"),vt(this),rt(this);else if(0<ve.length&&!this.W){this.W=!0;var En=this.j;En.g==this&&En.ba&&!En.M&&(En.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),lp(En),En.M=!0,hn(11))}}else R(this.i,this.l,ve,null),Ri(this,ve);Tn==4&&vt(this),this.o&&!this.J&&(Tn==4?Q1(this.j,this):(this.o=!1,we(this)))}else KP(this.g),S==400&&0<ve.indexOf("Unknown SID")?(this.s=3,hn(12)):(this.s=0,hn(13)),vt(this),rt(this)}}}catch{}finally{}};function Se(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function de(f,x){var S=f.C,F=x.indexOf(`
`,S);return F==-1?te:(S=Number(x.substring(S,F)),isNaN(S)?ee:(F+=1,F+S>x.length?te:(x=x.slice(F,F+S),f.C=F+S,x)))}re.prototype.cancel=function(){this.J=!0,vt(this)};function we(f){f.S=Date.now()+f.I,Le(f,f.I)}function Le(f,x){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ki(m(f.ba,f),x)}function ot(f){f.B&&(o.clearTimeout(f.B),f.B=null)}re.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(U(this.i,this.A),this.L!=2&&(va(),hn(17)),vt(this),this.s=2,rt(this)):Le(this,this.S-f)};function rt(f){f.j.G==0||f.J||Q1(f.j,f)}function vt(f){ot(f);var x=f.M;x&&typeof x.ma=="function"&&x.ma(),f.M=null,li(f.U),f.g&&(x=f.g,f.g=null,x.abort(),x.ma())}function Ri(f,x){try{var S=f.j;if(S.G!=0&&(S.g==f||or(S.h,f))){if(!f.K&&or(S.h,f)&&S.G==3){try{var F=S.Da.g.parse(x)}catch{F=null}if(Array.isArray(F)&&F.length==3){var X=F;if(X[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<f.F)Bf(S),Vf(S);else break e;op(S),hn(18)}}else S.za=X[1],0<S.za-S.T&&37500>X[2]&&S.F&&S.v==0&&!S.C&&(S.C=ki(m(S.Za,S),6e3));if(1>=So(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Ea(S,11)}else if((f.K||S.g==f)&&Bf(S),!T(x))for(X=S.Da.g.parse(x),x=0;x<X.length;x++){let et=X[x];if(S.T=et[0],et=et[1],S.G==2)if(et[0]=="c"){S.K=et[1],S.ia=et[2];const En=et[3];En!=null&&(S.la=En,S.j.info("VER="+S.la));const Tn=et[4];Tn!=null&&(S.Aa=Tn,S.j.info("SVER="+S.Aa));const ko=et[5];ko!=null&&typeof ko=="number"&&0<ko&&(F=1.5*ko,S.L=F,S.j.info("backChannelRequestTimeoutMs_="+F)),F=S;const Wr=f.g;if(Wr){const zf=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zf){var ne=F.h;ne.g||zf.indexOf("spdy")==-1&&zf.indexOf("quic")==-1&&zf.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(ip(ne,ne.h),ne.h=null))}if(F.D){const cp=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;cp&&(F.ya=cp,pt(F.I,F.D,cp))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-f.F,S.j.info("Handshake RTT: "+S.R+"ms")),F=S;var ve=f;if(F.qa=ex(F,F.J?F.ia:null,F.W),ve.K){R1(F.h,ve);var lt=ve,dn=F.L;dn&&(lt.I=dn),lt.B&&(ot(lt),we(lt)),F.g=ve}else Y1(F);0<S.i.length&&Uf(S)}else et[0]!="stop"&&et[0]!="close"||Ea(S,7);else S.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Ea(S,7):ap(S):et[0]!="noop"&&S.l&&S.l.ta(et),S.v=0)}}va(4)}catch{}}var xa=class{constructor(f,x){this.g=f,this.map=x}};function os(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ci(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function So(f){return f.h?1:f.g?f.g.size:0}function or(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function ip(f,x){f.g?f.g.add(x):f.h=x}function R1(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}os.prototype.cancel=function(){if(this.i=P1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function P1(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const S of f.g.values())x=x.concat(S.D);return x}return _(f.i)}function NP(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var x=[],S=f.length,F=0;F<S;F++)x.push(f[F]);return x}x=[],S=0;for(F in f)x[S++]=f[F];return x}function FP(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var x=[];f=f.length;for(var S=0;S<f;S++)x.push(S);return x}x=[],S=0;for(const F in f)x[S++]=F;return x}}}function D1(f,x){if(f.forEach&&typeof f.forEach=="function")f.forEach(x,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,x,void 0);else for(var S=FP(f),F=NP(f),X=F.length,ne=0;ne<X;ne++)x.call(void 0,F[ne],S&&S[ne],f)}var N1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MP(f,x){if(f){f=f.split("&");for(var S=0;S<f.length;S++){var F=f[S].indexOf("="),X=null;if(0<=F){var ne=f[S].substring(0,F);X=f[S].substring(F+1)}else ne=f[S];x(ne,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function ya(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof ya){this.h=f.h,Nf(this,f.j),this.o=f.o,this.g=f.g,Ff(this,f.s),this.l=f.l;var x=f.i,S=new uc;S.i=x.i,x.g&&(S.g=new Map(x.g),S.h=x.h),F1(this,S),this.m=f.m}else f&&(x=String(f).match(N1))?(this.h=!1,Nf(this,x[1]||"",!0),this.o=lc(x[2]||""),this.g=lc(x[3]||"",!0),Ff(this,x[4]),this.l=lc(x[5]||"",!0),F1(this,x[6]||"",!0),this.m=lc(x[7]||"")):(this.h=!1,this.i=new uc(null,this.h))}ya.prototype.toString=function(){var f=[],x=this.j;x&&f.push(cc(x,M1,!0),":");var S=this.g;return(S||x=="file")&&(f.push("//"),(x=this.o)&&f.push(cc(x,M1,!0),"@"),f.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&f.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&f.push("/"),f.push(cc(S,S.charAt(0)=="/"?bP:LP,!0))),(S=this.i.toString())&&f.push("?",S),(S=this.m)&&f.push("#",cc(S,UP)),f.join("")};function Pi(f){return new ya(f)}function Nf(f,x,S){f.j=S?lc(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function Ff(f,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);f.s=x}else f.s=null}function F1(f,x,S){x instanceof uc?(f.i=x,BP(f.i,f.h)):(S||(x=cc(x,VP)),f.i=new uc(x,f.h))}function pt(f,x,S){f.i.set(x,S)}function Mf(f){return pt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function lc(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function cc(f,x,S){return typeof f=="string"?(f=encodeURI(f).replace(x,OP),S&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function OP(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var M1=/[#\/\?@]/g,LP=/[#\?:]/g,bP=/[#\?]/g,VP=/[#\?@]/g,UP=/#/g;function uc(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function ls(f){f.g||(f.g=new Map,f.h=0,f.i&&MP(f.i,function(x,S){f.add(decodeURIComponent(x.replace(/\+/g," ")),S)}))}n=uc.prototype,n.add=function(f,x){ls(this),this.i=null,f=Ao(this,f);var S=this.g.get(f);return S||this.g.set(f,S=[]),S.push(x),this.h+=1,this};function O1(f,x){ls(f),x=Ao(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function L1(f,x){return ls(f),x=Ao(f,x),f.g.has(x)}n.forEach=function(f,x){ls(this),this.g.forEach(function(S,F){S.forEach(function(X){f.call(x,X,F,this)},this)},this)},n.na=function(){ls(this);const f=Array.from(this.g.values()),x=Array.from(this.g.keys()),S=[];for(let F=0;F<x.length;F++){const X=f[F];for(let ne=0;ne<X.length;ne++)S.push(x[F])}return S},n.V=function(f){ls(this);let x=[];if(typeof f=="string")L1(this,f)&&(x=x.concat(this.g.get(Ao(this,f))));else{f=Array.from(this.g.values());for(let S=0;S<f.length;S++)x=x.concat(f[S])}return x},n.set=function(f,x){return ls(this),this.i=null,f=Ao(this,f),L1(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},n.get=function(f,x){return f?(f=this.V(f),0<f.length?String(f[0]):x):x};function b1(f,x,S){O1(f,x),0<S.length&&(f.i=null,f.g.set(Ao(f,x),_(S)),f.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(var S=0;S<x.length;S++){var F=x[S];const ne=encodeURIComponent(String(F)),ve=this.V(F);for(F=0;F<ve.length;F++){var X=ne;ve[F]!==""&&(X+="="+encodeURIComponent(String(ve[F]))),f.push(X)}}return this.i=f.join("&")};function Ao(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function BP(f,x){x&&!f.j&&(ls(f),f.i=null,f.g.forEach(function(S,F){var X=F.toLowerCase();F!=X&&(O1(this,F),b1(this,X,S))},f)),f.j=x}function GP(f,x){const S=new _a;if(o.Image){const F=new Image;F.onload=g(cs,S,"TestLoadImage: loaded",!0,x,F),F.onerror=g(cs,S,"TestLoadImage: error",!1,x,F),F.onabort=g(cs,S,"TestLoadImage: abort",!1,x,F),F.ontimeout=g(cs,S,"TestLoadImage: timeout",!1,x,F),o.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=f}else x(!1)}function zP(f,x){const S=new _a,F=new AbortController,X=setTimeout(()=>{F.abort(),cs(S,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:F.signal}).then(ne=>{clearTimeout(X),ne.ok?cs(S,"TestPingServer: ok",!0,x):cs(S,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(X),cs(S,"TestPingServer: error",!1,x)})}function cs(f,x,S,F,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),F(S)}catch{}}function HP(){this.g=new tp}function $P(f,x,S){const F=S||"";try{D1(f,function(X,ne){let ve=X;c(X)&&(ve=To(X)),x.push(F+ne+"="+encodeURIComponent(ve))})}catch(X){throw x.push(F+"type="+encodeURIComponent("_badmap")),X}}function Of(f){this.l=f.Ub||null,this.j=f.eb||!1}v(Of,wo),Of.prototype.g=function(){return new Lf(this.l,this.j)},Of.prototype.i=function(f){return function(){return f}}({});function Lf(f,x){dt.call(this),this.D=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Lf,dt),n=Lf.prototype,n.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=x,this.readyState=1,hc(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(x.body=f),(this.D||o).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fc(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,hc(this)),this.g&&(this.readyState=3,hc(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;V1(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function V1(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?fc(this):hc(this),this.readyState==3&&V1(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,fc(this))},n.Qa=function(f){this.g&&(this.response=f,fc(this))},n.ga=function(){this.g&&fc(this)};function fc(f){f.readyState=4,f.l=null,f.j=null,f.v=null,hc(f)}n.setRequestHeader=function(f,x){this.u.append(f,x)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var S=x.next();!S.done;)S=S.value,f.push(S[0]+": "+S[1]),S=x.next();return f.join(`\r
`)};function hc(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Lf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function U1(f){let x="";return L(f,function(S,F){x+=F,x+=":",x+=S,x+=`\r
`}),x}function sp(f,x,S){e:{for(F in S){var F=!1;break e}F=!0}F||(S=U1(S),typeof f=="string"?S!=null&&encodeURIComponent(String(S)):pt(f,x,S))}function Pt(f){dt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Pt,dt);var WP=/^https?$/i,qP=["POST","PUT"];n=Pt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,x,S,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():z.g(),this.v=this.o?sc(this.o):sc(z),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(ne){B1(this,ne);return}if(f=S||"",S=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var X in F)S.set(X,F[X]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ne of F.keys())S.set(ne,F.get(ne));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(S.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=o.FormData&&f instanceof o.FormData,!(0<=Array.prototype.indexOf.call(qP,x,void 0))||F||X||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ve]of S)this.g.setRequestHeader(ne,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{H1(this),this.u=!0,this.g.send(f),this.u=!1}catch(ne){B1(this,ne)}};function B1(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.m=5,G1(f),bf(f)}function G1(f){f.A||(f.A=!0,Vt(f,"complete"),Vt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Vt(this,"complete"),Vt(this,"abort"),bf(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bf(this,!0)),Pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?z1(this):this.bb())},n.bb=function(){z1(this)};function z1(f){if(f.h&&typeof a<"u"&&(!f.v[1]||Di(f)!=4||f.Z()!=2)){if(f.u&&Di(f)==4)ar(f.Ea,0,f);else if(Vt(f,"readystatechange"),Di(f)==4){f.h=!1;try{const ve=f.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var S;if(!(S=x)){var F;if(F=ve===0){var X=String(f.D).match(N1)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),F=!WP.test(X?X.toLowerCase():"")}S=F}if(S)Vt(f,"complete"),Vt(f,"success");else{f.m=6;try{var ne=2<Di(f)?f.g.statusText:""}catch{ne=""}f.l=ne+" ["+f.Z()+"]",G1(f)}}finally{bf(f)}}}}function bf(f,x){if(f.g){H1(f);const S=f.g,F=f.v[0]?()=>{}:null;f.g=null,f.v=null,x||Vt(f,"ready");try{S.onreadystatechange=F}catch{}}}function H1(f){f.I&&(o.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Di(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),ep(x)}};function $1(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function KP(f){const x={};f=(f.g&&2<=Di(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<f.length;F++){if(T(f[F]))continue;var S=D(f[F]);const X=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ne=x[X]||[];x[X]=ne,ne.push(S)}I(x,function(F){return F.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dc(f,x,S){return S&&S.internalChannelParams&&S.internalChannelParams[f]||x}function W1(f){this.Aa=0,this.i=[],this.j=new _a,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dc("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dc("baseRetryDelayMs",5e3,f),this.cb=dc("retryDelaySeedMs",1e4,f),this.Wa=dc("forwardChannelMaxRetries",2,f),this.wa=dc("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new os(f&&f.concurrentRequestLimit),this.Da=new HP,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=W1.prototype,n.la=8,n.G=1,n.connect=function(f,x,S,F){hn(0),this.W=f,this.H=x||{},S&&F!==void 0&&(this.H.OSID=S,this.H.OAID=F),this.F=this.X,this.I=ex(this,null,this.W),Uf(this)};function ap(f){if(q1(f),f.G==3){var x=f.U++,S=Pi(f.I);if(pt(S,"SID",f.K),pt(S,"RID",x),pt(S,"TYPE","terminate"),pc(f,S),x=new re(f,f.j,x),x.L=2,x.v=Mf(Pi(S)),S=!1,o.navigator&&o.navigator.sendBeacon)try{S=o.navigator.sendBeacon(x.v.toString(),"")}catch{}!S&&o.Image&&(new Image().src=x.v,S=!0),S||(x.g=tx(x.j,null),x.g.ea(x.v)),x.F=Date.now(),we(x)}Z1(f)}function Vf(f){f.g&&(lp(f),f.g.cancel(),f.g=null)}function q1(f){Vf(f),f.u&&(o.clearTimeout(f.u),f.u=null),Bf(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&o.clearTimeout(f.s),f.s=null)}function Uf(f){if(!ci(f.h)&&!f.s){f.s=!0;var x=f.Ga;Ee||he(),ce||(Ee(),ce=!0),q.add(x,f),f.B=0}}function jP(f,x){return So(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=x.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ki(m(f.Ga,f,x),J1(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const X=new re(this,this.j,f);let ne=this.o;if(this.S&&(ne?(ne=A(ne),P(ne,this.S)):ne=this.S),this.m!==null||this.O||(X.H=ne,ne=null),this.P)e:{for(var x=0,S=0;S<this.i.length;S++){t:{var F=this.i[S];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(x+=F,4096<x){x=S;break e}if(x===4096||S===this.i.length-1){x=S+1;break e}}x=1e3}else x=1e3;x=j1(this,X,x),S=Pi(this.I),pt(S,"RID",f),pt(S,"CVER",22),this.D&&pt(S,"X-HTTP-Session-Id",this.D),pc(this,S),ne&&(this.O?x="headers="+encodeURIComponent(String(U1(ne)))+"&"+x:this.m&&sp(S,this.m,ne)),ip(this.h,X),this.Ua&&pt(S,"TYPE","init"),this.P?(pt(S,"$req",x),pt(S,"SID","null"),X.T=!0,le(X,S,null)):le(X,S,x),this.G=2}}else this.G==3&&(f?K1(this,f):this.i.length==0||ci(this.h)||K1(this))};function K1(f,x){var S;x?S=x.l:S=f.U++;const F=Pi(f.I);pt(F,"SID",f.K),pt(F,"RID",S),pt(F,"AID",f.T),pc(f,F),f.m&&f.o&&sp(F,f.m,f.o),S=new re(f,f.j,S,f.B+1),f.m===null&&(S.H=f.o),x&&(f.i=x.D.concat(f.i)),x=j1(f,S,1e3),S.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ip(f.h,S),le(S,F,x)}function pc(f,x){f.H&&L(f.H,function(S,F){pt(x,F,S)}),f.l&&D1({},function(S,F){pt(x,F,S)})}function j1(f,x,S){S=Math.min(f.i.length,S);var F=f.l?m(f.l.Na,f.l,f):null;e:{var X=f.i;let ne=-1;for(;;){const ve=["count="+S];ne==-1?0<S?(ne=X[0].g,ve.push("ofs="+ne)):ne=0:ve.push("ofs="+ne);let lt=!0;for(let dn=0;dn<S;dn++){let et=X[dn].g;const En=X[dn].map;if(et-=ne,0>et)ne=Math.max(0,X[dn].g-100),lt=!1;else try{$P(En,ve,"req"+et+"_")}catch{F&&F(En)}}if(lt){F=ve.join("&");break e}}}return f=f.i.splice(0,S),x.D=f,F}function Y1(f){if(!f.g&&!f.u){f.Y=1;var x=f.Fa;Ee||he(),ce||(Ee(),ce=!0),q.add(x,f),f.v=0}}function op(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ki(m(f.Fa,f),J1(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,X1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ki(m(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hn(10),Vf(this),X1(this))};function lp(f){f.A!=null&&(o.clearTimeout(f.A),f.A=null)}function X1(f){f.g=new re(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var x=Pi(f.qa);pt(x,"RID","rpc"),pt(x,"SID",f.K),pt(x,"AID",f.T),pt(x,"CI",f.F?"0":"1"),!f.F&&f.ja&&pt(x,"TO",f.ja),pt(x,"TYPE","xmlhttp"),pc(f,x),f.m&&f.o&&sp(x,f.m,f.o),f.L&&(f.g.I=f.L);var S=f.g;f=f.ia,S.L=1,S.v=Mf(Pi(x)),S.m=null,S.P=!0,ge(S,f)}n.Za=function(){this.C!=null&&(this.C=null,Vf(this),op(this),hn(19))};function Bf(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function Q1(f,x){var S=null;if(f.g==x){Bf(f),lp(f),f.g=null;var F=2}else if(or(f.h,x))S=x.D,R1(f.h,x),F=1;else return;if(f.G!=0){if(x.o)if(F==1){S=x.m?x.m.length:0,x=Date.now()-x.F;var X=f.B;F=Io(),Vt(F,new Df(F,S)),Uf(f)}else Y1(f);else if(X=x.s,X==3||X==0&&0<x.X||!(F==1&&jP(f,x)||F==2&&op(f)))switch(S&&0<S.length&&(x=f.h,x.i=x.i.concat(S)),X){case 1:Ea(f,5);break;case 4:Ea(f,10);break;case 3:Ea(f,6);break;default:Ea(f,2)}}}function J1(f,x){let S=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(S*=2),S*x}function Ea(f,x){if(f.j.info("Error code "+x),x==2){var S=m(f.fb,f),F=f.Xa;const X=!F;F=new ya(F||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Nf(F,"https"),Mf(F),X?GP(F.toString(),S):zP(F.toString(),S)}else hn(2);f.G=0,f.l&&f.l.sa(x),Z1(f),q1(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function Z1(f){if(f.G=0,f.ka=[],f.l){const x=P1(f.h);(x.length!=0||f.i.length!=0)&&(E(f.ka,x),E(f.ka,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.ra()}}function ex(f,x,S){var F=S instanceof ya?Pi(S):new ya(S);if(F.g!="")x&&(F.g=x+"."+F.g),Ff(F,F.s);else{var X=o.location;F=X.protocol,x=x?x+"."+X.hostname:X.hostname,X=+X.port;var ne=new ya(null);F&&Nf(ne,F),x&&(ne.g=x),X&&Ff(ne,X),S&&(ne.l=S),F=ne}return S=f.D,x=f.ya,S&&x&&pt(F,S,x),pt(F,"VER",f.la),pc(f,F),F}function tx(f,x,S){if(x&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Ca&&!f.pa?new Pt(new Of({eb:S})):new Pt(f.pa),x.Ha(f.J),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nx(){}n=nx.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Gf(){}Gf.prototype.g=function(f,x){return new lr(f,x)};function lr(f,x){dt.call(this),this.g=new W1(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(f?f["X-WebChannel-Client-Profile"]=x.va:f={"X-WebChannel-Client-Profile":x.va}),this.g.S=f,(f=x&&x.Sb)&&!T(f)&&(this.g.m=f),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!T(x)&&(this.g.D=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new Co(this)}v(lr,dt),lr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lr.prototype.close=function(){ap(this.g)},lr.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var S={};S.__data__=f,f=S}else this.u&&(S={},S.__data__=To(f),f=S);x.i.push(new xa(x.Ya++,f)),x.G==3&&Uf(x)},lr.prototype.N=function(){this.g.l=null,delete this.j,ap(this.g),delete this.g,lr.aa.N.call(this)};function rx(f){oc.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const S in x){f=S;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}v(rx,oc);function ix(){as.call(this),this.status=1}v(ix,as);function Co(f){this.g=f}v(Co,nx),Co.prototype.ua=function(){Vt(this.g,"a")},Co.prototype.ta=function(f){Vt(this.g,new rx(f))},Co.prototype.sa=function(f){Vt(this.g,new ix)},Co.prototype.ra=function(){Vt(this.g,"b")},Gf.prototype.createWebChannel=Gf.prototype.g,lr.prototype.send=lr.prototype.o,lr.prototype.open=lr.prototype.m,lr.prototype.close=lr.prototype.close,qA=function(){return new Gf},WA=function(){return Io()},$A=Ci,lg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},b.NO_ERROR=0,b.TIMEOUT=8,b.HTTP_ERROR=6,bh=b,B.COMPLETE="complete",HA=B,ac.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Lc=ac,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,zA=Pt}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});const Dy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new Wv("@firebase/firestore");function Lo(){return Ys.logLevel}function KM(n){Ys.setLogLevel(n)}function oe(n,...e){if(Ys.logLevel<=We.DEBUG){const t=e.map(Kv);Ys.debug(`Firestore (${$l}): ${n}`,...t)}}function Gt(n,...e){if(Ys.logLevel<=We.ERROR){const t=e.map(Kv);Ys.error(`Firestore (${$l}): ${n}`,...t)}}function bu(n,...e){if(Ys.logLevel<=We.WARN){const t=e.map(Kv);Ys.warn(`Firestore (${$l}): ${n}`,...t)}}function Kv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n="Unexpected state"){const e=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: `+n;throw Gt(e),new Error(e)}function Ne(n,e){n||Pe()}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Ii{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cn.UNAUTHENTICATED))}shutdown(){}}class XM{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ne(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $i,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $i)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string"),new jM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string"),new Cn(e)}}class QM{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class JM{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new QM(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ne(this.o===void 0);const r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ne(typeof t.token=="string"),this.R=t.token,new ZM(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=tO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function be(n,e){return n<e?-1:n>e?1:0}function Tl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function jA(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ct(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Ct(0,0))}static max(){return new Fe(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t,r){t===void 0?t=0:t>e.length&&Pe(),r===void 0?r=e.length-t:r>e.length-t&&Pe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Vu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nt extends Vu{construct(e,t,r){return new nt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new nt(t)}static emptyPath(){return new nt([])}}const nO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Vu{construct(e,t,r){return new It(e,t,r)}static isValidIdentifier(e){return nO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new xe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new xe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new xe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new xe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(t)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(nt.fromString(e))}static fromName(e){return new Ie(nt.fromString(e).popFirst(5))}static empty(){return new Ie(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new nt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function cg(n){return n.fields.find(e=>e.kind===2)}function Aa(n){return n.fields.filter(e=>e.kind!==2)}kd.UNKNOWN_ID=-1;class Vh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Uu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Uu(0,xr.min())}}function YA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(r===1e9?new Ct(t+1,0):new Ct(t,r));return new xr(i,Ie.empty(),e)}function XA(n){return new xr(n.readTime,n.key,-1)}class xr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xr(Fe.min(),Ie.empty(),-1)}static max(){return new xr(Fe.max(),Ie.empty(),-1)}}function jv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==QA)throw n;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.reject(t)}static resolve(e){return new Q((t,r)=>{t(e)})}static reject(e){return new Q((t,r)=>{r(e)})}static waitFor(e){return new Q((t,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&t()},l=>r(l))}),a=!0,s===i&&t()})}static or(e){let t=Q.resolve(!1);for(const r of e)t=t.next(i=>i?Q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Q((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{a[c]=u,++o,o===s&&r(a)},u=>i(u))}})}static doWhile(e,t){return new Q((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new $i,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Zc(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Yv(r.target.error);this.V.reject(new Zc(e,i))}}static open(e,t,r,i){try{return new R0(t,e.transaction(i,r))}catch(s){throw new Zc(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iO(t)}}class zs{constructor(e,t,r){this.name=e,this.version=t,this.p=r,zs.S(tn())===12.2&&Gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return oe("SimpleDb","Removing database:",e),Ca(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!MA())return!1;if(zs.v())return!0;const e=tn(),t=zs.S(e),r=0<t&&t<10,i=ZA(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(oe("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new Zc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new xe(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new xe(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Zc(e,a))},i.onupgradeneeded=s=>{oe("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next(()=>{oe("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=R0.open(this.db,e,s?"readonly":"readwrite",r),l=i(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),Q.reject(c))).toPromise();return l.catch(()=>{}),await o.m,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(oe("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ZA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class rO{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ca(this.B.delete())}}class Zc extends xe{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function aa(n){return n.name==="IndexedDbTransactionError"}class iO{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ca(r)}add(e){return oe("SimpleDb","ADD",this.store.name,e,e),Ca(this.store.add(e))}get(e){return Ca(this.store.get(e)).next(t=>(t===void 0&&(t=null),oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return oe("SimpleDb","DELETE",this.store.name,e),Ca(this.store.delete(e))}count(){return oe("SimpleDb","COUNT",this.store.name),Ca(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Q((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(r),a=[];return this.W(s,(o,l)=>{a.push(l)}).next(()=>a)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new Q((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}j(e,t){oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,a,o)=>o.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Q((r,i)=>{t.onerror=s=>{const a=Yv(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}W(e,t){const r=[];return new Q((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new rO(o),c=t(o.primaryKey,o.value,l);if(c instanceof Q){const u=c.catch(h=>(l.done(),Q.reject(h)));r.push(u)}l.isDone?i():l.K===null?o.continue():o.continue(l.K)}}).next(()=>Q.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ca(n){return new Q((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Yv(r.target.error);t(i)}})}let Ny=!1;function Yv(n){const e=zs.S(tn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ny||(Ny=!0,setTimeout(()=>{throw r},0)),r}}return n}class sO{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){oe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{oe("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){aa(t)?oe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await sa(t)}await this.X(6e4)})}}class aO{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return Q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return oe("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next(o=>{i-=o,r.add(a)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(i,s)).next(o=>(oe("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o))).next(()=>a.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const a=XA(s);jv(a,r)>0&&(r=a)}),new xr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tr.oe=-1;function P0(n){return n==null}function Bu(n){return n===0&&1/n==-1/0}function eC(n){return typeof n=="number"&&Number.isInteger(n)&&!Bu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Fy(e)),e=oO(n.get(t),e);return Fy(e)}function oO(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function Fy(n){return n+""}function mi(n){const e=n.length;if(Ne(e>=2),e===2)return Ne(n.charAt(0)===""&&n.charAt(1)===""),nt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("",s);switch((a<0||a>t)&&Pe(),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Pe()}s=a+2}return new nt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(n,e){return[n,$n(e)]}function tC(n,e,t){return[n,$n(e),t]}const lO={},cO=["prefixPath","collectionGroup","readTime","documentId"],uO=["prefixPath","collectionGroup","documentId"],fO=["collectionGroup","readTime","prefixPath","documentId"],hO=["canonicalId","targetId"],dO=["targetId","path"],pO=["path","targetId"],mO=["collectionId","parent"],gO=["indexId","uid"],vO=["uid","sequenceNumber"],_O=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xO=["indexId","uid","orderedDocumentKey"],yO=["userId","collectionPath","documentId"],EO=["userId","collectionPath","largestBatchId"],TO=["userId","collectionGroup","largestBatchId"],nC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wO=[...nC,"documentOverlays"],rC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],iC=rC,Xv=[...iC,"indexConfiguration","indexState","indexEntries"],IO=Xv,SO=[...Xv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends JA{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function nn(n,e){const t=De(n);return zs.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??mn.RED,this.left=i??mn.EMPTY,this.right=s??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new mn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return mn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ly(this.data.getIterator())}getIteratorFrom(e){return new Ly(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class Ly{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Do(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Nr([])}unionWith(e){let t=new at(It.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new aC("Invalid base64 string: "+s):s}}(e);return new zt(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const AO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(n){if(Ne(!!n),typeof n=="string"){let e=0;const t=AO.exec(n);if(Ne(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xs(n){return typeof n=="string"?zt.fromBase64String(n):zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Jv(n){const e=n.mapValue.fields.__previous_value__;return Qv(e)?Jv(e):e}function Gu(n){const e=Zi(n.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,t,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class Xa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bh={nullValue:"NULL_VALUE"};function Qa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qv(n)?4:oC(n)?9007199254740991:D0(n)?10:11:Pe()}function Ti(n,e){if(n===e)return!0;const t=Qa(n);if(t!==Qa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gu(n).isEqual(Gu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Zi(i.timestampValue),o=Zi(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Xs(i.bytesValue).isEqual(Xs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return _t(i.geoPointValue.latitude)===_t(s.geoPointValue.latitude)&&_t(i.geoPointValue.longitude)===_t(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _t(i.integerValue)===_t(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=_t(i.doubleValue),o=_t(s.doubleValue);return a===o?Bu(a)===Bu(o):isNaN(a)&&isNaN(o)}return!1}(n,e);case 9:return Tl(n.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(Oy(a)!==Oy(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ti(a[l],o[l])))return!1;return!0}(n,e);default:return Pe()}}function zu(n,e){return(n.values||[]).find(t=>Ti(t,e))!==void 0}function Qs(n,e){if(n===e)return 0;const t=Qa(n),r=Qa(e);if(t!==r)return be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return function(s,a){const o=_t(s.integerValue||s.doubleValue),l=_t(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,e);case 3:return by(n.timestampValue,e.timestampValue);case 4:return by(Gu(n),Gu(e));case 5:return be(n.stringValue,e.stringValue);case 6:return function(s,a){const o=Xs(s),l=Xs(a);return o.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=be(o[c],l[c]);if(u!==0)return u}return be(o.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const o=be(_t(s.latitude),_t(a.latitude));return o!==0?o:be(_t(s.longitude),_t(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Vy(n.arrayValue,e.arrayValue);case 10:return function(s,a){var o,l,c,u;const h=s.fields||{},m=a.fields||{},g=(o=h.value)===null||o===void 0?void 0:o.arrayValue,v=(l=m.value)===null||l===void 0?void 0:l.arrayValue,_=be(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:Vy(g,v)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===ks.mapValue&&a===ks.mapValue)return 0;if(s===ks.mapValue)return 1;if(a===ks.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const m=be(l[h],u[h]);if(m!==0)return m;const g=Qs(o[l[h]],c[u[h]]);if(g!==0)return g}return be(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Pe()}}function by(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);const t=Zi(n),r=Zi(e),i=be(t.seconds,r.seconds);return i!==0?i:be(t.nanos,r.nanos)}function Vy(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Qs(t[i],r[i]);if(s)return s}return be(t.length,r.length)}function wl(n){return fg(n)}function fg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Zi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Xs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ie.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=fg(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${fg(t.fields[a])}`;return i+"}"}(n.mapValue):Pe()}function Hu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hg(n){return!!n&&"integerValue"in n}function $u(n){return!!n&&"arrayValue"in n}function Uy(n){return!!n&&"nullValue"in n}function By(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gh(n){return!!n&&"mapValue"in n}function D0(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function eu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=eu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function oC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const lC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function kO(n){return"nullValue"in n?Bh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Hu(Xa.empty(),Ie.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?D0(n)?lC:{mapValue:{}}:Pe()}function RO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Hu(Xa.empty(),Ie.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?lC:"mapValue"in n?D0(n)?{mapValue:{}}:ks:Pe()}function Gy(n,e){const t=Qs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function zy(n,e){const t=Qs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(t)}setAll(e){let t=It.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=eu(a):i.push(o.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Gh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Gh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wl(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Zn(eu(this.value))}}function cC(n){const e=[];return Wl(n.fields,(t,r)=>{const i=new It([t]);if(Gh(r)){const s=cC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Ft(e,0,Fe.min(),Fe.min(),Fe.min(),Zn.empty(),0)}static newFoundDocument(e,t,r,i){return new Ft(e,1,t,Fe.min(),r,i,0)}static newNoDocument(e,t){return new Ft(e,2,t,Fe.min(),Fe.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Fe.min(),Fe.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t){this.position=e,this.inclusive=t}}function Hy(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=Ie.comparator(Ie.fromName(a.referenceValue),t.key):r=Qs(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $y(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ti(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t="asc"){this.field=e,this.dir=t}}function PO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{}class qe extends uC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new DO(e,t,r):t==="array-contains"?new MO(e,r):t==="in"?new gC(e,r):t==="not-in"?new OO(e,r):t==="array-contains-any"?new LO(e,r):new qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new NO(e,r):new FO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Qs(t,this.value)):t!==null&&Qa(this.value)===Qa(t)&&this.matchesComparison(Qs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class it extends uC{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new it(e,t)}matches(e){return Sl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Sl(n){return n.op==="and"}function dg(n){return n.op==="or"}function Zv(n){return fC(n)&&Sl(n)}function fC(n){for(const e of n.filters)if(e instanceof it)return!1;return!0}function pg(n){if(n instanceof qe)return n.field.canonicalString()+n.op.toString()+wl(n.value);if(Zv(n))return n.filters.map(e=>pg(e)).join(",");{const e=n.filters.map(t=>pg(t)).join(",");return`${n.op}(${e})`}}function hC(n,e){return n instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.field.isEqual(i.field)&&Ti(r.value,i.value)}(n,e):n instanceof it?function(r,i){return i instanceof it&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&hC(a,i.filters[o]),!0):!1}(n,e):void Pe()}function dC(n,e){const t=n.filters.concat(e);return it.create(t,n.op)}function pC(n){return n instanceof qe?function(t){return`${t.field.canonicalString()} ${t.op} ${wl(t.value)}`}(n):n instanceof it?function(t){return t.op.toString()+" {"+t.getFilters().map(pC).join(" ,")+"}"}(n):"Filter"}class DO extends qe{constructor(e,t,r){super(e,t,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class NO extends qe{constructor(e,t){super(e,"in",t),this.keys=mC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class FO extends qe{constructor(e,t){super(e,"not-in",t),this.keys=mC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ie.fromName(r.referenceValue))}class MO extends qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $u(t)&&zu(t.arrayValue,this.value)}}class gC extends qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&zu(this.value.arrayValue,t)}}class OO extends qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!zu(this.value.arrayValue,t)}}class LO extends qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$u(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function mg(n,e=null,t=[],r=[],i=null,s=null,a=null){return new bO(n,e,t,r,i,s,a)}function Ja(n){const e=De(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>pg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),P0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wl(r)).join(",")),e.ue=t}return e.ue}function ff(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!PO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$y(n.startAt,e.startAt)&&$y(n.endAt,e.endAt)}function Pd(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Dd(n,e){return n.filters.filter(t=>t instanceof qe&&t.field.isEqual(e))}function Wy(n,e,t){let r=Bh,i=!0;for(const s of Dd(n,e)){let a=Bh,o=!0;switch(s.op){case"<":case"<=":a=kO(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=Bh}Gy({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];Gy({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function qy(n,e,t){let r=ks,i=!0;for(const s of Dd(n,e)){let a=ks,o=!0;switch(s.op){case">=":case">":a=RO(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=ks}zy({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];zy({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vC(n,e,t,r,i,s,a,o){return new hf(n,e,t,r,i,s,a,o)}function e_(n){return new hf(n)}function Ky(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _C(n){return n.collectionGroup!==null}function tu(n){const e=De(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new at(It.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Rd(s,r))}),t.has(It.keyField().canonicalString())||e.ce.push(new Rd(It.keyField(),r))}return e.ce}function vr(n){const e=De(n);return e.le||(e.le=VO(e,tu(n))),e.le}function VO(n,e){if(n.limitType==="F")return mg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Rd(i.field,s)});const t=n.endAt?new Il(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Il(n.startAt.position,n.startAt.inclusive):null;return mg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function gg(n,e){const t=n.filters.concat([e]);return new hf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vg(n,e,t){return new hf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function N0(n,e){return ff(vr(n),vr(e))&&n.limitType===e.limitType}function xC(n){return`${Ja(vr(n))}|lt:${n.limitType}`}function bo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>pC(i)).join(", ")}]`),P0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>wl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>wl(i)).join(",")),`Target(${r})`}(vr(n))}; limitType=${n.limitType})`}function df(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of tu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,o,l){const c=Hy(a,o,l);return a.inclusive?c<=0:c<0}(r.startAt,tu(r),i)||r.endAt&&!function(a,o,l){const c=Hy(a,o,l);return a.inclusive?c>=0:c>0}(r.endAt,tu(r),i))}(n,e)}function yC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EC(n){return(e,t)=>{let r=!1;for(const i of tu(n)){const s=UO(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function UO(n,e,t){const r=n.field.isKeyField()?Ie.comparator(e.key,t.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?Qs(l,c):Pe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wl(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return sC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new ft(Ie.comparator);function dr(){return BO}const TC=new ft(Ie.comparator);function bc(...n){let e=TC;for(const t of n)e=e.insert(t.key,t);return e}function wC(n){let e=TC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gi(){return nu()}function IC(){return nu()}function nu(){return new oa(n=>n.toString(),(n,e)=>n.isEqual(e))}const GO=new ft(Ie.comparator),zO=new at(Ie.comparator);function ze(...n){let e=zO;for(const t of n)e=e.add(t);return e}const HO=new at(be);function t_(){return HO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function SC(n){return{integerValue:""+n}}function $O(n,e){return eC(e)?SC(e):n_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(){this._=void 0}}function WO(n,e,t){return n instanceof Al?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Qv(s)&&(s=Jv(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Cl?CC(n,e):n instanceof kl?kC(n,e):function(i,s){const a=AC(i,s),o=jy(a)+jy(i.Pe);return hg(a)&&hg(i.Pe)?SC(o):n_(i.serializer,o)}(n,e)}function qO(n,e,t){return n instanceof Cl?CC(n,e):n instanceof kl?kC(n,e):t}function AC(n,e){return n instanceof Wu?function(r){return hg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Al extends F0{}class Cl extends F0{constructor(e){super(),this.elements=e}}function CC(n,e){const t=RC(e);for(const r of n.elements)t.some(i=>Ti(i,r))||t.push(r);return{arrayValue:{values:t}}}class kl extends F0{constructor(e){super(),this.elements=e}}function kC(n,e){let t=RC(e);for(const r of n.elements)t=t.filter(i=>!Ti(i,r));return{arrayValue:{values:t}}}class Wu extends F0{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function jy(n){return _t(n.integerValue||n.doubleValue)}function RC(n){return $u(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t){this.field=e,this.transform=t}}function KO(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Cl&&i instanceof Cl||r instanceof kl&&i instanceof kl?Tl(r.elements,i.elements,Ti):r instanceof Wu&&i instanceof Wu?Ti(r.Pe,i.Pe):r instanceof Al&&i instanceof Al}(n.transform,e.transform)}class jO{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class M0{}function DC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new r_(n.key,pr.none()):new ql(n.key,n.data,pr.none());{const t=n.data,r=Zn.empty();let i=new at(It.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new la(n.key,r,new Nr(i.toArray()),pr.none())}}function YO(n,e,t){n instanceof ql?function(i,s,a){const o=i.value.clone(),l=Xy(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(n,e,t):n instanceof la?function(i,s,a){if(!zh(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=Xy(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(NC(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function ru(n,e,t,r){return n instanceof ql?function(s,a,o,l){if(!zh(s.precondition,a))return o;const c=s.value.clone(),u=Qy(s.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof la?function(s,a,o,l){if(!zh(s.precondition,a))return o;const c=Qy(s.fieldTransforms,l,a),u=a.data;return u.setAll(NC(s)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,a,o){return zh(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(n,e,t)}function XO(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=AC(r.transform,i||null);s!=null&&(t===null&&(t=Zn.empty()),t.set(r.field,s))}return t||null}function Yy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tl(r,i,(s,a)=>KO(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ql extends M0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class la extends M0{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function NC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Xy(n,e,t){const r=new Map;Ne(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,qO(a,o,t[i]))}return r}function Qy(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,WO(s,a,e))}return r}class r_ extends M0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FC extends M0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&YO(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ru(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ru(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=IC();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=DC(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ze())}isEqual(e){return this.batchId===e.batchId&&Tl(this.mutations,e.mutations,(t,r)=>Yy(t,r))&&Tl(this.baseMutations,e.baseMutations,(t,r)=>Yy(t,r))}}class s_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ne(e.mutations.length===r.length);let i=function(){return GO}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new s_(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,je;function JO(n){switch(n){default:return Pe();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function MC(n){if(n===void 0)return Gt("GRPC error has no .code"),se.UNKNOWN;switch(n){case Wt.OK:return se.OK;case Wt.CANCELLED:return se.CANCELLED;case Wt.UNKNOWN:return se.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return se.INTERNAL;case Wt.UNAVAILABLE:return se.UNAVAILABLE;case Wt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Wt.NOT_FOUND:return se.NOT_FOUND;case Wt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Wt.ABORTED:return se.ABORTED;case Wt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Wt.DATA_LOSS:return se.DATA_LOSS;default:return Pe()}}(je=Wt||(Wt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=new Ua([4294967295,4294967295],0);function Jy(n){const e=ZO().encode(n),t=new GA;return t.update(e),new Uint8Array(t.digest())}function Zy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ua([t,r],0),new Ua([i,s],0)]}class o_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vc(`Invalid padding: ${t}`);if(r<0)throw new Vc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Vc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ua.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ua.fromNumber(r)));return i.compare(e3)===1&&(i=new Ua([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Jy(e),[r,i]=Zy(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new o_(s,i,t);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const t=Jy(e),[r,i]=Zy(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,mf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new pf(Fe.min(),i,new ft(be),dr(),ze())}}class mf{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new mf(r,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class OC{constructor(e,t){this.targetId=e,this.me=t}}class LC{constructor(e,t,r=zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class eE{constructor(){this.fe=0,this.ge=nE(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ze(),t=ze(),r=ze();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Pe()}}),new mf(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=nE()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class t3{constructor(e){this.Le=e,this.Be=new Map,this.ke=dr(),this.qe=tE(),this.Qe=new ft(be)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Pd(s))if(r===0){const a=new Ie(s.path);this.Ue(t,a,Ft.newNoDocument(a,Fe.min()))}else Ne(r===1);else{const a=this.Ye(t);if(a!==r){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=Xs(r).toUint8Array()}catch(l){if(l instanceof aC)return bu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new o_(a,i,s)}catch(l){return bu(l instanceof Vc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&Pd(o.target)){const l=new Ie(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Ft.newNoDocument(l,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=ze();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new pf(e,t,this.Qe,this.ke,r);return this.ke=dr(),this.qe=tE(),this.Qe=new ft(be),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new eE,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new at(be),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new eE),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function tE(){return new ft(Ie.comparator)}function nE(){return new ft(Ie.comparator)}const n3={asc:"ASCENDING",desc:"DESCENDING"},r3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},i3={and:"AND",or:"OR"};class s3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _g(n,e){return n.useProto3Json||P0(e)?e:{value:e}}function Rl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function a3(n,e){return Rl(n,e.toTimestamp())}function Wn(n){return Ne(!!n),Fe.fromTimestamp(function(t){const r=Zi(t);return new Ct(r.seconds,r.nanos)}(n))}function l_(n,e){return xg(n,e).canonicalString()}function xg(n,e){const t=function(i){return new nt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function VC(n){const e=nt.fromString(n);return Ne(KC(e)),e}function Nd(n,e){return l_(n.databaseId,e.path)}function Ba(n,e){const t=VC(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(GC(t))}function UC(n,e){return l_(n.databaseId,e)}function BC(n){const e=VC(n);return e.length===4?nt.emptyPath():GC(e)}function yg(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GC(n){return Ne(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function rE(n,e,t){return{name:Nd(n,e),fields:t.value.mapValue.fields}}function o3(n,e,t){const r=Ba(n,e.name),i=Wn(e.updateTime),s=e.createTime?Wn(e.createTime):Fe.min(),a=new Zn({mapValue:{fields:e.fields}}),o=Ft.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function l3(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Ne(u===void 0||typeof u=="string"),zt.fromBase64String(u||"")):(Ne(u===void 0||u instanceof Buffer||u instanceof Uint8Array),zt.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?se.UNKNOWN:MC(c.code);return new xe(u,c.message||"")}(a);t=new LC(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ba(n,r.document.name),s=Wn(r.document.updateTime),a=r.document.createTime?Wn(r.document.createTime):Fe.min(),o=new Zn({mapValue:{fields:r.document.fields}}),l=Ft.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];t=new Hh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ba(n,r.document),s=r.readTime?Wn(r.readTime):Fe.min(),a=Ft.newNoDocument(i,s),o=r.removedTargetIds||[];t=new Hh([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ba(n,r.document),s=r.removedTargetIds||[];t=new Hh([],s,i,null)}else{if(!("filter"in e))return Pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new QO(i,s),o=r.targetId;t=new OC(o,a)}}return t}function Fd(n,e){let t;if(e instanceof ql)t={update:rE(n,e.key,e.value)};else if(e instanceof r_)t={delete:Nd(n,e.key)};else if(e instanceof la)t={update:rE(n,e.key,e.data),updateMask:p3(e.fieldMask)};else{if(!(e instanceof FC))return Pe();t={verify:Nd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof Al)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Cl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof kl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Wu)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Pe()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:a3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pe()}(n,e.precondition)),t}function Eg(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?pr.updateTime(Wn(s.updateTime)):s.exists!==void 0?pr.exists(s.exists):pr.none()}(e.currentDocument):pr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,o){let l=null;if("setToServerValue"in o)Ne(o.setToServerValue==="REQUEST_TIME"),l=new Al;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];l=new Cl(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];l=new kl(u)}else"increment"in o?l=new Wu(a,o.increment):Pe();const c=It.fromServerFormat(o.fieldPath);return new PC(c,l)}(n,i)):[];if(e.update){e.update.name;const i=Ba(n,e.update.name),s=new Zn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new Nr(c.map(u=>It.fromServerFormat(u)))}(e.updateMask);return new la(i,s,a,t,r)}return new ql(i,s,t,r)}if(e.delete){const i=Ba(n,e.delete);return new r_(i,t)}if(e.verify){const i=Ba(n,e.verify);return new FC(i,t)}return Pe()}function c3(n,e){return n&&n.length>0?(Ne(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?Wn(i.updateTime):Wn(s);return a.isEqual(Fe.min())&&(a=Wn(s)),new jO(a,i.transformResults||[])}(t,e))):[]}function zC(n,e){return{documents:[UC(n,e.path)]}}function HC(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=UC(n,i);const s=function(c){if(c.length!==0)return qC(it.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(u=>function(m){return{field:Vo(m.field),direction:f3(m.dir)}}(u))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=_g(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i}}function $C(n){let e=BC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ne(r===1);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(h){const m=WC(h);return m instanceof it&&Zv(m)?m.getFilters():[m]}(t.where));let a=[];t.orderBy&&(a=function(h){return h.map(m=>function(v){return new Rd(Uo(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(t.orderBy));let o=null;t.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,P0(m)?null:m}(t.limit));let l=null;t.startAt&&(l=function(h){const m=!!h.before,g=h.values||[];return new Il(g,m)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const m=!h.before,g=h.values||[];return new Il(g,m)}(t.endAt)),vC(e,i,a,s,o,"F",l,c)}function u3(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function WC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Uo(t.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Uo(t.unaryFilter.field);return qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Uo(t.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Uo(t.unaryFilter.field);return qe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(n):n.fieldFilter!==void 0?function(t){return qe.create(Uo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return it.create(t.compositeFilter.filters.map(r=>WC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe()}}(t.compositeFilter.op))}(n):Pe()}function f3(n){return n3[n]}function h3(n){return r3[n]}function d3(n){return i3[n]}function Vo(n){return{fieldPath:n.canonicalString()}}function Uo(n){return It.fromServerFormat(n.fieldPath)}function qC(n){return n instanceof qe?function(t){if(t.op==="=="){if(By(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NAN"}};if(Uy(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(By(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NAN"}};if(Uy(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(t.field),op:h3(t.op),value:t.value}}}(n):n instanceof it?function(t){const r=t.getFilters().map(i=>qC(i));return r.length===1?r[0]:{compositeFilter:{op:d3(t.op),filters:r}}}(n):Pe()}function p3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function KC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t,r,i,s=Fe.min(),a=Fe.min(),o=zt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.ct=e}}function m3(n,e){let t;if(e.document)t=o3(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ie.fromSegments(e.noDocument.path),i=eo(e.noDocument.readTime);t=Ft.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Pe();{const r=Ie.fromSegments(e.unknownDocument.path),i=eo(e.unknownDocument.version);t=Ft.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Ct(i[0],i[1]);return Fe.fromTimestamp(s)}(e.readTime)),t}function iE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Md(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,a){return{name:Nd(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Rl(s,a.version.toTimestamp()),createTime:Rl(s,a.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Za(e.version)};else{if(!e.isUnknownDocument())return Pe();r.unknownDocument={path:t.path.toArray(),version:Za(e.version)}}return r}function Md(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Za(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function eo(n){const e=new Ct(n.seconds,n.nanoseconds);return Fe.fromTimestamp(e)}function ka(n,e){const t=(e.baseMutations||[]).map(s=>Eg(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Eg(n.ct,s)),i=Ct.fromMillis(e.localWriteTimeMs);return new i_(e.batchId,i,t,r)}function Uc(n){const e=eo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?eo(n.lastLimboFreeSnapshotVersion):Fe.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Ne(s.documents.length===1),vr(e_(BC(s.documents[0])))}(n.query):function(s){return vr($C(s))}(n.query),new bi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,zt.fromBase64String(n.resumeToken))}function YC(n,e){const t=Za(e.snapshotVersion),r=Za(e.lastLimboFreeSnapshotVersion);let i;i=Pd(e.target)?zC(n.ct,e.target):HC(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ja(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function XC(n){const e=$C({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vg(e,e.limit,"L"):e}function Gp(n,e){return new a_(e.largestBatchId,Eg(n.ct,e.overlayMutation))}function sE(n,e){const t=e.path.lastSegment();return[n,$n(e.path.popLast()),t]}function aE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Za(r.readTime),documentKey:$n(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{getBundleMetadata(e,t){return oE(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:eo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return oE(e).put(function(i){return{bundleId:i.id,createTime:Za(Wn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return lE(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:XC(s.bundledQuery),readTime:eo(s.readTime)}}(r)})}saveNamedQuery(e,t){return lE(e).put(function(i){return{name:i.name,readTime:Za(Wn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function oE(n){return nn(n,"bundles")}function lE(n){return nn(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new O0(e,r)}getOverlay(e,t){return wc(e).get(sE(this.userId,t)).next(r=>r?Gp(this.serializer,r):null)}getOverlays(e,t){const r=gi();return Q.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,a)=>{const o=new a_(t,a);i.push(this.ht(e,o))}),Q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add($n(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(wc(e).j("collectionPathOverlayIndex",o))}),Q.waitFor(s)}getOverlaysForCollection(e,t,r){const i=gi(),s=$n(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return wc(e).U("collectionPathOverlayIndex",a).next(o=>{for(const l of o){const c=Gp(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=gi();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wc(e).J({index:"collectionGroupOverlayIndex",range:o},(l,c,u)=>{const h=Gp(this.serializer,c);s.size()<i||h.largestBatchId===a?(s.set(h.getKey(),h),a=h.largestBatchId):u.done()}).next(()=>s)}ht(e,t){return wc(e).put(function(i,s,a){const[o,l,c]=sE(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Fd(i.ct,a.mutation)}}(this.serializer,this.userId,t))}}function wc(n){return nn(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{Pt(e){return nn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?zt.fromUint8Array(r):zt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(_t(e.integerValue));else if("doubleValue"in e){const r=_t(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Bu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Zi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Xs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?oC(e)?this.dt(t,Number.MAX_SAFE_INTEGER):D0(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Pe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const a="value",o=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(_t(o)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Ie.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Ra.vt=new Ra;function _3(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function cE(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const a=_3(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(e/8)}class x3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=cE(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=cE(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class y3{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class E3{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Ic{constructor(){this.jt=new x3,this.Ht=new y3(this.jt),this.Jt=new E3(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Pa(this.indexId,this.documentKey,this.arrayValue,r)}}function fs(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=uE(n.arrayValue,e.arrayValue),t!==0?t:(t=uE(n.directionalValue,e.directionalValue),t!==0?t:Ie.comparator(n.documentKey,e.documentKey)))}function uE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this.Xt=new at((t,r)=>It.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ne(e.collectionGroup===this.collectionId),this.nn)return!1;const t=cg(e);if(t!==void 0&&!this.sn(t))return!1;const r=Aa(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.on(o,l)||!this._n(this.en[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new at(It.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Vh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Vh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Vh(r.field,r.dir==="asc"?0:1)));return new kd(kd.UNKNOWN_ID,this.collectionId,t,Uu.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(n){var e,t;if(Ne(n instanceof qe||n instanceof it),n instanceof qe){if(n instanceof gC){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>qe.create(n.field,"==",s)))||[];return it.create(i,"or")}return n}const r=n.filters.map(i=>QC(i));return it.create(r,n.op)}function T3(n){if(n.getFilters().length===0)return[];const e=Ig(QC(n));return Ne(JC(e)),Tg(e)||wg(e)?[e]:e.getFilters()}function Tg(n){return n instanceof qe}function wg(n){return n instanceof it&&Zv(n)}function JC(n){return Tg(n)||wg(n)||function(t){if(t instanceof it&&dg(t)){for(const r of t.getFilters())if(!Tg(r)&&!wg(r))return!1;return!0}return!1}(n)}function Ig(n){if(Ne(n instanceof qe||n instanceof it),n instanceof qe)return n;if(n.filters.length===1)return Ig(n.filters[0]);const e=n.filters.map(r=>Ig(r));let t=it.create(e,n.op);return t=Od(t),JC(t)?t:(Ne(t instanceof it),Ne(Sl(t)),Ne(t.filters.length>1),t.filters.reduce((r,i)=>c_(r,i)))}function c_(n,e){let t;return Ne(n instanceof qe||n instanceof it),Ne(e instanceof qe||e instanceof it),t=n instanceof qe?e instanceof qe?function(i,s){return it.create([i,s],"and")}(n,e):hE(n,e):e instanceof qe?hE(e,n):function(i,s){if(Ne(i.filters.length>0&&s.filters.length>0),Sl(i)&&Sl(s))return dC(i,s.getFilters());const a=dg(i)?i:s,o=dg(i)?s:i,l=a.filters.map(c=>c_(c,o));return it.create(l,"or")}(n,e),Od(t)}function hE(n,e){if(Sl(e))return dC(e,n.getFilters());{const t=e.filters.map(r=>c_(n,r));return it.create(t,"or")}}function Od(n){if(Ne(n instanceof qe||n instanceof it),n instanceof qe)return n;const e=n.getFilters();if(e.length===1)return Od(e[0]);if(fC(n))return n;const t=e.map(i=>Od(i)),r=[];return t.forEach(i=>{i instanceof qe?r.push(i):i instanceof it&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:it.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this.un=new u_}addToCollectionParentIndex(e,t){return this.un.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(xr.min())}updateCollectionGroup(e,t,r){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class u_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new at(nt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Uint8Array(0);class I3{constructor(e,t){this.databaseId=t,this.cn=new u_,this.ln=new oa(r=>Ja(r),(r,i)=>ff(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:$n(i)};return dE(e).put(s)}return Q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[jA(t),""],!1,!0);return dE(e).U(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;r.push(mi(a.parent))}return r})}addFieldIndex(e,t){const r=Sc(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=Fo(e);return s.next(o=>{a.put(aE(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Sc(e),i=Fo(e),s=No(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Sc(e),r=No(e),i=Fo(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Q.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new fE(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=No(e);let i=!0;const s=new Map;return Q.forEach(this.hn(t),a=>this.Pn(e,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=ze();const o=[];return Q.forEach(s,(l,c)=>{oe("IndexedDbIndexManager",`Using index ${function(y){return`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${Ja(t)}`);const u=function(y,k){const V=cg(k);if(V===void 0)return null;for(const L of Dd(y,V.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(y,k){const V=new Map;for(const L of Aa(k))for(const I of Dd(y,L.fieldPath))switch(I.op){case"==":case"in":V.set(L.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return V.set(L.fieldPath.canonicalString(),I.value),Array.from(V.values())}return null}(c,l),m=function(y,k){const V=[];let L=!0;for(const I of Aa(k)){const A=I.kind===0?Wy(y,I.fieldPath,y.startAt):qy(y,I.fieldPath,y.startAt);V.push(A.value),L&&(L=A.inclusive)}return new Il(V,L)}(c,l),g=function(y,k){const V=[];let L=!0;for(const I of Aa(k)){const A=I.kind===0?qy(y,I.fieldPath,y.endAt):Wy(y,I.fieldPath,y.endAt);V.push(A.value),L&&(L=A.inclusive)}return new Il(V,L)}(c,l),v=this.In(l,c,m),_=this.In(l,c,g),E=this.Tn(l,c,h),w=this.En(l.indexId,u,v,m.inclusive,_,g.inclusive,E);return Q.forEach(w,T=>r.G(T,t.limit).next(y=>{y.forEach(k=>{const V=Ie.fromSegments(k.documentKey);a.has(V)||(a=a.add(V),o.push(V))})}))}).next(()=>o)}return Q.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=T3(it.create(e.filters,"and")).map(r=>mg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,a,o){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),c=l/(t!=null?t.length:1),u=[];for(let h=0;h<l;++h){const m=t?this.dn(t[h/c]):oh,g=this.An(e,m,r[h%c],i),v=this.Rn(e,m,s[h%c],a),_=o.map(E=>this.An(e,m,E,!0));u.push(...this.createRange(g,v,_))}return u}An(e,t,r,i){const s=new Pa(e,Ie.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Pa(e,Ie.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new fE(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const o of s)r.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,t){let r=2;const i=this.hn(t);return Q.forEach(i,s=>this.Pn(e,s).next(a=>{a?r!==0&&a.fields.length<function(l){let c=new at(It.comparator),u=!1;for(const h of l.filters)for(const m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?u=!0:c=c.add(m.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Ic;for(const i of Aa(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Yt(i.kind);Ra.vt.It(s,a)}return r.zt()}dn(e){const t=new Ic;return Ra.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Ic;return Ra.vt.It(Hu(this.databaseId,t),r.Yt(function(s){const a=Aa(s);return a.length===0?0:a[a.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ic);let s=0;for(const a of Aa(e)){const o=r[s++];for(const l of i)if(this.fn(t,a.fieldPath)&&$u(o))i=this.gn(i,a,o);else{const c=l.Yt(a.kind);Ra.vt.It(o,c)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new Ic;l.seed(o.zt()),Ra.vt.It(a,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof qe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Sc(e),i=Fo(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const a=[];return Q.forEach(s,o=>i.get([o.indexId,this.uid]).next(l=>{a.push(function(u,h){const m=h?new Uu(h.sequenceNumber,new xr(eo(h.readTime),new Ie(mi(h.documentKey)),h.largestBatchId)):Uu.empty(),g=u.fields.map(([v,_])=>new Vh(It.fromServerFormat(v),_));return new kd(u.indexId,u.collectionGroup,g,m)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:be(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Sc(e),s=Fo(e);return this.yn(e).next(a=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(o=>Q.forEach(o,l=>s.put(aE(l.indexId,this.uid,a,r)))))}updateIndexEntries(e,t){const r=new Map;return Q.forEach(t,(i,s)=>{const a=r.get(i.collectionGroup);return(a?Q.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(o=>(r.set(i.collectionGroup,o),Q.forEach(o,l=>this.wn(e,i,l).next(c=>{const u=this.Sn(s,l);return c.isEqual(u)?Q.resolve():this.bn(e,s,l,c,u)}))))})}Dn(e,t,r,i){return No(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return No(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=No(e);let s=new at(fs);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(a,o)=>{s=s.add(new Pa(r.indexId,t,o.arrayValue,o.directionalValue))}).next(()=>s)}Sn(e,t){let r=new at(fs);const i=this.Vn(t,e);if(i==null)return r;const s=cg(t);if(s!=null){const a=e.data.field(s.fieldPath);if($u(a))for(const o of a.arrayValue.values||[])r=r.add(new Pa(t.indexId,e.key,this.dn(o),i))}else r=r.add(new Pa(t.indexId,e.key,oh,i));return r}bn(e,t,r,i,s){oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(l,c,u,h,m){const g=l.getIterator(),v=c.getIterator();let _=Do(g),E=Do(v);for(;_||E;){let w=!1,T=!1;if(_&&E){const y=u(_,E);y<0?T=!0:y>0&&(w=!0)}else _!=null?T=!0:w=!0;w?(h(E),E=Do(v)):T?(m(_),_=Do(g)):(_=Do(g),E=Do(v))}}(i,s,fs,o=>{a.push(this.Dn(e,t,r,o))},o=>{a.push(this.vn(e,t,r,o))}),Q.waitFor(a)}yn(e){let t=1;return Fo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,o)=>fs(a,o)).filter((a,o,l)=>!o||fs(a,l[o-1])!==0);const i=[];i.push(e);for(const a of r){const o=fs(a,e),l=fs(a,t);if(o===0)i[0]=e.Zt();else if(o>0&&l<0)i.push(a),i.push(a.Zt());else if(l>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const o=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,oh,[]],l=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,oh,[]];s.push(IDBKeyRange.bound(o,l))}return s}Cn(e,t){return fs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pE)}getMinOffset(e,t){return Q.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Pe())).next(pE)}}function dE(n){return nn(n,"collectionParents")}function No(n){return nn(n,"indexEntries")}function Sc(n){return nn(n,"indexConfiguration")}function Fo(n){return nn(n,"indexState")}function pE(n){Ne(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;jv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new xr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const l=r.J({range:a},(u,h,m)=>(o++,m.delete()));s.push(l.next(()=>{Ne(o===1)}));const c=[];for(const u of t.mutations){const h=tC(e,u.key.path,t.batchId);s.push(i.delete(h)),c.push(u.key)}return Q.waitFor(s).next(()=>c)}function Ld(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Pe();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(41943040,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);class L0{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Ne(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new L0(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hs(e).J({index:"userMutationsIndex",range:r},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Bo(e),a=hs(e);return a.add({}).next(o=>{Ne(typeof o=="number");const l=new i_(o,t,r,i),c=function(g,v,_){const E=_.baseMutations.map(T=>Fd(g.ct,T)),w=_.mutations.map(T=>Fd(g.ct,T));return{userId:v,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:E,mutations:w}}(this.serializer,this.userId,l),u=[];let h=new at((m,g)=>be(m.canonicalString(),g.canonicalString()));for(const m of i){const g=tC(this.userId,m.key.path,o);h=h.add(m.key.path.popLast()),u.push(a.put(c)),u.push(s.put(g,lO))}return h.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[o]=l.keys()}),Q.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return hs(e).get(t).next(r=>r?(Ne(r.userId===this.userId),ka(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?Q.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return hs(e).J({index:"userMutationsIndex",range:i},(a,o,l)=>{o.userId===this.userId&&(Ne(o.batchId>=r),s=ka(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hs(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hs(e).U("userMutationsIndex",t).next(r=>r.map(i=>ka(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Uh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Bo(e).J({range:i},(a,o,l)=>{const[c,u,h]=a,m=mi(u);if(c===this.userId&&t.path.isEqual(m))return hs(e).get(h).next(g=>{if(!g)throw Pe();Ne(g.userId===this.userId),s.push(ka(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new at(be);const i=[];return t.forEach(s=>{const a=Uh(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=Bo(e).J({range:o},(c,u,h)=>{const[m,g,v]=c,_=mi(g);m===this.userId&&s.path.isEqual(_)?r=r.add(v):h.done()});i.push(l)}),Q.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Uh(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new at(be);return Bo(e).J({range:a},(l,c,u)=>{const[h,m,g]=l,v=mi(m);h===this.userId&&r.isPrefixOf(v)?v.length===i&&(o=o.add(g)):u.done()}).next(()=>this.xn(e,o))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(hs(e).get(s).next(a=>{if(a===null)throw Pe();Ne(a.userId===this.userId),r.push(ka(this.serializer,a))}))}),Q.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ZC(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),Q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Q.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return Bo(e).J({range:r},(s,a,o)=>{if(s[0]===this.userId){const l=mi(s[1]);i.push(l)}else o.done()}).next(()=>{Ne(i.length===0)})})}containsKey(e,t){return e2(e,this.userId,t)}Nn(e){return t2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function e2(n,e,t){const r=Uh(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Bo(n).J({range:s,H:!0},(o,l,c)=>{const[u,h,m]=o;u===e&&h===i&&(a=!0),c.done()}).next(()=>a)}function hs(n){return nn(n,"mutations")}function Bo(n){return nn(n,"documentMutations")}function t2(n){return nn(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new to(0)}static kn(){return new to(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new to(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Fe.fromTimestamp(new Ct(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Mo(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Ne(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Mo(e).J((a,o)=>{const l=Uc(o);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>Q.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Mo(e).J((r,i)=>{const s=Uc(i);t(s)})}qn(e){return gE(e).get("targetGlobalKey").next(t=>(Ne(t!==null),t))}Qn(e,t){return gE(e).put("targetGlobalKey",t)}Kn(e,t){return Mo(e).put(YC(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ja(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Mo(e).J({range:i,index:"queryTargetsIndex"},(a,o,l)=>{const c=Uc(o);ff(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=xs(e);return t.forEach(a=>{const o=$n(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))}),Q.waitFor(i)}removeMatchingKeys(e,t,r){const i=xs(e);return Q.forEach(t,s=>{const a=$n(s.path);return Q.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=xs(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=xs(e);let s=ze();return i.J({range:r,H:!0},(a,o,l)=>{const c=mi(a[1]),u=new Ie(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){const r=$n(t.path),i=IDBKeyRange.bound([r],[jA(r)],!1,!0);let s=0;return xs(e).J({index:"documentTargetsIndex",H:!0,range:i},([a,o],l,c)=>{a!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return Mo(e).get(t).next(r=>r?Uc(r):null)}}function Mo(n){return nn(n,"targets")}function gE(n){return nn(n,"targetGlobal")}function xs(n){return nn(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE([n,e],[t,r]){const i=be(n,t);return i===0?be(e,r):i}class A3{constructor(e){this.Un=e,this.buffer=new at(vE),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class C3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){aa(t)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await sa(t)}await this.Hn(3e5)})}}class k3{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(tr.oe);const r=new A3(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(mE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mE):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,a,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,a=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Lo()<=We.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function R3(n,e){return new k3(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,t){this.db=e,this.garbageCollector=R3(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return lh(e,r)}removeReference(e,t,r){return lh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lh(e,t)}nr(e,t){return function(i,s){let a=!1;return t2(i).Y(o=>e2(i,o,s).next(l=>(l&&(a=!0),Q.resolve(!l)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(a,o)=>{if(o<=t){const l=this.nr(e,a).next(c=>{if(!c)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,Fe.min()),xs(e).delete(function(h){return[0,$n(h.path)]}(a))))});i.push(l)}}).next(()=>Q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lh(e,t)}tr(e,t){const r=xs(e);let i,s=tr.oe;return r.J({index:"documentTargetsIndex"},([a,o],{path:l,sequenceNumber:c})=>{a===0?(s!==tr.oe&&t(new Ie(mi(i)),s),s=c,i=l):s=tr.oe}).next(()=>{s!==tr.oe&&t(new Ie(mi(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lh(n,e){return xs(n).put(function(r,i){return{targetId:0,path:$n(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.changes=new oa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ta(e).put(r)}removeEntry(e,t,r){return Ta(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Md(a),o[o.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Ft.newInvalidDocument(t);return Ta(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ac(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Ft.newInvalidDocument(t)};return Ta(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ac(t))},(i,s)=>{r={document:this.ir(t,s),size:Ld(s)}}).next(()=>r)}getEntries(e,t){let r=dr();return this._r(e,t,(i,s)=>{const a=this.ir(i,s);r=r.insert(i,a)}).next(()=>r)}ar(e,t){let r=dr(),i=new ft(Ie.comparator);return this._r(e,t,(s,a)=>{const o=this.ir(s,a);r=r.insert(s,o),i=i.insert(s,Ld(a))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return Q.resolve();let i=new at(yE);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Ac(i.first()),Ac(i.last())),a=i.getIterator();let o=a.getNext();return Ta(e).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const h=Ie.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&yE(o,h)<0;)r(o,null),o=a.getNext();o&&o.isEqual(h)&&(r(o,c),o=a.hasNext()?a.getNext():null),o?u.$(Ac(o)):u.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Md(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ta(e).U(IDBKeyRange.bound(o,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let u=dr();for(const h of c){const m=this.ir(Ie.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(df(t,m)||i.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,t,r,i){let s=dr();const a=xE(t,r),o=xE(t,xr.max());return Ta(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(l,c,u)=>{const h=this.ir(Ie.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new N3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _E(e).get("remoteDocumentGlobalKey").next(t=>(Ne(!!t),t))}rr(e,t){return _E(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=m3(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Fe.min())))return r}return Ft.newInvalidDocument(e)}}function r2(n){return new D3(n)}class N3 extends n2{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new oa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new at((s,a)=>be(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=iE(this.cr.serializer,a);i=i.add(s.path.popLast());const c=Ld(l);r+=c-o.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=o.size,this.trackRemovals){const l=iE(this.cr.serializer,a.convertToNoDocument(Fe.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),Q.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,a)=>{this.lr.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function _E(n){return nn(n,"remoteDocumentGlobal")}function Ta(n){return nn(n,"remoteDocumentsV14")}function Ac(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xE(n,e){const t=e.documentKey.path.toArray();return[n,Md(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=be(t[s],r[s]),i)return i;return i=be(t.length,r.length),i||(i=be(t[t.length-2],r[r.length-2]),i||be(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ru(r.mutation,i,Nr.empty(),Ct.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ze()){const i=gi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=bc();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=gi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ze()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,r,i){let s=dr();const a=nu(),o=function(){return nu()}();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof la)?s=s.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),ru(u.mutation,c,u.mutation.getFieldMask(),Ct.now())):a.set(c.key,Nr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>a.set(c,u)),t.forEach((c,u)=>{var h;return o.set(c,new F3(u,(h=a.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,t){const r=nu();let i=new ft((a,o)=>a-o),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||Nr.empty();u=o.applyToLocalView(c,u),r.set(l,u);const h=(i.get(o.batchId)||ze()).add(l);i=i.insert(o.batchId,h)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,h=IC();u.forEach(m=>{if(!s.has(m)){const g=DC(t.get(m),r.get(m));g!==null&&h.set(m,g),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return Q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return Ie.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_C(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Q.resolve(gi());let o=-1,l=s;return a.next(c=>Q.forEach(c,(u,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(u)?Q.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ze())).next(u=>({batchId:o,changes:wC(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next(r=>{let i=bc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=bc();return this.indexManager.getCollectionParents(e,s).next(o=>Q.forEach(o,l=>{const c=function(h,m){return new hf(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,m)=>{a=a.insert(h,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Ft.newInvalidDocument(u)))});let o=bc();return a.forEach((l,c)=>{const u=s.get(l);u!==void 0&&ru(u.mutation,c,Nr.empty(),Ct.now()),df(t,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Q.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Wn(i.createTime)}}(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:XC(i.bundledQuery),readTime:Wn(i.readTime)}}(t)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.overlays=new ft(Ie.comparator),this.Ir=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gi();return Q.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Q.resolve()}getOverlaysForCollection(e,t,r){const i=gi(),s=t.length+1,a=new Ie(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ft((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=gi(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=gi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=i)););return Q.resolve(o)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new a_(t,r));let s=this.Ir.get(t);s===void 0&&(s=ze(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.Tr=new at(sn.Er),this.dr=new at(sn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new sn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new sn(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Ie(new nt([])),r=new sn(t,e),i=new sn(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ie(new nt([])),r=new sn(t,e),i=new sn(t,e+1);let s=ze();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new sn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class sn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ie.comparator(e.key,t.key)||be(e.wr,t.wr)}static Ar(e,t){return be(e.wr,t.wr)||Ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new at(sn.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new i_(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new sn(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(e,t){return Q.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new sn(t,0),i=new sn(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const o=this.Dr(a.wr);s.push(o)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new at(be);return t.forEach(i=>{const s=new sn(i,0),a=new sn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{r=r.add(o.wr)})}),Q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ie.isDocumentKey(s)||(s=s.child(""));const a=new sn(new Ie(s),0);let o=new at(be);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(o=o.add(l.wr)),!0)},a),Q.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ne(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Q.forEach(t.mutations,i=>{const s=new sn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new sn(t,0),i=this.br.firstAfterOrEqual(r);return Q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.Mr=e,this.docs=function(){return new ft(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Q.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let r=dr();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ft.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=dr();const a=t.path,o=new Ie(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||jv(XA(u),r)<=0||(i.has(u.key)||df(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Pe()}Or(e,t){return Q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new U3(this)}getSize(e){return Q.resolve(this.size)}}class U3 extends n2{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Q.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.persistence=e,this.Nr=new oa(t=>Ja(t),ff),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new f_,this.targetCount=0,this.kr=to.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new to(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Kn(t),Q.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return Q.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),Q.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return Q.resolve(r)}containsKey(e,t){return Q.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,t){this.qr={},this.overlays={},this.Qr=new tr(0),this.Kr=!1,this.Kr=!0,this.$r=new L3,this.referenceDelegate=e(this),this.Ur=new B3(this),this.indexManager=new w3,this.remoteDocumentCache=function(i){return new V3(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new jC(t),this.Gr=new M3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new O3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new b3(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);const i=new G3(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return Q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class G3 extends JA{constructor(e){super(),this.currentSequenceNumber=e}}class b0{constructor(e){this.persistence=e,this.Jr=new f_,this.Yr=null}static Zr(e){return new b0(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),Q.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,r=>{const i=Ie.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Fe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Q.or([()=>Q.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.serializer=e}O(e,t,r,i){const s=new R0("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",My,{unique:!0}),l.createObjectStore("documentMutations")}(e),EE(e),function(l){l.createObjectStore("remoteDocuments")}(e));let a=Q.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),EE(e)),a=a.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",My,{unique:!0});const h=c.store("mutations"),m=u.map(g=>h.put(g));return Q.waitFor(m)})}(e,s))),a=a.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.ni(s))),r<6&&i>=6&&(a=a.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(a=a.next(()=>this.ii(s))),r<8&&i>=8&&(a=a.next(()=>this.si(e,s))),r<9&&i>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.oi(s))),r<11&&i>=11&&(a=a.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:yO});c.createIndex("collectionPathOverlayIndex",EO,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",TO,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:cO});c.createIndex("documentKeyIndex",uO),c.createIndex("collectionGroupIndex",fO)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.ai(e,s))),r<15&&i>=15&&(a=a.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:gO}).createIndex("sequenceNumberIndex",vO,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:_O}).createIndex("documentKeyIndex",xO,{unique:!1})}(e))),r<16&&i>=16&&(a=a.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Ld(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Q.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",a).next(o=>Q.forEach(o,l=>{Ne(l.userId===s.userId);const c=ka(this.serializer,l);return ZC(e,s.userId,c).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((a,o)=>{const l=new nt(a),c=function(h){return[0,$n(h)]}(l);s.push(t.get(c).next(u=>u?Q.resolve():(h=>t.put({targetId:0,path:$n(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>Q.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:mO});const r=t.store("collectionParents"),i=new u_,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:$n(l)})}};return t.store("remoteDocuments").J({H:!0},(a,o)=>{const l=new nt(a);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([a,o,l],c)=>{const u=mi(o);return s(u.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=Uc(i),a=YC(this.serializer,s);return t.put(a)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,a)=>{const o=t.store("remoteDocumentsV14"),l=function(h){return h.document?new Ie(nt.fromString(h.document.name).popFirst(5)):h.noDocument?Ie.fromSegments(h.noDocument.path):h.unknownDocument?Ie.fromSegments(h.unknownDocument.path):Pe()}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(c))}).next(()=>Q.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=r2(this.serializer),s=new s2(b0.Zr,this.serializer.ct);return r.U().next(a=>{const o=new Map;return a.forEach(l=>{var c;let u=(c=o.get(l.userId))!==null&&c!==void 0?c:ze();ka(this.serializer,l).keys().forEach(h=>u=u.add(h)),o.set(l.userId,u)}),Q.forEach(o,(l,c)=>{const u=new Cn(c),h=O0.lt(this.serializer,u),m=s.getIndexManager(u),g=L0.lt(u,this.serializer,m,s.referenceDelegate);return new i2(i,g,h,m).recalculateAndSaveOverlaysForDocumentKeys(new ug(t,tr.oe),l).next()})})}}function EE(n){n.createObjectStore("targetDocuments",{keyPath:dO}).createIndex("documentTargetsIndex",pO,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hO,{unique:!0}),n.createObjectStore("targetGlobal")}const zp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class h_{constructor(e,t,r,i,s,a,o,l,c,u,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=a,this.document=o,this.ci=c,this.li=u,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!h_.D())throw new xe(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new P3(this,i),this.Ai=t+"main",this.serializer=new jC(l),this.Ri=new zs(this.Ai,this.hi,new z3(this.serializer)),this.$r=new v3,this.Ur=new S3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=r2(this.serializer),this.Gr=new g3,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&Gt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(se.FAILED_PRECONDITION,zp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new tr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ch(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(aa(e))return oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Cc(e).get("owner").next(t=>Q.resolve(this.vi(t)))}Ci(e){return ch(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=nn(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),a=i.filter(o=>s.indexOf(o)===-1);return Q.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Q.resolve(!0):Cc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new xe(se.FAILED_PRECONDITION,zp);return!1}}return!(!this.networkEnabled||!this.inForeground)||ch(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new ug(e,tr.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ch(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return L0.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new I3(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return O0.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){oe("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?SO:l===16?IO:l===15?Xv:l===14?iC:l===13?rC:l===12?wO:l===11?nC:void Pe()}(this.hi);let a;return this.Ri.runTransaction(e,i,s,o=>(a=new ug(o,this.Qr?this.Qr.next():tr.oe),t==="readwrite-primary"?this.wi(a).next(l=>!!l||this.Si(a)).next(l=>{if(!l)throw Gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new xe(se.FAILED_PRECONDITION,QA);return r(a)}).next(l=>this.Di(a).next(()=>l)):this.Ki(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Cc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(se.FAILED_PRECONDITION,zp)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cc(e).put("owner",t)}static D(){return zs.D()}bi(e){const t=Cc(e);return t.get("owner").next(r=>this.vi(r)?(oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Q.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Gt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;FA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Gt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Gt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Cc(n){return nn(n,"owner")}function ch(n){return nn(n,"clientMetadata")}function a2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ze(),i=ze();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new d_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return FA()?8:ZA(tn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new H3;return this.Xi(e,t,a).next(o=>{if(s.result=o,this.zi)return this.es(e,t,a,o.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Lo()<=We.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(Lo()<=We.DEBUG&&oe("QueryEngine","Query:",bo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Lo()<=We.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vr(t))):Q.resolve())}Yi(e,t){if(Ky(t))return Q.resolve(null);let r=vr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=vg(t,null,"F"),r=vr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ze(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,o);return this.ns(t,c,a,l.readTime)?this.Yi(e,vg(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return Ky(t)||i.isEqual(Fe.min())?Q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(t,s);return this.ns(t,a,r,i)?Q.resolve(null):(Lo()<=We.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bo(t)),this.rs(e,a,t,YA(i,-1)).next(o=>o))})}ts(e,t){let r=new at(EC(e));return t.forEach((i,s)=>{df(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Lo()<=We.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",bo(t)),this.Ji.getDocumentsMatchingQuery(e,t,xr.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ft(be),this._s=new oa(s=>Ja(s),ff),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function l2(n,e,t,r){return new $3(n,e,t,r)}async function c2(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=ze();for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function W3(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const h=c.batch,m=h.keys();let g=Q.resolve();return m.forEach(v=>{g=g.next(()=>u.getEntry(l,v)).next(_=>{const E=c.docVersions.get(v);Ne(E!==null),_.version.compareTo(E)<0&&(h.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=ze();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function u2(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function q3(n,e){const t=De(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const o=[];e.targetChanges.forEach((u,h)=>{const m=i.get(h);if(!m)return;o.push(t.Ur.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,u.addedDocuments,h)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(zt.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(h,g),function(_,E,w){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,g,u)&&o.push(t.Ur.updateTargetData(s,g))});let l=dr(),c=ze();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push(K3(s,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(Fe.min())){const u=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(u)}return Q.waitFor(o).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=i,s))}function K3(n,e,t){let r=ze(),i=ze();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=dr();return t.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Fe.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):oe("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:i}})}function j3(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bd(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new bi(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Pl(n,e,t){const r=De(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!aa(a))throw a;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Sg(n,e,t){const r=De(n);let i=Fe.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const h=De(l),m=h._s.get(u);return m!==void 0?Q.resolve(h.os.get(m)):h.Ur.getTargetData(c,u)}(r,a,vr(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:Fe.min(),t?s:ze())).next(o=>(d2(r,yC(e),o),{documents:o,Ts:s})))}function f2(n,e){const t=De(n),r=De(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(a=>a?a.target:null))}function h2(n,e){const t=De(n),r=t.us.get(e)||Fe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,YA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(d2(t,e,i),i))}function d2(n,e,t){let r=n.us.get(e)||Fe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function TE(n,e){return`firestore_clients_${n}_${e}`}function wE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Hp(n,e){return`firestore_targets_${n}_${e}`}class Vd{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new xe(i.error.code,i.error.message))),a?new Vd(e,t,i.state,s):(Gt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new xe(r.error.code,r.error.message))),s?new iu(e,r.state,i):(Gt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ud{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=t_();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=eC(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new Ud(e,s):(Gt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class p_{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new p_(t.clientId,t.onlineState):(Gt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ag{constructor(){this.activeTargetIds=t_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $p{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ft(be),this.started=!1,this.bs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=TE(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ag),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(TE(this.persistenceKey,r));if(i){const s=Ud.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Hp(this.persistenceKey,e));if(i){const s=iu.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hp(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return oe("SharedClientState","READ",e,t),t}setItem(e,t){oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(oe("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(s){let a=tr.oe;if(s!=null)try{const o=JSON.parse(s);Ne(typeof o=="number"),a=o}catch(o){Gt("SharedClientState","Failed to read sequence number from WebStorage",o)}return a}(t.newValue);r!==tr.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Vd(this.currentUser,e,t,r),s=wE(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=wE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=Hp(this.persistenceKey,e),s=new iu(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Ud.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Vd.Rs(new Cn(s),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return iu.Rs(i,t)}Ls(e){return p_.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),a=[],o=[];return s.forEach(l=>{i.has(l)||a.push(l)}),i.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.io(a,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=t_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class p2{constructor(){this.so=new Ag,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ag,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh=null;function Wp(){return uh===null?uh=function(){return 268435456+Math.round(2147483648*Math.random())}():uh++,"0x"+uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class J3 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){const o=Wp(),l=this.xo(t,r.toUriEncodedString());oe("RestConnection",`Sending RPC '${t}' ${o}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,a),this.No(t,l,c,i).then(u=>(oe("RestConnection",`Received RPC '${t}' ${o}: `,u),u),u=>{throw bu("RestConnection",`RPC '${t}' ${o} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(t,r,i,s,a,o){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$l}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){const i=X3[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=Wp();return new Promise((a,o)=>{const l=new zA;l.setWithCredentials(!0),l.listenOnce(HA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case bh.NO_ERROR:const u=l.getResponseJson();oe(Sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),a(u);break;case bh.TIMEOUT:oe(Sn,`RPC '${e}' ${s} timed out`),o(new xe(se.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const h=l.getStatus();if(oe(Sn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const v=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(w)>=0?w:se.UNKNOWN}(g.status);o(new xe(v,g.message))}else o(new xe(se.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new xe(se.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{oe(Sn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);oe(Sn,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=Wp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=qA(),o=WA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");oe(Sn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=a.createWebChannel(u,l);let m=!1,g=!1;const v=new Q3({Io:E=>{g?oe(Sn,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(m||(oe(Sn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),oe(Sn,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},To:()=>h.close()}),_=(E,w,T)=>{E.listen(w,y=>{try{T(y)}catch(k){setTimeout(()=>{throw k},0)}})};return _(h,Lc.EventType.OPEN,()=>{g||(oe(Sn,`RPC '${e}' stream ${i} transport opened.`),v.yo())}),_(h,Lc.EventType.CLOSE,()=>{g||(g=!0,oe(Sn,`RPC '${e}' stream ${i} transport closed`),v.So())}),_(h,Lc.EventType.ERROR,E=>{g||(g=!0,bu(Sn,`RPC '${e}' stream ${i} transport errored:`,E),v.So(new xe(se.UNAVAILABLE,"The operation could not be completed")))}),_(h,Lc.EventType.MESSAGE,E=>{var w;if(!g){const T=E.data[0];Ne(!!T);const y=T,k=y.error||((w=y[0])===null||w===void 0?void 0:w.error);if(k){oe(Sn,`RPC '${e}' stream ${i} received error:`,k);const V=k.status;let L=function(C){const P=Wt[C];if(P!==void 0)return MC(P)}(V),I=k.message;L===void 0&&(L=se.INTERNAL,I="Unknown error status: "+V+" with message "+k.message),g=!0,v.So(new xe(L,I)),h.close()}else oe(Sn,`RPC '${e}' stream ${i} received:`,T),v.bo(T)}}),_(o,$A.STAT_EVENT,E=>{E.stat===lg.PROXY?oe(Sn,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===lg.NOPROXY&&oe(Sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(){return typeof window<"u"?window:null}function $h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(n){return new s3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t,r,i,s,a,o,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new g2(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(Gt(t.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new xe(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z3 extends v2{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=l3(this.serializer,e),r=function(s){if(!("targetChange"in s))return Fe.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Fe.min():a.readTime?Wn(a.readTime):Fe.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=yg(this.serializer),t.addTarget=function(s,a){let o;const l=a.target;if(o=Pd(l)?{documents:zC(s,l)}:{query:HC(s,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=bC(s,a.resumeToken);const c=_g(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Fe.min())>0){o.readTime=Rl(s,a.snapshotVersion.toTimestamp());const c=_g(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=u3(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=yg(this.serializer),t.removeTarget=e,this.a_(t)}}class eL extends v2{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=c3(e.writeResults,e.commitTime),r=Wn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=yg(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Fd(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,xg(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(se.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,xg(t,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(se.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Gt(t),this.D_=!1):oe("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{fo(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=De(l);c.L_.add(4),await gf(c),c.q_.set("Unknown"),c.L_.delete(4),await U0(c)}(this))})}),this.q_=new nL(r,i)}}async function U0(n){if(fo(n))for(const e of n.B_)await e(!0)}async function gf(n){for(const e of n.B_)await e(!1)}function B0(n,e){const t=De(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),v_(t)?g_(t):jl(t).r_()&&m_(t,e))}function Dl(n,e){const t=De(n),r=jl(t);t.N_.delete(e),r.r_()&&_2(t,e),t.N_.size===0&&(r.r_()?r.o_():fo(t)&&t.q_.set("Unknown"))}function m_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jl(n).A_(e)}function _2(n,e){n.Q_.xe(e),jl(n).R_(e)}function g_(n){n.Q_=new t3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),jl(n).start(),n.q_.v_()}function v_(n){return fo(n)&&!jl(n).n_()&&n.N_.size>0}function fo(n){return De(n).L_.size===0}function x2(n){n.Q_=void 0}async function iL(n){n.q_.set("Online")}async function sL(n){n.N_.forEach((e,t)=>{m_(n,e)})}async function aL(n,e){x2(n),v_(n)?(n.q_.M_(e),g_(n)):n.q_.set("Unknown")}async function oL(n,e,t){if(n.q_.set("Online"),e instanceof LC&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(n,e)}catch(r){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bd(n,r)}else if(e instanceof Hh?n.Q_.Ke(e):e instanceof OC?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Fe.min()))try{const r=await u2(n.localStore);t.compareTo(r)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(zt.EMPTY_BYTE_STRING,u.snapshotVersion)),_2(s,l);const h=new bi(u.target,l,c,u.sequenceNumber);m_(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(r){oe("RemoteStore","Failed to raise snapshot:",r),await Bd(n,r)}}async function Bd(n,e,t){if(!aa(e))throw e;n.L_.add(1),await gf(n),n.q_.set("Offline"),t||(t=()=>u2(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await U0(n)})}function y2(n,e){return e().catch(t=>Bd(n,t,e))}async function Kl(n){const e=De(n),t=Js(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lL(e);)try{const i=await j3(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,cL(e,i)}catch(i){await Bd(e,i)}E2(e)&&T2(e)}function lL(n){return fo(n)&&n.O_.length<10}function cL(n,e){n.O_.push(e);const t=Js(n);t.r_()&&t.V_&&t.m_(e.mutations)}function E2(n){return fo(n)&&!Js(n).n_()&&n.O_.length>0}function T2(n){Js(n).start()}async function uL(n){Js(n).p_()}async function fL(n){const e=Js(n);for(const t of n.O_)e.m_(t.mutations)}async function hL(n,e,t){const r=n.O_.shift(),i=s_.from(r,e,t);await y2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Kl(n)}async function dL(n,e){e&&Js(n).V_&&await async function(r,i){if(function(a){return JO(a)&&a!==se.ABORTED}(i.code)){const s=r.O_.shift();Js(r).s_(),await y2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Kl(r)}}(n,e),E2(n)&&T2(n)}async function SE(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const r=fo(t);t.L_.add(3),await gf(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await U0(t)}async function Cg(n,e){const t=De(n);e?(t.L_.delete(2),await U0(t)):e||(t.L_.add(2),await gf(t),t.q_.set("Unknown"))}function jl(n){return n.K_||(n.K_=function(t,r,i){const s=De(t);return s.w_(),new Z3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:iL.bind(null,n),Ro:sL.bind(null,n),mo:aL.bind(null,n),d_:oL.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),v_(n)?g_(n):n.q_.set("Unknown")):(await n.K_.stop(),x2(n))})),n.K_}function Js(n){return n.U_||(n.U_=function(t,r,i){const s=De(t);return s.w_(),new eL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:uL.bind(null,n),mo:dL.bind(null,n),f_:fL.bind(null,n),g_:hL.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Kl(n)):(await n.U_.stop(),n.O_.length>0&&(oe("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new __(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function x_(n,e){if(Gt("AsyncQueue",`${e}: ${n}`),aa(n))return new xe(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ie.comparator(t.key,r.key):(t,r)=>Ie.comparator(t.key,r.key),this.keyedMap=bc(),this.sortedSet=new ft(this.comparator)}static emptySet(e){return new ol(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ol)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.W_=new ft(Ie.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Nl{constructor(e,t,r,i,s,a,o,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new Nl(e,t,ol.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&N0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class mL{constructor(){this.queries=CE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=De(t),s=i.queries;i.queries=CE(),s.forEach((a,o)=>{for(const l of o.j_)l.onError(r)})})(this,new xe(se.ABORTED,"Firestore shutting down"))}}function CE(){return new oa(n=>xC(n),N0)}async function gL(n,e){const t=De(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new pL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=x_(a,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&y_(t)}async function vL(n,e){const t=De(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function _L(n,e){const t=De(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(r=!0);a.z_=i}}r&&y_(t)}function xL(n,e,t){const r=De(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function y_(n){n.Y_.forEach(e=>{e.next()})}var kg,kE;(kE=kg||(kg={})).ea="default",kE.Cache="cache";class yL{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.key=e}}class I2{constructor(e){this.key=e}}class EL{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ze(),this.mutatedKeys=ze(),this.Aa=EC(e),this.Ra=new ol(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new AE,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const m=i.get(u),g=df(this.query,h)?h:null,v=!!m&&this.mutatedKeys.has(m.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;m&&g?m.data.isEqual(g.data)?v!==_&&(r.track({type:3,doc:g}),E=!0):this.ga(m,g)||(r.track({type:2,doc:g}),E=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(o=!0)):!m&&g?(r.track({type:0,doc:g}),E=!0):m&&!g&&(r.track({type:1,doc:m}),E=!0,(l||c)&&(o=!0)),E&&(g?(a=a.add(g),s=_?s.add(u):s.delete(u)):(a=a.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:a,fa:r,ns:o,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,h)=>function(g,v){const _=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return _(g)-_(v)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(r),i=i!=null&&i;const o=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new Nl(this.query,e.Ra,s,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new AE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ze(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new I2(r))}),this.da.forEach(r=>{e.has(r)||t.push(new w2(r))}),t}ba(e){this.Ta=e.Ts,this.da=ze();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Nl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class TL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wL{constructor(e){this.key=e,this.va=!1}}class IL{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new oa(o=>xC(o),N0),this.Ma=new Map,this.xa=new Set,this.Oa=new ft(Ie.comparator),this.Na=new Map,this.La=new f_,this.Ba={},this.ka=new Map,this.qa=to.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function SL(n,e,t=!0){const r=G0(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await S2(r,e,t,!0),i}async function AL(n,e){const t=G0(n);await S2(t,e,!0,!1)}async function S2(n,e,t,r){const i=await bd(n.localStore,vr(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await E_(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&B0(n.remoteStore,i),o}async function E_(n,e,t,r,i){n.Ka=(h,m,g)=>async function(_,E,w,T){let y=E.view.ma(w);y.ns&&(y=await Sg(_.localStore,E.query,!1).then(({documents:I})=>E.view.ma(I,y)));const k=T&&T.targetChanges.get(E.targetId),V=T&&T.targetMismatches.get(E.targetId)!=null,L=E.view.applyChanges(y,_.isPrimaryClient,k,V);return Rg(_,E.targetId,L.wa),L.snapshot}(n,h,m,g);const s=await Sg(n.localStore,e,!0),a=new EL(e,s.Ts),o=a.ma(s.documents),l=mf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=a.applyChanges(o,n.isPrimaryClient,l);Rg(n,t,c.wa);const u=new TL(e,t,a);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}async function CL(n,e,t){const r=De(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!N0(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Pl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Dl(r.remoteStore,i.targetId),Fl(r,i.targetId)}).catch(sa)):(Fl(r,i.targetId),await Pl(r.localStore,i.targetId,!0))}async function kL(n,e){const t=De(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Dl(t.remoteStore,r.targetId))}async function RL(n,e,t){const r=S_(n);try{const i=await function(a,o){const l=De(a),c=Ct.now(),u=o.reduce((g,v)=>g.add(v.key),ze());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=dr(),_=ze();return l.cs.getEntries(g,u).next(E=>{v=E,v.forEach((w,T)=>{T.isValidDocument()||(_=_.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(E=>{h=E;const w=[];for(const T of o){const y=XO(T,h.get(T.key).overlayedDocument);y!=null&&w.push(new la(T.key,y,cC(y.value.mapValue),pr.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,o)}).next(E=>{m=E;const w=E.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(g,E.batchId,w)})}).then(()=>({batchId:m.batchId,changes:wC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new ft(be)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(r,i.batchId,t),await ca(r,i.changes),await Kl(r.remoteStore)}catch(i){const s=x_(i,"Failed to persist write");t.reject(s)}}async function A2(n,e){const t=De(n);try{const r=await q3(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Na.get(s);a&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Ne(a.va):i.removedDocuments.size>0&&(Ne(a.va),a.va=!1))}),await ca(t,r,e)}catch(r){await sa(r)}}function RE(n,e,t){const r=De(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=De(a);l.onlineState=o;let c=!1;l.queries.forEach((u,h)=>{for(const m of h.j_)m.Z_(o)&&(c=!0)}),c&&y_(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PL(n,e,t){const r=De(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new ft(Ie.comparator);a=a.insert(s,Ft.newNoDocument(s,Fe.min()));const o=ze().add(s),l=new pf(Fe.min(),new Map,new ft(be),a,o);await A2(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),I_(r)}else await Pl(r.localStore,e,!1).then(()=>Fl(r,e,t)).catch(sa)}async function DL(n,e){const t=De(n),r=e.batch.batchId;try{const i=await W3(t.localStore,e);w_(t,r,null),T_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ca(t,i)}catch(i){await sa(i)}}async function NL(n,e,t){const r=De(n);try{const i=await function(a,o){const l=De(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(h=>(Ne(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);w_(r,e,t),T_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ca(r,i)}catch(i){await sa(i)}}function T_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function w_(n,e,t){const r=De(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Fl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||C2(n,r)})}function C2(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Dl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),I_(n))}function Rg(n,e,t){for(const r of t)r instanceof w2?(n.La.addReference(r.key,e),FL(n,r)):r instanceof I2?(oe("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||C2(n,r.key)):Pe()}function FL(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(oe("SyncEngine","New document in limbo: "+t),n.xa.add(r),I_(n))}function I_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ie(nt.fromString(e)),r=n.qa.next();n.Na.set(r,new wL(t)),n.Oa=n.Oa.insert(t,r),B0(n.remoteStore,new bi(vr(e_(t.path)),r,"TargetPurposeLimboResolution",tr.oe))}}async function ca(n,e,t){const r=De(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,l)=>{a.push(r.Ka(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=d_.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(l,c){const u=De(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Q.forEach(c,m=>Q.forEach(m.$i,g=>u.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>Q.forEach(m.Ui,g=>u.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!aa(h))throw h;oe("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const g=u.os.get(m),v=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(v);u.os=u.os.insert(m,_)}}}(r.localStore,s))}async function ML(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const r=await c2(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(l=>{l.reject(new xe(se.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ca(t,r.hs)}}function OL(n,e){const t=De(n),r=t.Na.get(e);if(r&&r.va)return ze().add(r.key);{let i=ze();const s=t.Ma.get(e);if(!s)return i;for(const a of s){const o=t.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}async function LL(n,e){const t=De(n),r=await Sg(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Rg(t,e.targetId,i.wa),i}async function bL(n,e){const t=De(n);return h2(t.localStore,e).then(r=>ca(t,r))}async function VL(n,e,t,r){const i=De(n),s=await function(o,l){const c=De(o),u=De(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.Mn(h,l).next(m=>m?c.localDocuments.getDocuments(h,m):Q.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await Kl(i.remoteStore):t==="acknowledged"||t==="rejected"?(w_(i,e,r||null),T_(i,e),function(o,l){De(De(o).mutationQueue).On(l)}(i.localStore,e)):Pe(),await ca(i,s)):oe("SyncEngine","Cannot apply mutation batch with id: "+e)}async function UL(n,e){const t=De(n);if(G0(t),S_(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await PE(t,r.toArray());t.Qa=!0,await Cg(t.remoteStore,!0);for(const s of i)B0(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(Fl(t,a),Pl(t.localStore,a,!0))),Dl(t.remoteStore,a)}),await i,await PE(t,r),function(a){const o=De(a);o.Na.forEach((l,c)=>{Dl(o.remoteStore,c)}),o.La.pr(),o.Na=new Map,o.Oa=new ft(Ie.comparator)}(t),t.Qa=!1,await Cg(t.remoteStore,!1)}}async function PE(n,e,t){const r=De(n),i=[],s=[];for(const a of e){let o;const l=r.Ma.get(a);if(l&&l.length!==0){o=await bd(r.localStore,vr(l[0]));for(const c of l){const u=r.Fa.get(c),h=await LL(r,u);h.snapshot&&s.push(h.snapshot)}}else{const c=await f2(r.localStore,a);o=await bd(r.localStore,c),await E_(r,k2(c),a,!1,o.resumeToken)}i.push(o)}return r.Ca.d_(s),i}function k2(n){return vC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function BL(n){return function(t){return De(De(t).persistence).Qi()}(De(n).localStore)}async function GL(n,e,t,r){const i=De(n);if(i.Qa)return void oe("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await h2(i.localStore,yC(s[0])),o=pf.createSynthesizedRemoteEventForCurrentChange(e,t==="current",zt.EMPTY_BYTE_STRING);await ca(i,a,o);break}case"rejected":await Pl(i.localStore,e,!0),Fl(i,e,r);break;default:Pe()}}async function zL(n,e,t){const r=G0(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){oe("SyncEngine","Adding an already active target "+i);continue}const s=await f2(r.localStore,i),a=await bd(r.localStore,s);await E_(r,k2(s),a.targetId,!1,a.resumeToken),B0(r.remoteStore,a)}for(const i of t)r.Ma.has(i)&&await Pl(r.localStore,i,!1).then(()=>{Dl(r.remoteStore,i),Fl(r,i)}).catch(sa)}}function G0(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=A2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PL.bind(null,e),e.Ca.d_=_L.bind(null,e.eventManager),e.Ca.$a=xL.bind(null,e.eventManager),e}function S_(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NL.bind(null,e),e}class qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=V0(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return l2(this.persistence,new o2,e.initialUser,this.serializer)}Ga(e){return new s2(b0.Zr,this.serializer)}Wa(e){return new p2}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qu.provider={build:()=>new qu};class R2 extends qu{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await S_(this.Ja.syncEngine),await Kl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return l2(this.persistence,new o2,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new C3(r,e.asyncQueue,t)}Ha(e,t){const r=new aO(t,this.persistence);return new sO(e.asyncQueue,r)}Ga(e){const t=a2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new h_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,m2(),$h(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new p2}}class HL extends R2{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof $p&&(this.sharedClientState.syncEngine={no:VL.bind(null,t),ro:GL.bind(null,t),io:zL.bind(null,t),Qi:BL.bind(null,t),eo:bL.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await UL(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=m2();if(!$p.D(t))throw new xe(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=a2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $p(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ku{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>RE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ML.bind(null,this.syncEngine),await Cg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mL}()}createDatastore(e){const t=V0(e.databaseInfo.databaseId),r=function(s){return new J3(s)}(e.databaseInfo);return function(s,a,o,l){return new tL(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,o){return new rL(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,t=>RE(this.syncEngine,t,0),function(){return IE.D()?new IE:new Y3}())}createSyncEngine(e,t){return function(i,s,a,o,l,c,u){const h=new IL(i,s,a,o,l,c);return u&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=De(i);oe("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await gf(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ku.provider={build:()=>new Ku};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Gt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Cn.UNAUTHENTICATED,this.clientId=KA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{oe("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(oe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=x_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qp(n,e){n.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await c2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function DE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await qL(n);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>SE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>SE(e.remoteStore,i)),n._onlineComponents=e}async function qL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await qp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===se.FAILED_PRECONDITION||i.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;bu("Error using user provided cache. Falling back to memory cache: "+t),await qp(n,new qu)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await qp(n,new qu);return n._offlineComponents}async function P2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await DE(n,n._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await DE(n,new Ku))),n._onlineComponents}function KL(n){return P2(n).then(e=>e.syncEngine)}async function jL(n){const e=await P2(n),t=e.eventManager;return t.onListen=SL.bind(null,e.syncEngine),t.onUnlisten=CL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=AL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kL.bind(null,e.syncEngine),t}function YL(n,e,t={}){const r=new $i;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const u=new $L({next:m=>{u.Za(),a.enqueueAndForget(()=>vL(s,h)),m.fromCache&&l.source==="server"?c.reject(new xe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new yL(o,u,{includeMetadataChanges:!0,_a:!0});return gL(s,h)}(await jL(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(n,e,t){if(!t)throw new xe(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XL(n,e,t,r){if(e===!0&&r===!0)throw new xe(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FE(n){if(!Ie.isDocumentKey(n))throw new xe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ME(n){if(Ie.isDocumentKey(n))throw new xe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function z0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe()}function Pg(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=z0(n);throw new xe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new xe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class A_{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new YM;switch(r.type){case"firstParty":return new JM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=NE.get(t);r&&(oe("ComponentProvider","Removing Datastore"),NE.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yl(this.firestore,e,this._query)}}class Mr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mr(this.firestore,e,this._key)}}class Hs extends Yl{constructor(e,t,r){super(e,t,e_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mr(this.firestore,null,new Ie(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function ho(n,e,...t){if(n=Yt(n),N2("collection","path",e),n instanceof A_){const r=nt.fromString(e,...t);return ME(r),new Hs(n,null,r)}{if(!(n instanceof Mr||n instanceof Hs))throw new xe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nt.fromString(e,...t));return ME(r),new Hs(n.firestore,null,r)}}function QL(n,e,...t){if(n=Yt(n),arguments.length===1&&(e=KA.newId()),N2("doc","path",e),n instanceof A_){const r=nt.fromString(e,...t);return FE(r),new Mr(n,null,new Ie(r))}{if(!(n instanceof Mr||n instanceof Hs))throw new xe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nt.fromString(e,...t));return FE(r),new Mr(n.firestore,n instanceof Hs?n.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new g2(this,"async_queue_retry"),this.Vu=()=>{const r=$h();r&&oe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=$h();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=$h();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new $i;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!aa(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw Gt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=__.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class C_ extends A_{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new LE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LE(e),this._firestoreClient=void 0,await e}}}function JL(n,e,t){t||(t="(default)");const r=k0(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),s=r.getOptions(t);if(Ou(s,e))return i;throw new xe(se.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new xe(se.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new xe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function F2(n){if(n._terminated)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ZL(n),n._firestoreClient}function ZL(n){var e,t,r;const i=n._freezeSettings(),s=function(o,l,c,u){return new CO(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,D2(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new WL(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ml(zt.fromBase64String(e))}catch(t){throw new xe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ml(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=/^__.*__$/;class tb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new la(e,this.data,this.fieldMask,t,this.fieldTransforms):new ql(e,this.data,t,this.fieldTransforms)}}function M2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class N_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new N_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(M2(this.Cu)&&eb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class nb{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||V0(e)}Qu(e,t,r,i=!1){return new N_({Cu:e,methodName:t,qu:r,path:It.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function O2(n){const e=n._freezeSettings(),t=V0(n._databaseId);return new nb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rb(n,e,t,r,i,s={}){const a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);V2("Data must be an object, but it was:",a,r);const o=L2(r,a);let l,c;if(s.merge)l=new Nr(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const m=sb(e,h,t);if(!a.contains(m))throw new xe(se.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ob(u,m)||u.push(m)}l=new Nr(u),c=a.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=a.fieldTransforms;return new tb(new Zn(o),l,c)}class F_ extends R_{_toFieldTransform(e){return new PC(e.path,new Al)}isEqual(e){return e instanceof F_}}function ib(n,e,t,r=!1){return M_(t,n.Qu(r?4:3,e))}function M_(n,e){if(b2(n=Yt(n)))return V2("Unsupported field value:",e,n),L2(n,e);if(n instanceof R_)return function(r,i){if(!M2(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=M_(o,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $O(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ct.fromDate(r);return{timestampValue:Rl(i.serializer,s)}}if(r instanceof Ct){const s=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rl(i.serializer,s)}}if(r instanceof P_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ml)return{bytesValue:bC(i.serializer,r._byteString)};if(r instanceof Mr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:l_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof D_)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return n_(o.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${z0(r)}`)}(n,e)}function L2(n,e){const t={};return sC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wl(n,(r,i)=>{const s=M_(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function b2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof P_||n instanceof Ml||n instanceof Mr||n instanceof R_||n instanceof D_)}function V2(n,e,t){if(!b2(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=z0(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function sb(n,e,t){if((e=Yt(e))instanceof k_)return e._internalPath;if(typeof e=="string")return U2(n,e);throw Gd("Field path arguments must be of type string or ",n,!1,void 0,t)}const ab=new RegExp("[~\\*/\\[\\]]");function U2(n,e,t){if(e.search(ab)>=0)throw Gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new k_(...e.split("."))._internalPath}catch{throw Gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gd(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new xe(se.INVALID_ARGUMENT,o+n+l)}function ob(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(O_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class lb extends B2{data(){return super.data()}}function O_(n,e){return typeof e=="string"?U2(n,e):e instanceof k_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new xe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L_{}class ub extends L_{}function Xl(n,e,...t){let r=[];e instanceof L_&&r.push(e),r=r.concat(t),function(s){const a=s.filter(l=>l instanceof b_).length,o=s.filter(l=>l instanceof H0).length;if(a>1||a>0&&o>0)throw new xe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class H0 extends ub{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new H0(e,t,r)}_apply(e){const t=this._parse(e);return G2(e._query,t),new Yl(e.firestore,e.converter,gg(e._query,t))}_parse(e){const t=O2(e.firestore);return function(s,a,o,l,c,u,h){let m;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new xe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){VE(h,u);const g=[];for(const v of h)g.push(bE(l,s,v));m={arrayValue:{values:g}}}else m=bE(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||VE(h,u),m=ib(o,a,h,u==="in"||u==="not-in");return qe.create(c,u,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ql(n,e,t){const r=e,i=O_("where",n);return H0._create(i,r,t)}class b_ extends L_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new b_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:it.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)G2(a,l),a=gg(a,l)}(e._query,t),new Yl(e.firestore,e.converter,gg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function bE(n,e,t){if(typeof(t=Yt(t))=="string"){if(t==="")throw new xe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_C(e)&&t.indexOf("/")!==-1)throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nt.fromString(t));if(!Ie.isDocumentKey(r))throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hu(n,new Ie(r))}if(t instanceof Mr)return Hu(n,t._key);throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${z0(t)}.`)}function VE(n,e){if(!Array.isArray(n)||n.length===0)throw new xe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function G2(n,e){const t=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new xe(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class fb{convertValue(e,t="none"){switch(Qa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Wl(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>_t(a.doubleValue));return new D_(s)}convertGeoPoint(e){return new P_(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gu(e));default:return null}}convertTimestamp(e){const t=Zi(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nt.fromString(e);Ne(KC(r));const i=new Xa(r.get(1),r.get(3)),s=new Ie(r.popFirst(5));return i.isEqual(t)||Gt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class db extends B2{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(O_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Wh extends db{data(e={}){return super.data(e)}}class pb{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new fh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Wh(this._firestore,this._userDataWriter,r.key,r,new fh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new Wh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new fh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new Wh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new fh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:mb(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}class gb extends fb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mr(this.firestore,null,t)}}function Jl(n){n=Pg(n,Yl);const e=Pg(n.firestore,C_),t=F2(e),r=new gb(e);return cb(n._query),YL(t,n._query).then(i=>new pb(e,r,n,i))}function vb(n,e){const t=Pg(n.firestore,C_),r=QL(n),i=hb(n.converter,e);return _b(t,[rb(O2(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}function _b(n,e){return function(r,i){const s=new $i;return r.asyncQueue.enqueueAndForget(async()=>RL(await KL(r),i,s)),s.promise}(F2(n),e)}class xb{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=wb(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function yb(n){return new xb(n)}class Eb{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ku.provider,this._offlineComponentProvider={build:t=>new R2(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Tb{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ku.provider,this._offlineComponentProvider={build:t=>new HL(t,e==null?void 0:e.cacheSizeBytes)}}}function wb(n){return new Eb(void 0)}function Ib(){return new Tb}function UE(){return new F_("serverTimestamp")}(function(e,t=!0){(function(i){$l=i})(uo),Ya(new js("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new C_(new XM(r.getProvider("auth-internal")),new eO(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new xe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(c.options.projectId,u)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),yi(Dy,"4.7.3",e),yi(Dy,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="firebasestorage.googleapis.com",H2="storageBucket",Sb=2*60*1e3,Ab=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt extends Ii{constructor(e,t,r=0){super(Kp(e),`Firebase Storage: ${t} (${Kp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ot;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ot||(Ot={}));function Kp(n){return"storage/"+n}function V_(){const n="An unknown error occurred, please check the error payload for server response.";return new bt(Ot.UNKNOWN,n)}function Cb(n){return new bt(Ot.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function kb(n){return new bt(Ot.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Rb(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bt(Ot.UNAUTHENTICATED,n)}function Pb(){return new bt(Ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Db(n){return new bt(Ot.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Nb(){return new bt(Ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Fb(){return new bt(Ot.CANCELED,"User canceled the upload/download.")}function Mb(n){return new bt(Ot.INVALID_URL,"Invalid URL '"+n+"'.")}function Ob(n){return new bt(Ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Lb(){return new bt(Ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+H2+"' property when initializing the app?")}function bb(){return new bt(Ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Vb(){return new bt(Ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ub(n){return new bt(Ot.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Dg(n){return new bt(Ot.INVALID_ARGUMENT,n)}function $2(){return new bt(Ot.APP_DELETED,"The Firebase app was deleted.")}function Bb(n){return new bt(Ot.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function su(n,e){return new bt(Ot.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function kc(n){throw new bt(Ot.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=mr.makeFromUrl(e,t)}catch{return new mr(e,"")}if(r.path==="")return r;throw Ob(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function c(k){k.path_=decodeURIComponent(k.path)}const u="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${u}/b/${i}/o${m}`,"i"),v={bucket:1,path:3},_=t===z2?"(?:storage.googleapis.com|storage.cloud.google.com)":t,E="([^?#]*)",w=new RegExp(`^https?://${_}/${i}/${E}`,"i"),y=[{regex:o,indices:l,postModify:s},{regex:g,indices:v,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let k=0;k<y.length;k++){const V=y[k],L=V.regex.exec(e);if(L){const I=L[V.indices.bucket];let A=L[V.indices.path];A||(A=""),r=new mr(I,A),V.postModify(r);break}}if(r==null)throw Mb(e);return r}}class Gb{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(n,e,t){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...E){c||(c=!0,e.apply(null,E))}function h(E){i=setTimeout(()=>{i=null,n(g,l())},E)}function m(){s&&clearTimeout(s)}function g(E,...w){if(c){m();return}if(E){m(),u.call(null,E,...w);return}if(l()||a){m(),u.call(null,E,...w);return}r<64&&(r*=2);let y;o===1?(o=2,y=0):y=(r+Math.random())*1e3,h(y)}let v=!1;function _(E){v||(v=!0,m(),!c&&(i!==null?(E||(o=2),clearTimeout(i),h(0)):E||(o=1)))}return h(0),s=setTimeout(()=>{a=!0,_(!0)},t),_}function Hb(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(n){return n!==void 0}function Wb(n){return typeof n=="object"&&!Array.isArray(n)}function U_(n){return typeof n=="string"||n instanceof String}function BE(n){return B_()&&n instanceof Blob}function B_(){return typeof Blob<"u"}function GE(n,e,t,r){if(r<e)throw Dg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Dg(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function W2(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Ga;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ga||(Ga={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,t,r,i,s,a,o,l,c,u,h,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new hh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Ga.NO_ERROR,l=s.getStatus();if(!o||qb(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Ga.ABORT;r(!1,new hh(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new hh(c,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());$b(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=V_();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?$2():Fb();a(l)}else{const l=Nb();a(l)}};this.canceled_?t(!1,new hh(!1,null,!0)):this.backoffId_=zb(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Hb(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function jb(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Yb(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Xb(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Qb(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Jb(n,e,t,r,i,s,a=!0){const o=W2(n.urlParams),l=n.url+o,c=Object.assign({},n.headers);return Xb(c,e),jb(c,t),Yb(c,s),Qb(c,r),new Kb(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eV(...n){const e=Zb();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(B_())return new Blob(n);throw new bt(Ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tV(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(n){if(typeof atob>"u")throw Ub("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jp{constructor(e,t){this.data=e,this.contentType=t||null}}function rV(n,e){switch(n){case vi.RAW:return new jp(q2(e));case vi.BASE64:case vi.BASE64URL:return new jp(K2(n,e));case vi.DATA_URL:return new jp(sV(e),aV(e))}throw V_()}function q2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=n.charCodeAt(++t);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function iV(n){let e;try{e=decodeURIComponent(n)}catch{throw su(vi.DATA_URL,"Malformed data URL.")}return q2(e)}function K2(n,e){switch(n){case vi.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw su(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case vi.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw su(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=nV(e)}catch(i){throw i.message.includes("polyfill")?i:su(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class j2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw su(vi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=oV(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function sV(n){const e=new j2(n);return e.base64?K2(vi.BASE64,e.rest):iV(e.rest)}function aV(n){return new j2(n).contentType}function oV(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t){let r=0,i="";BE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(BE(this.data_)){const r=this.data_,i=tV(r,e,t);return i===null?null:new ys(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ys(r,!0)}}static getBlob(...e){if(B_()){const t=e.map(r=>r instanceof ys?r.data_:r);return new ys(eV.apply(null,t))}else{const t=e.map(a=>U_(a)?rV(vi.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new ys(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(n){let e;try{e=JSON.parse(n)}catch{return null}return Wb(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function cV(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function X2(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(n,e){return e}class Vn{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||uV}}let dh=null;function fV(n){return!U_(n)||n.length<2?n:X2(n)}function Q2(){if(dh)return dh;const n=[];n.push(new Vn("bucket")),n.push(new Vn("generation")),n.push(new Vn("metageneration")),n.push(new Vn("name","fullPath",!0));function e(s,a){return fV(a)}const t=new Vn("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}const i=new Vn("size");return i.xform=r,n.push(i),n.push(new Vn("timeCreated")),n.push(new Vn("updated")),n.push(new Vn("md5Hash",null,!0)),n.push(new Vn("cacheControl",null,!0)),n.push(new Vn("contentDisposition",null,!0)),n.push(new Vn("contentEncoding",null,!0)),n.push(new Vn("contentLanguage",null,!0)),n.push(new Vn("contentType",null,!0)),n.push(new Vn("metadata","customMetadata",!0)),dh=n,dh}function hV(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new mr(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function dV(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const a=t[s];r[a.local]=a.xform(r,e[a.server])}return hV(r,n),r}function J2(n,e,t){const r=Y2(e);return r===null?null:dV(n,r,t)}function pV(n,e,t,r){const i=Y2(e);if(i===null||!U_(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const u=n.bucket,h=n.fullPath,m="/b/"+a(u)+"/o/"+a(h),g=G_(m,t,r),v=W2({alt:"media",token:c});return g+v})[0]}function mV(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class Z2{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(n){if(!n)throw V_()}function gV(n,e){function t(r,i){const s=J2(n,i,e);return ek(s!==null),s}return t}function vV(n,e){function t(r,i){const s=J2(n,i,e);return ek(s!==null),pV(s,i,n.host,n._protocol)}return t}function tk(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Pb():i=Rb():t.getStatus()===402?i=kb(n.bucket):t.getStatus()===403?i=Db(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function _V(n){const e=tk(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Cb(n.path)),s.serverResponse=i.serverResponse,s}return t}function xV(n,e,t){const r=e.fullServerUrl(),i=G_(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,o=new Z2(i,s,vV(n,t),a);return o.errorHandler=_V(e),o}function yV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function EV(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=yV(null,e)),r}function TV(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let y="";for(let k=0;k<2;k++)y=y+Math.random().toString().slice(2);return y}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=EV(e,r,i),u=mV(c,t),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",g=ys.getBlob(h,r,m);if(g===null)throw bb();const v={name:c.fullPath},_=G_(s,n.host,n._protocol),E="POST",w=n.maxUploadRetryTime,T=new Z2(_,E,gV(n,t),w);return T.urlParams=v,T.headers=a,T.body=g.uploadData(),T.errorHandler=tk(e),T}class wV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ga.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ga.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ga.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw kc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class IV extends wV{initXhr(){this.xhr_.responseType="text"}}function nk(){return new IV}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t){this._service=e,t instanceof mr?this._location=t:this._location=mr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new no(e,t)}get root(){const e=new mr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return X2(this._location.path)}get storage(){return this._service}get parent(){const e=lV(this._location.path);if(e===null)return null;const t=new mr(this._location.bucket,e);return new no(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Bb(e)}}function SV(n,e,t){n._throwIfRoot("uploadBytes");const r=TV(n.storage,n._location,Q2(),new ys(e,!0),t);return n.storage.makeRequestWithTokens(r,nk).then(i=>({metadata:i,ref:n}))}function AV(n){n._throwIfRoot("getDownloadURL");const e=xV(n.storage,n._location,Q2());return n.storage.makeRequestWithTokens(e,nk).then(t=>{if(t===null)throw Vb();return t})}function CV(n,e){const t=cV(n._location.path,e),r=new mr(n._location.bucket,t);return new no(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(n){return/^[A-Za-z]+:\/\//.test(n)}function RV(n,e){return new no(n,e)}function rk(n,e){if(n instanceof z_){const t=n;if(t._bucket==null)throw Lb();const r=new no(t,t._bucket);return e!=null?rk(r,e):r}else return e!==void 0?CV(n,e):n}function PV(n,e){if(e&&kV(e)){if(n instanceof z_)return RV(n,e);throw Dg("To use ref(service, url), the first argument must be a Storage instance.")}else return rk(n,e)}function zE(n,e){const t=e==null?void 0:e[H2];return t==null?null:mr.makeFromBucketSpec(t,n)}function DV(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:w4(i,n.app.options.projectId))}class z_{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=z2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Sb,this._maxUploadRetryTime=Ab,this._requests=new Set,i!=null?this._bucket=mr.makeFromBucketSpec(i,this._host):this._bucket=zE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mr.makeFromBucketSpec(this._url,e):this._bucket=zE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){GE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){GE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new no(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Gb($2());{const a=Jb(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const HE="@firebase/storage",$E="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="storage";function NV(n,e,t){return n=Yt(n),SV(n,e,t)}function FV(n){return n=Yt(n),AV(n)}function MV(n,e){return n=Yt(n),PV(n,e)}function OV(n=VA(),e){n=Yt(n);const r=k0(n,ik).getImmediate({identifier:e}),i=E4("storage");return i&&LV(r,...i),r}function LV(n,e,t,r={}){DV(n,e,t,r)}function bV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new z_(t,r,i,e,uo)}function VV(){Ya(new js(ik,bV,"PUBLIC").setMultipleInstances(!0)),yi(HE,$E,""),yi(HE,$E,"esm2017")}VV();const UV={apiKey:"AIzaSyA3yJJAN99Qe2XdbGfG5_bjFaroR6gyYps",authDomain:"bookster-f0347.firebaseapp.com",projectId:"bookster-f0347",storageBucket:"bookster-f0347.appspot.com",messagingSenderId:"75991163074",appId:"1:75991163074:web:616131ab29753bf13c5b5b"},H_=bA(UV),po=JL(H_,{localCache:yb({tabManager:Ib()}),experimentalForceLongPolling:!0});KM("error");const BV=OV(H_);async function Ng(n,e,t){if(!e.userId)throw new Error("userId required");const r={...e,createdAt:UE(),updatedAt:UE()},i={};for(const a of Object.keys(r)){const o=r[a];o!==void 0&&(i[a]=o)}return await vb(ho(po,n),i)}async function mX(n,e,t="docs"){if(!n)throw new Error("auth required");const r=`${Date.now()}-${Math.random().toString(36).slice(2)}-${e.name}`,i=`user_uploads/${n}/${t}/${r}`,s=MV(BV,i);await NV(s,e,{customMetadata:{userId:n}});const a=await FV(s);return{path:i,url:a,name:e.name}}function $_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function sk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GV=sk,ak=new cf("auth","Firebase",sk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=new Wv("@firebase/auth");function zV(n,...e){zd.logLevel<=We.WARN&&zd.warn(`Auth (${uo}): ${n}`,...e)}function qh(n,...e){zd.logLevel<=We.ERROR&&zd.error(`Auth (${uo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(n,...e){throw q_(n,...e)}function si(n,...e){return q_(n,...e)}function W_(n,e,t){const r=Object.assign(Object.assign({},GV()),{[e]:t});return new cf("auth","Firebase",r).create(e,{appName:n.name})}function Wi(n){return W_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HV(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Vr(n,"argument-error"),W_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function q_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ak.create(n,...e)}function Oe(n,e,...t){if(!n)throw q_(e,...t)}function Vi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qh(e),new Error(e)}function es(n,e){n||Vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function $V(){return WE()==="http:"||WE()==="https:"}function WE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($V()||C4()||"connection"in navigator)?navigator.onLine:!0}function qV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.shortDelay=e,this.longDelay=t,es(t>e,"Short delay should be less than long delay!"),this.isMobile=I4()||k4()}get(){return WV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(n,e){es(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=new vf(3e4,6e4);function ua(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function is(n,e,t,r,i={}){return lk(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=uf(Object.assign({key:n.config.apiKey},a)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return A4()||(c.referrerPolicy="no-referrer"),ok.fetch()(ck(n,n.config.apiHost,t,o),c)})}async function lk(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},KV),e);try{const i=new XV(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw ph(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ph(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw ph(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw ph(n,"user-disabled",a);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw W_(n,u,c);Vr(n,u)}}catch(i){if(i instanceof Ii)throw i;Vr(n,"network-request-failed",{message:String(i)})}}async function _f(n,e,t,r,i={}){const s=await is(n,e,t,r,i);return"mfaPendingCredential"in s&&Vr(n,"multi-factor-auth-required",{_serverResponse:s}),s}function ck(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?K_(n.config,i):`${n.config.apiScheme}://${i}`}function YV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(si(this.auth,"network-request-failed")),jV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ph(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=si(n,e,r);return i.customData._tokenResponse=t,i}function qE(n){return n!==void 0&&n.enterprise!==void 0}class QV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return YV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function JV(n,e){return is(n,"GET","/v2/recaptchaConfig",ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZV(n,e){return is(n,"POST","/v1/accounts:delete",e)}async function uk(n,e){return is(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function e6(n,e=!1){const t=Yt(n),r=await t.getIdToken(e),i=j_(r);Oe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:au(Yp(i.auth_time)),issuedAtTime:au(Yp(i.iat)),expirationTime:au(Yp(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Yp(n){return Number(n)*1e3}function j_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qh("JWT malformed, contained fewer than 3 sections"),null;try{const i=RA(t);return i?JSON.parse(i):(qh("Failed to decode base64 JWT payload"),null)}catch(i){return qh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function KE(n){const e=j_(n);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ii&&t6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function t6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hd(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Ol(n,uk(t,{idToken:r}));Oe(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fk(s.providerUserInfo):[],o=i6(n.providerData,a),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Mg(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function r6(n){const e=Yt(n);await Hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function i6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fk(n){return n.map(e=>{var{providerId:t}=e,r=$_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s6(n,e){const t=await lk(n,{},async()=>{const r=uf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=ck(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ok.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function a6(n,e){return is(n,"POST","/v2/accounts:revokeToken",ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=KE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await s6(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new ll;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Oe(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Oe(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ll,this.toJSON())}_performRefresh(){return Vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(n,e){Oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ui{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=$_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new n6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Mg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ol(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return e6(this,e)}reload(){return r6(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(Wi(this.auth));const e=await this.getIdToken();return await Ol(this,ZV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,o,l,c,u;const h=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,v=(a=t.photoURL)!==null&&a!==void 0?a:void 0,_=(o=t.tenantId)!==null&&o!==void 0?o:void 0,E=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=t.createdAt)!==null&&c!==void 0?c:void 0,T=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:y,emailVerified:k,isAnonymous:V,providerData:L,stsTokenManager:I}=t;Oe(y&&I,e,"internal-error");const A=ll.fromJSON(this.name,I);Oe(typeof y=="string",e,"internal-error"),ds(h,e.name),ds(m,e.name),Oe(typeof k=="boolean",e,"internal-error"),Oe(typeof V=="boolean",e,"internal-error"),ds(g,e.name),ds(v,e.name),ds(_,e.name),ds(E,e.name),ds(w,e.name),ds(T,e.name);const C=new Ui({uid:y,auth:e,email:m,emailVerified:k,displayName:h,isAnonymous:V,photoURL:v,phoneNumber:g,tenantId:_,stsTokenManager:A,createdAt:w,lastLoginAt:T});return L&&Array.isArray(L)&&(C.providerData=L.map(P=>Object.assign({},P))),E&&(C._redirectEventId=E),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new ll;i.updateFromServerResponse(t);const s=new Ui({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hd(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?fk(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new ll;o.updateFromIdToken(r);const l=new Ui({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Mg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new Map;function Bi(n){es(n instanceof Function,"Expected a class definition");let e=jE.get(n);return e?(es(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}hk.type="NONE";const YE=hk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(n,e,t){return`firebase:${n}:${e}:${t}`}class cl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Kh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Kh("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new cl(Bi(YE),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Bi(YE);const a=Kh(r,e.config.apiKey,e.name);let o=null;for(const c of t)try{const u=await c._get(a);if(u){const h=Ui._fromJSON(e,u);c!==s&&(o=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new cl(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new cl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_k(e))return"Blackberry";if(xk(e))return"Webos";if(pk(e))return"Safari";if((e.includes("chrome/")||mk(e))&&!e.includes("edge/"))return"Chrome";if(vk(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dk(n=tn()){return/firefox\//i.test(n)}function pk(n=tn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mk(n=tn()){return/crios\//i.test(n)}function gk(n=tn()){return/iemobile/i.test(n)}function vk(n=tn()){return/android/i.test(n)}function _k(n=tn()){return/blackberry/i.test(n)}function xk(n=tn()){return/webos/i.test(n)}function Y_(n=tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function o6(n=tn()){var e;return Y_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function l6(){return R4()&&document.documentMode===10}function yk(n=tn()){return Y_(n)||vk(n)||xk(n)||_k(n)||/windows phone/i.test(n)||gk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(n,e=[]){let t;switch(n){case"Browser":t=XE(tn());break;case"Worker":t=`${XE(tn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u6(n,e={}){return is(n,"GET","/v2/passwordPolicy",ua(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=6;class h6{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:f6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QE(this),this.idTokenSubscription=new QE(this),this.beforeStateQueue=new c6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ak,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bi(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await cl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await uk(this,{idToken:e}),r=await Ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ei(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ei(this.app))return Promise.reject(Wi(this));const t=e?Yt(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(Wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ei(this.app)?Promise.reject(Wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await u6(this),t=new h6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await a6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bi(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[Bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ek(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&zV(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function fa(n){return Yt(n)}class QE{constructor(e){this.auth=e,this.observer=null,this.addObserver=O4(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function p6(n){$0=n}function Tk(n){return $0.loadJS(n)}function m6(){return $0.recaptchaEnterpriseScript}function g6(){return $0.gapiScript}function v6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const _6="recaptcha-enterprise",x6="NO_RECAPTCHA";class y6{constructor(e){this.type=_6,this.auth=fa(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{JV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new QV(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;qE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(x6)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!t&&qE(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=m6();l.length!==0&&(l+=o),Tk(l).then(()=>{i(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function JE(n,e,t,r=!1){const i=new y6(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Og(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await JE(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await JE(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(n,e){const t=k0(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Ou(s,e??{}))return i;Vr(i,"already-initialized")}return t.initialize({options:e})}function T6(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Bi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function w6(n,e,t){const r=fa(n);Oe(r._canInitEmulator,r,"emulator-config-failed"),Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=wk(e),{host:a,port:o}=I6(e),l=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),S6()}function wk(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function I6(n){const e=wk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ZE(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:ZE(a)}}}function ZE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function S6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vi("not implemented")}_getIdTokenResponse(e){return Vi("not implemented")}_linkToIdToken(e,t){return Vi("not implemented")}_getReauthenticationResolver(e){return Vi("not implemented")}}async function A6(n,e){return is(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C6(n,e){return _f(n,"POST","/v1/accounts:signInWithPassword",ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k6(n,e){return _f(n,"POST","/v1/accounts:signInWithEmailLink",ua(n,e))}async function R6(n,e){return _f(n,"POST","/v1/accounts:signInWithEmailLink",ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends X_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ju(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ju(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Og(e,t,"signInWithPassword",C6);case"emailLink":return k6(e,{email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Og(e,r,"signUpPassword",A6);case"emailLink":return R6(e,{idToken:t,email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n,e){return _f(n,"POST","/v1/accounts:signInWithIdp",ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6="http://localhost";class ro extends X_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=$_(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new ro(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return ul(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ul(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ul(e,t)}buildRequest(){const e={requestUri:P6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=uf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function N6(n){const e=Mc(Oc(n)).link,t=e?Mc(Oc(e)).deep_link_id:null,r=Mc(Oc(n)).deep_link_id;return(r?Mc(Oc(r)).link:null)||r||t||e||n}class Q_{constructor(e){var t,r,i,s,a,o;const l=Mc(Oc(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=D6((i=l.mode)!==null&&i!==void 0?i:null);Oe(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=N6(e);try{return new Q_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(){this.providerId=Zl.PROVIDER_ID}static credential(e,t){return ju._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Q_.parseLink(t);return Oe(r,"argument-error"),ju._fromEmailAndCode(e,r.code,r.tenantId)}}Zl.PROVIDER_ID="password";Zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends J_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends xf{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends xf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ro._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Mi.credential(t,r)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends xf{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.GITHUB_SIGN_IN_METHOD="github.com";Ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends xf{constructor(){super("twitter.com")}static credential(e,t){return ro._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ws.credential(t,r)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F6(n,e){return _f(n,"POST","/v1/accounts:signUp",ua(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ui._fromIdTokenResponse(e,r,i),a=eT(r);return new io({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=eT(r);return new io({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function eT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends Ii{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$d.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new $d(e,t,r,i)}}function Ik(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$d._fromErrorAndOperation(n,s,e,r):s})}async function M6(n,e,t=!1){const r=await Ol(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return io._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O6(n,e,t=!1){const{auth:r}=n;if(ei(r.app))return Promise.reject(Wi(r));const i="reauthenticate";try{const s=await Ol(n,Ik(r,i,e,n),t);Oe(s.idToken,r,"internal-error");const a=j_(s.idToken);Oe(a,r,"internal-error");const{sub:o}=a;return Oe(n.uid===o,r,"user-mismatch"),io._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(n,e,t=!1){if(ei(n.app))return Promise.reject(Wi(n));const r="signIn",i=await Ik(n,r,e),s=await io._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function L6(n,e){return Sk(fa(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(n){const e=fa(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function b6(n,e,t){if(ei(n.app))return Promise.reject(Wi(n));const r=fa(n),a=await Og(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",F6).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Ak(n),l}),o=await io._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function V6(n,e,t){return ei(n.app)?Promise.reject(Wi(n)):L6(Yt(n),Zl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ak(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U6(n,e){return is(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B6(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Yt(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Ol(r,U6(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const o=r.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function G6(n,e,t,r){return Yt(n).onIdTokenChanged(e,t,r)}function z6(n,e,t){return Yt(n).beforeAuthStateChanged(e,t)}function H6(n,e,t,r){return Yt(n).onAuthStateChanged(e,t,r)}function $6(n){return Yt(n).signOut()}const Wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wd,"1"),this.storage.removeItem(Wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6=1e3,q6=10;class kk extends Ck{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);l6()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,q6):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},W6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}kk.type="LOCAL";const K6=kk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk extends Ck{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rk.type="SESSION";const Pk=Rk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new W0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async c=>c(t.origin,s)),l=await j6(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}W0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=Z_("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return window}function X6(n){Ei().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(){return typeof Ei().WorkerGlobalScope<"u"&&typeof Ei().importScripts=="function"}async function Q6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function J6(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Z6(){return Dk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="firebaseLocalStorageDb",e8=1,qd="firebaseLocalStorage",Fk="fbase_key";class yf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function q0(n,e){return n.transaction([qd],e?"readwrite":"readonly").objectStore(qd)}function t8(){const n=indexedDB.deleteDatabase(Nk);return new yf(n).toPromise()}function Lg(){const n=indexedDB.open(Nk,e8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(qd,{keyPath:Fk})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(qd)?e(r):(r.close(),await t8(),e(await Lg()))})})}async function tT(n,e,t){const r=q0(n,!0).put({[Fk]:e,value:t});return new yf(r).toPromise()}async function n8(n,e){const t=q0(n,!1).get(e),r=await new yf(t).toPromise();return r===void 0?null:r.value}function nT(n,e){const t=q0(n,!0).delete(e);return new yf(t).toPromise()}const r8=800,i8=3;class Mk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>i8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=W0._getInstance(Z6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Q6(),!this.activeServiceWorker)return;this.sender=new Y6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||J6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lg();return await tT(e,Wd,"1"),await nT(e,Wd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>n8(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=q0(i,!1).getAll();return new yf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),r8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Mk.type="LOCAL";const s8=Mk;new vf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(n,e){return e?Bi(e):(Oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1 extends X_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function a8(n){return Sk(n.auth,new e1(n),n.bypassAuthState)}function o8(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),O6(t,new e1(n),n.bypassAuthState)}async function l8(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),M6(t,new e1(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a8;case"linkViaPopup":case"linkViaRedirect":return l8;case"reauthViaPopup":case"reauthViaRedirect":return o8;default:Vr(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=new vf(2e3,1e4);async function u8(n,e,t){if(ei(n.app))return Promise.reject(si(n,"operation-not-supported-in-this-environment"));const r=fa(n);HV(n,e,J_);const i=Ok(r,t);return new Oa(r,"signInViaPopup",e,i).executeNotNull()}class Oa extends Lk{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Oa.currentPopupAction&&Oa.currentPopupAction.cancel(),Oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=Z_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,c8.get())};e()}}Oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8="pendingRedirect",jh=new Map;class h8 extends Lk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=jh.get(this.auth._key());if(!e){try{const r=await d8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}jh.set(this.auth._key(),e)}return this.bypassAuthState||jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function d8(n,e){const t=g8(e),r=m8(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function p8(n,e){jh.set(n._key(),e)}function m8(n){return Bi(n._redirectPersistence)}function g8(n){return Kh(f8,n.config.apiKey,n.name)}async function v8(n,e,t=!1){if(ei(n.app))return Promise.reject(Wi(n));const r=fa(n),i=Ok(r,e),a=await new h8(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8=10*60*1e3;class x8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!y8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!bk(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(si(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_8&&this.cachedEventUids.clear(),this.cachedEventUids.has(rT(e))}saveEventToCache(e){this.cachedEventUids.add(rT(e)),this.lastProcessedEventTime=Date.now()}}function rT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function bk({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function y8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bk(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E8(n,e={}){return is(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,w8=/^https?/;async function I8(n){if(n.config.emulator)return;const{authorizedDomains:e}=await E8(n);for(const t of e)try{if(S8(t))return}catch{}Vr(n,"unauthorized-domain")}function S8(n){const e=Fg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!w8.test(t))return!1;if(T8.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=new vf(3e4,6e4);function iT(){const n=Ei().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function C8(n){return new Promise((e,t)=>{var r,i,s;function a(){iT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iT(),t(si(n,"network-request-failed"))},timeout:A8.get()})}if(!((i=(r=Ei().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ei().gapi)===null||s===void 0)&&s.load)a();else{const o=v6("iframefcb");return Ei()[o]=()=>{gapi.load?a():t(si(n,"network-request-failed"))},Tk(`${g6()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Yh=null,e})}let Yh=null;function k8(n){return Yh=Yh||C8(n),Yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8=new vf(5e3,15e3),P8="__/auth/iframe",D8="emulator/auth/iframe",N8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M8(n){const e=n.config;Oe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?K_(e,D8):`https://${n.config.authDomain}/${P8}`,r={apiKey:e.apiKey,appName:n.name,v:uo},i=F8.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${uf(r).slice(1)}`}async function O8(n){const e=await k8(n),t=Ei().gapi;return Oe(t,n,"internal-error"),e.open({where:document.body,url:M8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N8,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=si(n,"network-request-failed"),o=Ei().setTimeout(()=>{s(a)},R8.get());function l(){Ei().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},b8=500,V8=600,U8="_blank",B8="http://localhost";class sT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G8(n,e,t,r=b8,i=V8){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},L8),{width:r.toString(),height:i.toString(),top:s,left:a}),c=tn().toLowerCase();t&&(o=mk(c)?U8:t),dk(c)&&(e=e||B8,l.scrollbars="yes");const u=Object.entries(l).reduce((m,[g,v])=>`${m}${g}=${v},`,"");if(o6(c)&&o!=="_self")return z8(e||"",o),new sT(null);const h=window.open(e||"",o,u);Oe(h,n,"popup-blocked");try{h.focus()}catch{}return new sT(h)}function z8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8="__/auth/handler",$8="emulator/auth/handler",W8=encodeURIComponent("fac");async function aT(n,e,t,r,i,s){Oe(n.config.authDomain,n,"auth-domain-config-required"),Oe(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:uo,eventId:i};if(e instanceof J_){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",M4(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))a[u]=h}if(e instanceof xf){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(a.scopes=u.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await n._getAppCheckToken(),c=l?`#${W8}=${encodeURIComponent(l)}`:"";return`${q8(n)}?${uf(o).slice(1)}${c}`}function q8({config:n}){return n.emulator?K_(n,$8):`https://${n.authDomain}/${H8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="webStorageSupport";class K8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pk,this._completeRedirectFn=v8,this._overrideRedirectResult=p8}async _openPopup(e,t,r,i){var s;es((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await aT(e,t,r,Fg(),i);return G8(e,a,Z_())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await aT(e,t,r,Fg(),i);return X6(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(es(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await O8(e),r=new x8(e);return t.register("authEvent",i=>(Oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xp,{type:Xp},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Xp];a!==void 0&&t(!!a),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=I8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yk()||pk()||Y_()}}const j8=K8;var oT="@firebase/auth",lT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q8(n){Ya(new js("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Oe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ek(n)},c=new d6(r,i,s,l);return T6(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ya(new js("auth-internal",e=>{const t=fa(e.getProvider("auth").getImmediate());return(r=>new Y8(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yi(oT,lT,X8(n)),yi(oT,lT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=5*60,Z8=NA("authIdTokenMaxAge")||J8;let cT=null;const e5=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Z8)return;const i=t==null?void 0:t.token;cT!==i&&(cT=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function t5(n=VA()){const e=k0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=E6(n,{popupRedirectResolver:j8,persistence:[s8,K6,Pk]}),r=NA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=e5(s.toString());z6(t,a,()=>a(t.currentUser)),G6(t,o=>a(o))}}const i=PA("auth");return i&&w6(t,`http://${i}`),t}function n5(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}p6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=si("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",n5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q8("Browser");const Br=t5(H_);async function Vk(){const n=new Mi;return await u8(Br,n)}async function r5(n,e,t){const r=await b6(Br,n,e);return t&&await B6(r.user,{displayName:t}),r.user}async function i5(n,e){return(await V6(Br,n,e)).user}async function s5(){await $6(Br)}function a5(n){return H6(Br,n)}async function o5(n,e){e==="student"?await Ng("modules",{userId:n,code:"INTRO101",title:"Getting Started with AcademeMate",credits:5}):await Ng("subjects",{userId:n,name:"Exploring AcademeMate",description:"Your first subject seeded by onboarding"})}const Kd="currentStudySession";function l5(n,e){var i;const t=(i=Br.currentUser)==null?void 0:i.uid;if(!t)throw new Error("Sign in required");const r={uid:t,moduleCode:n||"",materialId:"",startedAt:Date.now()};return localStorage.setItem(Kd,JSON.stringify(r)),r}async function c5(){var s;const n=localStorage.getItem(Kd);if(!n)throw new Error("No active session");localStorage.removeItem(Kd);const e=JSON.parse(n),t=Date.now(),r=Math.max(1,Math.round((t-e.startedAt)/6e4)),i=(s=Br.currentUser)==null?void 0:s.uid;if(!i)throw new Error("Sign in required");return await Ng("studySessions",{userId:i,moduleCode:e.moduleCode,materialId:e.materialId,startedAt:new Date(e.startedAt).toISOString(),endedAt:new Date(t).toISOString(),durationMinutes:r}),{durationMinutes:r}}function uT(){const n=localStorage.getItem(Kd);return n?JSON.parse(n):null}async function Xh(n,e){const t=Xl(ho(po,n),Ql("userId","==",e));return(await Jl(t)).size}async function u5(n){const e=Xl(ho(po,"modules"),Ql("userId","==",n));return(await Jl(e)).docs.map(r=>({id:r.id,...r.data()}))}async function gX(n){const e=Xl(ho(po,"materials"),Ql("userId","==",n));return(await Jl(e)).docs.map(r=>({id:r.id,...r.data()}))}async function f5(n,e=14){const t=await Jl(Xl(ho(po,"assignments"),Ql("userId","==",n))),r=new Date,i=new Date(r.getTime()+e*864e5);return t.docs.map(s=>({id:s.id,...s.data()})).filter(s=>{const a=new Date(s.dueDate);return a>=r&&a<=i}).sort((s,a)=>new Date(s.dueDate).getTime()-new Date(a.dueDate).getTime())}async function h5(n){const e=await Jl(Xl(ho(po,"studySessions"),Ql("userId","==",n))),t=new Set;e.forEach(s=>{const o=(s.data().startedAt||"").slice(0,10);o&&t.add(o)});const r=new Date;let i=0;for(let s=0;s<30;s++){const o=new Date(r.getTime()-s*864e5).toISOString().slice(0,10);if(t.has(o))i++;else break}return i}async function d5(n){const e=await Jl(Xl(ho(po,"studySessions"),Ql("userId","==",n)));let t=0;return e.forEach(r=>{t+=Number(r.data().durationMinutes||0)}),t}function p5(){const[n,e]=ae.useState(uT()),[t,r]=ae.useState([]),[i,s]=ae.useState(""),[a,o]=ae.useState(0);return ae.useEffect(()=>{var c;const l=(c=Br.currentUser)==null?void 0:c.uid;l&&(async()=>r(await u5(l)))()},[]),ae.useEffect(()=>{const l=setInterval(()=>{const c=uT();c&&o(Math.round((Date.now()-c.startedAt)/6e4))},1e3);return()=>clearInterval(l)},[]),j.jsx("div",{className:"flex items-center gap-2",children:n?j.jsxs(j.Fragment,{children:[j.jsxs("span",{className:"text-xs text-gray-600",children:["Studying ",n.moduleCode||"","  ",a,"m"]}),j.jsx("button",{className:"px-3 py-1 rounded-full bg-black text-white text-sm",onClick:async()=>{await c5(),e(null),o(0)},children:"Stop & Save"})]}):j.jsxs(j.Fragment,{children:[j.jsxs("select",{className:"rounded-lg border px-2 py-1 text-sm",value:i,onChange:l=>s(l.target.value),children:[j.jsx("option",{value:"",children:"Select module"}),t.map(l=>j.jsx("option",{value:l.code,children:l.code},l.id))]}),j.jsx("button",{className:"px-3 py-1 rounded-full bg-emerald-500 text-white text-sm",onClick:()=>{const l=l5(i);e(l)},children:"Start Study"})]})})}function m5(){const[n,e]=ae.useState(()=>localStorage.getItem("role")||"student");return ae.useEffect(()=>{const t=()=>e(localStorage.getItem("role")||"student");return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]),n}function Ef({children:n}){const e=m5(),t=e==="student"?"text-student-600":"text-learner-500",r=e==="student"?"from-indigo-50 to-white":"from-emerald-50 to-white";return j.jsxs("div",{className:`min-h-screen bg-gradient-to-b ${r}`,children:[j.jsx("header",{className:"glass sticky top-0 z-10 border-b",children:j.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[j.jsx(Hi,{to:"/",className:`font-semibold ${t}`,children:"AcademeMate"}),j.jsxs("div",{className:"flex items-center gap-4",children:[j.jsx(p5,{}),j.jsx("div",{className:"text-xs text-gray-500",children:"Welcome back!"})]})]})}),j.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8 flex gap-6",children:[j.jsx(d4,{}),j.jsx("main",{className:"flex-1",children:n})]})]})}const g5="5.7.8",v5=30,_5=0,x5=60,y5=200,E5=200,T5="Pulse",w5=0,I5=[],S5=[{ddd:0,ind:1,ty:4,nm:"circle",sr:1,ks:{o:{a:0,k:100},r:{a:0,k:0},p:{a:0,k:[100,100,0]},a:{a:0,k:[0,0,0]},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0p667_1_0p333_0","0p667_1_0p333_0","0p667_1_0p333_0"],t:0,s:[80,80,100],e:[100,100,100]},{t:60}]}},shapes:[{ty:"el",p:{a:0,k:[0,0]},s:{a:0,k:[80,80]},nm:"Ellipse Path 1"},{ty:"st",c:{a:0,k:[.31,.27,.9,1]},o:{a:0,k:100},w:{a:0,k:6},lc:2,lj:2,nm:"Stroke 1"},{ty:"fl",c:{a:0,k:[.62,.96,.74,1]},o:{a:0,k:50},nm:"Fill 1"}],ip:0,op:60,st:0,bm:0}],A5={v:g5,fr:v5,ip:_5,op:x5,w:y5,h:E5,nm:T5,ddd:w5,assets:I5,layers:S5};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K0{}function Qe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function d(n,e,t){for(let s=0;s<e.length-1;s++){const a=e[s];if(a.endsWith("[]")){const o=a.slice(0,-2);if(!(o in n))if(Array.isArray(t))n[o]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[o])){const l=n[o];if(Array.isArray(t))for(let c=0;c<l.length;c++){const u=l[c];d(u,e.slice(s+1),t[c])}else for(const c of l)d(c,e.slice(s+1),t)}return}else if(a.endsWith("[0]")){const o=a.slice(0,-3);o in n||(n[o]=[{}]);const l=n[o];d(l[0],e.slice(s+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else n[r]=t}function p(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const r=e[t];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in n){const s=n[i];return Array.isArray(s)?s.map(a=>p(a,e.slice(t+1))):void 0}else return}else n=n[r]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function un(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Uk(n,e){const t=un(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function fT(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Bk(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>fT(n,t)):[fT(n,e)]}function bg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function hT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function dT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function nr(n,e){if(e==null)throw new Error("ContentUnion is required");return bg(e)?e:{role:"user",parts:Bk(n,e)}}function Gk(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=nr(n,t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=nr(n,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>nr(n,t)):[nr(n,e)]}function Mt(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(hT(e)||dT(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nr(n,e)]}const t=[],r=[],i=bg(e[0]);for(const s of e){const a=bg(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)t.push(s);else{if(hT(s)||dT(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(s)}}return i||t.push({role:"user",parts:Bk(n,r)}),t}function Qh(n,e){if(!n.isVertexAI()&&"default"in e)throw new Error("Default value is not supported in the response schema for the Gemini API.");if("anyOf"in e&&e.anyOf!==void 0)for(const t of e.anyOf)Qh(n,t);if("items"in e&&e.items!==void 0&&Qh(n,e.items),"properties"in e&&e.properties!==void 0)for(const t of Object.values(e.properties))Qh(n,t)}function zk(n,e){return Qh(n,e),e}function Hk(n,e){if(typeof e=="object"&&"voiceConfig"in e)return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function j0(n,e){return e}function Or(n,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function C5(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function ha(n,e){if(typeof e!="string")throw new Error("name must be a string");return C5(n,e,"cachedContents")}function da(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function $k(n,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k5(n,e){const t={};if(p(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=p(e,["thought"]);r!=null&&d(t,["thought"],r);const i=p(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const s=p(e,["executableCode"]);s!=null&&d(t,["executableCode"],s);const a=p(e,["fileData"]);a!=null&&d(t,["fileData"],a);const o=p(e,["functionCall"]);o!=null&&d(t,["functionCall"],o);const l=p(e,["functionResponse"]);l!=null&&d(t,["functionResponse"],l);const c=p(e,["inlineData"]);c!=null&&d(t,["inlineData"],c);const u=p(e,["text"]);return u!=null&&d(t,["text"],u),t}function pT(n,e){const t={},r=p(e,["parts"]);r!=null&&(Array.isArray(r)?d(t,["parts"],r.map(s=>k5(n,s))):d(t,["parts"],r));const i=p(e,["role"]);return i!=null&&d(t,["role"],i),t}function R5(n,e){const t={};if(p(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const r=p(e,["description"]);r!=null&&d(t,["description"],r);const i=p(e,["name"]);i!=null&&d(t,["name"],i);const s=p(e,["parameters"]);return s!=null&&d(t,["parameters"],s),t}function P5(){return{}}function D5(n,e){const t={},r=p(e,["mode"]);r!=null&&d(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return i!=null&&d(t,["dynamicThreshold"],i),t}function N5(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return r!=null&&d(t,["dynamicRetrievalConfig"],D5(n,r)),t}function F5(n,e){const t={},r=p(e,["functionDeclarations"]);if(r!=null&&(Array.isArray(r)?d(t,["functionDeclarations"],r.map(o=>R5(n,o))):d(t,["functionDeclarations"],r)),p(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");p(e,["googleSearch"])!=null&&d(t,["googleSearch"],P5());const s=p(e,["googleSearchRetrieval"]);s!=null&&d(t,["googleSearchRetrieval"],N5(n,s));const a=p(e,["codeExecution"]);return a!=null&&d(t,["codeExecution"],a),t}function M5(n,e){const t={},r=p(e,["mode"]);r!=null&&d(t,["mode"],r);const i=p(e,["allowedFunctionNames"]);return i!=null&&d(t,["allowedFunctionNames"],i),t}function O5(n,e){const t={},r=p(e,["functionCallingConfig"]);return r!=null&&d(t,["functionCallingConfig"],M5(n,r)),t}function L5(n,e,t){const r={},i=p(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const s=p(e,["expireTime"]);t!==void 0&&s!=null&&d(t,["expireTime"],s);const a=p(e,["displayName"]);t!==void 0&&a!=null&&d(t,["displayName"],a);const o=p(e,["contents"]);t!==void 0&&o!=null&&(Array.isArray(o)?d(t,["contents"],Mt(n,Mt(n,o).map(h=>pT(n,h)))):d(t,["contents"],Mt(n,o)));const l=p(e,["systemInstruction"]);t!==void 0&&l!=null&&d(t,["systemInstruction"],pT(n,nr(n,l)));const c=p(e,["tools"]);t!==void 0&&c!=null&&(Array.isArray(c)?d(t,["tools"],c.map(h=>F5(n,h))):d(t,["tools"],c));const u=p(e,["toolConfig"]);return t!==void 0&&u!=null&&d(t,["toolConfig"],O5(n,u)),r}function b5(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["model"],Uk(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],L5(n,i,t)),t}function V5(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["_url","name"],ha(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],i),t}function U5(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["_url","name"],ha(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],i),t}function B5(n,e,t){const r={},i=p(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const s=p(e,["expireTime"]);return t!==void 0&&s!=null&&d(t,["expireTime"],s),r}function G5(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["_url","name"],ha(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],B5(n,i,t)),t}function z5(n,e,t){const r={},i=p(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const s=p(e,["pageToken"]);return t!==void 0&&s!=null&&d(t,["_query","pageToken"],s),r}function H5(n,e){const t={},r=p(e,["config"]);return r!=null&&d(t,["config"],z5(n,r,t)),t}function $5(n,e){const t={},r=p(e,["videoMetadata"]);r!=null&&d(t,["videoMetadata"],r);const i=p(e,["thought"]);i!=null&&d(t,["thought"],i);const s=p(e,["codeExecutionResult"]);s!=null&&d(t,["codeExecutionResult"],s);const a=p(e,["executableCode"]);a!=null&&d(t,["executableCode"],a);const o=p(e,["fileData"]);o!=null&&d(t,["fileData"],o);const l=p(e,["functionCall"]);l!=null&&d(t,["functionCall"],l);const c=p(e,["functionResponse"]);c!=null&&d(t,["functionResponse"],c);const u=p(e,["inlineData"]);u!=null&&d(t,["inlineData"],u);const h=p(e,["text"]);return h!=null&&d(t,["text"],h),t}function mT(n,e){const t={},r=p(e,["parts"]);r!=null&&(Array.isArray(r)?d(t,["parts"],r.map(s=>$5(n,s))):d(t,["parts"],r));const i=p(e,["role"]);return i!=null&&d(t,["role"],i),t}function W5(n,e){const t={},r=p(e,["example"]);r!=null&&d(t,["example"],r);const i=p(e,["pattern"]);i!=null&&d(t,["pattern"],i);const s=p(e,["default"]);s!=null&&d(t,["default"],s);const a=p(e,["maxLength"]);a!=null&&d(t,["maxLength"],a);const o=p(e,["minLength"]);o!=null&&d(t,["minLength"],o);const l=p(e,["minProperties"]);l!=null&&d(t,["minProperties"],l);const c=p(e,["maxProperties"]);c!=null&&d(t,["maxProperties"],c);const u=p(e,["anyOf"]);u!=null&&d(t,["anyOf"],u);const h=p(e,["description"]);h!=null&&d(t,["description"],h);const m=p(e,["enum"]);m!=null&&d(t,["enum"],m);const g=p(e,["format"]);g!=null&&d(t,["format"],g);const v=p(e,["items"]);v!=null&&d(t,["items"],v);const _=p(e,["maxItems"]);_!=null&&d(t,["maxItems"],_);const E=p(e,["maximum"]);E!=null&&d(t,["maximum"],E);const w=p(e,["minItems"]);w!=null&&d(t,["minItems"],w);const T=p(e,["minimum"]);T!=null&&d(t,["minimum"],T);const y=p(e,["nullable"]);y!=null&&d(t,["nullable"],y);const k=p(e,["properties"]);k!=null&&d(t,["properties"],k);const V=p(e,["propertyOrdering"]);V!=null&&d(t,["propertyOrdering"],V);const L=p(e,["required"]);L!=null&&d(t,["required"],L);const I=p(e,["title"]);I!=null&&d(t,["title"],I);const A=p(e,["type"]);return A!=null&&d(t,["type"],A),t}function q5(n,e){const t={},r=p(e,["response"]);r!=null&&d(t,["response"],W5(n,r));const i=p(e,["description"]);i!=null&&d(t,["description"],i);const s=p(e,["name"]);s!=null&&d(t,["name"],s);const a=p(e,["parameters"]);return a!=null&&d(t,["parameters"],a),t}function K5(){return{}}function j5(n,e){const t={},r=p(e,["mode"]);r!=null&&d(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return i!=null&&d(t,["dynamicThreshold"],i),t}function Y5(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return r!=null&&d(t,["dynamicRetrievalConfig"],j5(n,r)),t}function X5(n,e){const t={},r=p(e,["functionDeclarations"]);r!=null&&(Array.isArray(r)?d(t,["functionDeclarations"],r.map(l=>q5(n,l))):d(t,["functionDeclarations"],r));const i=p(e,["retrieval"]);i!=null&&d(t,["retrieval"],i),p(e,["googleSearch"])!=null&&d(t,["googleSearch"],K5());const a=p(e,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],Y5(n,a));const o=p(e,["codeExecution"]);return o!=null&&d(t,["codeExecution"],o),t}function Q5(n,e){const t={},r=p(e,["mode"]);r!=null&&d(t,["mode"],r);const i=p(e,["allowedFunctionNames"]);return i!=null&&d(t,["allowedFunctionNames"],i),t}function J5(n,e){const t={},r=p(e,["functionCallingConfig"]);return r!=null&&d(t,["functionCallingConfig"],Q5(n,r)),t}function Z5(n,e,t){const r={},i=p(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const s=p(e,["expireTime"]);t!==void 0&&s!=null&&d(t,["expireTime"],s);const a=p(e,["displayName"]);t!==void 0&&a!=null&&d(t,["displayName"],a);const o=p(e,["contents"]);t!==void 0&&o!=null&&(Array.isArray(o)?d(t,["contents"],Mt(n,Mt(n,o).map(h=>mT(n,h)))):d(t,["contents"],Mt(n,o)));const l=p(e,["systemInstruction"]);t!==void 0&&l!=null&&d(t,["systemInstruction"],mT(n,nr(n,l)));const c=p(e,["tools"]);t!==void 0&&c!=null&&(Array.isArray(c)?d(t,["tools"],c.map(h=>X5(n,h))):d(t,["tools"],c));const u=p(e,["toolConfig"]);return t!==void 0&&u!=null&&d(t,["toolConfig"],J5(n,u)),r}function eU(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["model"],Uk(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],Z5(n,i,t)),t}function tU(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["_url","name"],ha(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],i),t}function nU(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["_url","name"],ha(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],i),t}function rU(n,e,t){const r={},i=p(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const s=p(e,["expireTime"]);return t!==void 0&&s!=null&&d(t,["expireTime"],s),r}function iU(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["_url","name"],ha(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],rU(n,i,t)),t}function sU(n,e,t){const r={},i=p(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const s=p(e,["pageToken"]);return t!==void 0&&s!=null&&d(t,["_query","pageToken"],s),r}function aU(n,e){const t={},r=p(e,["config"]);return r!=null&&d(t,["config"],sU(n,r,t)),t}function Jh(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["name"],r);const i=p(e,["displayName"]);i!=null&&d(t,["displayName"],i);const s=p(e,["model"]);s!=null&&d(t,["model"],s);const a=p(e,["createTime"]);a!=null&&d(t,["createTime"],a);const o=p(e,["updateTime"]);o!=null&&d(t,["updateTime"],o);const l=p(e,["expireTime"]);l!=null&&d(t,["expireTime"],l);const c=p(e,["usageMetadata"]);return c!=null&&d(t,["usageMetadata"],c),t}function oU(){return{}}function lU(n,e){const t={},r=p(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const i=p(e,["cachedContents"]);return i!=null&&(Array.isArray(i)?d(t,["cachedContents"],i.map(s=>Jh(n,s))):d(t,["cachedContents"],i)),t}function Zh(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["name"],r);const i=p(e,["displayName"]);i!=null&&d(t,["displayName"],i);const s=p(e,["model"]);s!=null&&d(t,["model"],s);const a=p(e,["createTime"]);a!=null&&d(t,["createTime"],a);const o=p(e,["updateTime"]);o!=null&&d(t,["updateTime"],o);const l=p(e,["expireTime"]);l!=null&&d(t,["expireTime"],l);const c=p(e,["usageMetadata"]);return c!=null&&d(t,["usageMetadata"],c),t}function cU(){return{}}function uU(n,e){const t={},r=p(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const i=p(e,["cachedContents"]);return i!=null&&(Array.isArray(i)?d(t,["cachedContents"],i.map(s=>Zh(n,s))):d(t,["cachedContents"],i)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jd;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(jd||(jd={}));class Wk{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,s;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};r?typeof r=="object"?a=Object.assign({},r):a=r:a={config:{}},a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var gT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(gT||(gT={}));var vT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(vT||(vT={}));var _T;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(_T||(_T={}));var xT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(xT||(xT={}));var yT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(yT||(yT={}));var ET;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(ET||(ET={}));var TT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(TT||(TT={}));var wT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})(wT||(wT={}));var IT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(IT||(IT={}));var ST;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ST||(ST={}));var AT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(AT||(AT={}));var CT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(CT||(CT={}));var Yd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Yd||(Yd={}));var kT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(kT||(kT={}));var RT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(RT||(RT={}));var PT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(PT||(PT={}));var DT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(DT||(DT={}));var NT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(NT||(NT={}));var FT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(FT||(FT={}));var MT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(MT||(MT={}));var OT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(OT||(OT={}));var LT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(LT||(LT={}));var bT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(bT||(bT={}));var VT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(VT||(VT={}));var UT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(UT||(UT={}));var BT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(BT||(BT={}));var GT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(GT||(GT={}));var zT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(zT||(zT={}));var HT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(HT||(HT={}));var $T;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($T||($T={}));class mh{get text(){var e,t,r,i,s,a,o,l;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const h=[];for(const m of(l=(o=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(m))g!=="text"&&g!=="thought"&&(v!==null||v!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get functionCalls(){var e,t,r,i,s,a,o,l;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(o=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,r,i,s,a,o,l,c;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(o=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,r,i,s,a,o,l,c;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(o=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class WT{}class qT{}class KT{}class fU{}class jT{}class YT{}class hU{}class Vg{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class dU{}class pU{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mU extends K0{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Wk(jd.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=eU(this.apiClient,e);return s=Qe("cachedContents",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(l=>Zh(this.apiClient,l))}else{const o=b5(this.apiClient,e);return s=Qe("cachedContents",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(l=>Jh(this.apiClient,l))}}async get(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=tU(this.apiClient,e);return s=Qe("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(l=>Zh(this.apiClient,l))}else{const o=V5(this.apiClient,e);return s=Qe("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(l=>Jh(this.apiClient,l))}}async delete(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=nU(this.apiClient,e);return s=Qe("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(()=>{const l=cU(),c=new jT;return Object.assign(c,l),c})}else{const o=U5(this.apiClient,e);return s=Qe("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(()=>{const l=oU(),c=new jT;return Object.assign(c,l),c})}}async update(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=iU(this.apiClient,e);return s=Qe("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(l=>Zh(this.apiClient,l))}else{const o=G5(this.apiClient,e);return s=Qe("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(l=>Jh(this.apiClient,l))}}async listInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=aU(this.apiClient,e);return s=Qe("cachedContents",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(l=>{const c=uU(this.apiClient,l),u=new YT;return Object.assign(u,c),u})}else{const o=H5(this.apiClient,e);return s=Qe("cachedContents",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(l=>{const c=lU(this.apiClient,l),u=new YT;return Object.assign(u,c),u})}}}function XT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kn(n){return this instanceof kn?(this.v=n,this):new kn(n)}function Xd(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(g){return function(v){return Promise.resolve(v).then(g,h)}}function o(g,v){r[g]&&(i[g]=function(_){return new Promise(function(E,w){s.push([g,_,E,w])>1||l(g,_)})},v&&(i[g]=v(i[g])))}function l(g,v){try{c(r[g](v))}catch(_){m(s[0][3],_)}}function c(g){g.value instanceof kn?Promise.resolve(g.value.v).then(u,h):m(s[0][2],g)}function u(g){l("next",g)}function h(g){l("throw",g)}function m(g,v){g(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Ug(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof XT=="function"?XT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(a){return new Promise(function(o,l){a=n[s](a),i(o,l,a.done,a.value)})}}function i(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gU(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:qk(t)}function qk(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function vU(n){if(n.length!==0){if(n[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function _U(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0,i=n[0];for(;r<t;)if(n[r].role==="user")i=n[r],r++;else{const s=[];let a=!0;for(;r<t&&n[r].role==="model";)s.push(n[r]),a&&!qk(n[r])&&(a=!1),r++;a&&(e.push(i),e.push(...s))}return e}class xU{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new yU(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class yU{constructor(e,t,r,i={},s=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),vU(s)}async sendMessage(e){var t;await this.sendPromise;const r=nr(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var s,a;const l=(a=(s=(await i).candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,c=l?[l]:[];this.recordHistory(r,c)})(),await this.sendPromise,i}async sendMessageStream(e){var t;await this.sendPromise;const r=nr(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){return e?_U(this.history):this.history}processStreamResponse(e,t){var r,i;return Xd(this,arguments,function*(){var a,o,l,c;const u=[];try{for(var h=!0,m=Ug(e),g;g=yield kn(m.next()),a=g.done,!a;h=!0){c=g.value,h=!1;const v=c;if(gU(v)){const _=(i=(r=v.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;_!==void 0&&u.push(_)}yield yield kn(v)}}catch(v){o={error:v}}finally{try{!h&&!a&&(l=m.return)&&(yield kn(l.call(m)))}finally{if(o)throw o.error}}this.recordHistory(t,u)})}recordHistory(e,t){let r=[];t.length>0&&t.every(i=>i.role==="model")?r=t:r.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EU(n,e,t){const r={},i=p(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const s=p(e,["pageToken"]);return t!==void 0&&s!=null&&d(t,["_query","pageToken"],s),r}function TU(n,e){const t={},r=p(e,["config"]);return r!=null&&d(t,["config"],EU(n,r,t)),t}function wU(n,e){const t={},r=p(e,["details"]);r!=null&&d(t,["details"],r);const i=p(e,["message"]);i!=null&&d(t,["message"],i);const s=p(e,["code"]);return s!=null&&d(t,["code"],s),t}function IU(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["name"],r);const i=p(e,["displayName"]);i!=null&&d(t,["displayName"],i);const s=p(e,["mimeType"]);s!=null&&d(t,["mimeType"],s);const a=p(e,["sizeBytes"]);a!=null&&d(t,["sizeBytes"],a);const o=p(e,["createTime"]);o!=null&&d(t,["createTime"],o);const l=p(e,["expirationTime"]);l!=null&&d(t,["expirationTime"],l);const c=p(e,["updateTime"]);c!=null&&d(t,["updateTime"],c);const u=p(e,["sha256Hash"]);u!=null&&d(t,["sha256Hash"],u);const h=p(e,["uri"]);h!=null&&d(t,["uri"],h);const m=p(e,["downloadUri"]);m!=null&&d(t,["downloadUri"],m);const g=p(e,["state"]);g!=null&&d(t,["state"],g);const v=p(e,["source"]);v!=null&&d(t,["source"],v);const _=p(e,["videoMetadata"]);_!=null&&d(t,["videoMetadata"],_);const E=p(e,["error"]);return E!=null&&d(t,["error"],wU(n,E)),t}function SU(n,e){const t={},r=p(e,["file"]);r!=null&&d(t,["file"],IU(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],i),t}function AU(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["_url","file"],$k(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],i),t}function CU(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["_url","file"],$k(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],i),t}function kU(n,e){const t={},r=p(e,["details"]);r!=null&&d(t,["details"],r);const i=p(e,["message"]);i!=null&&d(t,["message"],i);const s=p(e,["code"]);return s!=null&&d(t,["code"],s),t}function Bg(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["name"],r);const i=p(e,["displayName"]);i!=null&&d(t,["displayName"],i);const s=p(e,["mimeType"]);s!=null&&d(t,["mimeType"],s);const a=p(e,["sizeBytes"]);a!=null&&d(t,["sizeBytes"],a);const o=p(e,["createTime"]);o!=null&&d(t,["createTime"],o);const l=p(e,["expirationTime"]);l!=null&&d(t,["expirationTime"],l);const c=p(e,["updateTime"]);c!=null&&d(t,["updateTime"],c);const u=p(e,["sha256Hash"]);u!=null&&d(t,["sha256Hash"],u);const h=p(e,["uri"]);h!=null&&d(t,["uri"],h);const m=p(e,["downloadUri"]);m!=null&&d(t,["downloadUri"],m);const g=p(e,["state"]);g!=null&&d(t,["state"],g);const v=p(e,["source"]);v!=null&&d(t,["source"],v);const _=p(e,["videoMetadata"]);_!=null&&d(t,["videoMetadata"],_);const E=p(e,["error"]);return E!=null&&d(t,["error"],kU(n,E)),t}function RU(n,e){const t={},r=p(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const i=p(e,["files"]);return i!=null&&(Array.isArray(i)?d(t,["files"],i.map(s=>Bg(n,s))):d(t,["files"],i)),t}function PU(){return{}}function DU(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NU extends K0{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Wk(jd.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Bg(this.apiClient,t))}async listInternal(e){var t;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=TU(this.apiClient,e);return i=Qe("files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(o=>o.json()),r.then(o=>{const l=RU(this.apiClient,o),c=new hU;return Object.assign(c,l),c})}}async createInternal(e){var t;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=SU(this.apiClient,e);return i=Qe("upload/v1beta/files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(o=>o.json()),r.then(()=>{const o=PU(),l=new dU;return Object.assign(l,o),l})}}async get(e){var t;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=AU(this.apiClient,e);return i=Qe("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(o=>o.json()),r.then(o=>Bg(this.apiClient,o))}}async delete(e){var t;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=CU(this.apiClient,e);return i=Qe("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(o=>o.json()),r.then(()=>{const o=DU(),l=new pU;return Object.assign(l,o),l})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FU(n,e){const t={};if(p(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=p(e,["thought"]);r!=null&&d(t,["thought"],r);const i=p(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const s=p(e,["executableCode"]);s!=null&&d(t,["executableCode"],s);const a=p(e,["fileData"]);a!=null&&d(t,["fileData"],a);const o=p(e,["functionCall"]);o!=null&&d(t,["functionCall"],o);const l=p(e,["functionResponse"]);l!=null&&d(t,["functionResponse"],l);const c=p(e,["inlineData"]);c!=null&&d(t,["inlineData"],c);const u=p(e,["text"]);return u!=null&&d(t,["text"],u),t}function MU(n,e){const t={},r=p(e,["videoMetadata"]);r!=null&&d(t,["videoMetadata"],r);const i=p(e,["thought"]);i!=null&&d(t,["thought"],i);const s=p(e,["codeExecutionResult"]);s!=null&&d(t,["codeExecutionResult"],s);const a=p(e,["executableCode"]);a!=null&&d(t,["executableCode"],a);const o=p(e,["fileData"]);o!=null&&d(t,["fileData"],o);const l=p(e,["functionCall"]);l!=null&&d(t,["functionCall"],l);const c=p(e,["functionResponse"]);c!=null&&d(t,["functionResponse"],c);const u=p(e,["inlineData"]);u!=null&&d(t,["inlineData"],u);const h=p(e,["text"]);return h!=null&&d(t,["text"],h),t}function OU(n,e){const t={},r=p(e,["parts"]);r!=null&&(Array.isArray(r)?d(t,["parts"],r.map(s=>FU(n,s))):d(t,["parts"],r));const i=p(e,["role"]);return i!=null&&d(t,["role"],i),t}function LU(n,e){const t={},r=p(e,["parts"]);r!=null&&(Array.isArray(r)?d(t,["parts"],r.map(s=>MU(n,s))):d(t,["parts"],r));const i=p(e,["role"]);return i!=null&&d(t,["role"],i),t}function bU(n,e){const t={},r=p(e,["example"]);r!=null&&d(t,["example"],r);const i=p(e,["pattern"]);i!=null&&d(t,["pattern"],i);const s=p(e,["default"]);s!=null&&d(t,["default"],s);const a=p(e,["maxLength"]);a!=null&&d(t,["maxLength"],a);const o=p(e,["minLength"]);o!=null&&d(t,["minLength"],o);const l=p(e,["minProperties"]);l!=null&&d(t,["minProperties"],l);const c=p(e,["maxProperties"]);c!=null&&d(t,["maxProperties"],c);const u=p(e,["anyOf"]);u!=null&&d(t,["anyOf"],u);const h=p(e,["description"]);h!=null&&d(t,["description"],h);const m=p(e,["enum"]);m!=null&&d(t,["enum"],m);const g=p(e,["format"]);g!=null&&d(t,["format"],g);const v=p(e,["items"]);v!=null&&d(t,["items"],v);const _=p(e,["maxItems"]);_!=null&&d(t,["maxItems"],_);const E=p(e,["maximum"]);E!=null&&d(t,["maximum"],E);const w=p(e,["minItems"]);w!=null&&d(t,["minItems"],w);const T=p(e,["minimum"]);T!=null&&d(t,["minimum"],T);const y=p(e,["nullable"]);y!=null&&d(t,["nullable"],y);const k=p(e,["properties"]);k!=null&&d(t,["properties"],k);const V=p(e,["propertyOrdering"]);V!=null&&d(t,["propertyOrdering"],V);const L=p(e,["required"]);L!=null&&d(t,["required"],L);const I=p(e,["title"]);I!=null&&d(t,["title"],I);const A=p(e,["type"]);return A!=null&&d(t,["type"],A),t}function VU(n,e){const t={};if(p(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const r=p(e,["description"]);r!=null&&d(t,["description"],r);const i=p(e,["name"]);i!=null&&d(t,["name"],i);const s=p(e,["parameters"]);return s!=null&&d(t,["parameters"],s),t}function UU(n,e){const t={},r=p(e,["response"]);r!=null&&d(t,["response"],bU(n,r));const i=p(e,["description"]);i!=null&&d(t,["description"],i);const s=p(e,["name"]);s!=null&&d(t,["name"],s);const a=p(e,["parameters"]);return a!=null&&d(t,["parameters"],a),t}function BU(){return{}}function GU(){return{}}function zU(n,e){const t={},r=p(e,["mode"]);r!=null&&d(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return i!=null&&d(t,["dynamicThreshold"],i),t}function HU(n,e){const t={},r=p(e,["mode"]);r!=null&&d(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return i!=null&&d(t,["dynamicThreshold"],i),t}function $U(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return r!=null&&d(t,["dynamicRetrievalConfig"],zU(n,r)),t}function WU(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return r!=null&&d(t,["dynamicRetrievalConfig"],HU(n,r)),t}function qU(n,e){const t={},r=p(e,["functionDeclarations"]);if(r!=null&&(Array.isArray(r)?d(t,["functionDeclarations"],r.map(o=>VU(n,o))):d(t,["functionDeclarations"],r)),p(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");p(e,["googleSearch"])!=null&&d(t,["googleSearch"],BU());const s=p(e,["googleSearchRetrieval"]);s!=null&&d(t,["googleSearchRetrieval"],$U(n,s));const a=p(e,["codeExecution"]);return a!=null&&d(t,["codeExecution"],a),t}function KU(n,e){const t={},r=p(e,["functionDeclarations"]);r!=null&&(Array.isArray(r)?d(t,["functionDeclarations"],r.map(l=>UU(n,l))):d(t,["functionDeclarations"],r));const i=p(e,["retrieval"]);i!=null&&d(t,["retrieval"],i),p(e,["googleSearch"])!=null&&d(t,["googleSearch"],GU());const a=p(e,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],WU(n,a));const o=p(e,["codeExecution"]);return o!=null&&d(t,["codeExecution"],o),t}function jU(n,e){const t={},r=p(e,["handle"]);if(r!=null&&d(t,["handle"],r),p(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function YU(n,e){const t={},r=p(e,["handle"]);r!=null&&d(t,["handle"],r);const i=p(e,["transparent"]);return i!=null&&d(t,["transparent"],i),t}function XU(){return{}}function QT(){return{}}function QU(n,e){const t={},r=p(e,["disabled"]);r!=null&&d(t,["disabled"],r);const i=p(e,["startOfSpeechSensitivity"]);i!=null&&d(t,["startOfSpeechSensitivity"],i);const s=p(e,["endOfSpeechSensitivity"]);s!=null&&d(t,["endOfSpeechSensitivity"],s);const a=p(e,["prefixPaddingMs"]);a!=null&&d(t,["prefixPaddingMs"],a);const o=p(e,["silenceDurationMs"]);return o!=null&&d(t,["silenceDurationMs"],o),t}function JU(n,e){const t={},r=p(e,["disabled"]);r!=null&&d(t,["disabled"],r);const i=p(e,["startOfSpeechSensitivity"]);i!=null&&d(t,["startOfSpeechSensitivity"],i);const s=p(e,["endOfSpeechSensitivity"]);s!=null&&d(t,["endOfSpeechSensitivity"],s);const a=p(e,["prefixPaddingMs"]);a!=null&&d(t,["prefixPaddingMs"],a);const o=p(e,["silenceDurationMs"]);return o!=null&&d(t,["silenceDurationMs"],o),t}function ZU(n,e){const t={},r=p(e,["automaticActivityDetection"]);r!=null&&d(t,["automaticActivityDetection"],QU(n,r));const i=p(e,["activityHandling"]);i!=null&&d(t,["activityHandling"],i);const s=p(e,["turnCoverage"]);return s!=null&&d(t,["turnCoverage"],s),t}function eB(n,e){const t={},r=p(e,["automaticActivityDetection"]);r!=null&&d(t,["automaticActivityDetection"],JU(n,r));const i=p(e,["activityHandling"]);i!=null&&d(t,["activityHandling"],i);const s=p(e,["turnCoverage"]);return s!=null&&d(t,["turnCoverage"],s),t}function tB(n,e){const t={},r=p(e,["targetTokens"]);return r!=null&&d(t,["targetTokens"],r),t}function nB(n,e){const t={},r=p(e,["targetTokens"]);return r!=null&&d(t,["targetTokens"],r),t}function rB(n,e){const t={},r=p(e,["triggerTokens"]);r!=null&&d(t,["triggerTokens"],r);const i=p(e,["slidingWindow"]);return i!=null&&d(t,["slidingWindow"],tB(n,i)),t}function iB(n,e){const t={},r=p(e,["triggerTokens"]);r!=null&&d(t,["triggerTokens"],r);const i=p(e,["slidingWindow"]);return i!=null&&d(t,["slidingWindow"],nB(n,i)),t}function sB(n,e,t){const r={},i=p(e,["generationConfig"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig"],i);const s=p(e,["responseModalities"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","responseModalities"],s);const a=p(e,["temperature"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","temperature"],a);const o=p(e,["topP"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","topP"],o);const l=p(e,["topK"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","topK"],l);const c=p(e,["maxOutputTokens"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","maxOutputTokens"],c);const u=p(e,["mediaResolution"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","mediaResolution"],u);const h=p(e,["seed"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","seed"],h);const m=p(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],m);const g=p(e,["systemInstruction"]);t!==void 0&&g!=null&&d(t,["setup","systemInstruction"],OU(n,nr(n,g)));const v=p(e,["tools"]);t!==void 0&&v!=null&&(Array.isArray(v)?d(t,["setup","tools"],Or(n,Or(n,v).map(y=>qU(n,j0(n,y))))):d(t,["setup","tools"],Or(n,v)));const _=p(e,["sessionResumption"]);if(t!==void 0&&_!=null&&d(t,["setup","sessionResumption"],jU(n,_)),p(e,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const E=p(e,["outputAudioTranscription"]);t!==void 0&&E!=null&&d(t,["setup","outputAudioTranscription"],XU());const w=p(e,["realtimeInputConfig"]);t!==void 0&&w!=null&&d(t,["setup","realtimeInputConfig"],ZU(n,w));const T=p(e,["contextWindowCompression"]);return t!==void 0&&T!=null&&d(t,["setup","contextWindowCompression"],rB(n,T)),r}function aB(n,e,t){const r={},i=p(e,["generationConfig"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig"],i);const s=p(e,["responseModalities"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","responseModalities"],s);const a=p(e,["temperature"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","temperature"],a);const o=p(e,["topP"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","topP"],o);const l=p(e,["topK"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","topK"],l);const c=p(e,["maxOutputTokens"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","maxOutputTokens"],c);const u=p(e,["mediaResolution"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","mediaResolution"],u);const h=p(e,["seed"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","seed"],h);const m=p(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],m);const g=p(e,["systemInstruction"]);t!==void 0&&g!=null&&d(t,["setup","systemInstruction"],LU(n,nr(n,g)));const v=p(e,["tools"]);t!==void 0&&v!=null&&(Array.isArray(v)?d(t,["setup","tools"],Or(n,Or(n,v).map(k=>KU(n,j0(n,k))))):d(t,["setup","tools"],Or(n,v)));const _=p(e,["sessionResumption"]);t!==void 0&&_!=null&&d(t,["setup","sessionResumption"],YU(n,_));const E=p(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&d(t,["setup","inputAudioTranscription"],QT());const w=p(e,["outputAudioTranscription"]);t!==void 0&&w!=null&&d(t,["setup","outputAudioTranscription"],QT());const T=p(e,["realtimeInputConfig"]);t!==void 0&&T!=null&&d(t,["setup","realtimeInputConfig"],eB(n,T));const y=p(e,["contextWindowCompression"]);return t!==void 0&&y!=null&&d(t,["setup","contextWindowCompression"],iB(n,y)),r}function oB(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["setup","model"],un(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],sB(n,i,t)),t}function lB(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["setup","model"],un(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],aB(n,i,t)),t}function cB(){return{}}function uB(){return{}}function fB(n,e){const t={},r=p(e,["thought"]);r!=null&&d(t,["thought"],r);const i=p(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const s=p(e,["executableCode"]);s!=null&&d(t,["executableCode"],s);const a=p(e,["fileData"]);a!=null&&d(t,["fileData"],a);const o=p(e,["functionCall"]);o!=null&&d(t,["functionCall"],o);const l=p(e,["functionResponse"]);l!=null&&d(t,["functionResponse"],l);const c=p(e,["inlineData"]);c!=null&&d(t,["inlineData"],c);const u=p(e,["text"]);return u!=null&&d(t,["text"],u),t}function hB(n,e){const t={},r=p(e,["videoMetadata"]);r!=null&&d(t,["videoMetadata"],r);const i=p(e,["thought"]);i!=null&&d(t,["thought"],i);const s=p(e,["codeExecutionResult"]);s!=null&&d(t,["codeExecutionResult"],s);const a=p(e,["executableCode"]);a!=null&&d(t,["executableCode"],a);const o=p(e,["fileData"]);o!=null&&d(t,["fileData"],o);const l=p(e,["functionCall"]);l!=null&&d(t,["functionCall"],l);const c=p(e,["functionResponse"]);c!=null&&d(t,["functionResponse"],c);const u=p(e,["inlineData"]);u!=null&&d(t,["inlineData"],u);const h=p(e,["text"]);return h!=null&&d(t,["text"],h),t}function dB(n,e){const t={},r=p(e,["parts"]);r!=null&&(Array.isArray(r)?d(t,["parts"],r.map(s=>fB(n,s))):d(t,["parts"],r));const i=p(e,["role"]);return i!=null&&d(t,["role"],i),t}function pB(n,e){const t={},r=p(e,["parts"]);r!=null&&(Array.isArray(r)?d(t,["parts"],r.map(s=>hB(n,s))):d(t,["parts"],r));const i=p(e,["role"]);return i!=null&&d(t,["role"],i),t}function JT(n,e){const t={},r=p(e,["text"]);r!=null&&d(t,["text"],r);const i=p(e,["finished"]);return i!=null&&d(t,["finished"],i),t}function ZT(n,e){const t={},r=p(e,["text"]);r!=null&&d(t,["text"],r);const i=p(e,["finished"]);return i!=null&&d(t,["finished"],i),t}function mB(n,e){const t={},r=p(e,["modelTurn"]);r!=null&&d(t,["modelTurn"],dB(n,r));const i=p(e,["turnComplete"]);i!=null&&d(t,["turnComplete"],i);const s=p(e,["interrupted"]);s!=null&&d(t,["interrupted"],s);const a=p(e,["generationComplete"]);a!=null&&d(t,["generationComplete"],a);const o=p(e,["inputTranscription"]);o!=null&&d(t,["inputTranscription"],JT(n,o));const l=p(e,["outputTranscription"]);return l!=null&&d(t,["outputTranscription"],JT(n,l)),t}function gB(n,e){const t={},r=p(e,["modelTurn"]);r!=null&&d(t,["modelTurn"],pB(n,r));const i=p(e,["turnComplete"]);i!=null&&d(t,["turnComplete"],i);const s=p(e,["interrupted"]);s!=null&&d(t,["interrupted"],s);const a=p(e,["generationComplete"]);a!=null&&d(t,["generationComplete"],a);const o=p(e,["inputTranscription"]);o!=null&&d(t,["inputTranscription"],ZT(n,o));const l=p(e,["outputTranscription"]);return l!=null&&d(t,["outputTranscription"],ZT(n,l)),t}function vB(n,e){const t={},r=p(e,["id"]);r!=null&&d(t,["id"],r);const i=p(e,["args"]);i!=null&&d(t,["args"],i);const s=p(e,["name"]);return s!=null&&d(t,["name"],s),t}function _B(n,e){const t={},r=p(e,["args"]);r!=null&&d(t,["args"],r);const i=p(e,["name"]);return i!=null&&d(t,["name"],i),t}function xB(n,e){const t={},r=p(e,["functionCalls"]);return r!=null&&(Array.isArray(r)?d(t,["functionCalls"],r.map(i=>vB(n,i))):d(t,["functionCalls"],r)),t}function yB(n,e){const t={},r=p(e,["functionCalls"]);return r!=null&&(Array.isArray(r)?d(t,["functionCalls"],r.map(i=>_B(n,i))):d(t,["functionCalls"],r)),t}function EB(n,e){const t={},r=p(e,["ids"]);return r!=null&&d(t,["ids"],r),t}function TB(n,e){const t={},r=p(e,["ids"]);return r!=null&&d(t,["ids"],r),t}function gh(n,e){const t={},r=p(e,["modality"]);r!=null&&d(t,["modality"],r);const i=p(e,["tokenCount"]);return i!=null&&d(t,["tokenCount"],i),t}function vh(n,e){const t={},r=p(e,["modality"]);r!=null&&d(t,["modality"],r);const i=p(e,["tokenCount"]);return i!=null&&d(t,["tokenCount"],i),t}function wB(n,e){const t={},r=p(e,["promptTokenCount"]);r!=null&&d(t,["promptTokenCount"],r);const i=p(e,["cachedContentTokenCount"]);i!=null&&d(t,["cachedContentTokenCount"],i);const s=p(e,["responseTokenCount"]);s!=null&&d(t,["responseTokenCount"],s);const a=p(e,["toolUsePromptTokenCount"]);a!=null&&d(t,["toolUsePromptTokenCount"],a);const o=p(e,["thoughtsTokenCount"]);o!=null&&d(t,["thoughtsTokenCount"],o);const l=p(e,["totalTokenCount"]);l!=null&&d(t,["totalTokenCount"],l);const c=p(e,["promptTokensDetails"]);c!=null&&(Array.isArray(c)?d(t,["promptTokensDetails"],c.map(g=>gh(n,g))):d(t,["promptTokensDetails"],c));const u=p(e,["cacheTokensDetails"]);u!=null&&(Array.isArray(u)?d(t,["cacheTokensDetails"],u.map(g=>gh(n,g))):d(t,["cacheTokensDetails"],u));const h=p(e,["responseTokensDetails"]);h!=null&&(Array.isArray(h)?d(t,["responseTokensDetails"],h.map(g=>gh(n,g))):d(t,["responseTokensDetails"],h));const m=p(e,["toolUsePromptTokensDetails"]);return m!=null&&(Array.isArray(m)?d(t,["toolUsePromptTokensDetails"],m.map(g=>gh(n,g))):d(t,["toolUsePromptTokensDetails"],m)),t}function IB(n,e){const t={},r=p(e,["promptTokenCount"]);r!=null&&d(t,["promptTokenCount"],r);const i=p(e,["cachedContentTokenCount"]);i!=null&&d(t,["cachedContentTokenCount"],i);const s=p(e,["candidatesTokenCount"]);s!=null&&d(t,["responseTokenCount"],s);const a=p(e,["toolUsePromptTokenCount"]);a!=null&&d(t,["toolUsePromptTokenCount"],a);const o=p(e,["thoughtsTokenCount"]);o!=null&&d(t,["thoughtsTokenCount"],o);const l=p(e,["totalTokenCount"]);l!=null&&d(t,["totalTokenCount"],l);const c=p(e,["promptTokensDetails"]);c!=null&&(Array.isArray(c)?d(t,["promptTokensDetails"],c.map(v=>vh(n,v))):d(t,["promptTokensDetails"],c));const u=p(e,["cacheTokensDetails"]);u!=null&&(Array.isArray(u)?d(t,["cacheTokensDetails"],u.map(v=>vh(n,v))):d(t,["cacheTokensDetails"],u));const h=p(e,["candidatesTokensDetails"]);h!=null&&(Array.isArray(h)?d(t,["responseTokensDetails"],h.map(v=>vh(n,v))):d(t,["responseTokensDetails"],h));const m=p(e,["toolUsePromptTokensDetails"]);m!=null&&(Array.isArray(m)?d(t,["toolUsePromptTokensDetails"],m.map(v=>vh(n,v))):d(t,["toolUsePromptTokensDetails"],m));const g=p(e,["trafficType"]);return g!=null&&d(t,["trafficType"],g),t}function SB(n,e){const t={},r=p(e,["timeLeft"]);return r!=null&&d(t,["timeLeft"],r),t}function AB(n,e){const t={},r=p(e,["timeLeft"]);return r!=null&&d(t,["timeLeft"],r),t}function CB(n,e){const t={},r=p(e,["newHandle"]);r!=null&&d(t,["newHandle"],r);const i=p(e,["resumable"]);i!=null&&d(t,["resumable"],i);const s=p(e,["lastConsumedClientMessageIndex"]);return s!=null&&d(t,["lastConsumedClientMessageIndex"],s),t}function kB(n,e){const t={},r=p(e,["newHandle"]);r!=null&&d(t,["newHandle"],r);const i=p(e,["resumable"]);i!=null&&d(t,["resumable"],i);const s=p(e,["lastConsumedClientMessageIndex"]);return s!=null&&d(t,["lastConsumedClientMessageIndex"],s),t}function RB(n,e){const t={};p(e,["setupComplete"])!=null&&d(t,["setupComplete"],cB());const i=p(e,["serverContent"]);i!=null&&d(t,["serverContent"],mB(n,i));const s=p(e,["toolCall"]);s!=null&&d(t,["toolCall"],xB(n,s));const a=p(e,["toolCallCancellation"]);a!=null&&d(t,["toolCallCancellation"],EB(n,a));const o=p(e,["usageMetadata"]);o!=null&&d(t,["usageMetadata"],wB(n,o));const l=p(e,["goAway"]);l!=null&&d(t,["goAway"],SB(n,l));const c=p(e,["sessionResumptionUpdate"]);return c!=null&&d(t,["sessionResumptionUpdate"],CB(n,c)),t}function PB(n,e){const t={};p(e,["setupComplete"])!=null&&d(t,["setupComplete"],uB());const i=p(e,["serverContent"]);i!=null&&d(t,["serverContent"],gB(n,i));const s=p(e,["toolCall"]);s!=null&&d(t,["toolCall"],yB(n,s));const a=p(e,["toolCallCancellation"]);a!=null&&d(t,["toolCallCancellation"],TB(n,a));const o=p(e,["usageMetadata"]);o!=null&&d(t,["usageMetadata"],IB(n,o));const l=p(e,["goAway"]);l!=null&&d(t,["goAway"],AB(n,l));const c=p(e,["sessionResumptionUpdate"]);return c!=null&&d(t,["sessionResumptionUpdate"],kB(n,c)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DB(n,e){const t={};if(p(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=p(e,["thought"]);r!=null&&d(t,["thought"],r);const i=p(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const s=p(e,["executableCode"]);s!=null&&d(t,["executableCode"],s);const a=p(e,["fileData"]);a!=null&&d(t,["fileData"],a);const o=p(e,["functionCall"]);o!=null&&d(t,["functionCall"],o);const l=p(e,["functionResponse"]);l!=null&&d(t,["functionResponse"],l);const c=p(e,["inlineData"]);c!=null&&d(t,["inlineData"],c);const u=p(e,["text"]);return u!=null&&d(t,["text"],u),t}function Y0(n,e){const t={},r=p(e,["parts"]);r!=null&&(Array.isArray(r)?d(t,["parts"],r.map(s=>DB(n,s))):d(t,["parts"],r));const i=p(e,["role"]);return i!=null&&d(t,["role"],i),t}function NB(n,e){const t={};if(p(e,["example"])!==void 0)throw new Error("example parameter is not supported in Gemini API.");if(p(e,["pattern"])!==void 0)throw new Error("pattern parameter is not supported in Gemini API.");if(p(e,["default"])!==void 0)throw new Error("default parameter is not supported in Gemini API.");if(p(e,["maxLength"])!==void 0)throw new Error("maxLength parameter is not supported in Gemini API.");if(p(e,["minLength"])!==void 0)throw new Error("minLength parameter is not supported in Gemini API.");if(p(e,["minProperties"])!==void 0)throw new Error("minProperties parameter is not supported in Gemini API.");if(p(e,["maxProperties"])!==void 0)throw new Error("maxProperties parameter is not supported in Gemini API.");const r=p(e,["anyOf"]);r!=null&&d(t,["anyOf"],r);const i=p(e,["description"]);i!=null&&d(t,["description"],i);const s=p(e,["enum"]);s!=null&&d(t,["enum"],s);const a=p(e,["format"]);a!=null&&d(t,["format"],a);const o=p(e,["items"]);o!=null&&d(t,["items"],o);const l=p(e,["maxItems"]);l!=null&&d(t,["maxItems"],l);const c=p(e,["maximum"]);c!=null&&d(t,["maximum"],c);const u=p(e,["minItems"]);u!=null&&d(t,["minItems"],u);const h=p(e,["minimum"]);h!=null&&d(t,["minimum"],h);const m=p(e,["nullable"]);m!=null&&d(t,["nullable"],m);const g=p(e,["properties"]);g!=null&&d(t,["properties"],g);const v=p(e,["propertyOrdering"]);v!=null&&d(t,["propertyOrdering"],v);const _=p(e,["required"]);_!=null&&d(t,["required"],_);const E=p(e,["title"]);E!=null&&d(t,["title"],E);const w=p(e,["type"]);return w!=null&&d(t,["type"],w),t}function FB(n,e){const t={};if(p(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=p(e,["category"]);r!=null&&d(t,["category"],r);const i=p(e,["threshold"]);return i!=null&&d(t,["threshold"],i),t}function MB(n,e){const t={};if(p(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const r=p(e,["description"]);r!=null&&d(t,["description"],r);const i=p(e,["name"]);i!=null&&d(t,["name"],i);const s=p(e,["parameters"]);return s!=null&&d(t,["parameters"],s),t}function OB(){return{}}function LB(n,e){const t={},r=p(e,["mode"]);r!=null&&d(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return i!=null&&d(t,["dynamicThreshold"],i),t}function bB(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return r!=null&&d(t,["dynamicRetrievalConfig"],LB(n,r)),t}function VB(n,e){const t={},r=p(e,["functionDeclarations"]);if(r!=null&&(Array.isArray(r)?d(t,["functionDeclarations"],r.map(o=>MB(n,o))):d(t,["functionDeclarations"],r)),p(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");p(e,["googleSearch"])!=null&&d(t,["googleSearch"],OB());const s=p(e,["googleSearchRetrieval"]);s!=null&&d(t,["googleSearchRetrieval"],bB(n,s));const a=p(e,["codeExecution"]);return a!=null&&d(t,["codeExecution"],a),t}function UB(n,e){const t={},r=p(e,["mode"]);r!=null&&d(t,["mode"],r);const i=p(e,["allowedFunctionNames"]);return i!=null&&d(t,["allowedFunctionNames"],i),t}function BB(n,e){const t={},r=p(e,["functionCallingConfig"]);return r!=null&&d(t,["functionCallingConfig"],UB(n,r)),t}function GB(n,e){const t={},r=p(e,["voiceName"]);return r!=null&&d(t,["voiceName"],r),t}function zB(n,e){const t={},r=p(e,["prebuiltVoiceConfig"]);return r!=null&&d(t,["prebuiltVoiceConfig"],GB(n,r)),t}function HB(n,e){const t={},r=p(e,["voiceConfig"]);r!=null&&d(t,["voiceConfig"],zB(n,r));const i=p(e,["languageCode"]);return i!=null&&d(t,["languageCode"],i),t}function $B(n,e){const t={},r=p(e,["includeThoughts"]);r!=null&&d(t,["includeThoughts"],r);const i=p(e,["thinkingBudget"]);return i!=null&&d(t,["thinkingBudget"],i),t}function WB(n,e,t){const r={},i=p(e,["systemInstruction"]);t!==void 0&&i!=null&&d(t,["systemInstruction"],Y0(n,nr(n,i)));const s=p(e,["temperature"]);s!=null&&d(r,["temperature"],s);const a=p(e,["topP"]);a!=null&&d(r,["topP"],a);const o=p(e,["topK"]);o!=null&&d(r,["topK"],o);const l=p(e,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);const c=p(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const u=p(e,["stopSequences"]);u!=null&&d(r,["stopSequences"],u);const h=p(e,["responseLogprobs"]);h!=null&&d(r,["responseLogprobs"],h);const m=p(e,["logprobs"]);m!=null&&d(r,["logprobs"],m);const g=p(e,["presencePenalty"]);g!=null&&d(r,["presencePenalty"],g);const v=p(e,["frequencyPenalty"]);v!=null&&d(r,["frequencyPenalty"],v);const _=p(e,["seed"]);_!=null&&d(r,["seed"],_);const E=p(e,["responseMimeType"]);E!=null&&d(r,["responseMimeType"],E);const w=p(e,["responseSchema"]);if(w!=null&&d(r,["responseSchema"],NB(n,zk(n,w))),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=p(e,["safetySettings"]);t!==void 0&&T!=null&&(Array.isArray(T)?d(t,["safetySettings"],T.map(P=>FB(n,P))):d(t,["safetySettings"],T));const y=p(e,["tools"]);t!==void 0&&y!=null&&(Array.isArray(y)?d(t,["tools"],Or(n,Or(n,y).map(P=>VB(n,j0(n,P))))):d(t,["tools"],Or(n,y)));const k=p(e,["toolConfig"]);if(t!==void 0&&k!=null&&d(t,["toolConfig"],BB(n,k)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=p(e,["cachedContent"]);t!==void 0&&V!=null&&d(t,["cachedContent"],ha(n,V));const L=p(e,["responseModalities"]);L!=null&&d(r,["responseModalities"],L);const I=p(e,["mediaResolution"]);I!=null&&d(r,["mediaResolution"],I);const A=p(e,["speechConfig"]);if(A!=null&&d(r,["speechConfig"],HB(n,Hk(n,A))),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=p(e,["thinkingConfig"]);return C!=null&&d(r,["thinkingConfig"],$B(n,C)),r}function ew(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","model"],un(n,r));const i=p(e,["contents"]);i!=null&&(Array.isArray(i)?d(t,["contents"],Mt(n,Mt(n,i).map(a=>Y0(n,a)))):d(t,["contents"],Mt(n,i)));const s=p(e,["config"]);return s!=null&&d(t,["generationConfig"],WB(n,s,t)),t}function qB(n,e,t){const r={},i=p(e,["taskType"]);t!==void 0&&i!=null&&d(t,["requests[]","taskType"],i);const s=p(e,["title"]);t!==void 0&&s!=null&&d(t,["requests[]","title"],s);const a=p(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&d(t,["requests[]","outputDimensionality"],a),p(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function KB(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","model"],un(n,r));const i=p(e,["contents"]);i!=null&&d(t,["requests[]","content"],Gk(n,i));const s=p(e,["config"]);s!=null&&d(t,["config"],qB(n,s,t));const a=p(e,["model"]);return a!==void 0&&d(t,["requests[]","model"],un(n,a)),t}function jB(n,e,t){const r={};if(p(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(e,["numberOfImages"]);t!==void 0&&i!=null&&d(t,["parameters","sampleCount"],i);const s=p(e,["aspectRatio"]);t!==void 0&&s!=null&&d(t,["parameters","aspectRatio"],s);const a=p(e,["guidanceScale"]);if(t!==void 0&&a!=null&&d(t,["parameters","guidanceScale"],a),p(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=p(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&d(t,["parameters","safetySetting"],o);const l=p(e,["personGeneration"]);t!==void 0&&l!=null&&d(t,["parameters","personGeneration"],l);const c=p(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&d(t,["parameters","includeSafetyAttributes"],c);const u=p(e,["includeRaiReason"]);t!==void 0&&u!=null&&d(t,["parameters","includeRaiReason"],u);const h=p(e,["language"]);t!==void 0&&h!=null&&d(t,["parameters","language"],h);const m=p(e,["outputMimeType"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","mimeType"],m);const g=p(e,["outputCompressionQuality"]);if(t!==void 0&&g!=null&&d(t,["parameters","outputOptions","compressionQuality"],g),p(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function YB(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","model"],un(n,r));const i=p(e,["prompt"]);i!=null&&d(t,["instances[0]","prompt"],i);const s=p(e,["config"]);return s!=null&&d(t,["config"],jB(n,s,t)),t}function XB(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","name"],un(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],i),t}function QB(n,e){const t={};if(p(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function JB(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","model"],un(n,r));const i=p(e,["contents"]);i!=null&&(Array.isArray(i)?d(t,["contents"],Mt(n,Mt(n,i).map(a=>Y0(n,a)))):d(t,["contents"],Mt(n,i)));const s=p(e,["config"]);return s!=null&&d(t,["config"],QB(n,s)),t}function ZB(n,e){const t={};if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=p(e,["imageBytes"]);r!=null&&d(t,["bytesBase64Encoded"],da(n,r));const i=p(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function e9(n,e,t){const r={},i=p(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&d(t,["parameters","sampleCount"],i),p(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=p(e,["durationSeconds"]);if(t!==void 0&&s!=null&&d(t,["parameters","durationSeconds"],s),p(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(e,["aspectRatio"]);if(t!==void 0&&a!=null&&d(t,["parameters","aspectRatio"],a),p(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const o=p(e,["personGeneration"]);if(t!==void 0&&o!=null&&d(t,["parameters","personGeneration"],o),p(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=p(e,["negativePrompt"]);if(t!==void 0&&l!=null&&d(t,["parameters","negativePrompt"],l),p(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function t9(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","model"],un(n,r));const i=p(e,["prompt"]);i!=null&&d(t,["instances[0]","prompt"],i);const s=p(e,["image"]);s!=null&&d(t,["instances[0]","image"],ZB(n,s));const a=p(e,["config"]);return a!=null&&d(t,["config"],e9(n,a,t)),t}function n9(n,e){const t={},r=p(e,["videoMetadata"]);r!=null&&d(t,["videoMetadata"],r);const i=p(e,["thought"]);i!=null&&d(t,["thought"],i);const s=p(e,["codeExecutionResult"]);s!=null&&d(t,["codeExecutionResult"],s);const a=p(e,["executableCode"]);a!=null&&d(t,["executableCode"],a);const o=p(e,["fileData"]);o!=null&&d(t,["fileData"],o);const l=p(e,["functionCall"]);l!=null&&d(t,["functionCall"],l);const c=p(e,["functionResponse"]);c!=null&&d(t,["functionResponse"],c);const u=p(e,["inlineData"]);u!=null&&d(t,["inlineData"],u);const h=p(e,["text"]);return h!=null&&d(t,["text"],h),t}function ec(n,e){const t={},r=p(e,["parts"]);r!=null&&(Array.isArray(r)?d(t,["parts"],r.map(s=>n9(n,s))):d(t,["parts"],r));const i=p(e,["role"]);return i!=null&&d(t,["role"],i),t}function Kk(n,e){const t={},r=p(e,["example"]);r!=null&&d(t,["example"],r);const i=p(e,["pattern"]);i!=null&&d(t,["pattern"],i);const s=p(e,["default"]);s!=null&&d(t,["default"],s);const a=p(e,["maxLength"]);a!=null&&d(t,["maxLength"],a);const o=p(e,["minLength"]);o!=null&&d(t,["minLength"],o);const l=p(e,["minProperties"]);l!=null&&d(t,["minProperties"],l);const c=p(e,["maxProperties"]);c!=null&&d(t,["maxProperties"],c);const u=p(e,["anyOf"]);u!=null&&d(t,["anyOf"],u);const h=p(e,["description"]);h!=null&&d(t,["description"],h);const m=p(e,["enum"]);m!=null&&d(t,["enum"],m);const g=p(e,["format"]);g!=null&&d(t,["format"],g);const v=p(e,["items"]);v!=null&&d(t,["items"],v);const _=p(e,["maxItems"]);_!=null&&d(t,["maxItems"],_);const E=p(e,["maximum"]);E!=null&&d(t,["maximum"],E);const w=p(e,["minItems"]);w!=null&&d(t,["minItems"],w);const T=p(e,["minimum"]);T!=null&&d(t,["minimum"],T);const y=p(e,["nullable"]);y!=null&&d(t,["nullable"],y);const k=p(e,["properties"]);k!=null&&d(t,["properties"],k);const V=p(e,["propertyOrdering"]);V!=null&&d(t,["propertyOrdering"],V);const L=p(e,["required"]);L!=null&&d(t,["required"],L);const I=p(e,["title"]);I!=null&&d(t,["title"],I);const A=p(e,["type"]);return A!=null&&d(t,["type"],A),t}function r9(n,e){const t={},r=p(e,["featureSelectionPreference"]);return r!=null&&d(t,["featureSelectionPreference"],r),t}function i9(n,e){const t={},r=p(e,["method"]);r!=null&&d(t,["method"],r);const i=p(e,["category"]);i!=null&&d(t,["category"],i);const s=p(e,["threshold"]);return s!=null&&d(t,["threshold"],s),t}function s9(n,e){const t={},r=p(e,["response"]);r!=null&&d(t,["response"],Kk(n,r));const i=p(e,["description"]);i!=null&&d(t,["description"],i);const s=p(e,["name"]);s!=null&&d(t,["name"],s);const a=p(e,["parameters"]);return a!=null&&d(t,["parameters"],a),t}function a9(){return{}}function o9(n,e){const t={},r=p(e,["mode"]);r!=null&&d(t,["mode"],r);const i=p(e,["dynamicThreshold"]);return i!=null&&d(t,["dynamicThreshold"],i),t}function l9(n,e){const t={},r=p(e,["dynamicRetrievalConfig"]);return r!=null&&d(t,["dynamicRetrievalConfig"],o9(n,r)),t}function jk(n,e){const t={},r=p(e,["functionDeclarations"]);r!=null&&(Array.isArray(r)?d(t,["functionDeclarations"],r.map(l=>s9(n,l))):d(t,["functionDeclarations"],r));const i=p(e,["retrieval"]);i!=null&&d(t,["retrieval"],i),p(e,["googleSearch"])!=null&&d(t,["googleSearch"],a9());const a=p(e,["googleSearchRetrieval"]);a!=null&&d(t,["googleSearchRetrieval"],l9(n,a));const o=p(e,["codeExecution"]);return o!=null&&d(t,["codeExecution"],o),t}function c9(n,e){const t={},r=p(e,["mode"]);r!=null&&d(t,["mode"],r);const i=p(e,["allowedFunctionNames"]);return i!=null&&d(t,["allowedFunctionNames"],i),t}function u9(n,e){const t={},r=p(e,["functionCallingConfig"]);return r!=null&&d(t,["functionCallingConfig"],c9(n,r)),t}function f9(n,e){const t={},r=p(e,["voiceName"]);return r!=null&&d(t,["voiceName"],r),t}function h9(n,e){const t={},r=p(e,["prebuiltVoiceConfig"]);return r!=null&&d(t,["prebuiltVoiceConfig"],f9(n,r)),t}function d9(n,e){const t={},r=p(e,["voiceConfig"]);r!=null&&d(t,["voiceConfig"],h9(n,r));const i=p(e,["languageCode"]);return i!=null&&d(t,["languageCode"],i),t}function p9(n,e){const t={},r=p(e,["includeThoughts"]);r!=null&&d(t,["includeThoughts"],r);const i=p(e,["thinkingBudget"]);return i!=null&&d(t,["thinkingBudget"],i),t}function m9(n,e,t){const r={},i=p(e,["systemInstruction"]);t!==void 0&&i!=null&&d(t,["systemInstruction"],ec(n,nr(n,i)));const s=p(e,["temperature"]);s!=null&&d(r,["temperature"],s);const a=p(e,["topP"]);a!=null&&d(r,["topP"],a);const o=p(e,["topK"]);o!=null&&d(r,["topK"],o);const l=p(e,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);const c=p(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const u=p(e,["stopSequences"]);u!=null&&d(r,["stopSequences"],u);const h=p(e,["responseLogprobs"]);h!=null&&d(r,["responseLogprobs"],h);const m=p(e,["logprobs"]);m!=null&&d(r,["logprobs"],m);const g=p(e,["presencePenalty"]);g!=null&&d(r,["presencePenalty"],g);const v=p(e,["frequencyPenalty"]);v!=null&&d(r,["frequencyPenalty"],v);const _=p(e,["seed"]);_!=null&&d(r,["seed"],_);const E=p(e,["responseMimeType"]);E!=null&&d(r,["responseMimeType"],E);const w=p(e,["responseSchema"]);w!=null&&d(r,["responseSchema"],Kk(n,zk(n,w)));const T=p(e,["routingConfig"]);T!=null&&d(r,["routingConfig"],T);const y=p(e,["modelSelectionConfig"]);y!=null&&d(r,["modelConfig"],r9(n,y));const k=p(e,["safetySettings"]);t!==void 0&&k!=null&&(Array.isArray(k)?d(t,["safetySettings"],k.map(ye=>i9(n,ye))):d(t,["safetySettings"],k));const V=p(e,["tools"]);t!==void 0&&V!=null&&(Array.isArray(V)?d(t,["tools"],Or(n,Or(n,V).map(ye=>jk(n,j0(n,ye))))):d(t,["tools"],Or(n,V)));const L=p(e,["toolConfig"]);t!==void 0&&L!=null&&d(t,["toolConfig"],u9(n,L));const I=p(e,["labels"]);t!==void 0&&I!=null&&d(t,["labels"],I);const A=p(e,["cachedContent"]);t!==void 0&&A!=null&&d(t,["cachedContent"],ha(n,A));const C=p(e,["responseModalities"]);C!=null&&d(r,["responseModalities"],C);const P=p(e,["mediaResolution"]);P!=null&&d(r,["mediaResolution"],P);const D=p(e,["speechConfig"]);D!=null&&d(r,["speechConfig"],d9(n,Hk(n,D)));const N=p(e,["audioTimestamp"]);N!=null&&d(r,["audioTimestamp"],N);const M=p(e,["thinkingConfig"]);return M!=null&&d(r,["thinkingConfig"],p9(n,M)),r}function tw(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","model"],un(n,r));const i=p(e,["contents"]);i!=null&&(Array.isArray(i)?d(t,["contents"],Mt(n,Mt(n,i).map(a=>ec(n,a)))):d(t,["contents"],Mt(n,i)));const s=p(e,["config"]);return s!=null&&d(t,["generationConfig"],m9(n,s,t)),t}function g9(n,e,t){const r={},i=p(e,["taskType"]);t!==void 0&&i!=null&&d(t,["instances[]","task_type"],i);const s=p(e,["title"]);t!==void 0&&s!=null&&d(t,["instances[]","title"],s);const a=p(e,["outputDimensionality"]);t!==void 0&&a!=null&&d(t,["parameters","outputDimensionality"],a);const o=p(e,["mimeType"]);t!==void 0&&o!=null&&d(t,["instances[]","mimeType"],o);const l=p(e,["autoTruncate"]);return t!==void 0&&l!=null&&d(t,["parameters","autoTruncate"],l),r}function v9(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","model"],un(n,r));const i=p(e,["contents"]);i!=null&&d(t,["instances[]","content"],Gk(n,i));const s=p(e,["config"]);return s!=null&&d(t,["config"],g9(n,s,t)),t}function _9(n,e,t){const r={},i=p(e,["outputGcsUri"]);t!==void 0&&i!=null&&d(t,["parameters","storageUri"],i);const s=p(e,["negativePrompt"]);t!==void 0&&s!=null&&d(t,["parameters","negativePrompt"],s);const a=p(e,["numberOfImages"]);t!==void 0&&a!=null&&d(t,["parameters","sampleCount"],a);const o=p(e,["aspectRatio"]);t!==void 0&&o!=null&&d(t,["parameters","aspectRatio"],o);const l=p(e,["guidanceScale"]);t!==void 0&&l!=null&&d(t,["parameters","guidanceScale"],l);const c=p(e,["seed"]);t!==void 0&&c!=null&&d(t,["parameters","seed"],c);const u=p(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&d(t,["parameters","safetySetting"],u);const h=p(e,["personGeneration"]);t!==void 0&&h!=null&&d(t,["parameters","personGeneration"],h);const m=p(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&d(t,["parameters","includeSafetyAttributes"],m);const g=p(e,["includeRaiReason"]);t!==void 0&&g!=null&&d(t,["parameters","includeRaiReason"],g);const v=p(e,["language"]);t!==void 0&&v!=null&&d(t,["parameters","language"],v);const _=p(e,["outputMimeType"]);t!==void 0&&_!=null&&d(t,["parameters","outputOptions","mimeType"],_);const E=p(e,["outputCompressionQuality"]);t!==void 0&&E!=null&&d(t,["parameters","outputOptions","compressionQuality"],E);const w=p(e,["addWatermark"]);t!==void 0&&w!=null&&d(t,["parameters","addWatermark"],w);const T=p(e,["enhancePrompt"]);return t!==void 0&&T!=null&&d(t,["parameters","enhancePrompt"],T),r}function x9(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","model"],un(n,r));const i=p(e,["prompt"]);i!=null&&d(t,["instances[0]","prompt"],i);const s=p(e,["config"]);return s!=null&&d(t,["config"],_9(n,s,t)),t}function y9(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","name"],un(n,r));const i=p(e,["config"]);return i!=null&&d(t,["config"],i),t}function E9(n,e,t){const r={},i=p(e,["systemInstruction"]);t!==void 0&&i!=null&&d(t,["systemInstruction"],ec(n,nr(n,i)));const s=p(e,["tools"]);t!==void 0&&s!=null&&(Array.isArray(s)?d(t,["tools"],s.map(o=>jk(n,o))):d(t,["tools"],s));const a=p(e,["generationConfig"]);return t!==void 0&&a!=null&&d(t,["generationConfig"],a),r}function T9(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","model"],un(n,r));const i=p(e,["contents"]);i!=null&&(Array.isArray(i)?d(t,["contents"],Mt(n,Mt(n,i).map(a=>ec(n,a)))):d(t,["contents"],Mt(n,i)));const s=p(e,["config"]);return s!=null&&d(t,["config"],E9(n,s,t)),t}function w9(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","model"],un(n,r));const i=p(e,["contents"]);i!=null&&(Array.isArray(i)?d(t,["contents"],Mt(n,Mt(n,i).map(a=>ec(n,a)))):d(t,["contents"],Mt(n,i)));const s=p(e,["config"]);return s!=null&&d(t,["config"],s),t}function I9(n,e){const t={},r=p(e,["gcsUri"]);r!=null&&d(t,["gcsUri"],r);const i=p(e,["imageBytes"]);i!=null&&d(t,["bytesBase64Encoded"],da(n,i));const s=p(e,["mimeType"]);return s!=null&&d(t,["mimeType"],s),t}function S9(n,e,t){const r={},i=p(e,["numberOfVideos"]);t!==void 0&&i!=null&&d(t,["parameters","sampleCount"],i);const s=p(e,["outputGcsUri"]);t!==void 0&&s!=null&&d(t,["parameters","storageUri"],s);const a=p(e,["fps"]);t!==void 0&&a!=null&&d(t,["parameters","fps"],a);const o=p(e,["durationSeconds"]);t!==void 0&&o!=null&&d(t,["parameters","durationSeconds"],o);const l=p(e,["seed"]);t!==void 0&&l!=null&&d(t,["parameters","seed"],l);const c=p(e,["aspectRatio"]);t!==void 0&&c!=null&&d(t,["parameters","aspectRatio"],c);const u=p(e,["resolution"]);t!==void 0&&u!=null&&d(t,["parameters","resolution"],u);const h=p(e,["personGeneration"]);t!==void 0&&h!=null&&d(t,["parameters","personGeneration"],h);const m=p(e,["pubsubTopic"]);t!==void 0&&m!=null&&d(t,["parameters","pubsubTopic"],m);const g=p(e,["negativePrompt"]);t!==void 0&&g!=null&&d(t,["parameters","negativePrompt"],g);const v=p(e,["enhancePrompt"]);return t!==void 0&&v!=null&&d(t,["parameters","enhancePrompt"],v),r}function A9(n,e){const t={},r=p(e,["model"]);r!=null&&d(t,["_url","model"],un(n,r));const i=p(e,["prompt"]);i!=null&&d(t,["instances[0]","prompt"],i);const s=p(e,["image"]);s!=null&&d(t,["instances[0]","image"],I9(n,s));const a=p(e,["config"]);return a!=null&&d(t,["config"],S9(n,a,t)),t}function C9(n,e){const t={},r=p(e,["thought"]);r!=null&&d(t,["thought"],r);const i=p(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const s=p(e,["executableCode"]);s!=null&&d(t,["executableCode"],s);const a=p(e,["fileData"]);a!=null&&d(t,["fileData"],a);const o=p(e,["functionCall"]);o!=null&&d(t,["functionCall"],o);const l=p(e,["functionResponse"]);l!=null&&d(t,["functionResponse"],l);const c=p(e,["inlineData"]);c!=null&&d(t,["inlineData"],c);const u=p(e,["text"]);return u!=null&&d(t,["text"],u),t}function k9(n,e){const t={},r=p(e,["parts"]);r!=null&&(Array.isArray(r)?d(t,["parts"],r.map(s=>C9(n,s))):d(t,["parts"],r));const i=p(e,["role"]);return i!=null&&d(t,["role"],i),t}function R9(n,e){const t={},r=p(e,["citationSources"]);return r!=null&&d(t,["citations"],r),t}function P9(n,e){const t={},r=p(e,["content"]);r!=null&&d(t,["content"],k9(n,r));const i=p(e,["citationMetadata"]);i!=null&&d(t,["citationMetadata"],R9(n,i));const s=p(e,["tokenCount"]);s!=null&&d(t,["tokenCount"],s);const a=p(e,["finishReason"]);a!=null&&d(t,["finishReason"],a);const o=p(e,["avgLogprobs"]);o!=null&&d(t,["avgLogprobs"],o);const l=p(e,["groundingMetadata"]);l!=null&&d(t,["groundingMetadata"],l);const c=p(e,["index"]);c!=null&&d(t,["index"],c);const u=p(e,["logprobsResult"]);u!=null&&d(t,["logprobsResult"],u);const h=p(e,["safetyRatings"]);return h!=null&&d(t,["safetyRatings"],h),t}function nw(n,e){const t={},r=p(e,["candidates"]);r!=null&&(Array.isArray(r)?d(t,["candidates"],r.map(o=>P9(n,o))):d(t,["candidates"],r));const i=p(e,["modelVersion"]);i!=null&&d(t,["modelVersion"],i);const s=p(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const a=p(e,["usageMetadata"]);return a!=null&&d(t,["usageMetadata"],a),t}function D9(n,e){const t={},r=p(e,["values"]);return r!=null&&d(t,["values"],r),t}function N9(){return{}}function F9(n,e){const t={},r=p(e,["embeddings"]);return r!=null&&(Array.isArray(r)?d(t,["embeddings"],r.map(s=>D9(n,s))):d(t,["embeddings"],r)),p(e,["metadata"])!=null&&d(t,["metadata"],N9()),t}function M9(n,e){const t={},r=p(e,["bytesBase64Encoded"]);r!=null&&d(t,["imageBytes"],da(n,r));const i=p(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function Yk(n,e){const t={},r=p(e,["safetyAttributes","categories"]);r!=null&&d(t,["categories"],r);const i=p(e,["safetyAttributes","scores"]);i!=null&&d(t,["scores"],i);const s=p(e,["contentType"]);return s!=null&&d(t,["contentType"],s),t}function O9(n,e){const t={},r=p(e,["_self"]);r!=null&&d(t,["image"],M9(n,r));const i=p(e,["raiFilteredReason"]);i!=null&&d(t,["raiFilteredReason"],i);const s=p(e,["_self"]);return s!=null&&d(t,["safetyAttributes"],Yk(n,s)),t}function L9(n,e){const t={},r=p(e,["predictions"]);r!=null&&(Array.isArray(r)?d(t,["generatedImages"],r.map(s=>O9(n,s))):d(t,["generatedImages"],r));const i=p(e,["positivePromptSafetyAttributes"]);return i!=null&&d(t,["positivePromptSafetyAttributes"],Yk(n,i)),t}function b9(n,e){const t={},r=p(e,["baseModel"]);r!=null&&d(t,["baseModel"],r);const i=p(e,["createTime"]);i!=null&&d(t,["createTime"],i);const s=p(e,["updateTime"]);return s!=null&&d(t,["updateTime"],s),t}function V9(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["name"],r);const i=p(e,["displayName"]);i!=null&&d(t,["displayName"],i);const s=p(e,["description"]);s!=null&&d(t,["description"],s);const a=p(e,["version"]);a!=null&&d(t,["version"],a);const o=p(e,["_self"]);o!=null&&d(t,["tunedModelInfo"],b9(n,o));const l=p(e,["inputTokenLimit"]);l!=null&&d(t,["inputTokenLimit"],l);const c=p(e,["outputTokenLimit"]);c!=null&&d(t,["outputTokenLimit"],c);const u=p(e,["supportedGenerationMethods"]);return u!=null&&d(t,["supportedActions"],u),t}function U9(n,e){const t={},r=p(e,["totalTokens"]);r!=null&&d(t,["totalTokens"],r);const i=p(e,["cachedContentTokenCount"]);return i!=null&&d(t,["cachedContentTokenCount"],i),t}function B9(n,e){const t={},r=p(e,["video","uri"]);r!=null&&d(t,["uri"],r);const i=p(e,["video","encodedVideo"]);i!=null&&d(t,["videoBytes"],da(n,i));const s=p(e,["encoding"]);return s!=null&&d(t,["mimeType"],s),t}function G9(n,e){const t={},r=p(e,["_self"]);return r!=null&&d(t,["video"],B9(n,r)),t}function z9(n,e){const t={},r=p(e,["generatedSamples"]);r!=null&&(Array.isArray(r)?d(t,["generatedVideos"],r.map(a=>G9(n,a))):d(t,["generatedVideos"],r));const i=p(e,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);const s=p(e,["raiMediaFilteredReasons"]);return s!=null&&d(t,["raiMediaFilteredReasons"],s),t}function H9(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["name"],r);const i=p(e,["metadata"]);i!=null&&d(t,["metadata"],i);const s=p(e,["done"]);s!=null&&d(t,["done"],s);const a=p(e,["error"]);a!=null&&d(t,["error"],a);const o=p(e,["response","generateVideoResponse"]);return o!=null&&d(t,["response"],z9(n,o)),t}function $9(n,e){const t={},r=p(e,["videoMetadata"]);r!=null&&d(t,["videoMetadata"],r);const i=p(e,["thought"]);i!=null&&d(t,["thought"],i);const s=p(e,["codeExecutionResult"]);s!=null&&d(t,["codeExecutionResult"],s);const a=p(e,["executableCode"]);a!=null&&d(t,["executableCode"],a);const o=p(e,["fileData"]);o!=null&&d(t,["fileData"],o);const l=p(e,["functionCall"]);l!=null&&d(t,["functionCall"],l);const c=p(e,["functionResponse"]);c!=null&&d(t,["functionResponse"],c);const u=p(e,["inlineData"]);u!=null&&d(t,["inlineData"],u);const h=p(e,["text"]);return h!=null&&d(t,["text"],h),t}function W9(n,e){const t={},r=p(e,["parts"]);r!=null&&(Array.isArray(r)?d(t,["parts"],r.map(s=>$9(n,s))):d(t,["parts"],r));const i=p(e,["role"]);return i!=null&&d(t,["role"],i),t}function q9(n,e){const t={},r=p(e,["citations"]);return r!=null&&d(t,["citations"],r),t}function K9(n,e){const t={},r=p(e,["content"]);r!=null&&d(t,["content"],W9(n,r));const i=p(e,["citationMetadata"]);i!=null&&d(t,["citationMetadata"],q9(n,i));const s=p(e,["finishMessage"]);s!=null&&d(t,["finishMessage"],s);const a=p(e,["finishReason"]);a!=null&&d(t,["finishReason"],a);const o=p(e,["avgLogprobs"]);o!=null&&d(t,["avgLogprobs"],o);const l=p(e,["groundingMetadata"]);l!=null&&d(t,["groundingMetadata"],l);const c=p(e,["index"]);c!=null&&d(t,["index"],c);const u=p(e,["logprobsResult"]);u!=null&&d(t,["logprobsResult"],u);const h=p(e,["safetyRatings"]);return h!=null&&d(t,["safetyRatings"],h),t}function rw(n,e){const t={},r=p(e,["candidates"]);r!=null&&(Array.isArray(r)?d(t,["candidates"],r.map(c=>K9(n,c))):d(t,["candidates"],r));const i=p(e,["createTime"]);i!=null&&d(t,["createTime"],i);const s=p(e,["responseId"]);s!=null&&d(t,["responseId"],s);const a=p(e,["modelVersion"]);a!=null&&d(t,["modelVersion"],a);const o=p(e,["promptFeedback"]);o!=null&&d(t,["promptFeedback"],o);const l=p(e,["usageMetadata"]);return l!=null&&d(t,["usageMetadata"],l),t}function j9(n,e){const t={},r=p(e,["truncated"]);r!=null&&d(t,["truncated"],r);const i=p(e,["token_count"]);return i!=null&&d(t,["tokenCount"],i),t}function Y9(n,e){const t={},r=p(e,["values"]);r!=null&&d(t,["values"],r);const i=p(e,["statistics"]);return i!=null&&d(t,["statistics"],j9(n,i)),t}function X9(n,e){const t={},r=p(e,["billableCharacterCount"]);return r!=null&&d(t,["billableCharacterCount"],r),t}function Q9(n,e){const t={},r=p(e,["predictions[]","embeddings"]);r!=null&&(Array.isArray(r)?d(t,["embeddings"],r.map(s=>Y9(n,s))):d(t,["embeddings"],r));const i=p(e,["metadata"]);return i!=null&&d(t,["metadata"],X9(n,i)),t}function J9(n,e){const t={},r=p(e,["gcsUri"]);r!=null&&d(t,["gcsUri"],r);const i=p(e,["bytesBase64Encoded"]);i!=null&&d(t,["imageBytes"],da(n,i));const s=p(e,["mimeType"]);return s!=null&&d(t,["mimeType"],s),t}function Xk(n,e){const t={},r=p(e,["safetyAttributes","categories"]);r!=null&&d(t,["categories"],r);const i=p(e,["safetyAttributes","scores"]);i!=null&&d(t,["scores"],i);const s=p(e,["contentType"]);return s!=null&&d(t,["contentType"],s),t}function Z9(n,e){const t={},r=p(e,["_self"]);r!=null&&d(t,["image"],J9(n,r));const i=p(e,["raiFilteredReason"]);i!=null&&d(t,["raiFilteredReason"],i);const s=p(e,["_self"]);s!=null&&d(t,["safetyAttributes"],Xk(n,s));const a=p(e,["prompt"]);return a!=null&&d(t,["enhancedPrompt"],a),t}function e7(n,e){const t={},r=p(e,["predictions"]);r!=null&&(Array.isArray(r)?d(t,["generatedImages"],r.map(s=>Z9(n,s))):d(t,["generatedImages"],r));const i=p(e,["positivePromptSafetyAttributes"]);return i!=null&&d(t,["positivePromptSafetyAttributes"],Xk(n,i)),t}function t7(n,e){const t={},r=p(e,["endpoint"]);r!=null&&d(t,["name"],r);const i=p(e,["deployedModelId"]);return i!=null&&d(t,["deployedModelId"],i),t}function n7(n,e){const t={},r=p(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&d(t,["baseModel"],r);const i=p(e,["createTime"]);i!=null&&d(t,["createTime"],i);const s=p(e,["updateTime"]);return s!=null&&d(t,["updateTime"],s),t}function r7(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["name"],r);const i=p(e,["displayName"]);i!=null&&d(t,["displayName"],i);const s=p(e,["description"]);s!=null&&d(t,["description"],s);const a=p(e,["versionId"]);a!=null&&d(t,["version"],a);const o=p(e,["deployedModels"]);o!=null&&(Array.isArray(o)?d(t,["endpoints"],o.map(u=>t7(n,u))):d(t,["endpoints"],o));const l=p(e,["labels"]);l!=null&&d(t,["labels"],l);const c=p(e,["_self"]);return c!=null&&d(t,["tunedModelInfo"],n7(n,c)),t}function i7(n,e){const t={},r=p(e,["totalTokens"]);return r!=null&&d(t,["totalTokens"],r),t}function s7(n,e){const t={},r=p(e,["tokensInfo"]);return r!=null&&d(t,["tokensInfo"],r),t}function a7(n,e){const t={},r=p(e,["gcsUri"]);r!=null&&d(t,["uri"],r);const i=p(e,["bytesBase64Encoded"]);i!=null&&d(t,["videoBytes"],da(n,i));const s=p(e,["mimeType"]);return s!=null&&d(t,["mimeType"],s),t}function o7(n,e){const t={},r=p(e,["_self"]);return r!=null&&d(t,["video"],a7(n,r)),t}function l7(n,e){const t={},r=p(e,["videos"]);r!=null&&(Array.isArray(r)?d(t,["generatedVideos"],r.map(a=>o7(n,a))):d(t,["generatedVideos"],r));const i=p(e,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);const s=p(e,["raiMediaFilteredReasons"]);return s!=null&&d(t,["raiMediaFilteredReasons"],s),t}function c7(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["name"],r);const i=p(e,["metadata"]);i!=null&&d(t,["metadata"],i);const s=p(e,["done"]);s!=null&&d(t,["done"],s);const a=p(e,["error"]);a!=null&&d(t,["error"],a);const o=p(e,["response"]);return o!=null&&d(t,["response"],l7(n,o)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u7="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function f7(n,e,t){let r,i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),n.isVertexAI()?r=PB(n,i):r=RB(n,i),e(r)}class h7{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r,i,s;const a=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion();let l;const c=g7(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())l=`${a}/ws/google.cloud.aiplatform.${o}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(c);else{const k=this.apiClient.getApiKey();l=`${a}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateContent?key=${k}`}let u=()=>{};const h=new Promise(k=>{u=k}),m=e.callbacks,g=function(){var k;(k=m==null?void 0:m.onopen)===null||k===void 0||k.call(m),u({})},v=this.apiClient,_={onopen:g,onmessage:k=>{f7(v,m.onmessage,k)},onerror:(t=m==null?void 0:m.onerror)!==null&&t!==void 0?t:function(k){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(k){}},E=this.webSocketFactory.create(l,m7(c),_);E.connect(),await h;let w=un(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const k=this.apiClient.getProject(),V=this.apiClient.getLocation();w=`projects/${k}/locations/${V}/`+w}let T={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Yd.AUDIO]}:e.config.responseModalities=[Yd.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const y={model:w,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?T=lB(this.apiClient,y):T=oB(this.apiClient,y),delete T.config,E.send(JSON.stringify(T)),new p7(E,this.apiClient)}}const d7={turnComplete:!0};class p7{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=Mt(e,t.turns),e.isVertexAI()?r=r.map(i=>ec(e,i)):r=r.map(i=>Y0(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClientRealtimeInput(e,t){let r={};if(!("media"in t)||!t.media)throw new Error(`Failed to convert realtime input "media", type: '${typeof t.media}'`);return r={realtimeInput:{mediaChunks:[t.media],activityStart:t.activityStart,activityEnd:t.activityEnd}},r}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(u7)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},d7),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){if(e.media==null)throw new Error("Media is required.");const t=this.tLiveClientRealtimeInput(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function m7(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function g7(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v7 extends K0{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>await this.generateContentInternal(t),this.generateContentStream=async t=>await this.generateContentStreamInternal(t),this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let s;const a=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:a.push(l);let o;return s?o={generatedImages:a,positivePromptSafetyAttributes:s}:o={generatedImages:a},o})}async generateContentInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=tw(this.apiClient,e);return s=Qe("{model}:generateContent",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(l=>{const c=rw(this.apiClient,l),u=new mh;return Object.assign(u,c),u})}else{const o=ew(this.apiClient,e);return s=Qe("{model}:generateContent",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(l=>{const c=nw(this.apiClient,l),u=new mh;return Object.assign(u,c),u})}}async generateContentStreamInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=tw(this.apiClient,e);s=Qe("{model}:streamGenerateContent?alt=sse",o._url),a=o._query,delete o.config,delete o._url,delete o._query;const l=this.apiClient;return i=l.requestStream({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}),i.then(function(c){return Xd(this,arguments,function*(){var u,h,m,g;try{for(var v=!0,_=Ug(c),E;E=yield kn(_.next()),u=E.done,!u;v=!0){g=E.value,v=!1;const T=rw(l,yield kn(g.json())),y=new mh;Object.assign(y,T),yield yield kn(y)}}catch(w){h={error:w}}finally{try{!v&&!u&&(m=_.return)&&(yield kn(m.call(_)))}finally{if(h)throw h.error}}})})}else{const o=ew(this.apiClient,e);s=Qe("{model}:streamGenerateContent?alt=sse",o._url),a=o._query,delete o.config,delete o._url,delete o._query;const l=this.apiClient;return i=l.requestStream({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}),i.then(function(c){return Xd(this,arguments,function*(){var u,h,m,g;try{for(var v=!0,_=Ug(c),E;E=yield kn(_.next()),u=E.done,!u;v=!0){g=E.value,v=!1;const T=nw(l,yield kn(g.json())),y=new mh;Object.assign(y,T),yield yield kn(y)}}catch(w){h={error:w}}finally{try{!v&&!u&&(m=_.return)&&(yield kn(m.call(_)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=v9(this.apiClient,e);return s=Qe("{model}:predict",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(l=>{const c=Q9(this.apiClient,l),u=new WT;return Object.assign(u,c),u})}else{const o=KB(this.apiClient,e);return s=Qe("{model}:batchEmbedContents",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(l=>{const c=F9(this.apiClient,l),u=new WT;return Object.assign(u,c),u})}}async generateImagesInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=x9(this.apiClient,e);return s=Qe("{model}:predict",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(l=>{const c=e7(this.apiClient,l),u=new qT;return Object.assign(u,c),u})}else{const o=YB(this.apiClient,e);return s=Qe("{model}:predict",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(l=>{const c=L9(this.apiClient,l),u=new qT;return Object.assign(u,c),u})}}async get(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=y9(this.apiClient,e);return s=Qe("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(l=>r7(this.apiClient,l))}else{const o=XB(this.apiClient,e);return s=Qe("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(l=>V9(this.apiClient,l))}}async countTokens(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=T9(this.apiClient,e);return s=Qe("{model}:countTokens",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(l=>{const c=i7(this.apiClient,l),u=new KT;return Object.assign(u,c),u})}else{const o=JB(this.apiClient,e);return s=Qe("{model}:countTokens",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(l=>{const c=U9(this.apiClient,l),u=new KT;return Object.assign(u,c),u})}}async computeTokens(e){var t;let r,i="",s={};if(this.apiClient.isVertexAI()){const a=w9(this.apiClient,e);return i=Qe("{model}:computeTokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(o=>o.json()),r.then(o=>{const l=s7(this.apiClient,o),c=new fU;return Object.assign(c,l),c})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=A9(this.apiClient,e);return s=Qe("{model}:predictLongRunning",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(l=>c7(this.apiClient,l))}else{const o=t9(this.apiClient,e);return s=Qe("{model}:predictLongRunning",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(l=>H9(this.apiClient,l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _7(n,e){const t={},r=p(e,["operationName"]);r!=null&&d(t,["_url","operationName"],r);const i=p(e,["config"]);return i!=null&&d(t,["config"],i),t}function x7(n,e){const t={},r=p(e,["operationName"]);r!=null&&d(t,["_url","operationName"],r);const i=p(e,["config"]);return i!=null&&d(t,["config"],i),t}function y7(n,e){const t={},r=p(e,["operationName"]);r!=null&&d(t,["operationName"],r);const i=p(e,["resourceName"]);i!=null&&d(t,["_url","resourceName"],i);const s=p(e,["config"]);return s!=null&&d(t,["config"],s),t}function E7(n,e){const t={},r=p(e,["video","uri"]);r!=null&&d(t,["uri"],r);const i=p(e,["video","encodedVideo"]);i!=null&&d(t,["videoBytes"],da(n,i));const s=p(e,["encoding"]);return s!=null&&d(t,["mimeType"],s),t}function T7(n,e){const t={},r=p(e,["_self"]);return r!=null&&d(t,["video"],E7(n,r)),t}function w7(n,e){const t={},r=p(e,["generatedSamples"]);r!=null&&(Array.isArray(r)?d(t,["generatedVideos"],r.map(a=>T7(n,a))):d(t,["generatedVideos"],r));const i=p(e,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);const s=p(e,["raiMediaFilteredReasons"]);return s!=null&&d(t,["raiMediaFilteredReasons"],s),t}function I7(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["name"],r);const i=p(e,["metadata"]);i!=null&&d(t,["metadata"],i);const s=p(e,["done"]);s!=null&&d(t,["done"],s);const a=p(e,["error"]);a!=null&&d(t,["error"],a);const o=p(e,["response","generateVideoResponse"]);return o!=null&&d(t,["response"],w7(n,o)),t}function S7(n,e){const t={},r=p(e,["gcsUri"]);r!=null&&d(t,["uri"],r);const i=p(e,["bytesBase64Encoded"]);i!=null&&d(t,["videoBytes"],da(n,i));const s=p(e,["mimeType"]);return s!=null&&d(t,["mimeType"],s),t}function A7(n,e){const t={},r=p(e,["_self"]);return r!=null&&d(t,["video"],S7(n,r)),t}function C7(n,e){const t={},r=p(e,["videos"]);r!=null&&(Array.isArray(r)?d(t,["generatedVideos"],r.map(a=>A7(n,a))):d(t,["generatedVideos"],r));const i=p(e,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);const s=p(e,["raiMediaFilteredReasons"]);return s!=null&&d(t,["raiMediaFilteredReasons"],s),t}function iw(n,e){const t={},r=p(e,["name"]);r!=null&&d(t,["name"],r);const i=p(e,["metadata"]);i!=null&&d(t,["metadata"],i);const s=p(e,["done"]);s!=null&&d(t,["done"],s);const a=p(e,["error"]);a!=null&&d(t,["error"],a);const o=p(e,["response"]);return o!=null&&d(t,["response"],C7(n,o)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k7 extends K0{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let s;return r&&"httpOptions"in r&&(s=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:t.name,config:r})}async getVideosOperationInternal(e){var t,r;let i,s="",a={};if(this.apiClient.isVertexAI()){const o=x7(this.apiClient,e);return s=Qe("{operationName}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),i.then(l=>iw(this.apiClient,l))}else{const o=_7(this.apiClient,e);return s=Qe("{operationName}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions}).then(l=>l.json()),i.then(l=>I7(this.apiClient,l))}}async fetchPredictVideosOperationInternal(e){var t;let r,i="",s={};if(this.apiClient.isVertexAI()){const a=y7(this.apiClient,e);return i=Qe("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(o=>o.json()),r.then(o=>iw(this.apiClient,o))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R7="Content-Type",P7="X-Server-Timeout",D7="User-Agent",N7="x-goog-api-client",F7="0.9.0",M7=`google-genai-sdk/${F7}`,O7="v1beta1",L7="v1beta",sw=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class b7 extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class aw extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class V7{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:O7,this.getProject()||this.getLocation()?(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(i.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:L7,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[a,o]of Object.entries(e.queryParams))i.searchParams.append(a,String(o));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,t),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(t))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,t),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t){if(t&&t.timeout&&t.timeout>0){const r=new AbortController,i=r.signal;setTimeout(()=>r.abort(),t.timeout),e.signal=i}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await ow(i),new Vg(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await ow(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return Xd(this,arguments,function*(){const i=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";for(;;){const{done:o,value:l}=yield kn(i.read());if(o){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=s.decode(l);a+=c;let u=a.match(sw);for(;u;){const h=u[1];try{const m=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield kn(new Vg(m)),a=a.slice(u[0].length),u=a.match(sw)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=M7+" "+this.clientOptions.userAgentExtra;return e[D7]=t,e[N7]=t,e[R7]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))t.append(r,i);e.timeout&&e.timeout>0&&t.append(P7,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,a=await s.stat(e);i.sizeBytes=String(a.size);const o=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:a.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=o;const l=await this.fetchUploadUrl(i,t);return s.upload(e,l,this)}async fetchUploadUrl(e,t){var r;let i={};t!=null&&t.httpOptions?i=t.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},a=await this.request({path:Qe("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(r=a==null?void 0:a.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function ow(n){var e;if(n===void 0)throw new aw("response is undefined");if(!n.ok){const t=n.status,r=n.statusText;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:"exception parsing response",code:n.status,status:n.statusText}};const s=`got status: ${t} ${r}. ${JSON.stringify(i)}`;throw t>=400&&t<500?new b7(s):t>=500&&t<600?new aw(s):new Error(s)}}const U7=1024*1024*8;async function B7(n,e,t){var r,i;let s=0,a=0,o=new Vg(new Response),l="upload";for(s=n.size;a<s;){const u=Math.min(U7,s-a),h=n.slice(a,a+u);if(a+u>=s&&(l+=", finalize"),o=await t.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(a),"Content-Length":String(u)}}}),a+=u,((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const c=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function G7(n){return{size:n.size,type:n.type}}class z7{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await B7(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await G7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H7{create(e,t,r){return new $7(e,t,r)}}class $7{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lw="x-goog-api-key";class W7{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(lw)===null&&e.append(lw,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q7="gl-node/";class K7{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey,this.apiVersion=e.apiVersion;const r=new W7(this.apiKey);this.apiClient=new V7({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:q7+"web",uploader:new z7}),this.models=new v7(this.apiClient),this.live=new h7(this.apiClient,r,new H7),this.chats=new xU(this.models,this.apiClient),this.caches=new mU(this.apiClient),this.files=new NU(this.apiClient),this.operations=new k7(this.apiClient)}}const j7="http://localhost:11434",Y7="llama3.1";async function t1(n){return(await(await fetch(`${j7}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Y7,prompt:n,stream:!1})})).json()).response||""}async function vX(n){const{default:e}=await Ks(async()=>{const{default:i}=await import("./vendor-ocr-BM3qSzF3.js").then(s=>s.i);return{default:i}},__vite__mapDeps([0,1,2])),t=URL.createObjectURL(n),r=await e.recognize(t,"eng");return URL.revokeObjectURL(t),r.data.text||""}async function _X(n){const e=await Ks(()=>import("./vendor-pdf-CTzZ0cJF.js").then(a=>a.p),__vite__mapDeps([2,1])),t=URL.createObjectURL(n),r=await Ks(()=>import("./pdf.worker.min-CElaEpGn.js"),[]);e.GlobalWorkerOptions.workerSrc=r.default;const i=await e.getDocument(t).promise;let s="";for(let a=1;a<=i.numPages;a++){const l=await(await i.getPage(a)).getTextContent();s+=l.items.map(c=>c.str).join(" ")+`
`}return URL.revokeObjectURL(t),s}async function xX(n){return(await t1(`Summarize into 5-8 concise academic bullet points:

${n}`)).split(/\n+/).map(t=>t.replace(/^[-]\s?/,"")).filter(Boolean)}async function yX(n){const e=await t1(`Classify and return JSON with keys subject, moduleCode(optional), keywords(array of 6-10 terms), title(short). Only output JSON.

${n}`),t=e.indexOf("{"),r=e.lastIndexOf("}"),i=t>=0?e.slice(t,r+1):"{}";return JSON.parse(i)}async function EX(n){const e=await t1(`Extract modules/course entries as JSON array with keys code, title, credits(integer, 0 if unknown). Only output JSON.

${n}`),t=e.indexOf("["),r=e.lastIndexOf("]"),i=t>=0?e.slice(t,r+1):"[]";return JSON.parse(i)}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Qk=1252,X7=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],n1={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},r1=function(n){X7.indexOf(n)!=-1&&(Qk=n1[0]=n)};function Q7(){r1(1252)}var ti=function(n){r1(n)};function Jk(){ti(1200),Q7()}function cw(n){for(var e=[],t=0,r=n.length;t<r;++t)e[t]=n.charCodeAt(t);return e}function J7(n){for(var e=[],t=0;t<n.length>>1;++t)e[t]=String.fromCharCode(n.charCodeAt(2*t)+(n.charCodeAt(2*t+1)<<8));return e.join("")}function Zk(n){for(var e=[],t=0;t<n.length>>1;++t)e[t]=String.fromCharCode(n.charCodeAt(2*t+1)+(n.charCodeAt(2*t)<<8));return e.join("")}var Bc=function(n){var e=n.charCodeAt(0),t=n.charCodeAt(1);return e==255&&t==254?J7(n.slice(2)):e==254&&t==255?Zk(n.slice(2)):e==65279?n.slice(1):n},_h=function(e){return String.fromCharCode(e)},uw=function(e){return String.fromCharCode(e)},Yu,Rs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function fw(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0,c=0;c<n.length;)t=n.charCodeAt(c++),s=t>>2,r=n.charCodeAt(c++),a=(t&3)<<4|r>>4,i=n.charCodeAt(c++),o=(r&15)<<2|i>>6,l=i&63,isNaN(r)?o=l=64:isNaN(i)&&(l=64),e+=Rs.charAt(s)+Rs.charAt(a)+Rs.charAt(o)+Rs.charAt(l);return e}function yr(n){var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<n.length;)s=Rs.indexOf(n.charAt(c++)),a=Rs.indexOf(n.charAt(c++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Rs.indexOf(n.charAt(c++)),r=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=Rs.indexOf(n.charAt(c++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Ke=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),mo=function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Zs(n){return Ke?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function hw(n){return Ke?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var Zr=function(e){return Ke?mo(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function go(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function i1(n){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(n instanceof ArrayBuffer)return i1(new Uint8Array(n));for(var e=new Array(n.length),t=0;t<n.length;++t)e[t]=n[t];return e}var Is=Ke?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:mo(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Z7(n){for(var e=[],t=0,r=n.length+250,i=Zs(n.length+255),s=0;s<n.length;++s){var a=n.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=n.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>r&&(e.push(i.slice(0,t)),t=0,i=Zs(65535),r=65530)}return e.push(i.slice(0,t)),Is(e)}var qn=/\u0000/g,Gc=/[\u0001-\u0006]/g;function fl(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function ni(n,e){var t=""+n;return t.length>=e?t:Nt("0",e-t.length)+t}function s1(n,e){var t=""+n;return t.length>=e?t:Nt(" ",e-t.length)+t}function Qd(n,e){var t=""+n;return t.length>=e?t:t+Nt(" ",e-t.length)}function eG(n,e){var t=""+Math.round(n);return t.length>=e?t:Nt("0",e-t.length)+t}function tG(n,e){var t=""+n;return t.length>=e?t:Nt("0",e-t.length)+t}var dw=Math.pow(2,32);function Oo(n,e){if(n>dw||n<-dw)return eG(n,e);var t=Math.round(n);return tG(t,e)}function Jd(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var pw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Qp=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function nG(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var Ue={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},mw={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},rG={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Zd(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,a=1,o=0,l=1,c=0,u=0,h=Math.floor(i);c<e&&(h=Math.floor(i),o=h*a+s,u=h*c+l,!(i-h<5e-8));)i=1/(i-h),s=a,a=o,l=c,c=u;if(u>e&&(c>e?(u=l,o=s):(u=c,o=a)),!t)return[0,r*o,u];var m=Math.floor(r*o/u);return[m,r*o-m*u,u]}function La(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,a=[],o={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),t&&(s=cG(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var eR=new Date(1899,11,31,0,0,0),iG=eR.getTime(),sG=new Date(1900,2,1,0,0,0);function tR(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=sG&&(t+=24*60*60*1e3),(t-(iG+(n.getTimezoneOffset()-eR.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function a1(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function aG(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function oG(n){var e=n<0?12:11,t=a1(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function lG(n){var e=a1(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function Xu(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=oG(n):e===10?t=n.toFixed(10).substr(0,12):t=lG(n),a1(aG(t.toUpperCase()))}function so(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):Xu(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return Ur(14,tR(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function cG(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function uG(n,e,t,r){var i="",s=0,a=0,o=t.y,l,c=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=t.m,c=e.length;break;case 3:return Qp[t.m-1][1];case 5:return Qp[t.m-1][0];default:return Qp[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=t.d,c=e.length;break;case 3:return pw[t.q][0];default:return pw[t.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(t.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=t.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=t.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?ni(t.S,e.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=ni(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?ni(l,c):"";return u}function Ps(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var nR=/%/g;function fG(n,e,t){var r=e.replace(nR,""),i=e.length-r.length;return qi(n,r,t*Math.pow(10,2*i))+Nt("%",i)}function hG(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return qi(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function rR(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+rR(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var iR=/# (\?+)( ?)\/( ?)(\d+)/;function dG(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),a=i-s*r,o=r;return t+(s===0?"":""+s)+" "+(a===0?Nt(" ",n[1].length+1+n[4].length):s1(a,n[1].length)+n[2]+"/"+n[3]+ni(o,n[4].length))}function pG(n,e,t){return t+(e===0?"":""+e)+Nt(" ",n[1].length+2+n[4].length)}var sR=/^#*0*\.([0#]+)/,aR=/\).*[0#]/,oR=/\(###\) ###\\?-####/;function Bn(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function gw(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function vw(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function mG(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function gG(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function Cr(n,e,t){if(n.charCodeAt(0)===40&&!e.match(aR)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Cr("n",r,t):"("+Cr("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return hG(n,e,t);if(e.indexOf("%")!==-1)return fG(n,e,t);if(e.indexOf("E")!==-1)return rR(e,t);if(e.charCodeAt(0)===36)return"$"+Cr(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),c=t<0?"-":"";if(e.match(/^00+$/))return c+Oo(l,e.length);if(e.match(/^[#?]+$/))return i=Oo(t,0),i==="0"&&(i=""),i.length>e.length?i:Bn(e.substr(0,e.length-i.length))+i;if(s=e.match(iR))return dG(s,l,c);if(e.match(/^#+0+$/))return c+Oo(l,e.length-e.indexOf("0"));if(s=e.match(sR))return i=gw(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Bn(s[1])).replace(/\.$/,"."+Bn(s[1])).replace(/\.(\d*)$/,function(v,_){return"."+_+Nt("0",Bn(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+gw(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Ps(Oo(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Cr(n,e,-t):Ps(""+(Math.floor(t)+mG(t,s[1].length)))+"."+ni(vw(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Cr(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=fl(Cr(n,e.replace(/[\\-]/g,""),t)),a=0,fl(fl(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(oR))return i=Cr(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=Zd(l,Math.pow(10,a)-1,!1),i=""+c,u=qi("n",s[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=Qd(o[2],a),u.length<s[4].length&&(u=Bn(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=Zd(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?s1(o[1],a)+s[2]+"/"+s[3]+Qd(o[2],a):Nt(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Oo(t,0),e.length<=i.length?i:Bn(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var h=e.indexOf(".")-a,m=e.length-i.length-h;return Bn(e.substr(0,h)+i+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=vw(t,s[1].length),t<0?"-"+Cr(n,e,-t):Ps(gG(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?ni(0,3-v.length):"")+v})+"."+ni(a,s[1].length);switch(e){case"###,##0.00":return Cr(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var g=Ps(Oo(l,0));return g!=="0"?c+g:"";case"###,###.00":return Cr(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return Cr(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function vG(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return qi(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function _G(n,e,t){var r=e.replace(nR,""),i=e.length-r.length;return qi(n,r,t*Math.pow(10,2*i))+Nt("%",i)}function lR(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+lR(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function hi(n,e,t){if(n.charCodeAt(0)===40&&!e.match(aR)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?hi("n",r,t):"("+hi("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return vG(n,e,t);if(e.indexOf("%")!==-1)return _G(n,e,t);if(e.indexOf("E")!==-1)return lR(e,t);if(e.charCodeAt(0)===36)return"$"+hi(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),c=t<0?"-":"";if(e.match(/^00+$/))return c+ni(l,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Bn(e.substr(0,e.length-i.length))+i;if(s=e.match(iR))return pG(s,l,c);if(e.match(/^#+0+$/))return c+ni(l,e.length-e.indexOf("0"));if(s=e.match(sR))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Bn(s[1])).replace(/\.$/,"."+Bn(s[1])),i=i.replace(/\.(\d*)$/,function(v,_){return"."+_+Nt("0",Bn(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Ps(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+hi(n,e,-t):Ps(""+t)+"."+Nt("0",s[1].length);if(s=e.match(/^#,#*,#0/))return hi(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=fl(hi(n,e.replace(/[\\-]/g,""),t)),a=0,fl(fl(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(oR))return i=hi(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=Zd(l,Math.pow(10,a)-1,!1),i=""+c,u=qi("n",s[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=Qd(o[2],a),u.length<s[4].length&&(u=Bn(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=Zd(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?s1(o[1],a)+s[2]+"/"+s[3]+Qd(o[2],a):Nt(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Bn(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var h=e.indexOf(".")-a,m=e.length-i.length-h;return Bn(e.substr(0,h)+i+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+hi(n,e,-t):Ps(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?ni(0,3-v.length):"")+v})+"."+ni(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=Ps(""+l);return g!=="0"?c+g:"";default:if(e.match(/\.[0#?]*$/))return hi(n,e.slice(0,e.lastIndexOf(".")),t)+Bn(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function qi(n,e,t){return(t|0)===t?hi(n,e,t):Cr(n,e,t)}function xG(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var cR=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function tc(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":Jd(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(cR))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function yG(n,e,t,r){for(var i=[],s="",a=0,o="",l="t",c,u,h,m="H";a<n.length;)switch(o=n.charAt(a)){case"G":if(!Jd(n,a))throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(h=n.charCodeAt(++a))!==34&&a<n.length;)s+=String.fromCharCode(h);i[i.length]={t:"t",v:s},++a;break;case"\\":var g=n.charAt(++a),v=g==="("||g===")"?g:"t";i[i.length]={t:v,v:g},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(c==null&&(c=La(e,t,n.charAt(a+1)==="2"),c==null))return"";i[i.length]={t:"X",v:n.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=La(e,t),c==null))return"";for(s=o;++a<n.length&&n.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var _={t:o,v:o};if(c==null&&(c=La(e,t)),n.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(_.v=c.H>=12?"P":"A"),_.t="T",m="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(_.v=c.H>=12?"PM":"AM"),_.t="T",a+=5,m="h"):n.substr(a,5).toUpperCase()==="/"?(c!=null&&(_.v=c.H>=12?"":""),_.t="T",a+=5,m="h"):(_.t="t",++a),c==null&&_.t==="T")return"";i[i.length]=_,l=o;break;case"[":for(s=o;n.charAt(a++)!=="]"&&a<n.length;)s+=n.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(cR)){if(c==null&&(c=La(e,t),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",tc(n)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=o;++a<n.length&&(o=n.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;n.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)s+=n.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"t",v:o},++a;break}var E=0,w=0,T;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=m,l="h",E<1&&(E=1);break;case"s":(T=i[a].v.match(/\.0+$/))&&(w=Math.max(w,T[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&i[a].v.match(/[Hh]/)&&(E=1),E<2&&i[a].v.match(/[Mm]/)&&(E=2),E<3&&i[a].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var y="",k;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=uG(i[a].t.charCodeAt(0),i[a].v,c,w),i[a].t="t";break;case"n":case"?":for(k=a+1;i[k]!=null&&((o=i[k].t)==="?"||o==="D"||(o===" "||o==="t")&&i[k+1]!=null&&(i[k+1].t==="?"||i[k+1].t==="t"&&i[k+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[k].v==="/"||i[k].v===" "&&i[k+1]!=null&&i[k+1].t=="?"));)i[a].v+=i[k].v,i[k]={v:"",t:";"},++k;y+=i[a].v,a=k-1;break;case"G":i[a].t="t",i[a].v=so(e,t);break}var V="",L,I;if(y.length>0){y.charCodeAt(0)==40?(L=e<0&&y.charCodeAt(0)===45?-e:e,I=qi("n",y,L)):(L=e<0&&r>1?-e:e,I=qi("n",y,L),L<0&&i[0]&&i[0].t=="t"&&(I=I.substr(1),i[0].v="-"+i[0].v)),k=I.length-1;var A=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){A=a;break}var C=i.length;if(A===i.length&&I.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(k>=i[a].v.length-1?(k-=i[a].v.length,i[a].v=I.substr(k+1,i[a].v.length)):k<0?i[a].v="":(i[a].v=I.substr(0,k+1),k=-1),i[a].t="t",C=a);k>=0&&C<i.length&&(i[C].v=I.substr(0,k+1)+i[C].v)}else if(A!==i.length&&I.indexOf("E")===-1){for(k=I.indexOf(".")-1,a=A;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(u=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")-1:i[a].v.length-1,V=i[a].v.substr(u+1);u>=0;--u)k>=0&&(i[a].v.charAt(u)==="0"||i[a].v.charAt(u)==="#")&&(V=I.charAt(k--)+V);i[a].v=V,i[a].t="t",C=a}for(k>=0&&C<i.length&&(i[C].v=I.substr(0,k+1)+i[C].v),k=I.indexOf(".")+1,a=A;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==A)){for(u=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")+1:0,V=i[a].v.substr(0,u);u<i[a].v.length;++u)k<I.length&&(V+=I.charAt(k++));i[a].v=V,i[a].t="t",C=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(L=r>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=qi(i[a].t,i[a].v,L),i[a].t="t");var P="";for(a=0;a!==i.length;++a)i[a]!=null&&(P+=i[a].v);return P}var _w=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function xw(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function EG(n,e){var t=xG(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(_w),o=t[1].match(_w);return xw(e,a)?[r,t[0]]:xw(e,o)?[r,t[1]]:[r,t[a!=null&&o!=null?2:1]]}return[r,s]}function Ur(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:Ue)[n],r==null&&(r=t.table&&t.table[mw[n]]||Ue[mw[n]]),r==null&&(r=rG[n]||"General");break}if(Jd(r,0))return so(e,t);e instanceof Date&&(e=tR(e,t.date1904));var i=EG(r,e);if(Jd(i[1]))return so(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return yG(i[1],e,t,i[0])}function za(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(Ue[t]==null){e<0&&(e=t);continue}if(Ue[t]==n){e=t;break}}e<0&&(e=391)}return Ue[e]=n,e}function uR(){Ue=nG()}var TG={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},fR=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function wG(n){var e=typeof n=="number"?Ue[n]:n;return e=e.replace(fR,"(\\d+)"),new RegExp("^"+e+"$")}function IG(n,e,t){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(fR)||[]).forEach(function(h,m){var g=parseInt(t[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":r=g;break;case"d":s=g;break;case"h":a=g;break;case"s":l=g;break;case"m":a>=0?o=g:i=g;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var c=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:r==-1&&i==-1&&s==-1?u:c+"T"+u}var SG=function(){var n={};n.version="1.2.0";function e(){for(var I=0,A=new Array(256),C=0;C!=256;++C)I=C,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,A[C]=I;return typeof Int32Array<"u"?new Int32Array(A):A}var t=e();function r(I){var A=0,C=0,P=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)D[P]=I[P];for(P=0;P!=256;++P)for(C=I[P],A=256+P;A<4096;A+=256)C=D[A]=C>>>8^I[C&255];var N=[];for(P=1;P!=16;++P)N[P-1]=typeof Int32Array<"u"?D.subarray(P*256,P*256+256):D.slice(P*256,P*256+256);return N}var i=r(t),s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],u=i[5],h=i[6],m=i[7],g=i[8],v=i[9],_=i[10],E=i[11],w=i[12],T=i[13],y=i[14];function k(I,A){for(var C=A^-1,P=0,D=I.length;P<D;)C=C>>>8^t[(C^I.charCodeAt(P++))&255];return~C}function V(I,A){for(var C=A^-1,P=I.length-15,D=0;D<P;)C=y[I[D++]^C&255]^T[I[D++]^C>>8&255]^w[I[D++]^C>>16&255]^E[I[D++]^C>>>24]^_[I[D++]]^v[I[D++]]^g[I[D++]]^m[I[D++]]^h[I[D++]]^u[I[D++]]^c[I[D++]]^l[I[D++]]^o[I[D++]]^a[I[D++]]^s[I[D++]]^t[I[D++]];for(P+=15;D<P;)C=C>>>8^t[(C^I[D++])&255];return~C}function L(I,A){for(var C=A^-1,P=0,D=I.length,N=0,M=0;P<D;)N=I.charCodeAt(P++),N<128?C=C>>>8^t[(C^N)&255]:N<2048?(C=C>>>8^t[(C^(192|N>>6&31))&255],C=C>>>8^t[(C^(128|N&63))&255]):N>=55296&&N<57344?(N=(N&1023)+64,M=I.charCodeAt(P++)&1023,C=C>>>8^t[(C^(240|N>>8&7))&255],C=C>>>8^t[(C^(128|N>>2&63))&255],C=C>>>8^t[(C^(128|M>>6&15|(N&3)<<4))&255],C=C>>>8^t[(C^(128|M&63))&255]):(C=C>>>8^t[(C^(224|N>>12&15))&255],C=C>>>8^t[(C^(128|N>>6&63))&255],C=C>>>8^t[(C^(128|N&63))&255]);return~C}return n.table=t,n.bstr=k,n.buf=V,n.str=L,n}(),Ye=function(){var e={};e.version="1.2.1";function t(R,U){for(var O=R.split("/"),b=U.split("/"),B=0,z=0,J=Math.min(O.length,b.length);B<J;++B){if(z=O[B].length-b[B].length)return z;if(O[B]!=b[B])return O[B]<b[B]?-1:1}return O.length-b.length}function r(R){if(R.charAt(R.length-1)=="/")return R.slice(0,-1).indexOf("/")===-1?R:r(R.slice(0,-1));var U=R.lastIndexOf("/");return U===-1?R:R.slice(0,U+1)}function i(R){if(R.charAt(R.length-1)=="/")return i(R.slice(0,-1));var U=R.lastIndexOf("/");return U===-1?R:R.slice(U+1)}function s(R,U){typeof U=="string"&&(U=new Date(U));var O=U.getHours();O=O<<6|U.getMinutes(),O=O<<5|U.getSeconds()>>>1,R.write_shift(2,O);var b=U.getFullYear()-1980;b=b<<4|U.getMonth()+1,b=b<<5|U.getDate(),R.write_shift(2,b)}function a(R){var U=R.read_shift(2)&65535,O=R.read_shift(2)&65535,b=new Date,B=O&31;O>>>=5;var z=O&15;O>>>=4,b.setMilliseconds(0),b.setFullYear(O+1980),b.setMonth(z-1),b.setDate(B);var J=U&31;U>>>=5;var re=U&63;return U>>>=6,b.setHours(U),b.setMinutes(re),b.setSeconds(J<<1),b}function o(R){gn(R,0);for(var U={},O=0;R.l<=R.length-4;){var b=R.read_shift(2),B=R.read_shift(2),z=R.l+B,J={};switch(b){case 21589:O=R.read_shift(1),O&1&&(J.mtime=R.read_shift(4)),B>5&&(O&2&&(J.atime=R.read_shift(4)),O&4&&(J.ctime=R.read_shift(4))),J.mtime&&(J.mt=new Date(J.mtime*1e3));break}R.l=z,U[b]=J}return U}var l;function c(){return l||(l={})}function u(R,U){if(R[0]==80&&R[1]==75)return ac(R,U);if((R[0]|32)==109&&(R[1]|32)==105)return Pf(R,U);if(R.length<512)throw new Error("CFB file size "+R.length+" < 512");var O=3,b=512,B=0,z=0,J=0,re=0,Z=0,ee=[],te=R.slice(0,512);gn(te,0);var le=h(te);switch(O=le[0],O){case 3:b=512;break;case 4:b=4096;break;case 0:if(le[1]==0)return ac(R,U);default:throw new Error("Major Version: Expected 3 or 4 saw "+O)}b!==512&&(te=R.slice(0,b),gn(te,28));var ge=R.slice(0,b);m(te,O);var Se=te.read_shift(4,"i");if(O===3&&Se!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Se);te.l+=4,J=te.read_shift(4,"i"),te.l+=4,te.chk("00100000","Mini Stream Cutoff Size: "),re=te.read_shift(4,"i"),B=te.read_shift(4,"i"),Z=te.read_shift(4,"i"),z=te.read_shift(4,"i");for(var de=-1,we=0;we<109&&(de=te.read_shift(4,"i"),!(de<0));++we)ee[we]=de;var Le=g(R,b);E(Z,z,Le,b,ee);var ot=T(Le,J,ee,b);ot[J].name="!Directory",B>0&&re!==M&&(ot[re].name="!MiniFAT"),ot[ee[0]].name="!FAT",ot.fat_addrs=ee,ot.ssz=b;var rt={},vt=[],Ri=[],xa=[];y(J,ot,Le,vt,B,rt,Ri,re),v(Ri,xa,vt),vt.shift();var os={FileIndex:Ri,FullPaths:xa};return U&&U.raw&&(os.raw={header:ge,sectors:Le}),os}function h(R){if(R[R.l]==80&&R[R.l+1]==75)return[0,0];R.chk(ye,"Header Signature: "),R.l+=16;var U=R.read_shift(2,"u");return[R.read_shift(2,"u"),U]}function m(R,U){var O=9;switch(R.l+=2,O=R.read_shift(2)){case 9:if(U!=3)throw new Error("Sector Shift: Expected 9 saw "+O);break;case 12:if(U!=4)throw new Error("Sector Shift: Expected 12 saw "+O);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+O)}R.chk("0600","Mini Sector Shift: "),R.chk("000000000000","Reserved: ")}function g(R,U){for(var O=Math.ceil(R.length/U)-1,b=[],B=1;B<O;++B)b[B-1]=R.slice(B*U,(B+1)*U);return b[O-1]=R.slice(O*U),b}function v(R,U,O){for(var b=0,B=0,z=0,J=0,re=0,Z=O.length,ee=[],te=[];b<Z;++b)ee[b]=te[b]=b,U[b]=O[b];for(;re<te.length;++re)b=te[re],B=R[b].L,z=R[b].R,J=R[b].C,ee[b]===b&&(B!==-1&&ee[B]!==B&&(ee[b]=ee[B]),z!==-1&&ee[z]!==z&&(ee[b]=ee[z])),J!==-1&&(ee[J]=b),B!==-1&&b!=ee[b]&&(ee[B]=ee[b],te.lastIndexOf(B)<re&&te.push(B)),z!==-1&&b!=ee[b]&&(ee[z]=ee[b],te.lastIndexOf(z)<re&&te.push(z));for(b=1;b<Z;++b)ee[b]===b&&(z!==-1&&ee[z]!==z?ee[b]=ee[z]:B!==-1&&ee[B]!==B&&(ee[b]=ee[B]));for(b=1;b<Z;++b)if(R[b].type!==0){if(re=b,re!=ee[re])do re=ee[re],U[b]=U[re]+"/"+U[b];while(re!==0&&ee[re]!==-1&&re!=ee[re]);ee[b]=-1}for(U[0]+="/",b=1;b<Z;++b)R[b].type!==2&&(U[b]+="/")}function _(R,U,O){for(var b=R.start,B=R.size,z=[],J=b;O&&B>0&&J>=0;)z.push(U.slice(J*N,J*N+N)),B-=N,J=Da(O,J*4);return z.length===0?Xt(0):Is(z).slice(0,R.size)}function E(R,U,O,b,B){var z=M;if(R===M){if(U!==0)throw new Error("DIFAT chain shorter than expected")}else if(R!==-1){var J=O[R],re=(b>>>2)-1;if(!J)return;for(var Z=0;Z<re&&(z=Da(J,Z*4))!==M;++Z)B.push(z);E(Da(J,b-4),U-1,O,b,B)}}function w(R,U,O,b,B){var z=[],J=[];B||(B=[]);var re=b-1,Z=0,ee=0;for(Z=U;Z>=0;){B[Z]=!0,z[z.length]=Z,J.push(R[Z]);var te=O[Math.floor(Z*4/b)];if(ee=Z*4&re,b<4+ee)throw new Error("FAT boundary crossed: "+Z+" 4 "+b);if(!R[te])break;Z=Da(R[te],ee)}return{nodes:z,data:Rw([J])}}function T(R,U,O,b){var B=R.length,z=[],J=[],re=[],Z=[],ee=b-1,te=0,le=0,ge=0,Se=0;for(te=0;te<B;++te)if(re=[],ge=te+U,ge>=B&&(ge-=B),!J[ge]){Z=[];var de=[];for(le=ge;le>=0;){de[le]=!0,J[le]=!0,re[re.length]=le,Z.push(R[le]);var we=O[Math.floor(le*4/b)];if(Se=le*4&ee,b<4+Se)throw new Error("FAT boundary crossed: "+le+" 4 "+b);if(!R[we]||(le=Da(R[we],Se),de[le]))break}z[ge]={nodes:re,data:Rw([Z])}}return z}function y(R,U,O,b,B,z,J,re){for(var Z=0,ee=b.length?2:0,te=U[R].data,le=0,ge=0,Se;le<te.length;le+=128){var de=te.slice(le,le+128);gn(de,64),ge=de.read_shift(2),Se=f1(de,0,ge-ee),b.push(Se);var we={name:Se,type:de.read_shift(1),color:de.read_shift(1),L:de.read_shift(4,"i"),R:de.read_shift(4,"i"),C:de.read_shift(4,"i"),clsid:de.read_shift(16),state:de.read_shift(4,"i"),start:0,size:0},Le=de.read_shift(2)+de.read_shift(2)+de.read_shift(2)+de.read_shift(2);Le!==0&&(we.ct=k(de,de.l-8));var ot=de.read_shift(2)+de.read_shift(2)+de.read_shift(2)+de.read_shift(2);ot!==0&&(we.mt=k(de,de.l-8)),we.start=de.read_shift(4,"i"),we.size=de.read_shift(4,"i"),we.size<0&&we.start<0&&(we.size=we.type=0,we.start=M,we.name=""),we.type===5?(Z=we.start,B>0&&Z!==M&&(U[Z].name="!StreamData")):we.size>=4096?(we.storage="fat",U[we.start]===void 0&&(U[we.start]=w(O,we.start,U.fat_addrs,U.ssz)),U[we.start].name=we.name,we.content=U[we.start].data.slice(0,we.size)):(we.storage="minifat",we.size<0?we.size=0:Z!==M&&we.start!==M&&U[Z]&&(we.content=_(we,U[Z].data,(U[re]||{}).data))),we.content&&gn(we.content,0),z[Se]=we,J.push(we)}}function k(R,U){return new Date((ur(R,U+4)/1e7*Math.pow(2,32)+ur(R,U)/1e7-11644473600)*1e3)}function V(R,U){return c(),u(l.readFileSync(R),U)}function L(R,U){var O=U&&U.type;switch(O||Ke&&Buffer.isBuffer(R)&&(O="buffer"),O||"base64"){case"file":return V(R,U);case"base64":return u(Zr(yr(R)),U);case"binary":return u(Zr(R),U)}return u(R,U)}function I(R,U){var O=U||{},b=O.root||"Root Entry";if(R.FullPaths||(R.FullPaths=[]),R.FileIndex||(R.FileIndex=[]),R.FullPaths.length!==R.FileIndex.length)throw new Error("inconsistent CFB structure");R.FullPaths.length===0&&(R.FullPaths[0]=b+"/",R.FileIndex[0]={name:b,type:5}),O.CLSID&&(R.FileIndex[0].clsid=O.CLSID),A(R)}function A(R){var U="Sh33tJ5";if(!Ye.find(R,"/"+U)){var O=Xt(4);O[0]=55,O[1]=O[3]=50,O[2]=54,R.FileIndex.push({name:U,type:2,content:O,size:4,L:69,R:69,C:69}),R.FullPaths.push(R.FullPaths[0]+U),C(R)}}function C(R,U){I(R);for(var O=!1,b=!1,B=R.FullPaths.length-1;B>=0;--B){var z=R.FileIndex[B];switch(z.type){case 0:b?O=!0:(R.FileIndex.pop(),R.FullPaths.pop());break;case 1:case 2:case 5:b=!0,isNaN(z.R*z.L*z.C)&&(O=!0),z.R>-1&&z.L>-1&&z.R==z.L&&(O=!0);break;default:O=!0;break}}if(!(!O&&!U)){var J=new Date(1987,1,19),re=0,Z=Object.create?Object.create(null):{},ee=[];for(B=0;B<R.FullPaths.length;++B)Z[R.FullPaths[B]]=!0,R.FileIndex[B].type!==0&&ee.push([R.FullPaths[B],R.FileIndex[B]]);for(B=0;B<ee.length;++B){var te=r(ee[B][0]);b=Z[te],b||(ee.push([te,{name:i(te).replace("/",""),type:1,clsid:ke,ct:J,mt:J,content:null}]),Z[te]=!0)}for(ee.sort(function(Se,de){return t(Se[0],de[0])}),R.FullPaths=[],R.FileIndex=[],B=0;B<ee.length;++B)R.FullPaths[B]=ee[B][0],R.FileIndex[B]=ee[B][1];for(B=0;B<ee.length;++B){var le=R.FileIndex[B],ge=R.FullPaths[B];if(le.name=i(ge).replace("/",""),le.L=le.R=le.C=-(le.color=1),le.size=le.content?le.content.length:0,le.start=0,le.clsid=le.clsid||ke,B===0)le.C=ee.length>1?1:-1,le.size=0,le.type=5;else if(ge.slice(-1)=="/"){for(re=B+1;re<ee.length&&r(R.FullPaths[re])!=ge;++re);for(le.C=re>=ee.length?-1:re,re=B+1;re<ee.length&&r(R.FullPaths[re])!=r(ge);++re);le.R=re>=ee.length?-1:re,le.type=1}else r(R.FullPaths[B+1]||"")==r(ge)&&(le.R=B+1),le.type=2}}}function P(R,U){var O=U||{};if(O.fileType=="mad")return hn(R,O);switch(C(R),O.fileType){case"zip":return oc(R,O)}var b=function(Se){for(var de=0,we=0,Le=0;Le<Se.FileIndex.length;++Le){var ot=Se.FileIndex[Le];if(ot.content){var rt=ot.content.length;rt>0&&(rt<4096?de+=rt+63>>6:we+=rt+511>>9)}}for(var vt=Se.FullPaths.length+3>>2,Ri=de+7>>3,xa=de+127>>7,os=Ri+we+vt+xa,ci=os+127>>7,So=ci<=109?0:Math.ceil((ci-109)/127);os+ci+So+127>>7>ci;)So=++ci<=109?0:Math.ceil((ci-109)/127);var or=[1,So,ci,xa,vt,we,de,0];return Se.FileIndex[0].size=de<<6,or[7]=(Se.FileIndex[0].start=or[0]+or[1]+or[2]+or[3]+or[4]+or[5])+(or[6]+7>>3),or}(R),B=Xt(b[7]<<9),z=0,J=0;{for(z=0;z<8;++z)B.write_shift(1,me[z]);for(z=0;z<8;++z)B.write_shift(2,0);for(B.write_shift(2,62),B.write_shift(2,3),B.write_shift(2,65534),B.write_shift(2,9),B.write_shift(2,6),z=0;z<3;++z)B.write_shift(2,0);for(B.write_shift(4,0),B.write_shift(4,b[2]),B.write_shift(4,b[0]+b[1]+b[2]+b[3]-1),B.write_shift(4,0),B.write_shift(4,4096),B.write_shift(4,b[3]?b[0]+b[1]+b[2]-1:M),B.write_shift(4,b[3]),B.write_shift(-4,b[1]?b[0]-1:M),B.write_shift(4,b[1]),z=0;z<109;++z)B.write_shift(-4,z<b[2]?b[1]+z:-1)}if(b[1])for(J=0;J<b[1];++J){for(;z<236+J*127;++z)B.write_shift(-4,z<b[2]?b[1]+z:-1);B.write_shift(-4,J===b[1]-1?M:J+1)}var re=function(Se){for(J+=Se;z<J-1;++z)B.write_shift(-4,z+1);Se&&(++z,B.write_shift(-4,M))};for(J=z=0,J+=b[1];z<J;++z)B.write_shift(-4,Ee.DIFSECT);for(J+=b[2];z<J;++z)B.write_shift(-4,Ee.FATSECT);re(b[3]),re(b[4]);for(var Z=0,ee=0,te=R.FileIndex[0];Z<R.FileIndex.length;++Z)te=R.FileIndex[Z],te.content&&(ee=te.content.length,!(ee<4096)&&(te.start=J,re(ee+511>>9)));for(re(b[6]+7>>3);B.l&511;)B.write_shift(-4,Ee.ENDOFCHAIN);for(J=z=0,Z=0;Z<R.FileIndex.length;++Z)te=R.FileIndex[Z],te.content&&(ee=te.content.length,!(!ee||ee>=4096)&&(te.start=J,re(ee+63>>6)));for(;B.l&511;)B.write_shift(-4,Ee.ENDOFCHAIN);for(z=0;z<b[4]<<2;++z){var le=R.FullPaths[z];if(!le||le.length===0){for(Z=0;Z<17;++Z)B.write_shift(4,0);for(Z=0;Z<3;++Z)B.write_shift(4,-1);for(Z=0;Z<12;++Z)B.write_shift(4,0);continue}te=R.FileIndex[z],z===0&&(te.start=te.size?te.start-1:M);var ge=z===0&&O.root||te.name;if(ee=2*(ge.length+1),B.write_shift(64,ge,"utf16le"),B.write_shift(2,ee),B.write_shift(1,te.type),B.write_shift(1,te.color),B.write_shift(-4,te.L),B.write_shift(-4,te.R),B.write_shift(-4,te.C),te.clsid)B.write_shift(16,te.clsid,"hex");else for(Z=0;Z<4;++Z)B.write_shift(4,0);B.write_shift(4,te.state||0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,te.start),B.write_shift(4,te.size),B.write_shift(4,0)}for(z=1;z<R.FileIndex.length;++z)if(te=R.FileIndex[z],te.size>=4096)if(B.l=te.start+1<<9,Ke&&Buffer.isBuffer(te.content))te.content.copy(B,B.l,0,te.size),B.l+=te.size+511&-512;else{for(Z=0;Z<te.size;++Z)B.write_shift(1,te.content[Z]);for(;Z&511;++Z)B.write_shift(1,0)}for(z=1;z<R.FileIndex.length;++z)if(te=R.FileIndex[z],te.size>0&&te.size<4096)if(Ke&&Buffer.isBuffer(te.content))te.content.copy(B,B.l,0,te.size),B.l+=te.size+63&-64;else{for(Z=0;Z<te.size;++Z)B.write_shift(1,te.content[Z]);for(;Z&63;++Z)B.write_shift(1,0)}if(Ke)B.l=B.length;else for(;B.l<B.length;)B.write_shift(1,0);return B}function D(R,U){var O=R.FullPaths.map(function(Z){return Z.toUpperCase()}),b=O.map(function(Z){var ee=Z.split("/");return ee[ee.length-(Z.slice(-1)=="/"?2:1)]}),B=!1;U.charCodeAt(0)===47?(B=!0,U=O[0].slice(0,-1)+U):B=U.indexOf("/")!==-1;var z=U.toUpperCase(),J=B===!0?O.indexOf(z):b.indexOf(z);if(J!==-1)return R.FileIndex[J];var re=!z.match(Gc);for(z=z.replace(qn,""),re&&(z=z.replace(Gc,"!")),J=0;J<O.length;++J)if((re?O[J].replace(Gc,"!"):O[J]).replace(qn,"")==z||(re?b[J].replace(Gc,"!"):b[J]).replace(qn,"")==z)return R.FileIndex[J];return null}var N=64,M=-2,ye="d0cf11e0a1b11ae1",me=[208,207,17,224,161,177,26,225],ke="00000000000000000000000000000000",Ee={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:M,FREESECT:-1,HEADER_SIGNATURE:ye,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ke,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(R,U,O){c();var b=P(R,O);l.writeFileSync(U,b)}function q(R){for(var U=new Array(R.length),O=0;O<R.length;++O)U[O]=String.fromCharCode(R[O]);return U.join("")}function he(R,U){var O=P(R,U);switch(U&&U.type||"buffer"){case"file":return c(),l.writeFileSync(U.filename,O),O;case"binary":return typeof O=="string"?O:q(O);case"base64":return fw(typeof O=="string"?O:q(O));case"buffer":if(Ke)return Buffer.isBuffer(O)?O:mo(O);case"array":return typeof O=="string"?Zr(O):O}return O}var Ae;function G(R){try{var U=R.InflateRaw,O=new U;if(O._processChunk(new Uint8Array([3,0]),O._finishFlushFlag),O.bytesRead)Ae=R;else throw new Error("zlib does not expose bytesRead")}catch(b){console.error("cannot use native zlib: "+(b.message||b))}}function Y(R,U){if(!Ae)return wo(R,U);var O=Ae.InflateRaw,b=new O,B=b._processChunk(R.slice(R.l),b._finishFlushFlag);return R.l+=b.bytesRead,B}function K(R){return Ae?Ae.deflateRawSync(R):Be(R)}var W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],pe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ce(R){var U=(R<<1|R<<11)&139536|(R<<5|R<<15)&558144;return(U>>16|U>>8|U)&255}for(var _e=typeof Uint8Array<"u",ue=_e?new Uint8Array(256):[],He=0;He<256;++He)ue[He]=Ce(He);function H(R,U){var O=ue[R&255];return U<=8?O>>>8-U:(O=O<<8|ue[R>>8&255],U<=16?O>>>16-U:(O=O<<8|ue[R>>16&255],O>>>24-U))}function ht(R,U){var O=U&7,b=U>>>3;return(R[b]|(O<=6?0:R[b+1]<<8))>>>O&3}function $e(R,U){var O=U&7,b=U>>>3;return(R[b]|(O<=5?0:R[b+1]<<8))>>>O&7}function tt(R,U){var O=U&7,b=U>>>3;return(R[b]|(O<=4?0:R[b+1]<<8))>>>O&15}function Ge(R,U){var O=U&7,b=U>>>3;return(R[b]|(O<=3?0:R[b+1]<<8))>>>O&31}function Te(R,U){var O=U&7,b=U>>>3;return(R[b]|(O<=1?0:R[b+1]<<8))>>>O&127}function Et(R,U,O){var b=U&7,B=U>>>3,z=(1<<O)-1,J=R[B]>>>b;return O<8-b||(J|=R[B+1]<<8-b,O<16-b)||(J|=R[B+2]<<16-b,O<24-b)||(J|=R[B+3]<<24-b),J&z}function bn(R,U,O){var b=U&7,B=U>>>3;return b<=5?R[B]|=(O&7)<<b:(R[B]|=O<<b&255,R[B+1]=(O&7)>>8-b),U+3}function Yn(R,U,O){var b=U&7,B=U>>>3;return O=(O&1)<<b,R[B]|=O,U+1}function wr(R,U,O){var b=U&7,B=U>>>3;return O<<=b,R[B]|=O&255,O>>>=8,R[B+1]=O,U+8}function ma(R,U,O){var b=U&7,B=U>>>3;return O<<=b,R[B]|=O&255,O>>>=8,R[B+1]=O&255,R[B+2]=O>>>8,U+16}function Ir(R,U){var O=R.length,b=2*O>U?2*O:U+5,B=0;if(O>=U)return R;if(Ke){var z=hw(b);if(R.copy)R.copy(z);else for(;B<R.length;++B)z[B]=R[B];return z}else if(_e){var J=new Uint8Array(b);if(J.set)J.set(R);else for(;B<O;++B)J[B]=R[B];return J}return R.length=b,R}function fn(R){for(var U=new Array(R),O=0;O<R;++O)U[O]=0;return U}function Sr(R,U,O){var b=1,B=0,z=0,J=0,re=0,Z=R.length,ee=_e?new Uint16Array(32):fn(32);for(z=0;z<32;++z)ee[z]=0;for(z=Z;z<O;++z)R[z]=0;Z=R.length;var te=_e?new Uint16Array(Z):fn(Z);for(z=0;z<Z;++z)ee[B=R[z]]++,b<B&&(b=B),te[z]=0;for(ee[0]=0,z=1;z<=b;++z)ee[z+16]=re=re+ee[z-1]<<1;for(z=0;z<Z;++z)re=R[z],re!=0&&(te[z]=ee[re+16]++);var le=0;for(z=0;z<Z;++z)if(le=R[z],le!=0)for(re=H(te[z],b)>>b-le,J=(1<<b+4-le)-1;J>=0;--J)U[re|J<<le]=le&15|z<<4;return b}var dt=_e?new Uint16Array(512):fn(512),Vt=_e?new Uint16Array(32):fn(32);if(!_e){for(var Ht=0;Ht<512;++Ht)dt[Ht]=0;for(Ht=0;Ht<32;++Ht)Vt[Ht]=0}(function(){for(var R=[],U=0;U<32;U++)R.push(5);Sr(R,Vt,32);var O=[];for(U=0;U<=143;U++)O.push(8);for(;U<=255;U++)O.push(9);for(;U<=279;U++)O.push(7);for(;U<=287;U++)O.push(8);Sr(O,dt,288)})();var ar=function(){for(var U=_e?new Uint8Array(32768):[],O=0,b=0;O<pe.length-1;++O)for(;b<pe[O+1];++b)U[b]=O;for(;b<32768;++b)U[b]=29;var B=_e?new Uint8Array(259):[];for(O=0,b=0;O<ie.length-1;++O)for(;b<ie[O+1];++b)B[b]=O;function z(re,Z){for(var ee=0;ee<re.length;){var te=Math.min(65535,re.length-ee),le=ee+te==re.length;for(Z.write_shift(1,+le),Z.write_shift(2,te),Z.write_shift(2,~te&65535);te-- >0;)Z[Z.l++]=re[ee++]}return Z.l}function J(re,Z){for(var ee=0,te=0,le=_e?new Uint16Array(32768):[];te<re.length;){var ge=Math.min(65535,re.length-te);if(ge<10){for(ee=bn(Z,ee,+(te+ge==re.length)),ee&7&&(ee+=8-(ee&7)),Z.l=ee/8|0,Z.write_shift(2,ge),Z.write_shift(2,~ge&65535);ge-- >0;)Z[Z.l++]=re[te++];ee=Z.l*8;continue}ee=bn(Z,ee,+(te+ge==re.length)+2);for(var Se=0;ge-- >0;){var de=re[te];Se=(Se<<5^de)&32767;var we=-1,Le=0;if((we=le[Se])&&(we|=te&-32768,we>te&&(we-=32768),we<te))for(;re[we+Le]==re[te+Le]&&Le<250;)++Le;if(Le>2){de=B[Le],de<=22?ee=wr(Z,ee,ue[de+1]>>1)-1:(wr(Z,ee,3),ee+=5,wr(Z,ee,ue[de-23]>>5),ee+=3);var ot=de<8?0:de-4>>2;ot>0&&(ma(Z,ee,Le-ie[de]),ee+=ot),de=U[te-we],ee=wr(Z,ee,ue[de]>>3),ee-=3;var rt=de<4?0:de-2>>1;rt>0&&(ma(Z,ee,te-we-pe[de]),ee+=rt);for(var vt=0;vt<Le;++vt)le[Se]=te&32767,Se=(Se<<5^re[te])&32767,++te;ge-=Le-1}else de<=143?de=de+48:ee=Yn(Z,ee,1),ee=wr(Z,ee,ue[de]),le[Se]=te&32767,++te}ee=wr(Z,ee,0)-1}return Z.l=(ee+7)/8|0,Z.l}return function(Z,ee){return Z.length<8?z(Z,ee):J(Z,ee)}}();function Be(R){var U=Xt(50+Math.floor(R.length*1.1)),O=ar(R,U);return U.slice(0,O)}var Tt=_e?new Uint16Array(32768):fn(32768),rn=_e?new Uint16Array(32768):fn(32768),Rt=_e?new Uint16Array(128):fn(128),li=1,To=1;function ep(R,U){var O=Ge(R,U)+257;U+=5;var b=Ge(R,U)+1;U+=5;var B=tt(R,U)+4;U+=4;for(var z=0,J=_e?new Uint8Array(19):fn(19),re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Z=1,ee=_e?new Uint8Array(8):fn(8),te=_e?new Uint8Array(8):fn(8),le=J.length,ge=0;ge<B;++ge)J[W[ge]]=z=$e(R,U),Z<z&&(Z=z),ee[z]++,U+=3;var Se=0;for(ee[0]=0,ge=1;ge<=Z;++ge)te[ge]=Se=Se+ee[ge-1]<<1;for(ge=0;ge<le;++ge)(Se=J[ge])!=0&&(re[ge]=te[Se]++);var de=0;for(ge=0;ge<le;++ge)if(de=J[ge],de!=0){Se=ue[re[ge]]>>8-de;for(var we=(1<<7-de)-1;we>=0;--we)Rt[Se|we<<de]=de&7|ge<<3}var Le=[];for(Z=1;Le.length<O+b;)switch(Se=Rt[Te(R,U)],U+=Se&7,Se>>>=3){case 16:for(z=3+ht(R,U),U+=2,Se=Le[Le.length-1];z-- >0;)Le.push(Se);break;case 17:for(z=3+$e(R,U),U+=3;z-- >0;)Le.push(0);break;case 18:for(z=11+Te(R,U),U+=7;z-- >0;)Le.push(0);break;default:Le.push(Se),Z<Se&&(Z=Se);break}var ot=Le.slice(0,O),rt=Le.slice(O);for(ge=O;ge<286;++ge)ot[ge]=0;for(ge=b;ge<30;++ge)rt[ge]=0;return li=Sr(ot,Tt,286),To=Sr(rt,rn,30),U}function tp(R,U){if(R[0]==3&&!(R[1]&3))return[Zs(U),2];for(var O=0,b=0,B=hw(U||1<<18),z=0,J=B.length>>>0,re=0,Z=0;!(b&1);){if(b=$e(R,O),O+=3,b>>>1)b>>1==1?(re=9,Z=5):(O=ep(R,O),re=li,Z=To);else{O&7&&(O+=8-(O&7));var ee=R[O>>>3]|R[(O>>>3)+1]<<8;if(O+=32,ee>0)for(!U&&J<z+ee&&(B=Ir(B,z+ee),J=B.length);ee-- >0;)B[z++]=R[O>>>3],O+=8;continue}for(;;){!U&&J<z+32767&&(B=Ir(B,z+32767),J=B.length);var te=Et(R,O,re),le=b>>>1==1?dt[te]:Tt[te];if(O+=le&15,le>>>=4,!(le>>>8&255))B[z++]=le;else{if(le==256)break;le-=257;var ge=le<8?0:le-4>>2;ge>5&&(ge=0);var Se=z+ie[le];ge>0&&(Se+=Et(R,O,ge),O+=ge),te=Et(R,O,Z),le=b>>>1==1?Vt[te]:rn[te],O+=le&15,le>>>=4;var de=le<4?0:le-2>>1,we=pe[le];for(de>0&&(we+=Et(R,O,de),O+=de),!U&&J<Se&&(B=Ir(B,Se+100),J=B.length);z<Se;)B[z]=B[z-we],++z}}}return U?[B,O+7>>>3]:[B.slice(0,z),O+7>>>3]}function wo(R,U){var O=R.slice(R.l||0),b=tp(O,U);return R.l+=b[1],b[0]}function sc(R,U){if(R)typeof console<"u"&&console.error(U);else throw new Error(U)}function ac(R,U){var O=R;gn(O,0);var b=[],B=[],z={FileIndex:b,FullPaths:B};I(z,{root:U.root});for(var J=O.length-4;(O[J]!=80||O[J+1]!=75||O[J+2]!=5||O[J+3]!=6)&&J>=0;)--J;O.l=J+4,O.l+=4;var re=O.read_shift(2);O.l+=6;var Z=O.read_shift(4);for(O.l=Z,J=0;J<re;++J){O.l+=20;var ee=O.read_shift(4),te=O.read_shift(4),le=O.read_shift(2),ge=O.read_shift(2),Se=O.read_shift(2);O.l+=8;var de=O.read_shift(4),we=o(O.slice(O.l+le,O.l+le+ge));O.l+=le+ge+Se;var Le=O.l;O.l=de+4,ga(O,ee,te,z,we),O.l=Le}return z}function ga(R,U,O,b,B){R.l+=2;var z=R.read_shift(2),J=R.read_shift(2),re=a(R);if(z&8257)throw new Error("Unsupported ZIP encryption");for(var Z=R.read_shift(4),ee=R.read_shift(4),te=R.read_shift(4),le=R.read_shift(2),ge=R.read_shift(2),Se="",de=0;de<le;++de)Se+=String.fromCharCode(R[R.l++]);if(ge){var we=o(R.slice(R.l,R.l+ge));(we[21589]||{}).mt&&(re=we[21589].mt),((B||{})[21589]||{}).mt&&(re=B[21589].mt)}R.l+=ge;var Le=R.slice(R.l,R.l+ee);switch(J){case 8:Le=Y(R,te);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+J)}var ot=!1;z&8&&(Z=R.read_shift(4),Z==134695760&&(Z=R.read_shift(4),ot=!0),ee=R.read_shift(4),te=R.read_shift(4)),ee!=U&&sc(ot,"Bad compressed size: "+U+" != "+ee),te!=O&&sc(ot,"Bad uncompressed size: "+O+" != "+te),ki(b,Se,Le,{unsafe:!0,mt:re})}function oc(R,U){var O=U||{},b=[],B=[],z=Xt(1),J=O.compression?8:0,re=0,Z=0,ee=0,te=0,le=0,ge=R.FullPaths[0],Se=ge,de=R.FileIndex[0],we=[],Le=0;for(Z=1;Z<R.FullPaths.length;++Z)if(Se=R.FullPaths[Z].slice(ge.length),de=R.FileIndex[Z],!(!de.size||!de.content||Se=="Sh33tJ5")){var ot=te,rt=Xt(Se.length);for(ee=0;ee<Se.length;++ee)rt.write_shift(1,Se.charCodeAt(ee)&127);rt=rt.slice(0,rt.l),we[le]=SG.buf(de.content,0);var vt=de.content;J==8&&(vt=K(vt)),z=Xt(30),z.write_shift(4,67324752),z.write_shift(2,20),z.write_shift(2,re),z.write_shift(2,J),de.mt?s(z,de.mt):z.write_shift(4,0),z.write_shift(-4,we[le]),z.write_shift(4,vt.length),z.write_shift(4,de.content.length),z.write_shift(2,rt.length),z.write_shift(2,0),te+=z.length,b.push(z),te+=rt.length,b.push(rt),te+=vt.length,b.push(vt),z=Xt(46),z.write_shift(4,33639248),z.write_shift(2,0),z.write_shift(2,20),z.write_shift(2,re),z.write_shift(2,J),z.write_shift(4,0),z.write_shift(-4,we[le]),z.write_shift(4,vt.length),z.write_shift(4,de.content.length),z.write_shift(2,rt.length),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(4,0),z.write_shift(4,ot),Le+=z.l,B.push(z),Le+=rt.length,B.push(rt),++le}return z=Xt(22),z.write_shift(4,101010256),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(2,le),z.write_shift(2,le),z.write_shift(4,Le),z.write_shift(4,te),z.write_shift(2,0),Is([Is(b),Is(B),z])}var as={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ci(R,U){if(R.ctype)return R.ctype;var O=R.name||"",b=O.match(/\.([^\.]+)$/);return b&&as[b[1]]||U&&(b=(O=U).match(/[\.\\]([^\.\\])+$/),b&&as[b[1]])?as[b[1]]:"application/octet-stream"}function kf(R){for(var U=fw(R),O=[],b=0;b<U.length;b+=76)O.push(U.slice(b,b+76));return O.join(`\r
`)+`\r
`}function Io(R){var U=R.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ee){var te=ee.charCodeAt(0).toString(16).toUpperCase();return"="+(te.length==1?"0"+te:te)});U=U.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),U.charAt(0)==`
`&&(U="=0D"+U.slice(1)),U=U.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var O=[],b=U.split(`\r
`),B=0;B<b.length;++B){var z=b[B];if(z.length==0){O.push("");continue}for(var J=0;J<z.length;){var re=76,Z=z.slice(J,J+re);Z.charAt(re-1)=="="?re--:Z.charAt(re-2)=="="?re-=2:Z.charAt(re-3)=="="&&(re-=3),Z=z.slice(J,J+re),J+=re,J<z.length&&(Z+="="),O.push(Z)}}return O.join(`\r
`)}function Rf(R){for(var U=[],O=0;O<R.length;++O){for(var b=R[O];O<=R.length&&b.charAt(b.length-1)=="=";)b=b.slice(0,b.length-1)+R[++O];U.push(b)}for(var B=0;B<U.length;++B)U[B]=U[B].replace(/[=][0-9A-Fa-f]{2}/g,function(z){return String.fromCharCode(parseInt(z.slice(1),16))});return Zr(U.join(`\r
`))}function va(R,U,O){for(var b="",B="",z="",J,re=0;re<10;++re){var Z=U[re];if(!Z||Z.match(/^\s*$/))break;var ee=Z.match(/^(.*?):\s*([^\s].*)$/);if(ee)switch(ee[1].toLowerCase()){case"content-location":b=ee[2].trim();break;case"content-type":z=ee[2].trim();break;case"content-transfer-encoding":B=ee[2].trim();break}}switch(++re,B.toLowerCase()){case"base64":J=Zr(yr(U.slice(re).join("")));break;case"quoted-printable":J=Rf(U.slice(re));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+B)}var te=ki(R,b.slice(O.length),J,{unsafe:!0});z&&(te.ctype=z)}function Pf(R,U){if(q(R.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var O=U&&U.root||"",b=(Ke&&Buffer.isBuffer(R)?R.toString("binary"):q(R)).split(`\r
`),B=0,z="";for(B=0;B<b.length;++B)if(z=b[B],!!/^Content-Location:/i.test(z)&&(z=z.slice(z.indexOf("file")),O||(O=z.slice(0,z.lastIndexOf("/")+1)),z.slice(0,O.length)!=O))for(;O.length>0&&(O=O.slice(0,O.length-1),O=O.slice(0,O.lastIndexOf("/")+1),z.slice(0,O.length)!=O););var J=(b[1]||"").match(/boundary="(.*?)"/);if(!J)throw new Error("MAD cannot find boundary");var re="--"+(J[1]||""),Z=[],ee=[],te={FileIndex:Z,FullPaths:ee};I(te);var le,ge=0;for(B=0;B<b.length;++B){var Se=b[B];Se!==re&&Se!==re+"--"||(ge++&&va(te,b.slice(le,B),O),le=B)}return te}function hn(R,U){var O=U||{},b=O.boundary||"SheetJS";b="------="+b;for(var B=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+b.slice(2)+'"',"","",""],z=R.FullPaths[0],J=z,re=R.FileIndex[0],Z=1;Z<R.FullPaths.length;++Z)if(J=R.FullPaths[Z].slice(z.length),re=R.FileIndex[Z],!(!re.size||!re.content||J=="Sh33tJ5")){J=J.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Le){return"_x"+Le.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Le){return"_u"+Le.charCodeAt(0).toString(16)+"_"});for(var ee=re.content,te=Ke&&Buffer.isBuffer(ee)?ee.toString("binary"):q(ee),le=0,ge=Math.min(1024,te.length),Se=0,de=0;de<=ge;++de)(Se=te.charCodeAt(de))>=32&&Se<128&&++le;var we=le>=ge*4/5;B.push(b),B.push("Content-Location: "+(O.root||"file:///C:/SheetJS/")+J),B.push("Content-Transfer-Encoding: "+(we?"quoted-printable":"base64")),B.push("Content-Type: "+Ci(re,J)),B.push(""),B.push(we?Io(te):kf(te))}return B.push(b+`--\r
`),B.join(`\r
`)}function Df(R){var U={};return I(U,R),U}function ki(R,U,O,b){var B=b&&b.unsafe;B||I(R);var z=!B&&Ye.find(R,U);if(!z){var J=R.FullPaths[0];U.slice(0,J.length)==J?J=U:(J.slice(-1)!="/"&&(J+="/"),J=(J+U).replace("//","/")),z={name:i(U),type:2},R.FileIndex.push(z),R.FullPaths.push(J),B||Ye.utils.cfb_gc(R)}return z.content=O,z.size=O?O.length:0,b&&(b.CLSID&&(z.clsid=b.CLSID),b.mt&&(z.mt=b.mt),b.ct&&(z.ct=b.ct)),z}function _a(R,U){I(R);var O=Ye.find(R,U);if(O){for(var b=0;b<R.FileIndex.length;++b)if(R.FileIndex[b]==O)return R.FileIndex.splice(b,1),R.FullPaths.splice(b,1),!0}return!1}function np(R,U,O){I(R);var b=Ye.find(R,U);if(b){for(var B=0;B<R.FileIndex.length;++B)if(R.FileIndex[B]==b)return R.FileIndex[B].name=i(O),R.FullPaths[B]=O,!0}return!1}function rp(R){C(R,!0)}return e.find=D,e.read=L,e.parse=u,e.write=he,e.writeFile=ce,e.utils={cfb_new:Df,cfb_add:ki,cfb_del:_a,cfb_mov:np,cfb_gc:rp,ReadShift:ou,CheckField:FR,prep_blob:gn,bconcat:Is,use_zlib:G,_deflateRaw:Be,_inflateRaw:wo,consts:Ee},e}();function AG(n){if(typeof Deno<"u")return Deno.readFileSync(n);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(n);e.open("r"),e.encoding="binary";var t=e.read();return e.close(),t}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+n)}function wi(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function o1(n){for(var e=[],t=wi(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}var e0=new Date(1899,11,30,0,0,0);function Kn(n,e){var t=n.getTime(),r=e0.getTime()+(n.getTimezoneOffset()-e0.getTimezoneOffset())*6e4;return(t-r)/(24*60*60*1e3)}var hR=new Date,CG=e0.getTime()+(hR.getTimezoneOffset()-e0.getTimezoneOffset())*6e4,yw=hR.getTimezoneOffset();function X0(n){var e=new Date;return e.setTime(n*24*60*60*1e3+CG),e.getTimezoneOffset()!==yw&&e.setTime(e.getTime()+(e.getTimezoneOffset()-yw)*6e4),e}function kG(n){var e=0,t=0,r=!1,i=n.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+n+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(t=1,s>3&&(r=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":t*=24;case"H":t*=60;case"M":if(r)t*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=t*parseInt(i[s],10)}return e}var Ew=new Date("2017-02-19T19:06:09.000Z"),dR=isNaN(Ew.getFullYear())?new Date("2/19/17"):Ew,RG=dR.getFullYear()==2017;function cn(n,e){var t=new Date(n);if(RG)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(dR.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function ao(n,e){if(Ke&&Buffer.isBuffer(n)){if(e){if(n[0]==255&&n[1]==254)return Hc(n.slice(2).toString("utf16le"));if(n[1]==254&&n[2]==255)return Hc(Zk(n.slice(2).toString("binary")))}return n.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(n[0]==255&&n[1]==254)return Hc(new TextDecoder("utf-16le").decode(n.slice(2)));if(n[0]==254&&n[1]==255)return Hc(new TextDecoder("utf-16be").decode(n.slice(2)))}var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function _n(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=_n(n[t]));return e}function Nt(n,e){for(var t="";t.length<e;)t+=n;return t}function ai(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var PG=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ll(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&PG.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}var DG=function(){var n="abacaba".split(/(:?b)/i).length==5;return function(t,r,i){if(n||typeof r=="string")return t.split(r);for(var s=t.split(r),a=[s[0]],o=1;o<s.length;++o)a.push(i),a.push(s[o]);return a}}();function pR(n){return n?n.content&&n.type?ao(n.content,!0):n.data?Bc(n.data):n.asNodeBuffer&&Ke?Bc(n.asNodeBuffer().toString("binary")):n.asBinary?Bc(n.asBinary()):n._data&&n._data.getContent?Bc(ao(Array.prototype.slice.call(n._data.getContent(),0))):null:null}function mR(n){if(!n)return null;if(n.data)return cw(n.data);if(n.asNodeBuffer&&Ke)return n.asNodeBuffer();if(n._data&&n._data.getContent){var e=n._data.getContent();return typeof e=="string"?cw(e):Array.prototype.slice.call(e)}return n.content&&n.type?n.content:null}function NG(n){return n&&n.name.slice(-4)===".bin"?mR(n):pR(n)}function kr(n,e){for(var t=n.FullPaths||wi(n.files),r=e.toLowerCase().replace(/[\/]/g,"\\"),i=r.replace(/\\/g,"/"),s=0;s<t.length;++s){var a=t[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==a||i==a)return n.files?n.files[t[s]]:n.FileIndex[s]}return null}function l1(n,e){var t=kr(n,e);if(t==null)throw new Error("Cannot find file "+e+" in zip");return t}function qt(n,e,t){if(!t)return NG(l1(n,e));if(!e)return null;try{return qt(n,e)}catch{return null}}function fr(n,e,t){if(!t)return pR(l1(n,e));if(!e)return null;try{return fr(n,e)}catch{return null}}function FG(n,e,t){return mR(l1(n,e))}function Tw(n){for(var e=n.FullPaths||wi(n.files),t=[],r=0;r<e.length;++r)e[r].slice(-1)!="/"&&t.push(e[r].replace(/^Root Entry[\/]/,""));return t.sort()}function MG(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return Ke?r=mo(t):r=Z7(t),Ye.utils.cfb_add(n,e,r)}Ye.utils.cfb_add(n,e,t)}else n.file(e,t)}function gR(n,e){switch(e.type){case"base64":return Ye.read(n,{type:"base64"});case"binary":return Ye.read(n,{type:"binary"});case"buffer":case"array":return Ye.read(n,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function zc(n,e){if(n.charAt(0)=="/")return n.slice(1);var t=e.split("/");e.slice(-1)!="/"&&t.pop();for(var r=n.split("/");r.length!==0;){var i=r.shift();i===".."?t.pop():i!=="."&&t.push(i)}return t.join("/")}var vR=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,OG=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,ww=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,LG=/<[^>]*>/g,Ln=vR.match(ww)?ww:LG,bG=/<\w*:/,VG=/<(\/?)\w+:/;function Me(n,e,t){for(var r={},i=0,s=0;i!==n.length&&!((s=n.charCodeAt(i))===32||s===10||s===13);++i);if(e||(r[0]=n.slice(0,i)),i===n.length)return r;var a=n.match(OG),o=0,l="",c=0,u="",h="",m=1;if(a)for(c=0;c!=a.length;++c){for(h=a[c],s=0;s!=h.length&&h.charCodeAt(s)!==61;++s);for(u=h.slice(0,s).trim();h.charCodeAt(s+1)==32;)++s;for(m=(i=h.charCodeAt(s+1))==34||i==39?1:0,l=h.slice(s+1+m,h.length-m),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),r[u]=l,r[u.toLowerCase()]=l;else{var g=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(r[g]&&u.slice(o-3,o)=="ext")continue;r[g]=l,r[g.toLowerCase()]=l}}return r}function Si(n){return n.replace(VG,"<$1")}var _R={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},UG=o1(_R),Ze=function(){var n=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function t(r){var i=r+"",s=i.indexOf("<![CDATA[");if(s==-1)return i.replace(n,function(o,l){return _R[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=i.indexOf("]]>");return t(i.slice(0,s))+i.slice(s+9,a)+t(i.slice(a+3))}}(),BG=/[&<>'"]/g,GG=/[\u0000-\u001f]/g;function c1(n){var e=n+"";return e.replace(BG,function(t){return UG[t]}).replace(/\n/g,"<br/>").replace(GG,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}var Iw=function(){var n=/&#(\d+);/g;function e(t,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(n,e)}}();function xt(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Jp(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){a=(r&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=n.charCodeAt(t++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function Sw(n){var e=Zs(2*n.length),t,r,i=1,s=0,a=0,o;for(r=0;r<n.length;r+=i)i=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),i=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function Aw(n){return mo(n,"binary").toString("utf8")}var xh="foo bar baz",ut=Ke&&(Aw(xh)==Jp(xh)&&Aw||Sw(xh)==Jp(xh)&&Sw)||Jp,Hc=Ke?function(n){return mo(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Qu=function(){var n={};return function(t,r){var i=t+"|"+(r||"");return n[i]?n[i]:n[i]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",r||"")}}(),xR=function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}}(),zG=function(){var n={};return function(t){return n[t]!==void 0?n[t]:n[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}(),HG=/<\/?(?:vt:)?variant>/g,$G=/<(?:vt:)([^>]*)>([\s\S]*)</;function Cw(n,e){var t=Me(n),r=n.match(zG(t.baseType))||[],i=[];if(r.length!=t.size){if(e.WTF)throw new Error("unexpected vector length "+r.length+" != "+t.size);return i}return r.forEach(function(s){var a=s.replace(HG,"").match($G);a&&i.push({v:ut(a[2]),t:a[1]})}),i}var WG=/(^\s|\s$|\n)/;function qG(n){return wi(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function KG(n,e,t){return"<"+n+(t!=null?qG(t):"")+(e!=null?(e.match(WG)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function u1(n){if(Ke&&Buffer.isBuffer(n))return n.toString("utf8");if(typeof n=="string")return n;if(typeof Uint8Array<"u"&&n instanceof Uint8Array)return ut(go(i1(n)));throw new Error("Bad input format: expected Buffer or string")}var Ju=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,jG={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},YG=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function XG(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function QG(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=r?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)n[t+o]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var kw=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},Rw=Ke?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:mo(e)})):kw(n)}:kw,Pw=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(Gi(n,i)));return r.join("").replace(qn,"")},f1=Ke?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(qn,""):Pw(n,e,t)}:Pw,Dw=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},yR=Ke?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):Dw(n,e,t)}:Dw,Nw=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(Go(n,i)));return r.join("")},Tf=Ke?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):Nw(e,t,r)}:Nw,ER=function(n,e){var t=ur(n,e);return t>0?Tf(n,e+4,e+4+t-1):""},TR=ER,wR=function(n,e){var t=ur(n,e);return t>0?Tf(n,e+4,e+4+t-1):""},IR=wR,SR=function(n,e){var t=2*ur(n,e);return t>0?Tf(n,e+4,e+4+t-1):""},AR=SR,CR=function(e,t){var r=ur(e,t);return r>0?f1(e,t+4,t+4+r):""},kR=CR,RR=function(n,e){var t=ur(n,e);return t>0?Tf(n,e+4,e+4+t):""},PR=RR,DR=function(n,e){return XG(n,e)},t0=DR,NR=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Ke&&(TR=function(e,t){if(!Buffer.isBuffer(e))return ER(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},IR=function(e,t){if(!Buffer.isBuffer(e))return wR(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},AR=function(e,t){if(!Buffer.isBuffer(e))return SR(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},kR=function(e,t){if(!Buffer.isBuffer(e))return CR(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},PR=function(e,t){if(!Buffer.isBuffer(e))return RR(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},t0=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):DR(e,t)},NR=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Go=function(n,e){return n[e]},Gi=function(n,e){return n[e+1]*256+n[e]},JG=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},ur=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},Da=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},ZG=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function ou(n,e){var t="",r,i,s=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,Ke&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(l=0;l<n;++l)t+=String.fromCharCode(Gi(this,c)),c+=2;n*=2;break;case"utf8":t=Tf(this,this.l,this.l+n);break;case"utf16le":n*=2,t=f1(this,this.l,this.l+n);break;case"wstr":return ou.call(this,n,"dbcs");case"lpstr-ansi":t=TR(this,this.l),n=4+ur(this,this.l);break;case"lpstr-cp":t=IR(this,this.l),n=4+ur(this,this.l);break;case"lpwstr":t=AR(this,this.l),n=4+2*ur(this,this.l);break;case"lpp4":n=4+ur(this,this.l),t=kR(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+ur(this,this.l),t=PR(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(a=Go(this,this.l+n++))!==0;)s.push(_h(a));t=s.join("");break;case"_wstr":for(n=0,t="";(a=Gi(this,this.l+n))!==0;)s.push(_h(a)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",c=this.l,l=0;l<n;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Go(this,c),this.l=c+1,o=ou.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(_h(Gi(this,c))),c+=2}t=s.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",c=this.l,l=0;l!=n;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Go(this,c),this.l=c+1,o=ou.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(_h(Go(this,c))),c+=1}t=s.join("");break;default:switch(n){case 1:return r=Go(this,this.l),this.l++,r;case 2:return r=(e==="i"?JG:Gi)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(r=(n>0?Da:ZG)(this,this.l),this.l+=4,r):(i=ur(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=t0(this,this.l):i=t0([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=yR(this,this.l,n);break}}return this.l+=n,t}var ez=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},tz=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},nz=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function rz(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)nz(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,ez(this,e,this.l);break;case 8:if(r=8,t==="f"){QG(this,e,this.l);break}case 16:break;case-4:r=4,tz(this,e,this.l);break}return this.l+=r,this}function FR(n,e){var t=yR(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function gn(n,e){n.l=e,n.read_shift=ou,n.chk=FR,n.write_shift=rz}function On(n,e){n.l+=e}function Xt(n){var e=Zs(n);return gn(e,0),e}function ss(n,e,t){if(n){var r,i,s;gn(n,n.l||0);for(var a=n.length,o=0,l=0;n.l<a;){o=n.read_shift(1),o&128&&(o=(o&127)+((n.read_shift(1)&127)<<7));var c=o0[o]||o0[65535];for(r=n.read_shift(1),s=r&127,i=1;i<4&&r&128;++i)s+=((r=n.read_shift(1))&127)<<7*i;l=n.l+s;var u=c.f&&c.f(n,s,t);if(n.l=l,e(u,c,o))return}}}function Gg(){var n=[],e=Ke?256:2048,t=function(c){var u=Xt(c);return gn(u,0),u},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(c){return r&&c<r.length-r.l?r:(i(),r=t(Math.max(c+1,e)))},a=function(){return i(),Is(n)},o=function(c){i(),r=c,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:a,_bufs:n}}function lu(n,e,t){var r=_n(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function Fw(n,e,t){var r=_n(n);return r.s=lu(r.s,e.s,t),r.e=lu(r.e,e.s,t),r}function cu(n,e){if(n.cRel&&n.c<0)for(n=_n(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=_n(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=Ve(n);return!n.cRel&&n.cRel!=null&&(t=az(t)),!n.rRel&&n.rRel!=null&&(t=iz(t)),t}function Zp(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+Zt(n.s.c)+":"+(n.e.cRel?"":"$")+Zt(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+xn(n.s.r)+":"+(n.e.rRel?"":"$")+xn(n.e.r):cu(n.s,e.biff)+":"+cu(n.e,e.biff)}function h1(n){return parseInt(sz(n),10)-1}function xn(n){return""+(n+1)}function iz(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function sz(n){return n.replace(/\$(\d+)$/,"$1")}function d1(n){for(var e=oz(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function Zt(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function az(n){return n.replace(/^([A-Z])/,"$$$1")}function oz(n){return n.replace(/^\$([A-Z])/,"$1")}function lz(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function zn(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function Ve(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function nc(n){var e=n.indexOf(":");return e==-1?{s:zn(n),e:zn(n)}:{s:zn(n.slice(0,e)),e:zn(n.slice(e+1))}}function Xe(n,e){return typeof e>"u"||typeof e=="number"?Xe(n.s,n.e):(typeof n!="string"&&(n=Ve(n)),typeof e!="string"&&(e=Ve(e)),n==e?n:n+":"+e)}function Lt(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function Mw(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=Ur(n.z,t?Kn(e):e)}catch{}try{return n.w=Ur((n.XF||{}).numFmtId||(t?14:0),t?Kn(e):e)}catch{return""+e}}function ts(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?xo[n.v]||n.v:e==null?Mw(n,n.v):Mw(n,e))}function pa(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function MR(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense,s=n||(i?[]:{}),a=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?zn(r.origin):r.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=Lt(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),a==-1&&(c.e.r=a=u.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=e[h].length;++m)if(!(typeof e[h][m]>"u")){var g={v:e[h][m]},v=a+h,_=o+m;if(c.s.r>v&&(c.s.r=v),c.s.c>_&&(c.s.c=_),c.e.r<v&&(c.e.r=v),c.e.c<_&&(c.e.c=_),e[h][m]&&typeof e[h][m]=="object"&&!Array.isArray(e[h][m])&&!(e[h][m]instanceof Date))g=e[h][m];else if(Array.isArray(g.v)&&(g.f=e[h][m][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||Ue[14],r.cellDates?(g.t="d",g.w=Ur(g.z,Kn(g.v))):(g.t="n",g.v=Kn(g.v),g.w=Ur(g.z,g.v))):g.t="s";if(i)s[v]||(s[v]=[]),s[v][_]&&s[v][_].z&&(g.z=s[v][_].z),s[v][_]=g;else{var E=Ve({c:_,r:v});s[E]&&s[E].z&&(g.z=s[E].z),s[E]=g}}}return c.s.c<1e7&&(s["!ref"]=Xe(c)),s}function rc(n,e){return MR(null,n,e)}function cz(n){return n.read_shift(4,"i")}function Fn(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function uz(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function p1(n,e){var t=n.l,r=n.read_shift(1),i=Fn(n),s=[],a={t:i,h:i};if(r&1){for(var o=n.read_shift(4),l=0;l!=o;++l)s.push(uz(n));a.r=s}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}var fz=p1;function Gr(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function vo(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}var hz=Fn;function m1(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}var dz=Fn,zg=m1;function g1(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?t0([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Da(e,0)>>2;return t?i/100:i}function OR(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}var _o=OR;function Dn(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function pz(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),a=n.read_shift(1),o=n.read_shift(1),l=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var c=Ha[i];c&&(e.rgb=ef(c));break;case 2:e.rgb=ef([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function mz(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function LR(n,e){var t={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=n.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return t[n.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return n.l-=4,n.read_shift(0,e==1?"lpstr":"lpwstr")}function gz(n){return LR(n,1)}function vz(n){return LR(n,2)}var v1=2,Xn=3,yh=11,Ow=12,n0=19,Eh=64,_z=65,xz=71,yz=4108,Ez=4126,an=80,bR=81,Tz=[an,bR],wz={1:{n:"CodePage",t:v1},2:{n:"Category",t:an},3:{n:"PresentationFormat",t:an},4:{n:"ByteCount",t:Xn},5:{n:"LineCount",t:Xn},6:{n:"ParagraphCount",t:Xn},7:{n:"SlideCount",t:Xn},8:{n:"NoteCount",t:Xn},9:{n:"HiddenCount",t:Xn},10:{n:"MultimediaClipCount",t:Xn},11:{n:"ScaleCrop",t:yh},12:{n:"HeadingPairs",t:yz},13:{n:"TitlesOfParts",t:Ez},14:{n:"Manager",t:an},15:{n:"Company",t:an},16:{n:"LinksUpToDate",t:yh},17:{n:"CharacterCount",t:Xn},19:{n:"SharedDoc",t:yh},22:{n:"HyperlinksChanged",t:yh},23:{n:"AppVersion",t:Xn,p:"version"},24:{n:"DigSig",t:_z},26:{n:"ContentType",t:an},27:{n:"ContentStatus",t:an},28:{n:"Language",t:an},29:{n:"Version",t:an},255:{},2147483648:{n:"Locale",t:n0},2147483651:{n:"Behavior",t:n0},1919054434:{}},Iz={1:{n:"CodePage",t:v1},2:{n:"Title",t:an},3:{n:"Subject",t:an},4:{n:"Author",t:an},5:{n:"Keywords",t:an},6:{n:"Comments",t:an},7:{n:"Template",t:an},8:{n:"LastAuthor",t:an},9:{n:"RevNumber",t:an},10:{n:"EditTime",t:Eh},11:{n:"LastPrinted",t:Eh},12:{n:"CreatedDate",t:Eh},13:{n:"ModifiedDate",t:Eh},14:{n:"PageCount",t:Xn},15:{n:"WordCount",t:Xn},16:{n:"CharCount",t:Xn},17:{n:"Thumbnail",t:xz},18:{n:"Application",t:an},19:{n:"DocSecurity",t:Xn},255:{},2147483648:{n:"Locale",t:n0},2147483651:{n:"Behavior",t:n0},1919054434:{}},Lw={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Sz=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Az(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Cz=Az([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ha=_n(Cz),xo={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},VR={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},bw={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function kz(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Rz(n){var e=kz();if(!n||!n.match)return e;var t={};if((n.match(Ln)||[]).forEach(function(r){var i=Me(r);switch(i[0].replace(bG,"<")){case"<?xml":break;case"<Types":e.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":t[i.Extension]=i.ContentType;break;case"<Override":e[bw[i.ContentType]]!==void 0&&e[bw[i.ContentType]].push(i.PartName);break}}),e.xmlns!==jG.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=t,delete e.calcchains,e}var el={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Hg(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function uu(n,e){var t={"!id":{}};if(!n)return t;e.charAt(0)!=="/"&&(e="/"+e);var r={};return(n.match(Ln)||[]).forEach(function(i){var s=Me(i);if(s[0]==="<Relationship"){var a={};a.Type=s.Type,a.Target=s.Target,a.Id=s.Id,s.TargetMode&&(a.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:zc(s.Target,e);t[o]=a,r[s.Id]=a}}),t["!id"]=r,t}var Pz="application/vnd.oasis.opendocument.spreadsheet";function Dz(n,e){for(var t=u1(n),r,i;r=Ju.exec(t);)switch(r[3]){case"manifest":break;case"file-entry":if(i=Me(r[0],!1),i.path=="/"&&i.type!==Pz)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw r}}var fu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Nz=function(){for(var n=new Array(fu.length),e=0;e<fu.length;++e){var t=fu[e],r="(?:"+t[0].slice(0,t[0].indexOf(":"))+":)"+t[0].slice(t[0].indexOf(":")+1);n[e]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return n}();function UR(n){var e={};n=ut(n);for(var t=0;t<fu.length;++t){var r=fu[t],i=n.match(Nz[t]);i!=null&&i.length>0&&(e[r[1]]=Ze(i[1])),r[2]==="date"&&e[r[1]]&&(e[r[1]]=cn(e[r[1]]))}return e}var Fz=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function BR(n,e,t,r){var i=[];if(typeof n=="string")i=Cw(n,r);else for(var s=0;s<n.length;++s)i=i.concat(n[s].map(function(u){return{v:u}}));var a=typeof e=="string"?Cw(e,r).map(function(u){return u.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":t.Worksheets=l,t.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":t.NamedRanges=l,t.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":t.Chartsheets=l,t.ChartNames=a.slice(o,o+l);break}o+=l}}function Mz(n,e,t){var r={};return e||(e={}),n=ut(n),Fz.forEach(function(i){var s=(n.match(Qu(i[0]))||[])[1];switch(i[2]){case"string":s&&(e[i[1]]=Ze(s));break;case"bool":e[i[1]]=s==="true";break;case"raw":var a=n.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));a&&a.length>0&&(r[i[1]]=a[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&BR(r.HeadingPairs,r.TitlesOfParts,e,t),e}var Oz=/<[^>]+>[^<]*/g;function Lz(n,e){var t={},r="",i=n.match(Oz);if(i)for(var s=0;s!=i.length;++s){var a=i[s],o=Me(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":r=Ze(o.name);break;case"</property>":r=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":t[r]=Ze(u);break;case"bool":t[r]=xt(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":t[r]=parseInt(u,10);break;case"r4":case"r8":case"decimal":t[r]=parseFloat(u);break;case"filetime":case"date":t[r]=cn(u);break;case"cy":case"error":t[r]=Ze(u);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return t}var bz={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},em;function Vz(n,e,t){em||(em=o1(bz)),e=em[e]||e,n[e]=t}function _1(n){var e=n.read_shift(4),t=n.read_shift(4);return new Date((t/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function GR(n,e,t){var r=n.l,i=n.read_shift(0,"lpstr-cp");if(t)for(;n.l-r&3;)++n.l;return i}function zR(n,e,t){var r=n.read_shift(0,"lpwstr");return r}function HR(n,e,t){return e===31?zR(n):GR(n,e,t)}function $g(n,e,t){return HR(n,e,t===!1?0:4)}function Uz(n,e){if(!e)throw new Error("VtUnalignedString must have positive length");return HR(n,e,0)}function Bz(n){for(var e=n.read_shift(4),t=[],r=0;r!=e;++r){var i=n.l;t[r]=n.read_shift(0,"lpwstr").replace(qn,""),n.l-i&2&&(n.l+=2)}return t}function Gz(n){for(var e=n.read_shift(4),t=[],r=0;r!=e;++r)t[r]=n.read_shift(0,"lpstr-cp").replace(qn,"");return t}function zz(n){var e=n.l,t=r0(n,bR);n[n.l]==0&&n[n.l+1]==0&&n.l-e&2&&(n.l+=2);var r=r0(n,Xn);return[t,r]}function Hz(n){for(var e=n.read_shift(4),t=[],r=0;r<e/2;++r)t.push(zz(n));return t}function Vw(n,e){for(var t=n.read_shift(4),r={},i=0;i!=t;++i){var s=n.read_shift(4),a=n.read_shift(4);r[s]=n.read_shift(a,e===1200?"utf16le":"utf8").replace(qn,"").replace(Gc,"!"),e===1200&&a%2&&(n.l+=2)}return n.l&3&&(n.l=n.l>>3<<2),r}function $R(n){var e=n.read_shift(4),t=n.slice(n.l,n.l+e);return n.l+=e,(e&3)>0&&(n.l+=4-(e&3)&3),t}function $z(n){var e={};return e.Size=n.read_shift(4),n.l+=e.Size+3-(e.Size-1)%4,e}function r0(n,e,t){var r=n.read_shift(2),i,s=t||{};if(n.l+=2,e!==Ow&&r!==e&&Tz.indexOf(e)===-1&&!((e&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+e+" saw "+r);switch(e===Ow?r:e){case 2:return i=n.read_shift(2,"i"),s.raw||(n.l+=2),i;case 3:return i=n.read_shift(4,"i"),i;case 11:return n.read_shift(4)!==0;case 19:return i=n.read_shift(4),i;case 30:return GR(n,r,4).replace(qn,"");case 31:return zR(n);case 64:return _1(n);case 65:return $R(n);case 71:return $z(n);case 80:return $g(n,r,!s.raw).replace(qn,"");case 81:return Uz(n,r).replace(qn,"");case 4108:return Hz(n);case 4126:case 4127:return r==4127?Bz(n):Gz(n);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}}function Uw(n,e){var t=n.l,r=n.read_shift(4),i=n.read_shift(4),s=[],a=0,o=0,l=-1,c={};for(a=0;a!=i;++a){var u=n.read_shift(4),h=n.read_shift(4);s[a]=[u,h+t]}s.sort(function(T,y){return T[1]-y[1]});var m={};for(a=0;a!=i;++a){if(n.l!==s[a][1]){var g=!0;if(a>0&&e)switch(e[s[a-1][0]].t){case 2:n.l+2===s[a][1]&&(n.l+=2,g=!1);break;case 80:n.l<=s[a][1]&&(n.l=s[a][1],g=!1);break;case 4108:n.l<=s[a][1]&&(n.l=s[a][1],g=!1);break}if((!e||a==0)&&n.l<=s[a][1]&&(g=!1,n.l=s[a][1]),g)throw new Error("Read Error: Expected address "+s[a][1]+" at "+n.l+" :"+a)}if(e){var v=e[s[a][0]];if(m[v.n]=r0(n,v.t,{raw:!0}),v.p==="version"&&(m[v.n]=String(m[v.n]>>16)+"."+("0000"+String(m[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(m[v.n]){case 0:m[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ti(o=m[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[v.n])}}else if(s[a][0]===1){if(o=m.CodePage=r0(n,v1),ti(o),l!==-1){var _=n.l;n.l=s[l][1],c=Vw(n,o),n.l=_}}else if(s[a][0]===0){if(o===0){l=a,n.l=s[a+1][1];continue}c=Vw(n,o)}else{var E=c[s[a][0]],w;switch(n[n.l]){case 65:n.l+=4,w=$R(n);break;case 30:n.l+=4,w=$g(n,n[n.l-4]).replace(/\u0000+$/,"");break;case 31:n.l+=4,w=$g(n,n[n.l-4]).replace(/\u0000+$/,"");break;case 3:n.l+=4,w=n.read_shift(4,"i");break;case 19:n.l+=4,w=n.read_shift(4);break;case 5:n.l+=4,w=n.read_shift(8,"f");break;case 11:n.l+=4,w=Ut(n,4);break;case 64:n.l+=4,w=cn(_1(n));break;default:throw new Error("unparsed value: "+n[n.l])}m[E]=w}}return n.l=t+r,m}function Bw(n,e,t){var r=n.content;if(!r)return{};gn(r,0);var i,s,a,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var c=r.read_shift(4),u=r.read_shift(16);if(u!==Ye.utils.consts.HEADER_CLSID&&u!==t)throw new Error("Bad PropertySet CLSID "+u);if(i=r.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(s=r.read_shift(16),o=r.read_shift(4),i===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);i===2&&(a=r.read_shift(16),l=r.read_shift(4));var h=Uw(r,e),m={SystemIdentifier:c};for(var g in h)m[g]=h[g];if(m.FMTID=s,i===1)return m;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);var v;try{v=Uw(r,null)}catch{}for(g in v)m[g]=v[g];return m.FMTID=[s,a],m}function ps(n,e){return n.read_shift(e),null}function Wz(n,e,t){for(var r=[],i=n.l+e;n.l<i;)r.push(t(n,i-n.l));if(i!==n.l)throw new Error("Slurp error");return r}function Ut(n,e){return n.read_shift(e)===1}function Kt(n){return n.read_shift(2,"u")}function WR(n,e){return Wz(n,e,Kt)}function qz(n){var e=n.read_shift(1),t=n.read_shift(1);return t===1?e:e===1}function wf(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=n.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return a}function Kz(n){var e=n.read_shift(2),t=n.read_shift(1),r=t&4,i=t&8,s=1+(t&1),a=0,o,l={};i&&(a=n.read_shift(2)),r&&(o=n.read_shift(4));var c=s==2?"dbcs-cont":"sbcs-cont",u=e===0?"":n.read_shift(e,c);return i&&(n.l+=4*a),r&&(n.l+=o),l.t=u,i||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function oo(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function If(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):oo(n,r,t)}function yo(n,e,t){if(t.biff>5)return If(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function jz(n){var e=n.read_shift(1);n.l++;var t=n.read_shift(2);return n.l+=2,[e,t]}function Yz(n){var e=n.read_shift(4),t=n.l,r=!1;e>24&&(n.l+=e-24,n.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),n.l=t);var i=n.read_shift((r?e-24:e)>>1,"utf16le").replace(qn,"");return r&&(n.l+=24),i}function Xz(n){for(var e=n.read_shift(2),t="";e-- >0;)t+="../";var r=n.read_shift(0,"lpstr-ansi");if(n.l+=2,n.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=n.read_shift(4);if(i===0)return t+r.replace(/\\/g,"/");var s=n.read_shift(4);if(n.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=n.read_shift(s>>1,"utf16le").replace(qn,"");return t+a}function Qz(n,e){var t=n.read_shift(16);switch(t){case"e0c9ea79f9bace118c8200aa004ba90b":return Yz(n);case"0303000000000000c000000000000046":return Xz(n);default:throw new Error("Unsupported Moniker "+t)}}function Th(n){var e=n.read_shift(4),t=e>0?n.read_shift(e,"utf16le").replace(qn,""):"";return t}function Jz(n,e){var t=n.l+e,r=n.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var i=n.read_shift(2);n.l+=2;var s,a,o,l,c="",u,h;i&16&&(s=Th(n,t-n.l)),i&128&&(a=Th(n,t-n.l)),(i&257)===257&&(o=Th(n,t-n.l)),(i&257)===1&&(l=Qz(n,t-n.l)),i&8&&(c=Th(n,t-n.l)),i&32&&(u=n.read_shift(16)),i&64&&(h=_1(n)),n.l=t;var m=a||o||l||"";m&&c&&(m+="#"+c),m||(m="#"+c),i&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var g={Target:m};return u&&(g.guid=u),h&&(g.time=h),s&&(g.Tooltip=s),g}function qR(n){var e=n.read_shift(1),t=n.read_shift(1),r=n.read_shift(1),i=n.read_shift(1);return[e,t,r,i]}function KR(n,e){var t=qR(n);return t[3]=0,t}function Ai(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2);return{r:e,c:t,ixfe:r}}function Zz(n){var e=n.read_shift(2),t=n.read_shift(2);return n.l+=8,{type:e,flags:t}}function eH(n,e,t){return e===0?"":yo(n,e,t)}function tH(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[i,s,a]}function jR(n){var e=n.read_shift(2),t=g1(n);return[e,t]}function nH(n,e,t){n.l+=4,e-=4;var r=n.l+e,i=wf(n,e,t),s=n.read_shift(2);if(r-=n.l,s!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+s);return n.l+=s,i}function Q0(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function YR(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(1),i=n.read_shift(1);return{s:{c:r,r:e},e:{c:i,r:t}}}var rH=YR;function XR(n){n.l+=4;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2);return n.l+=12,[t,e,r]}function iH(n){var e={};return n.l+=4,n.l+=16,e.fSharedNote=n.read_shift(2),n.l+=4,e}function sH(n){var e={};return n.l+=4,n.cf=n.read_shift(2),e}function An(n){n.l+=2,n.l+=n.read_shift(2)}var aH={0:An,4:An,5:An,6:An,7:sH,8:An,9:An,10:An,11:An,12:An,13:iH,14:An,15:An,16:An,17:An,18:An,19:An,20:An,21:XR};function oH(n,e){for(var t=n.l+e,r=[];n.l<t;){var i=n.read_shift(2);n.l-=2;try{r.push(aH[i](n,t-n.l))}catch{return n.l=t,r}}return n.l!=t&&(n.l=t),r}function wh(n,e){var t={BIFFVer:0,dt:0};switch(t.BIFFVer=n.read_shift(2),e-=2,e>=2&&(t.dt=n.read_shift(2),n.l-=2),t.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+t.BIFFVer)}return n.read_shift(e),t}function lH(n,e){return e===0||n.read_shift(2),1200}function cH(n,e,t){if(t.enc)return n.l+=e,"";var r=n.l,i=yo(n,0,t);return n.read_shift(e+r-n.l),i}function uH(n,e,t){var r=t&&t.biff==8||e==2?n.read_shift(2):(n.l+=e,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function fH(n,e,t){var r=n.read_shift(4),i=n.read_shift(1)&3,s=n.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var a=wf(n,0,t);return a.length===0&&(a="Sheet1"),{pos:r,hs:i,dt:s,name:a}}function hH(n,e){for(var t=n.l+e,r=n.read_shift(4),i=n.read_shift(4),s=[],a=0;a!=i&&n.l<t;++a)s.push(Kz(n));return s.Count=r,s.Unique=i,s}function dH(n,e){var t={};return t.dsst=n.read_shift(2),n.l+=e-2,t}function pH(n){var e={};e.r=n.read_shift(2),e.c=n.read_shift(2),e.cnt=n.read_shift(2)-e.c;var t=n.read_shift(2);n.l+=4;var r=n.read_shift(1);return n.l+=3,r&7&&(e.level=r&7),r&32&&(e.hidden=!0),r&64&&(e.hpt=t/20),e}function mH(n){var e=Zz(n);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var t=n.read_shift(4);return t!==0}function gH(n){return n.read_shift(2),n.read_shift(4)}function Gw(n,e,t){var r=0;t&&t.biff==2||(r=n.read_shift(2));var i=n.read_shift(2);t&&t.biff==2&&(r=1-(i>>15),i&=32767);var s={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[s,i]}function vH(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2),s=n.read_shift(2),a=n.read_shift(2),o=n.read_shift(2),l=n.read_shift(2),c=n.read_shift(2);return{Pos:[e,t],Dim:[r,i],Flags:s,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function _H(n,e,t){if(t&&t.biff>=2&&t.biff<5)return{};var r=n.read_shift(2);return{RTL:r&64}}function xH(){}function yH(n,e,t){var r={dyHeight:n.read_shift(2),fl:n.read_shift(2)};switch(t&&t.biff||8){case 2:break;case 3:case 4:n.l+=2;break;default:n.l+=10;break}return r.name=wf(n,0,t),r}function EH(n){var e=Ai(n);return e.isst=n.read_shift(4),e}function TH(n,e,t){t.biffguess&&t.biff==2&&(t.biff=5);var r=n.l+e,i=Ai(n);t.biff==2&&n.l++;var s=If(n,r-n.l,t);return i.val=s,i}function wH(n,e,t){var r=n.read_shift(2),i=yo(n,0,t);return[r,i]}var IH=yo;function zw(n,e,t){var r=n.l+e,i=t.biff==8||!t.biff?4:2,s=n.read_shift(i),a=n.read_shift(i),o=n.read_shift(2),l=n.read_shift(2);return n.l=r,{s:{r:s,c:o},e:{r:a,c:l}}}function SH(n){var e=n.read_shift(2),t=n.read_shift(2),r=jR(n);return{r:e,c:t,ixfe:r[0],rknum:r[1]}}function AH(n,e){for(var t=n.l+e-2,r=n.read_shift(2),i=n.read_shift(2),s=[];n.l<t;)s.push(jR(n));if(n.l!==t)throw new Error("MulRK read error");var a=n.read_shift(2);if(s.length!=a-i+1)throw new Error("MulRK length mismatch");return{r,c:i,C:a,rkrec:s}}function CH(n,e){for(var t=n.l+e-2,r=n.read_shift(2),i=n.read_shift(2),s=[];n.l<t;)s.push(n.read_shift(2));if(n.l!==t)throw new Error("MulBlank read error");var a=n.read_shift(2);if(s.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r,c:i,C:a,ixfe:s}}function kH(n,e,t,r){var i={},s=n.read_shift(4),a=n.read_shift(4),o=n.read_shift(4),l=n.read_shift(2);return i.patternType=Sz[o>>26],r.cellStyles&&(i.alc=s&7,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=a&15,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function RH(n,e,t){var r={};return r.ifnt=n.read_shift(2),r.numFmtId=n.read_shift(2),r.flags=n.read_shift(2),r.fStyle=r.flags>>2&1,e-=6,r.data=kH(n,e,r.fStyle,t),r}function PH(n){n.l+=4;var e=[n.read_shift(2),n.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function Hw(n,e,t){var r=Ai(n);(t.biff==2||e==9)&&++n.l;var i=qz(n);return r.val=i,r.t=i===!0||i===!1?"b":"e",r}function DH(n,e,t){t.biffguess&&t.biff==2&&(t.biff=5);var r=Ai(n),i=Dn(n);return r.val=i,r}var $w=eH;function NH(n,e,t){var r=n.l+e,i=n.read_shift(2),s=n.read_shift(2);if(t.sbcch=s,s==1025||s==14849)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var a=oo(n,s),o=[];r>n.l;)o.push(If(n));return[s,i,a,o]}function Ww(n,e,t){var r=n.read_shift(2),i,s={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return t.sbcch===14849&&(i=nH(n,e-2,t)),s.body=i||n.read_shift(e-2),typeof i=="string"&&(s.Name=i),s}var FH=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function qw(n,e,t){var r=n.l+e,i=n.read_shift(2),s=n.read_shift(1),a=n.read_shift(1),o=n.read_shift(t&&t.biff==2?1:2),l=0;(!t||t.biff>=5)&&(t.biff!=5&&(n.l+=2),l=n.read_shift(2),t.biff==5&&(n.l+=2),n.l+=4);var c=oo(n,a,t);i&32&&(c=FH[c.charCodeAt(0)]);var u=r-n.l;t&&t.biff==2&&--u;var h=r==n.l||o===0||!(u>0)?[]:pK(n,u,t,o);return{chKey:s,Name:c,itab:l,rgce:h}}function QR(n,e,t){if(t.biff<8)return MH(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(tH(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function MH(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=wf(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function OH(n,e,t){if(t.biff<8){n.l+=e;return}var r=n.read_shift(2),i=n.read_shift(2),s=oo(n,r,t),a=oo(n,i,t);return[s,a]}function LH(n,e,t){var r=YR(n);n.l++;var i=n.read_shift(1);return e-=8,[mK(n,e,t),i,r]}function Kw(n,e,t){var r=rH(n);switch(t.biff){case 2:n.l++,e-=7;break;case 3:case 4:n.l+=2,e-=8;break;default:n.l+=6,e-=12}return[r,hK(n,e,t)]}function bH(n){var e=n.read_shift(4)!==0,t=n.read_shift(4)!==0,r=n.read_shift(4);return[e,t,r]}function VH(n,e,t){if(!(t.biff<8)){var r=n.read_shift(2),i=n.read_shift(2),s=n.read_shift(2),a=n.read_shift(2),o=yo(n,0,t);return t.biff<8&&n.read_shift(1),[{r,c:i},o,a,s]}}function UH(n,e,t){return VH(n,e,t)}function BH(n,e){for(var t=[],r=n.read_shift(2);r--;)t.push(Q0(n));return t}function GH(n,e,t){if(t&&t.biff<8)return HH(n,e,t);var r=XR(n),i=oH(n,e-22,r[1]);return{cmo:r,ft:i}}var zH={8:function(n,e){var t=n.l+e;n.l+=10;var r=n.read_shift(2);n.l+=4,n.l+=2,n.l+=2,n.l+=2,n.l+=4;var i=n.read_shift(1);return n.l+=i,n.l=t,{fmt:r}}};function HH(n,e,t){n.l+=4;var r=n.read_shift(2),i=n.read_shift(2),s=n.read_shift(2);n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=6,e-=36;var a=[];return a.push((zH[r]||On)(n,e,t)),{cmo:[i,r,s],ft:a}}function $H(n,e,t){var r=n.l,i="";try{n.l+=4;var s=(t.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(s)==-1?n.l+=6:a=jz(n,6,t);var o=n.read_shift(2);n.read_shift(2),Kt(n,2);var l=n.read_shift(2);n.l+=l;for(var c=1;c<n.lens.length-1;++c){if(n.l-r!=n.lens[c])throw new Error("TxO: bad continue record");var u=n[n.l],h=oo(n,n.lens[c+1]-n.lens[c]-1);if(i+=h,i.length>=(u?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return n.l=r+e,{t:i}}catch{return n.l=r+e,{t:i}}}function WH(n,e){var t=Q0(n);n.l+=16;var r=Jz(n,e-24);return[t,r]}function qH(n,e){n.read_shift(2);var t=Q0(n),r=n.read_shift((e-10)/2,"dbcs-cont");return r=r.replace(qn,""),[t,r]}function KH(n){var e=[0,0],t;return t=n.read_shift(2),e[0]=Lw[t]||t,t=n.read_shift(2),e[1]=Lw[t]||t,e}function jH(n){for(var e=n.read_shift(2),t=[];e-- >0;)t.push(KR(n));return t}function YH(n){for(var e=n.read_shift(2),t=[];e-- >0;)t.push(KR(n));return t}function XH(n){n.l+=2;var e={cxfs:0,crc:0};return e.cxfs=n.read_shift(2),e.crc=n.read_shift(4),e}function JR(n,e,t){if(!t.cellStyles)return On(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),a=n.read_shift(r),o=n.read_shift(r),l=n.read_shift(2);r==2&&(n.l+=2);var c={s:i,e:s,w:a,ixfe:o,flags:l};return(t.biff>=5||!t.biff)&&(c.level=l>>8&7),c}function QH(n,e){var t={};return e<32||(n.l+=16,t.header=Dn(n),t.footer=Dn(n),n.l+=2),t}function JH(n,e,t){var r={area:!1};if(t.biff!=5)return n.l+=e,r;var i=n.read_shift(1);return n.l+=3,i&16&&(r.area=!0),r}var ZH=Ai,e$=WR,t$=If;function n$(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i={fmt:e,env:t,len:r,data:n.slice(n.l,n.l+r)};return n.l+=r,i}function r$(n,e,t){t.biffguess&&t.biff==5&&(t.biff=2);var r=Ai(n);++n.l;var i=yo(n,e-7,t);return r.t="str",r.val=i,r}function i$(n){var e=Ai(n);++n.l;var t=Dn(n);return e.t="n",e.val=t,e}function s$(n){var e=Ai(n);++n.l;var t=n.read_shift(2);return e.t="n",e.val=t,e}function a$(n){var e=n.read_shift(1);return e===0?(n.l++,""):n.read_shift(e,"sbcs-cont")}function o$(n,e){n.l+=6,n.l+=2,n.l+=1,n.l+=3,n.l+=1,n.l+=e-13}function l$(n,e,t){var r=n.l+e,i=Ai(n),s=n.read_shift(2),a=oo(n,s,t);return n.l=r,i.t="str",i.val=a,i}var c$=[2,3,48,49,131,139,140,245],jw=function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=o1({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,l){var c=[],u=Zs(1);switch(l.type){case"base64":u=Zr(yr(o));break;case"binary":u=Zr(o);break;case"buffer":case"array":u=o;break}gn(u,0);var h=u.read_shift(1),m=!!(h&136),g=!1,v=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,m=!0;break;case 49:g=!0,m=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var _=0,E=521;h==2&&(_=u.read_shift(2)),u.l+=3,h!=2&&(_=u.read_shift(4)),_>1048576&&(_=1e6),h!=2&&(E=u.read_shift(2));var w=u.read_shift(2),T=l.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(T=n[u[u.l]]),u.l+=1,u.l+=2),v&&(u.l+=36);for(var y=[],k={},V=Math.min(u.length,h==2?521:E-10-(g?264:0)),L=v?32:11;u.l<V&&u[u.l]!=13;)switch(k={},k.name=Yu.utils.decode(T,u.slice(u.l,u.l+L)).replace(/[\u0000\r\n].*$/g,""),u.l+=L,k.type=String.fromCharCode(u.read_shift(1)),h!=2&&!v&&(k.offset=u.read_shift(4)),k.len=u.read_shift(1),h==2&&(k.offset=u.read_shift(2)),k.dec=u.read_shift(1),k.name.length&&y.push(k),h!=2&&(u.l+=v?13:14),k.type){case"B":(!g||k.len!=8)&&l.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(u[u.l]!==13&&(u.l=E-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=E;var I=0,A=0;for(c[0]=[],A=0;A!=y.length;++A)c[0][A]=y[A].name;for(;_-- >0;){if(u[u.l]===42){u.l+=w;continue}for(++u.l,c[++I]=[],A=0,A=0;A!=y.length;++A){var C=u.slice(u.l,u.l+y[A].len);u.l+=y[A].len,gn(C,0);var P=Yu.utils.decode(T,C);switch(y[A].type){case"C":P.trim().length&&(c[I][A]=P.replace(/\s+$/,""));break;case"D":P.length===8?c[I][A]=new Date(+P.slice(0,4),+P.slice(4,6)-1,+P.slice(6,8)):c[I][A]=P;break;case"F":c[I][A]=parseFloat(P.trim());break;case"+":case"I":c[I][A]=v?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(P.trim().toUpperCase()){case"Y":case"T":c[I][A]=!0;break;case"N":case"F":c[I][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+P+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));c[I][A]="##MEMO##"+(v?parseInt(P.trim(),10):C.read_shift(4));break;case"N":P=P.replace(/\u0000/g,"").trim(),P&&P!="."&&(c[I][A]=+P||0);break;case"@":c[I][A]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":c[I][A]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":c[I][A]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[I][A]=-C.read_shift(-8,"f");break;case"B":if(g&&y[A].len==8){c[I][A]=C.read_shift(8,"f");break}case"G":case"P":C.l+=y[A].len;break;case"0":if(y[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[A].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=y,c}function r(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=rc(t(o,c),c);return u["!cols"]=c.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete c.DBF,u}function i(o,l){try{return pa(r(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&ti(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=Gg(),h=Qg(o,{header:1,raw:!0,cellDates:!0}),m=h[0],g=h.slice(1),v=o["!cols"]||[],_=0,E=0,w=0,T=1;for(_=0;_<m.length;++_){if(((v[_]||{}).DBF||{}).name){m[_]=v[_].DBF.name,++w;continue}if(m[_]!=null){if(++w,typeof m[_]=="number"&&(m[_]=m[_].toString(10)),typeof m[_]!="string")throw new Error("DBF Invalid column name "+m[_]+" |"+typeof m[_]+"|");if(m.indexOf(m[_])!==_){for(E=0;E<1024;++E)if(m.indexOf(m[_]+"_"+E)==-1){m[_]+="_"+E;break}}}}var y=Lt(o["!ref"]),k=[],V=[],L=[];for(_=0;_<=y.e.c-y.s.c;++_){var I="",A="",C=0,P=[];for(E=0;E<g.length;++E)g[E][_]!=null&&P.push(g[E][_]);if(P.length==0||m[_]==null){k[_]="?";continue}for(E=0;E<P.length;++E){switch(typeof P[E]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=P[E]instanceof Date?"D":"C";break;default:A="C"}C=Math.max(C,String(P[E]).length),I=I&&I!=A?"C":A}C>250&&(C=250),A=((v[_]||{}).DBF||{}).type,A=="C"&&v[_].DBF.len>C&&(C=v[_].DBF.len),I=="B"&&A=="N"&&(I="N",L[_]=v[_].DBF.dec,C=v[_].DBF.len),V[_]=I=="C"||A=="N"?C:s[I]||0,T+=V[_],k[_]=I}var D=u.next(32);for(D.write_shift(4,318902576),D.write_shift(4,g.length),D.write_shift(2,296+32*w),D.write_shift(2,T),_=0;_<4;++_)D.write_shift(4,0);for(D.write_shift(4,0|(+e[Qk]||3)<<8),_=0,E=0;_<m.length;++_)if(m[_]!=null){var N=u.next(32),M=(m[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);N.write_shift(1,M,"sbcs"),N.write_shift(1,k[_]=="?"?"C":k[_],"sbcs"),N.write_shift(4,E),N.write_shift(1,V[_]||s[k[_]]||0),N.write_shift(1,L[_]||0),N.write_shift(1,2),N.write_shift(4,0),N.write_shift(1,0),N.write_shift(4,0),N.write_shift(4,0),E+=V[_]||s[k[_]]||0}var ye=u.next(264);for(ye.write_shift(4,13),_=0;_<65;++_)ye.write_shift(4,0);for(_=0;_<g.length;++_){var me=u.next(T);for(me.write_shift(1,0),E=0;E<m.length;++E)if(m[E]!=null)switch(k[E]){case"L":me.write_shift(1,g[_][E]==null?63:g[_][E]?84:70);break;case"B":me.write_shift(8,g[_][E]||0,"f");break;case"N":var ke="0";for(typeof g[_][E]=="number"&&(ke=g[_][E].toFixed(L[E]||0)),w=0;w<V[E]-ke.length;++w)me.write_shift(1,32);me.write_shift(1,ke,"sbcs");break;case"D":g[_][E]?(me.write_shift(4,("0000"+g[_][E].getFullYear()).slice(-4),"sbcs"),me.write_shift(2,("00"+(g[_][E].getMonth()+1)).slice(-2),"sbcs"),me.write_shift(2,("00"+g[_][E].getDate()).slice(-2),"sbcs")):me.write_shift(8,"00000000","sbcs");break;case"C":var Ee=String(g[_][E]!=null?g[_][E]:"").slice(0,V[E]);for(me.write_shift(1,Ee,"sbcs"),w=0;w<V[E]-Ee.length;++w)me.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}}(),u$=function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+wi(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(m,g){var v=n[g];return typeof v=="number"?uw(v):v},r=function(m,g,v){var _=g.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return _==59?m:uw(_)};n["|"]=254;function i(m,g){switch(g.type){case"base64":return s(yr(m),g);case"binary":return s(m,g);case"buffer":return s(Ke&&Buffer.isBuffer(m)?m.toString("binary"):go(m),g);case"array":return s(ao(m),g)}throw new Error("Unrecognized type "+g.type)}function s(m,g){var v=m.split(/[\n\r]+/),_=-1,E=-1,w=0,T=0,y=[],k=[],V=null,L={},I=[],A=[],C=[],P=0,D;for(+g.codepage>=0&&ti(+g.codepage);w!==v.length;++w){P=0;var N=v[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),M=N.replace(/;;/g,"\0").split(";").map(function(W){return W.replace(/\u0000/g,";")}),ye=M[0],me;if(N.length>0)switch(ye){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":M[1].charAt(0)=="P"&&k.push(N.slice(3).replace(/;;/g,";"));break;case"C":var ke=!1,Ee=!1,ce=!1,q=!1,he=-1,Ae=-1;for(T=1;T<M.length;++T)switch(M[T].charAt(0)){case"A":break;case"X":E=parseInt(M[T].slice(1))-1,Ee=!0;break;case"Y":for(_=parseInt(M[T].slice(1))-1,Ee||(E=0),D=y.length;D<=_;++D)y[D]=[];break;case"K":me=M[T].slice(1),me.charAt(0)==='"'?me=me.slice(1,me.length-1):me==="TRUE"?me=!0:me==="FALSE"?me=!1:isNaN(ai(me))?isNaN(Ll(me).getDate())||(me=cn(me)):(me=ai(me),V!==null&&tc(V)&&(me=X0(me))),ke=!0;break;case"E":q=!0;var G=hl(M[T].slice(1),{r:_,c:E});y[_][E]=[y[_][E],G];break;case"S":ce=!0,y[_][E]=[y[_][E],"S5S"];break;case"G":break;case"R":he=parseInt(M[T].slice(1))-1;break;case"C":Ae=parseInt(M[T].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+N)}if(ke&&(y[_][E]&&y[_][E].length==2?y[_][E][0]=me:y[_][E]=me,V=null),ce){if(q)throw new Error("SYLK shared formula cannot have own formula");var Y=he>-1&&y[he][Ae];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");y[_][E][1]=lP(Y[1],{r:_-he,c:E-Ae})}break;case"F":var K=0;for(T=1;T<M.length;++T)switch(M[T].charAt(0)){case"X":E=parseInt(M[T].slice(1))-1,++K;break;case"Y":for(_=parseInt(M[T].slice(1))-1,D=y.length;D<=_;++D)y[D]=[];break;case"M":P=parseInt(M[T].slice(1))/20;break;case"F":break;case"G":break;case"P":V=k[parseInt(M[T].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=M[T].slice(1).split(" "),D=parseInt(C[0],10);D<=parseInt(C[1],10);++D)P=parseInt(C[2],10),A[D-1]=P===0?{hidden:!0}:{wch:P},bl(A[D-1]);break;case"C":E=parseInt(M[T].slice(1))-1,A[E]||(A[E]={});break;case"R":_=parseInt(M[T].slice(1))-1,I[_]||(I[_]={}),P>0?(I[_].hpt=P,I[_].hpx=tf(P)):P===0&&(I[_].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+N)}K<1&&(V=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+N)}}return I.length>0&&(L["!rows"]=I),A.length>0&&(L["!cols"]=A),g&&g.sheetRows&&(y=y.slice(0,g.sheetRows)),[y,L]}function a(m,g){var v=i(m,g),_=v[0],E=v[1],w=rc(_,g);return wi(E).forEach(function(T){w[T]=E[T]}),w}function o(m,g){return pa(a(m,g),g)}function l(m,g,v,_){var E="C;Y"+(v+1)+";X"+(_+1)+";K";switch(m.t){case"n":E+=m.v||0,m.f&&!m.F&&(E+=";E"+XW(m.f,{r:v,c:_}));break;case"b":E+=m.v?"TRUE":"FALSE";break;case"e":E+=m.w||m.v;break;case"d":E+='"'+(m.w||m.v)+'"';break;case"s":E+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function c(m,g){g.forEach(function(v,_){var E="F;W"+(_+1)+" "+(_+1)+" ";v.hidden?E+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=s0(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=a0(v.wpx)),typeof v.wch=="number"&&(E+=Math.round(v.wch))),E.charAt(E.length-1)!=" "&&m.push(E)})}function u(m,g){g.forEach(function(v,_){var E="F;";v.hidden?E+="M0;":v.hpt?E+="M"+20*v.hpt+";":v.hpx&&(E+="M"+20*sP(v.hpx)+";"),E.length>2&&m.push(E+"R"+(_+1))})}function h(m,g){var v=["ID;PWXL;N;E"],_=[],E=Lt(m["!ref"]),w,T=Array.isArray(m),y=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),m["!cols"]&&c(v,m["!cols"]),m["!rows"]&&u(v,m["!rows"]),v.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var k=E.s.r;k<=E.e.r;++k)for(var V=E.s.c;V<=E.e.c;++V){var L=Ve({r:k,c:V});w=T?(m[k]||[])[V]:m[L],!(!w||w.v==null&&(!w.f||w.F))&&_.push(l(w,m,k,V))}return v.join(y)+y+_.join(y)+y+"E"+y}return{to_workbook:o,to_sheet:a,from_sheet:h}}(),f$=function(){function n(s,a){switch(a.type){case"base64":return e(yr(s),a);case"binary":return e(s,a);case"buffer":return e(Ke&&Buffer.isBuffer(s)?s.toString("binary"):go(s),a);case"array":return e(ao(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,c=-1,u=0,h=[];u!==o.length;++u){if(o[u].trim()==="BOT"){h[++l]=[],c=0;continue}if(!(l<0)){var m=o[u].trim().split(","),g=m[0],v=m[1];++u;for(var _=o[u]||"";(_.match(/["]/g)||[]).length&1&&u<o.length-1;)_+=`
`+o[++u];switch(_=_.trim(),+g){case-1:if(_==="BOT"){h[++l]=[],c=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?h[l][c]=!0:_==="FALSE"?h[l][c]=!1:isNaN(ai(v))?isNaN(Ll(v).getDate())?h[l][c]=v:h[l][c]=cn(v):h[l][c]=ai(v),++c;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),h[l][c++]=_!==""?_:null;break}if(_==="EOD")break}}return a&&a.sheetRows&&(h=h.slice(0,a.sheetRows)),h}function t(s,a){return rc(n(s,a),a)}function r(s,a){return pa(t(s,a),a)}var i=function(){var s=function(l,c,u,h,m){l.push(c),l.push(u+","+h),l.push('"'+m.replace(/"/g,'""')+'"')},a=function(l,c,u,h){l.push(c+","+u),l.push(c==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var c=[],u=Lt(l["!ref"]),h,m=Array.isArray(l);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,u.e.r-u.s.r+1,""),s(c,"TUPLES",0,u.e.c-u.s.c+1,""),s(c,"DATA",0,0,"");for(var g=u.s.r;g<=u.e.r;++g){a(c,-1,0,"BOT");for(var v=u.s.c;v<=u.e.c;++v){var _=Ve({r:g,c:v});if(h=m?(l[g]||[])[v]:l[_],!h){a(c,1,0,"");continue}switch(h.t){case"n":var E=h.w;!E&&h.v!=null&&(E=h.v),E==null?h.f&&!h.F?a(c,1,0,"="+h.f):a(c,1,0,""):a(c,0,E,"V");break;case"b":a(c,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Ur(h.z||Ue[14],Kn(cn(h.v)))),a(c,0,h.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var w=`\r
`,T=c.join(w);return T}}();return{to_workbook:r,to_sheet:t,from_sheet:i}}(),h$=function(){function n(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(h,m){for(var g=h.split(`
`),v=-1,_=-1,E=0,w=[];E!==g.length;++E){var T=g[E].trim().split(":");if(T[0]==="cell"){var y=zn(T[1]);if(w.length<=y.r)for(v=w.length;v<=y.r;++v)w[v]||(w[v]=[]);switch(v=y.r,_=y.c,T[2]){case"t":w[v][_]=n(T[3]);break;case"v":w[v][_]=+T[3];break;case"vtf":var k=T[T.length-1];case"vtc":switch(T[3]){case"nl":w[v][_]=!!+T[4];break;default:w[v][_]=+T[4];break}T[2]=="vtf"&&(w[v][_]=[w[v][_],k])}}}return m&&m.sheetRows&&(w=w.slice(0,m.sheetRows)),w}function r(h,m){return rc(t(h,m),m)}function i(h,m){return pa(r(h,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(h){if(!h||!h["!ref"])return"";for(var m=[],g=[],v,_="",E=nc(h["!ref"]),w=Array.isArray(h),T=E.s.r;T<=E.e.r;++T)for(var y=E.s.c;y<=E.e.c;++y)if(_=Ve({r:T,c:y}),v=w?(h[T]||[])[y]:h[_],!(!v||v.v==null||v.t==="z")){switch(g=["cell",_,"t"],v.t){case"s":case"str":g.push(e(v.v));break;case"n":v.f?(g[2]="vtf",g[3]="n",g[4]=v.v,g[5]=e(v.f)):(g[2]="v",g[3]=v.v);break;case"b":g[2]="vt"+(v.f?"f":"c"),g[3]="nl",g[4]=v.v?"1":"0",g[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var k=Kn(cn(v.v));g[2]="vtc",g[3]="nd",g[4]=""+k,g[5]=v.w||Ur(v.z||Ue[14],k);break;case"e":continue}m.push(g.join(":"))}return m.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function u(h){return[s,a,o,a,c(h),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:u}}(),Zu=function(){function n(u,h,m,g,v){v.raw?h[m][g]=u:u===""||(u==="TRUE"?h[m][g]=!0:u==="FALSE"?h[m][g]=!1:isNaN(ai(u))?isNaN(Ll(u).getDate())?h[m][g]=u:h[m][g]=cn(u):h[m][g]=ai(u))}function e(u,h){var m=h||{},g=[];if(!u||u.length===0)return g;for(var v=u.split(/[\r\n]/),_=v.length-1;_>=0&&v[_].length===0;)--_;for(var E=10,w=0,T=0;T<=_;++T)w=v[T].indexOf(" "),w==-1?w=v[T].length:w++,E=Math.max(E,w);for(T=0;T<=_;++T){g[T]=[];var y=0;for(n(v[T].slice(0,E).trim(),g,T,y,m),y=1;y<=(v[T].length-E)/10+1;++y)n(v[T].slice(E+(y-1)*10,E+y*10).trim(),g,T,y,m)}return m.sheetRows&&(g=g.slice(0,m.sheetRows)),g}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(u){for(var h={},m=!1,g=0,v=0;g<u.length;++g)(v=u.charCodeAt(g))==34?m=!m:!m&&v in t&&(h[v]=(h[v]||0)+1);v=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&v.push([h[g],g]);if(!v.length){h=r;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&v.push([h[g],g])}return v.sort(function(_,E){return _[0]-E[0]||r[_[1]]-r[E[1]]}),t[v.pop()[1]]||44}function s(u,h){var m=h||{},g="",v=m.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(g=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(g=u.charAt(4),u=u.slice(6)):g=i(u.slice(0,1024)):m&&m.FS?g=m.FS:g=i(u.slice(0,1024));var E=0,w=0,T=0,y=0,k=0,V=g.charCodeAt(0),L=!1,I=0,A=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var C=m.dateNF!=null?wG(m.dateNF):null;function P(){var D=u.slice(y,k),N={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)N.t="z";else if(m.raw)N.t="s",N.v=D;else if(D.trim().length===0)N.t="s",N.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(N.t="s",N.v=D.slice(2,-1).replace(/""/g,'"')):JW(D)?(N.t="n",N.f=D.slice(1)):(N.t="s",N.v=D);else if(D=="TRUE")N.t="b",N.v=!0;else if(D=="FALSE")N.t="b",N.v=!1;else if(!isNaN(T=ai(D)))N.t="n",m.cellText!==!1&&(N.w=D),N.v=T;else if(!isNaN(Ll(D).getDate())||C&&D.match(C)){N.z=m.dateNF||Ue[14];var M=0;C&&D.match(C)&&(D=IG(D,m.dateNF,D.match(C)||[]),M=1),m.cellDates?(N.t="d",N.v=cn(D,M)):(N.t="n",N.v=Kn(cn(D,M))),m.cellText!==!1&&(N.w=Ur(N.z,N.v instanceof Date?Kn(N.v):N.v)),m.cellNF||delete N.z}else N.t="s",N.v=D;if(N.t=="z"||(m.dense?(v[E]||(v[E]=[]),v[E][w]=N):v[Ve({c:w,r:E})]=N),y=k+1,A=u.charCodeAt(y),_.e.c<w&&(_.e.c=w),_.e.r<E&&(_.e.r=E),I==V)++w;else if(w=0,++E,m.sheetRows&&m.sheetRows<=E)return!0}e:for(;k<u.length;++k)switch(I=u.charCodeAt(k)){case 34:A===34&&(L=!L);break;case V:case 10:case 13:if(!L&&P())break e;break}return k-y>0&&P(),v["!ref"]=Xe(_),v}function a(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?s(u,h):rc(e(u,h),h)}function o(u,h){var m="",g=h.type=="string"?[0,0,0,0]:A1(u,h);switch(h.type){case"base64":m=yr(u);break;case"binary":m=u;break;case"buffer":h.codepage==65001?m=u.toString("utf8"):h.codepage&&typeof Yu<"u"||(m=Ke&&Buffer.isBuffer(u)?u.toString("binary"):go(u));break;case"array":m=ao(u);break;case"string":m=u;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?m=ut(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=ut(m):h.type=="binary"&&typeof Yu<"u",m.slice(0,19)=="socialcalc:version:"?h$.to_sheet(h.type=="string"?m:ut(m),h):a(m,h)}function l(u,h){return pa(o(u,h),h)}function c(u){for(var h=[],m=Lt(u["!ref"]),g,v=Array.isArray(u),_=m.s.r;_<=m.e.r;++_){for(var E=[],w=m.s.c;w<=m.e.c;++w){var T=Ve({r:_,c:w});if(g=v?(u[_]||[])[w]:u[T],!g||g.v==null){E.push("          ");continue}for(var y=(g.w||(ts(g),g.w)||"").slice(0,10);y.length<10;)y+=" ";E.push(y+(w===0?" ":""))}h.push(E.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function d$(n,e){var t=e||{},r=!!t.WTF;t.WTF=!0;try{var i=u$.to_workbook(n,t);return t.WTF=r,i}catch(s){if(t.WTF=r,!s.message.match(/SYLK bad record ID/)&&r)throw s;return Zu.to_workbook(n,e)}}var hu=function(){function n(G,Y,K){if(G){gn(G,G.l||0);for(var W=K.Enum||he;G.l<G.length;){var ie=G.read_shift(2),pe=W[ie]||W[65535],Ce=G.read_shift(2),_e=G.l+Ce,ue=pe.f&&pe.f(G,Ce,K);if(G.l=_e,Y(ue,pe,ie))return}}}function e(G,Y){switch(Y.type){case"base64":return t(Zr(yr(G)),Y);case"binary":return t(Zr(G),Y);case"buffer":case"array":return t(G,Y)}throw"Unsupported type "+Y.type}function t(G,Y){if(!G)return G;var K=Y||{},W=K.dense?[]:{},ie="Sheet1",pe="",Ce=0,_e={},ue=[],He=[],H={s:{r:0,c:0},e:{r:0,c:0}},ht=K.sheetRows||0;if(G[2]==0&&(G[3]==8||G[3]==9)&&G.length>=16&&G[14]==5&&G[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(G[2]==2)K.Enum=he,n(G,function(Te,Et,bn){switch(bn){case 0:K.vers=Te,Te>=4096&&(K.qpro=!0);break;case 6:H=Te;break;case 204:Te&&(pe=Te);break;case 222:pe=Te;break;case 15:case 51:K.qpro||(Te[1].v=Te[1].v.slice(1));case 13:case 14:case 16:bn==14&&(Te[2]&112)==112&&(Te[2]&15)>1&&(Te[2]&15)<15&&(Te[1].z=K.dateNF||Ue[14],K.cellDates&&(Te[1].t="d",Te[1].v=X0(Te[1].v))),K.qpro&&Te[3]>Ce&&(W["!ref"]=Xe(H),_e[ie]=W,ue.push(ie),W=K.dense?[]:{},H={s:{r:0,c:0},e:{r:0,c:0}},Ce=Te[3],ie=pe||"Sheet"+(Ce+1),pe="");var Yn=K.dense?(W[Te[0].r]||[])[Te[0].c]:W[Ve(Te[0])];if(Yn){Yn.t=Te[1].t,Yn.v=Te[1].v,Te[1].z!=null&&(Yn.z=Te[1].z),Te[1].f!=null&&(Yn.f=Te[1].f);break}K.dense?(W[Te[0].r]||(W[Te[0].r]=[]),W[Te[0].r][Te[0].c]=Te[1]):W[Ve(Te[0])]=Te[1];break}},K);else if(G[2]==26||G[2]==14)K.Enum=Ae,G[2]==14&&(K.qpro=!0,G.l=0),n(G,function(Te,Et,bn){switch(bn){case 204:ie=Te;break;case 22:Te[1].v=Te[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Te[3]>Ce&&(W["!ref"]=Xe(H),_e[ie]=W,ue.push(ie),W=K.dense?[]:{},H={s:{r:0,c:0},e:{r:0,c:0}},Ce=Te[3],ie="Sheet"+(Ce+1)),ht>0&&Te[0].r>=ht)break;K.dense?(W[Te[0].r]||(W[Te[0].r]=[]),W[Te[0].r][Te[0].c]=Te[1]):W[Ve(Te[0])]=Te[1],H.e.c<Te[0].c&&(H.e.c=Te[0].c),H.e.r<Te[0].r&&(H.e.r=Te[0].r);break;case 27:Te[14e3]&&(He[Te[14e3][0]]=Te[14e3][1]);break;case 1537:He[Te[0]]=Te[1],Te[0]==Ce&&(ie=Te[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+G[2]);if(W["!ref"]=Xe(H),_e[pe||ie]=W,ue.push(pe||ie),!He.length)return{SheetNames:ue,Sheets:_e};for(var $e={},tt=[],Ge=0;Ge<He.length;++Ge)_e[ue[Ge]]?(tt.push(He[Ge]||ue[Ge]),$e[He[Ge]]=_e[He[Ge]]||_e[ue[Ge]]):(tt.push(He[Ge]),$e[He[Ge]]={"!ref":"A1"});return{SheetNames:tt,Sheets:$e}}function r(G,Y){var K=Y||{};if(+K.codepage>=0&&ti(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var W=Gg(),ie=Lt(G["!ref"]),pe=Array.isArray(G),Ce=[];jr(W,0,s(1030)),jr(W,6,l(ie));for(var _e=Math.min(ie.e.r,8191),ue=ie.s.r;ue<=_e;++ue)for(var He=xn(ue),H=ie.s.c;H<=ie.e.c;++H){ue===ie.s.r&&(Ce[H]=Zt(H));var ht=Ce[H]+He,$e=pe?(G[ue]||[])[H]:G[ht];if(!(!$e||$e.t=="z"))if($e.t=="n")($e.v|0)==$e.v&&$e.v>=-32768&&$e.v<=32767?jr(W,13,g(ue,H,$e.v)):jr(W,14,_(ue,H,$e.v));else{var tt=ts($e);jr(W,15,h(ue,H,tt.slice(0,239)))}}return jr(W,1),W.end()}function i(G,Y){var K=Y||{};if(+K.codepage>=0&&ti(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var W=Gg();jr(W,0,a(G));for(var ie=0,pe=0;ie<G.SheetNames.length;++ie)(G.Sheets[G.SheetNames[ie]]||{})["!ref"]&&jr(W,27,q(G.SheetNames[ie],pe++));var Ce=0;for(ie=0;ie<G.SheetNames.length;++ie){var _e=G.Sheets[G.SheetNames[ie]];if(!(!_e||!_e["!ref"])){for(var ue=Lt(_e["!ref"]),He=Array.isArray(_e),H=[],ht=Math.min(ue.e.r,8191),$e=ue.s.r;$e<=ht;++$e)for(var tt=xn($e),Ge=ue.s.c;Ge<=ue.e.c;++Ge){$e===ue.s.r&&(H[Ge]=Zt(Ge));var Te=H[Ge]+tt,Et=He?(_e[$e]||[])[Ge]:_e[Te];if(!(!Et||Et.t=="z"))if(Et.t=="n")jr(W,23,P($e,Ge,Ce,Et.v));else{var bn=ts(Et);jr(W,22,I($e,Ge,Ce,bn.slice(0,239)))}}++Ce}}return jr(W,1),W.end()}function s(G){var Y=Xt(2);return Y.write_shift(2,G),Y}function a(G){var Y=Xt(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var K=0,W=0,ie=0,pe=0;pe<G.SheetNames.length;++pe){var Ce=G.SheetNames[pe],_e=G.Sheets[Ce];if(!(!_e||!_e["!ref"])){++ie;var ue=nc(_e["!ref"]);K<ue.e.r&&(K=ue.e.r),W<ue.e.c&&(W=ue.e.c)}}return K>8191&&(K=8191),Y.write_shift(2,K),Y.write_shift(1,ie),Y.write_shift(1,W),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function o(G,Y,K){var W={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&K.qpro?(W.s.c=G.read_shift(1),G.l++,W.s.r=G.read_shift(2),W.e.c=G.read_shift(1),G.l++,W.e.r=G.read_shift(2),W):(W.s.c=G.read_shift(2),W.s.r=G.read_shift(2),Y==12&&K.qpro&&(G.l+=2),W.e.c=G.read_shift(2),W.e.r=G.read_shift(2),Y==12&&K.qpro&&(G.l+=2),W.s.c==65535&&(W.s.c=W.e.c=W.s.r=W.e.r=0),W)}function l(G){var Y=Xt(8);return Y.write_shift(2,G.s.c),Y.write_shift(2,G.s.r),Y.write_shift(2,G.e.c),Y.write_shift(2,G.e.r),Y}function c(G,Y,K){var W=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(W[0].c=G.read_shift(1),W[3]=G.read_shift(1),W[0].r=G.read_shift(2),G.l+=2):(W[2]=G.read_shift(1),W[0].c=G.read_shift(2),W[0].r=G.read_shift(2)),W}function u(G,Y,K){var W=G.l+Y,ie=c(G,Y,K);if(ie[1].t="s",K.vers==20768){G.l++;var pe=G.read_shift(1);return ie[1].v=G.read_shift(pe,"utf8"),ie}return K.qpro&&G.l++,ie[1].v=G.read_shift(W-G.l,"cstr"),ie}function h(G,Y,K){var W=Xt(7+K.length);W.write_shift(1,255),W.write_shift(2,Y),W.write_shift(2,G),W.write_shift(1,39);for(var ie=0;ie<W.length;++ie){var pe=K.charCodeAt(ie);W.write_shift(1,pe>=128?95:pe)}return W.write_shift(1,0),W}function m(G,Y,K){var W=c(G,Y,K);return W[1].v=G.read_shift(2,"i"),W}function g(G,Y,K){var W=Xt(7);return W.write_shift(1,255),W.write_shift(2,Y),W.write_shift(2,G),W.write_shift(2,K,"i"),W}function v(G,Y,K){var W=c(G,Y,K);return W[1].v=G.read_shift(8,"f"),W}function _(G,Y,K){var W=Xt(13);return W.write_shift(1,255),W.write_shift(2,Y),W.write_shift(2,G),W.write_shift(8,K,"f"),W}function E(G,Y,K){var W=G.l+Y,ie=c(G,Y,K);if(ie[1].v=G.read_shift(8,"f"),K.qpro)G.l=W;else{var pe=G.read_shift(2);k(G.slice(G.l,G.l+pe),ie),G.l+=pe}return ie}function w(G,Y,K){var W=Y&32768;return Y&=-32769,Y=(W?G:0)+(Y>=8192?Y-16384:Y),(W?"":"$")+(K?Zt(Y):xn(Y))}var T={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(G,Y){gn(G,0);for(var K=[],W=0,ie="",pe="",Ce="",_e="";G.l<G.length;){var ue=G[G.l++];switch(ue){case 0:K.push(G.read_shift(8,"f"));break;case 1:pe=w(Y[0].c,G.read_shift(2),!0),ie=w(Y[0].r,G.read_shift(2),!1),K.push(pe+ie);break;case 2:{var He=w(Y[0].c,G.read_shift(2),!0),H=w(Y[0].r,G.read_shift(2),!1);pe=w(Y[0].c,G.read_shift(2),!0),ie=w(Y[0].r,G.read_shift(2),!1),K.push(He+H+":"+pe+ie)}break;case 3:if(G.l<G.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(G.read_shift(2));break;case 6:{for(var ht="";ue=G[G.l++];)ht+=String.fromCharCode(ue);K.push('"'+ht.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:_e=K.pop(),Ce=K.pop(),K.push(["AND","OR"][ue-20]+"("+Ce+","+_e+")");break;default:if(ue<32&&y[ue])_e=K.pop(),Ce=K.pop(),K.push(Ce+y[ue]+_e);else if(T[ue]){if(W=T[ue][1],W==69&&(W=G[G.l++]),W>K.length){console.error("WK1 bad formula parse 0x"+ue.toString(16)+":|"+K.join("|")+"|");return}var $e=K.slice(-W);K.length-=W,K.push(T[ue][0]+"("+$e.join(",")+")")}else return ue<=7?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=24?console.error("WK1 unsupported op "+ue.toString(16)):ue<=30?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=115?console.error("WK1 unsupported function opcode "+ue.toString(16)):console.error("WK1 unrecognized opcode "+ue.toString(16))}}K.length==1?Y[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function V(G){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=G.read_shift(2),Y[3]=G[G.l++],Y[0].c=G[G.l++],Y}function L(G,Y){var K=V(G);return K[1].t="s",K[1].v=G.read_shift(Y-4,"cstr"),K}function I(G,Y,K,W){var ie=Xt(6+W.length);ie.write_shift(2,G),ie.write_shift(1,K),ie.write_shift(1,Y),ie.write_shift(1,39);for(var pe=0;pe<W.length;++pe){var Ce=W.charCodeAt(pe);ie.write_shift(1,Ce>=128?95:Ce)}return ie.write_shift(1,0),ie}function A(G,Y){var K=V(G);K[1].v=G.read_shift(2);var W=K[1].v>>1;if(K[1].v&1)switch(W&7){case 0:W=(W>>3)*5e3;break;case 1:W=(W>>3)*500;break;case 2:W=(W>>3)/20;break;case 3:W=(W>>3)/200;break;case 4:W=(W>>3)/2e3;break;case 5:W=(W>>3)/2e4;break;case 6:W=(W>>3)/16;break;case 7:W=(W>>3)/64;break}return K[1].v=W,K}function C(G,Y){var K=V(G),W=G.read_shift(4),ie=G.read_shift(4),pe=G.read_shift(2);if(pe==65535)return W===0&&ie===3221225472?(K[1].t="e",K[1].v=15):W===0&&ie===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var Ce=pe&32768;return pe=(pe&32767)-16446,K[1].v=(1-Ce*2)*(ie*Math.pow(2,pe+32)+W*Math.pow(2,pe)),K}function P(G,Y,K,W){var ie=Xt(14);if(ie.write_shift(2,G),ie.write_shift(1,K),ie.write_shift(1,Y),W==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var pe=0,Ce=0,_e=0,ue=0;return W<0&&(pe=1,W=-W),Ce=Math.log2(W)|0,W/=Math.pow(2,Ce-31),ue=W>>>0,ue&2147483648||(W/=2,++Ce,ue=W>>>0),W-=ue,ue|=2147483648,ue>>>=0,W*=Math.pow(2,32),_e=W>>>0,ie.write_shift(4,_e),ie.write_shift(4,ue),Ce+=16383+(pe?32768:0),ie.write_shift(2,Ce),ie}function D(G,Y){var K=C(G);return G.l+=Y-14,K}function N(G,Y){var K=V(G),W=G.read_shift(4);return K[1].v=W>>6,K}function M(G,Y){var K=V(G),W=G.read_shift(8,"f");return K[1].v=W,K}function ye(G,Y){var K=M(G);return G.l+=Y-10,K}function me(G,Y){return G[G.l+Y-1]==0?G.read_shift(Y,"cstr"):""}function ke(G,Y){var K=G[G.l++];K>Y-1&&(K=Y-1);for(var W="";W.length<K;)W+=String.fromCharCode(G[G.l++]);return W}function Ee(G,Y,K){if(!(!K.qpro||Y<21)){var W=G.read_shift(1);G.l+=17,G.l+=1,G.l+=2;var ie=G.read_shift(Y-21,"cstr");return[W,ie]}}function ce(G,Y){for(var K={},W=G.l+Y;G.l<W;){var ie=G.read_shift(2);if(ie==14e3){for(K[ie]=[0,""],K[ie][0]=G.read_shift(2);G[G.l];)K[ie][1]+=String.fromCharCode(G[G.l]),G.l++;G.l++}}return K}function q(G,Y){var K=Xt(5+G.length);K.write_shift(2,14e3),K.write_shift(2,Y);for(var W=0;W<G.length;++W){var ie=G.charCodeAt(W);K[K.l++]=ie>127?95:ie}return K[K.l++]=0,K}var he={0:{n:"BOF",f:Kt},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:me},222:{n:"SHEETNAMELP",f:ke},65535:{n:""}},Ae={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:L},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:N},38:{n:"??"},39:{n:"NUMBER27",f:M},40:{n:"FORMULA28",f:ye},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:me},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Ee},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}}();function p$(n){var e={},t=n.match(Ln),r=0,i=!1;if(t)for(;r!=t.length;++r){var s=Me(t[r]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=n1[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+s[0])}}return e}var m$=function(){var n=Qu("t"),e=Qu("rPr");function t(s){var a=s.match(n);if(!a)return{t:"s",v:""};var o={t:"s",v:Ze(a[1])},l=s.match(e);return l&&(o.s=p$(l[1])),o}var r=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(a){return a.replace(r,"").split(i).map(t).filter(function(o){return o.v})}}(),g$=function(){var e=/(\r\n|\n)/g;function t(i,s,a){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),i.b&&(s.push("<b>"),a.push("</b>")),i.i&&(s.push("<i>"),a.push("</i>")),i.strike&&(s.push("<s>"),a.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),i}function r(i){var s=[[],i.v,[]];return i.v?(i.s&&t(i.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(r).join("")}}(),v$=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,_$=/<(?:\w+:)?r>/,x$=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function x1(n,e){var t=e?e.cellHTML:!0,r={};return n?(n.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=Ze(ut(n.slice(n.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=ut(n),t&&(r.h=c1(r.t))):n.match(_$)&&(r.r=ut(n),r.t=Ze(ut((n.replace(x$,"").match(v$)||[]).join("").replace(Ln,""))),t&&(r.h=g$(m$(r.r)))),r):{t:""}}var y$=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,E$=/<(?:\w+:)?(?:si|sstItem)>/g,T$=/<\/(?:\w+:)?(?:si|sstItem)>/;function w$(n,e){var t=[],r="";if(!n)return t;var i=n.match(y$);if(i){r=i[2].replace(E$,"").split(T$);for(var s=0;s!=r.length;++s){var a=x1(r[s].trim(),e);a!=null&&(t[t.length]=a)}i=Me(i[1]),t.Count=i.count,t.Unique=i.uniqueCount}return t}function I$(n){return[n.read_shift(4),n.read_shift(4)]}function S$(n,e){var t=[],r=!1;return ss(n,function(s,a,o){switch(o){case 159:t.Count=s[0],t.Unique=s[1];break;case 19:t.push(s);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(a.T,!r||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),t}function ZR(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function Ki(n,e){var t={};return t.Major=n.read_shift(2),t.Minor=n.read_shift(2),e>=4&&(n.l+=e-4),t}function A$(n){var e={};return e.id=n.read_shift(0,"lpp4"),e.R=Ki(n,4),e.U=Ki(n,4),e.W=Ki(n,4),e}function C$(n){for(var e=n.read_shift(4),t=n.l+e-4,r={},i=n.read_shift(4),s=[];i-- >0;)s.push({t:n.read_shift(4),v:n.read_shift(0,"lpp4")});if(r.name=n.read_shift(0,"lpp4"),r.comps=s,n.l!=t)throw new Error("Bad DataSpaceMapEntry: "+n.l+" != "+t);return r}function k$(n){var e=[];n.l+=4;for(var t=n.read_shift(4);t-- >0;)e.push(C$(n));return e}function R$(n){var e=[];n.l+=4;for(var t=n.read_shift(4);t-- >0;)e.push(n.read_shift(0,"lpp4"));return e}function P$(n){var e={};return n.read_shift(4),n.l+=4,e.id=n.read_shift(0,"lpp4"),e.name=n.read_shift(0,"lpp4"),e.R=Ki(n,4),e.U=Ki(n,4),e.W=Ki(n,4),e}function D$(n){var e=P$(n);if(e.ename=n.read_shift(0,"8lpp4"),e.blksz=n.read_shift(4),e.cmode=n.read_shift(4),n.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function eP(n,e){var t=n.l+e,r={};r.Flags=n.read_shift(4)&63,n.l+=4,r.AlgID=n.read_shift(4);var i=!1;switch(r.AlgID){case 26126:case 26127:case 26128:i=r.Flags==36;break;case 26625:i=r.Flags==4;break;case 0:i=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=n.read_shift(4),r.KeySize=n.read_shift(4),r.ProviderType=n.read_shift(4),n.l+=8,r.CSPName=n.read_shift(t-n.l>>1,"utf16le"),n.l=t,r}function tP(n,e){var t={},r=n.l+e;return n.l+=4,t.Salt=n.slice(n.l,n.l+16),n.l+=16,t.Verifier=n.slice(n.l,n.l+16),n.l+=16,n.read_shift(4),t.VerifierHash=n.slice(n.l,r),n.l=r,t}function N$(n){var e=Ki(n);switch(e.Minor){case 2:return[e.Minor,F$(n)];case 3:return[e.Minor,M$()];case 4:return[e.Minor,O$(n)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function F$(n){var e=n.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var t=n.read_shift(4),r=eP(n,t),i=tP(n,n.length-n.l);return{t:"Std",h:r,v:i}}function M$(){throw new Error("File is password-protected: ECMA-376 Extensible")}function O$(n){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];n.l+=4;var t=n.read_shift(n.length-n.l,"utf8"),r={};return t.replace(Ln,function(s){var a=Me(s);switch(Si(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){r[o]=a[o]});break;case"<dataIntegrity":r.encryptedHmacKey=a.encryptedHmacKey,r.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(a);break;default:throw a[0]}}),r}function L$(n,e){var t={},r=t.EncryptionVersionInfo=Ki(n,4);if(e-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);t.Flags=n.read_shift(4),e-=4;var i=n.read_shift(4);return e-=4,t.EncryptionHeader=eP(n,i),e-=i,t.EncryptionVerifier=tP(n,e),t}function b$(n){var e={},t=e.EncryptionVersionInfo=Ki(n,4);if(t.Major!=1||t.Minor!=1)throw"unrecognized version code "+t.Major+" : "+t.Minor;return e.Salt=n.read_shift(16),e.EncryptedVerifier=n.read_shift(16),e.EncryptedVerifierHash=n.read_shift(16),e}function V$(n){var e=0,t,r=ZR(n),i=r.length+1,s,a,o,l,c;for(t=Zs(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)a=t[s],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var nP=function(){var n=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],t=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(a){return(a/2|a*128)&255},i=function(a,o){return r(a^o)},s=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var u=a[c],h=0;h!=7;++h)u&64&&(o^=t[l]),u*=2,--l;return o};return function(a){for(var o=ZR(a),l=s(o),c=o.length,u=Zs(16),h=0;h!=16;++h)u[h]=0;var m,g,v;for((c&1)===1&&(m=l>>8,u[c]=i(n[0],m),--c,m=l&255,g=o[o.length-1],u[c]=i(g,m));c>0;)--c,m=l>>8,u[c]=i(o[c],m),--c,m=l&255,u[c]=i(o[c],m);for(c=15,v=15-o.length;v>0;)m=l>>8,u[c]=i(n[v],m),--c,--v,m=l&255,u[c]=i(o[c],m),--c,--v;return u}}(),U$=function(n,e,t,r,i){i||(i=e),r||(r=nP(n));var s,a;for(s=0;s!=e.length;++s)a=e[s],a^=r[t],a=(a>>5|a<<3)&255,i[s]=a,++t;return[i,t,r]},B$=function(n){var e=0,t=nP(n);return function(r){var i=U$("",r,e,t);return e=i[1],i[0]}};function G$(n,e,t,r){var i={key:Kt(n),verificationBytes:Kt(n)};return t.password&&(i.verifier=V$(t.password)),r.valid=i.verificationBytes===i.verifier,r.valid&&(r.insitu=B$(t.password)),i}function z$(n,e,t){var r=t||{};return r.Info=n.read_shift(2),n.l-=2,r.Info===1?r.Data=b$(n):r.Data=L$(n,e),r}function H$(n,e,t){var r={Type:t.biff>=8?n.read_shift(2):0};return r.Type?z$(n,e-2,r):G$(n,t.biff>=8?e:e-2,t,r),r}var $$=function(){function n(i,s){switch(s.type){case"base64":return e(yr(i),s);case"binary":return e(i,s);case"buffer":return e(Ke&&Buffer.isBuffer(i)?i.toString("binary"):go(i),s);case"array":return e(ao(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,h){Array.isArray(o)&&(o[h]=[]);for(var m=/\\\w+\b/g,g=0,v,_=-1;v=m.exec(u);){switch(v[0]){case"\\cell":var E=u.slice(g,m.lastIndex-v[0].length);if(E[0]==" "&&(E=E.slice(1)),++_,E.length){var w={v:E,t:"s"};Array.isArray(o)?o[h][_]=w:o[Ve({r:h,c:_})]=w}break}g=m.lastIndex}_>c.e.c&&(c.e.c=_)}),o["!ref"]=Xe(c),o}function t(i,s){return pa(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],a=Lt(i["!ref"]),o,l=Array.isArray(i),c=a.s.r;c<=a.e.r;++c){s.push("\\trowd\\trautofit1");for(var u=a.s.c;u<=a.e.c;++u)s.push("\\cellx"+(u+1));for(s.push("\\pard\\intbl"),u=a.s.c;u<=a.e.c;++u){var h=Ve({r:c,c:u});o=l?(i[c]||[])[u]:i[h],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(ts(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}}();function W$(n){var e=n.slice(n[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function ef(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}function q$(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.max(e,t,r),s=Math.min(e,t,r),a=i-s;if(a===0)return[0,0,e];var o=0,l=0,c=i+s;switch(l=a/(c>1?2-c:c),i){case e:o=((t-r)/a+6)%6;break;case t:o=(r-e)/a+2;break;case r:o=(e-t)/a+4;break}return[o/6,l,c/2]}function K$(n){var e=n[0],t=n[1],r=n[2],i=t*2*(r<.5?r:1-r),s=r-i/2,a=[s,s,s],o=6*e,l;if(t!==0)switch(o|0){case 0:case 6:l=i*o,a[0]+=i,a[1]+=l;break;case 1:l=i*(2-o),a[0]+=l,a[1]+=i;break;case 2:l=i*(o-2),a[1]+=i,a[2]+=l;break;case 3:l=i*(4-o),a[1]+=l,a[2]+=i;break;case 4:l=i*(o-4),a[2]+=i,a[0]+=l;break;case 5:l=i*(6-o),a[2]+=l,a[0]+=i;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function i0(n,e){if(e===0)return n;var t=q$(W$(n));return e<0?t[2]=t[2]*(1+e):t[2]=1-(1-t[2])*(1-e),ef(K$(t))}var rP=6,j$=15,Y$=1,Gn=rP;function s0(n){return Math.floor((n+Math.round(128/Gn)/256)*Gn)}function a0(n){return Math.floor((n-5)/Gn*100+.5)/100}function Wg(n){return Math.round((n*Gn+5)/Gn*256)/256}function tm(n){return Wg(a0(s0(n)))}function y1(n){var e=Math.abs(n-tm(n)),t=Gn;if(e>.005)for(Gn=Y$;Gn<j$;++Gn)Math.abs(n-tm(n))<=e&&(e=Math.abs(n-tm(n)),t=Gn);Gn=t}function bl(n){n.width?(n.wpx=s0(n.width),n.wch=a0(n.wpx),n.MDW=Gn):n.wpx?(n.wch=a0(n.wpx),n.width=Wg(n.wch),n.MDW=Gn):typeof n.wch=="number"&&(n.width=Wg(n.wch),n.wpx=s0(n.width),n.MDW=Gn),n.customWidth&&delete n.customWidth}var X$=96,iP=X$;function sP(n){return n*96/iP}function tf(n){return n*iP/96}var Q$={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function J$(n,e,t,r){e.Borders=[];var i={},s=!1;(n[0].match(Ln)||[]).forEach(function(a){var o=Me(a);switch(Si(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=xt(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=xt(o.diagonalDown)),e.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function Z$(n,e,t,r){e.Fills=[];var i={},s=!1;(n[0].match(Ln)||[]).forEach(function(a){var o=Me(a);switch(Si(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},e.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function eW(n,e,t,r){e.Fonts=[];var i={},s=!1;(n[0].match(Ln)||[]).forEach(function(a){var o=Me(a);switch(Si(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=ut(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?xt(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?xt(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?xt(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?xt(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?xt(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?xt(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?xt(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=n1[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=xt(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=Ha[i.color.index];i.color.index==81&&(l=Ha[1]),l||(l=Ha[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&t.themeElements&&t.themeElements.clrScheme&&(i.color.rgb=i0(t.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function tW(n,e,t){e.NumberFmt=[];for(var r=wi(Ue),i=0;i<r.length;++i)e.NumberFmt[r[i]]=Ue[r[i]];var s=n[0].match(Ln);if(s)for(i=0;i<s.length;++i){var a=Me(s[i]);switch(Si(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Ze(ut(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}za(o,l)}}break;case"</numFmt>":break;default:if(t.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var Ih=["numFmtId","fillId","fontId","borderId","xfId"],Sh=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function nW(n,e,t){e.CellXf=[];var r,i=!1;(n[0].match(Ln)||[]).forEach(function(s){var a=Me(s),o=0;switch(Si(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=a,delete r[0],o=0;o<Ih.length;++o)r[Ih[o]]&&(r[Ih[o]]=parseInt(r[Ih[o]],10));for(o=0;o<Sh.length;++o)r[Sh[o]]&&(r[Sh[o]]=xt(r[Sh[o]]));if(e.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[r.numFmtId]==e.NumberFmt[o]){r.numFmtId=o;break}}e.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=xt(a.wrapText)),r.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(t&&t.WTF&&!i)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var rW=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&tW(h,u,c),(h=o.match(i))&&eW(h,u,l,c),(h=o.match(r))&&Z$(h,u,l,c),(h=o.match(s))&&J$(h,u,l,c),(h=o.match(t))&&nW(h,u,c),u}}();function iW(n,e){var t=n.read_shift(2),r=Fn(n);return[t,r]}function sW(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=mz(n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var o=n.read_shift(1);o>0&&(r.family=o);var l=n.read_shift(1);switch(l>0&&(r.charset=l),n.l++,r.color=pz(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Fn(n),r}var aW=On;function oW(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}var lW=On;function cW(n,e,t){var r={};r.NumberFmt=[];for(var i in Ue)r.NumberFmt[i]=Ue[i];r.CellXf=[],r.Fonts=[];var s=[],a=!1;return ss(n,function(l,c,u){switch(u){case 44:r.NumberFmt[l[0]]=l[1],za(l[1],l[0]);break;case 43:r.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=i0(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&r.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:s.push(u),a=!0;break;case 38:s.pop(),a=!1;break;default:if(c.T>0)s.push(u);else if(c.T<0)s.pop();else if(!a||t.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),r}var uW=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function fW(n,e,t){e.themeElements.clrScheme=[];var r={};(n[0].match(Ln)||[]).forEach(function(i){var s=Me(i);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=s.val;break;case"<a:sysClr":r.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[uW.indexOf(s[0])]=r,r={}):r.name=s[0].slice(3,s[0].length-1);break;default:if(t&&t.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function hW(){}function dW(){}var pW=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,mW=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,gW=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function vW(n,e,t){e.themeElements={};var r;[["clrScheme",pW,fW],["fontScheme",mW,hW],["fmtScheme",gW,dW]].forEach(function(i){if(!(r=n.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](r,e,t)})}var _W=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function aP(n,e){(!n||n.length===0)&&(n=xW());var t,r={};if(!(t=n.match(_W)))throw new Error("themeElements not found in theme");return vW(t[0],r,e),r.raw=n,r}function xW(n,e){var t=[vR];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function yW(n,e,t){var r=n.l+e,i=n.read_shift(4);if(i!==124226){if(!t.cellStyles){n.l=r;return}var s=n.slice(n.l);n.l=r;var a;try{a=gR(s,{type:"array"})}catch{return}var o=fr(a,"theme/theme/theme1.xml",!0);if(o)return aP(o,t)}}function EW(n){return n.read_shift(4)}function TW(n){var e={};switch(e.xclrType=n.read_shift(2),e.nTintShade=n.read_shift(2),e.xclrType){case 0:n.l+=4;break;case 1:e.xclrValue=wW(n,4);break;case 2:e.xclrValue=qR(n);break;case 3:e.xclrValue=EW(n);break;case 4:n.l+=4;break}return n.l+=8,e}function wW(n,e){return On(n,e)}function IW(n,e){return On(n,e)}function SW(n){var e=n.read_shift(2),t=n.read_shift(2)-4,r=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=TW(n);break;case 6:r[1]=IW(n,t);break;case 14:case 15:r[1]=n.read_shift(t===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+t)}return r}function AW(n,e){var t=n.l+e;n.l+=2;var r=n.read_shift(2);n.l+=2;for(var i=n.read_shift(2),s=[];i-- >0;)s.push(SW(n,t-n.l));return{ixfe:r,ext:s}}function CW(n,e){e.forEach(function(t){switch(t[0]){}})}function kW(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:Fn(n)}}function RW(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function PW(n){return n.l+=4,n.read_shift(4)!=0}function DW(n,e,t){var r={Types:[],Cell:[],Value:[]},i=t||{},s=[],a=!1,o=2;return ss(n,function(l,c,u){switch(u){case 335:r.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?r.Cell.push({type:r.Types[h[0]-1].name,index:h[1]}):o==0&&r.Value.push({type:r.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(u),a=!0;break;case 36:s.pop(),a=!1;break;default:if(!c.T){if(!a||i.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function NW(n,e,t){var r={Types:[],Cell:[],Value:[]};if(!n)return r;var i=!1,s=2,a;return n.replace(Ln,function(o){var l=Me(o);switch(Si(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<r.Types.length;++c)r.Types[c].name==l.name&&(a=r.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?r.Cell.push({type:r.Types[l.t-1].name,index:+l.v}):s==0&&r.Value.push({type:r.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!i&&t.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),r}function FW(n){var e=[];if(!n)return e;var t=1;return(n.match(Ln)||[]).forEach(function(r){var i=Me(r);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?t=i.i:i.i=t,e.push(i);break}}),e}function MW(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=Ve(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}function OW(n,e,t){var r=[];return ss(n,function(s,a,o){switch(o){case 63:r.push(s);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function LW(n,e,t,r){if(!n)return n;var i=r||{},s=!1;ss(n,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||i.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},i)}function bW(n,e){if(!n)return"??";var t=(n.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][t].Target}function Yw(n,e,t,r){var i=Array.isArray(n),s;e.forEach(function(a){var o=zn(a.ref);if(i?(n[o.r]||(n[o.r]=[]),s=n[o.r][o.c]):s=n[a.ref],!s){s={t:"z"},i?n[o.r][o.c]=s:n[a.ref]=s;var l=Lt(n["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=Xe(l);c!==n["!ref"]&&(n["!ref"]=c)}s.c||(s.c=[]);var u={a:a.author,t:a.t,r:a.r,T:t};a.h&&(u.h=a.h);for(var h=s.c.length-1;h>=0;--h){if(!t&&s.c[h].T)return;t&&!s.c[h].T&&s.c.splice(h,1)}if(t&&r){for(h=0;h<r.length;++h)if(u.a==r[h].id){u.a=r[h].name||u.a;break}}s.c.push(u)})}function VW(n,e){if(n.match(/<(?:\w+:)?comments *\/>/))return[];var t=[],r=[],i=n.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&t.push(o[1])}});var s=n.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Me(o[0]),c={author:l.authorId&&t[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=zn(l.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var h=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&x1(h[1])||{r:"",t:"",h:""};c.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),c.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=m.h),r.push(c)}}}}),r}function UW(n,e){var t=[],r=!1,i={},s=0;return n.replace(Ln,function(o,l){var c=Me(o);switch(Si(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":i.t!=null&&t.push(i);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":i.t=n.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),t}function BW(n,e){var t=[],r=!1;return n.replace(Ln,function(s){var a=Me(s);switch(Si(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":t.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return s}),t}function GW(n){var e={};e.iauthor=n.read_shift(4);var t=_o(n);return e.rfx=t.s,e.ref=Ve(t.s),n.l+=16,e}var zW=Fn;function HW(n,e){var t=[],r=[],i={},s=!1;return ss(n,function(o,l,c){switch(c){case 632:r.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=r[i.iauthor],delete i.iauthor,e.sheetRows&&i.rfx&&e.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,t.push(i);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),t}var $W="application/vnd.ms-office.vbaProject";function WW(n){var e=Ye.utils.cfb_new({root:"R"});return n.FullPaths.forEach(function(t,r){if(!(t.slice(-1)==="/"||!t.match(/_VBA_PROJECT_CUR/))){var i=t.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Ye.utils.cfb_add(e,i,n.FileIndex[r].content)}}),Ye.write(e)}function qW(){return{"!type":"dialog"}}function KW(){return{"!type":"dialog"}}function jW(){return{"!type":"macro"}}function YW(){return{"!type":"macro"}}var hl=function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=e.c:--u,l?c+=e.r:--c,i+(o?"":"$")+Zt(u)+(l?"":"$")+xn(c)}return function(i,s){return e=s,i.replace(n,t)}}(),oP=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,XW=function(){return function(e,t){return e.replace(oP,function(r,i,s,a,o,l){var c=d1(a)-(s?0:t.c),u=h1(l)-(o?0:t.r),h=u==0?"":o?u+1:"["+u+"]",m=c==0?"":s?c+1:"["+c+"]";return i+"R"+h+"C"+m})}}();function lP(n,e){return n.replace(oP,function(t,r,i,s,a,o){return r+(i=="$"?i+s:Zt(d1(s)+e.c))+(a=="$"?a+o:xn(h1(o)+e.r))})}function QW(n,e,t){var r=nc(e),i=r.s,s=zn(t),a={r:s.r-i.r,c:s.c-i.c};return lP(n,a)}function JW(n){return n.length!=1}function Xw(n){return n.replace(/_xlfn\./g,"")}function $t(n){n.l+=1}function ea(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function cP(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return uP(n);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),a=ea(n),o=ea(n);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function uP(n){var e=ea(n),t=ea(n),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function ZW(n,e,t){if(t.biff<8)return uP(n);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=ea(n),a=ea(n);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function fP(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return eq(n);var r=n.read_shift(t&&t.biff==12?4:2),i=ea(n);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function eq(n){var e=ea(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function tq(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function nq(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return rq(n);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function rq(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function iq(n,e,t){var r=(n[n.l++]&96)>>5,i=cP(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function sq(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var a=cP(n,s,t);return[r,i,a]}function aq(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function oq(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function lq(n,e,t){var r=(n[n.l++]&96)>>5,i=ZW(n,e-1,t);return[r,i]}function cq(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function Qw(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function uq(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function fq(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function hq(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function dq(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function pq(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function hP(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function mq(n){return n.read_shift(2),hP(n)}function gq(n){return n.read_shift(2),hP(n)}function vq(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=fP(n,0,t);return[r,i]}function _q(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=nq(n,0,t);return[r,i]}function xq(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=fP(n,0,t);return[r,i,s]}function yq(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[EK[i],mP[i],r]}function Eq(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:Tq(n);return[i,(s[0]===0?mP:yK)[s[1]]]}function Tq(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function wq(n,e,t){n.l+=t&&t.biff==2?3:4}function Iq(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function Sq(n){return n.l++,xo[n.read_shift(1)]}function Aq(n){return n.l++,n.read_shift(2)}function Cq(n){return n.l++,n.read_shift(1)!==0}function kq(n){return n.l++,Dn(n)}function Rq(n,e,t){return n.l++,wf(n,e-1,t)}function Pq(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=Ut(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=xo[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=Dn(n);break;case 2:t[1]=yo(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function Dq(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?_o:Q0)(n));return i}function Nq(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=Pq(n,t.biff);return a}function Fq(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function Mq(n,e,t){if(t.biff==5)return Oq(n);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function Oq(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function Lq(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function bq(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function Vq(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function Uq(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var Bq=On,Gq=On,zq=On;function Sf(n,e,t){return n.l+=2,[tq(n)]}function E1(n){return n.l+=6,[]}var Hq=Sf,$q=E1,Wq=E1,qq=Sf;function dP(n){return n.l+=2,[Kt(n),n.read_shift(2)&1]}var Kq=Sf,jq=dP,Yq=E1,Xq=Sf,Qq=Sf,Jq=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Zq(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),a=Jq[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:r,c:i,C:s}}function eK(n){return n.l+=2,[n.read_shift(4)]}function tK(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function nK(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function rK(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function iK(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function sK(n){return n.l+=4,[0,0]}var Jw={1:{n:"PtgExp",f:Iq},2:{n:"PtgTbl",f:zq},3:{n:"PtgAdd",f:$t},4:{n:"PtgSub",f:$t},5:{n:"PtgMul",f:$t},6:{n:"PtgDiv",f:$t},7:{n:"PtgPower",f:$t},8:{n:"PtgConcat",f:$t},9:{n:"PtgLt",f:$t},10:{n:"PtgLe",f:$t},11:{n:"PtgEq",f:$t},12:{n:"PtgGe",f:$t},13:{n:"PtgGt",f:$t},14:{n:"PtgNe",f:$t},15:{n:"PtgIsect",f:$t},16:{n:"PtgUnion",f:$t},17:{n:"PtgRange",f:$t},18:{n:"PtgUplus",f:$t},19:{n:"PtgUminus",f:$t},20:{n:"PtgPercent",f:$t},21:{n:"PtgParen",f:$t},22:{n:"PtgMissArg",f:$t},23:{n:"PtgStr",f:Rq},26:{n:"PtgSheet",f:tK},27:{n:"PtgEndSheet",f:nK},28:{n:"PtgErr",f:Sq},29:{n:"PtgBool",f:Cq},30:{n:"PtgInt",f:Aq},31:{n:"PtgNum",f:kq},32:{n:"PtgArray",f:cq},33:{n:"PtgFunc",f:yq},34:{n:"PtgFuncVar",f:Eq},35:{n:"PtgName",f:Fq},36:{n:"PtgRef",f:vq},37:{n:"PtgArea",f:iq},38:{n:"PtgMemArea",f:Lq},39:{n:"PtgMemErr",f:Bq},40:{n:"PtgMemNoMem",f:Gq},41:{n:"PtgMemFunc",f:bq},42:{n:"PtgRefErr",f:Vq},43:{n:"PtgAreaErr",f:aq},44:{n:"PtgRefN",f:_q},45:{n:"PtgAreaN",f:lq},46:{n:"PtgMemAreaN",f:rK},47:{n:"PtgMemNoMemN",f:iK},57:{n:"PtgNameX",f:Mq},58:{n:"PtgRef3d",f:xq},59:{n:"PtgArea3d",f:sq},60:{n:"PtgRefErr3d",f:Uq},61:{n:"PtgAreaErr3d",f:oq},255:{}},aK={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},oK={1:{n:"PtgElfLel",f:dP},2:{n:"PtgElfRw",f:Xq},3:{n:"PtgElfCol",f:Hq},6:{n:"PtgElfRwV",f:Qq},7:{n:"PtgElfColV",f:qq},10:{n:"PtgElfRadical",f:Kq},11:{n:"PtgElfRadicalS",f:Yq},13:{n:"PtgElfColS",f:$q},15:{n:"PtgElfColSV",f:Wq},16:{n:"PtgElfRadicalLel",f:jq},25:{n:"PtgList",f:Zq},29:{n:"PtgSxName",f:eK},255:{}},lK={0:{n:"PtgAttrNoop",f:sK},1:{n:"PtgAttrSemi",f:pq},2:{n:"PtgAttrIf",f:hq},4:{n:"PtgAttrChoose",f:uq},8:{n:"PtgAttrGoto",f:fq},16:{n:"PtgAttrSum",f:wq},32:{n:"PtgAttrBaxcel",f:Qw},33:{n:"PtgAttrBaxcel",f:Qw},64:{n:"PtgAttrSpace",f:mq},65:{n:"PtgAttrSpaceSemi",f:gq},128:{n:"PtgAttrIfError",f:dq},255:{}};function Af(n,e,t,r){if(r.biff<8)return On(n,e);for(var i=n.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=Nq(n,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=Dq(n,t[a][1],r),s.push(t[a][2]);break;case"PtgExp":r&&r.biff==12&&(t[a][1][1]=n.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-n.l,e!==0&&s.push(On(n,e)),s}function Cf(n,e,t){for(var r=n.l+e,i,s,a=[];r!=n.l;)e=r-n.l,s=n[n.l],i=Jw[s]||Jw[aK[s]],(s===24||s===25)&&(i=(s===24?oK:lK)[n[n.l+1]]),!i||!i.f?On(n,e):a.push([i.n,i.f(n,e,t)]);return a}function cK(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var uK={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function fK(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function pP(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function Zw(n,e,t){var r=pP(n,e,t);return r=="#REF"?r:fK(r,t)}function Rn(n,e,t,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,c,u,h=0,m=0,g,v="";if(!n[0]||!n[0][0])return"";for(var _=-1,E="",w=0,T=n[0].length;w<T;++w){var y=n[0][w];switch(y[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),_>=0){switch(n[0][_][1][0]){case 0:E=Nt(" ",n[0][_][1][1]);break;case 1:E=Nt("\r",n[0][_][1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][_][1][0])}c=c+E,_=-1}o.push(c+uK[y[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=lu(y[1][1],a,i),o.push(cu(u,s));break;case"PtgRefN":u=t?lu(y[1][1],t,i):y[1][1],o.push(cu(u,s));break;case"PtgRef3d":h=y[1][1],u=lu(y[1][2],a,i),v=Zw(r,h,i),o.push(v+"!"+cu(u,s));break;case"PtgFunc":case"PtgFuncVar":var k=y[1][0],V=y[1][1];k||(k=0),k&=127;var L=k==0?[]:o.slice(-k);o.length-=k,V==="User"&&(V=L.shift()),o.push(V+"("+L.join(",")+")");break;case"PtgBool":o.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(y[1]);break;case"PtgNum":o.push(String(y[1]));break;case"PtgStr":o.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(y[1]);break;case"PtgAreaN":g=Fw(y[1][1],t?{s:t}:a,i),o.push(Zp(g,i));break;case"PtgArea":g=Fw(y[1][1],a,i),o.push(Zp(g,i));break;case"PtgArea3d":h=y[1][1],g=y[1][2],v=Zw(r,h,i),o.push(v+"!"+Zp(g,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=y[1][2];var I=(r.names||[])[m-1]||(r[0]||[])[m],A=I?I.Name:"SH33TJSNAME"+String(m);A&&A.slice(0,6)=="_xlfn."&&!i.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var C=y[1][1];m=y[1][2];var P;if(i.biff<=5)C<0&&(C=-C),r[C]&&(P=r[C][m]);else{var D="";if(((r[C]||[])[0]||[])[0]==14849||(((r[C]||[])[0]||[])[0]==1025?r[C][m]&&r[C][m].itab>0&&(D=r.SheetNames[r[C][m].itab-1]+"!"):D=r.SheetNames[m-1]+"!"),r[C]&&r[C][m])D+=r[C][m].Name;else if(r[0]&&r[0][m])D+=r[0][m].Name;else{var N=(pP(r,C,i)||"").split(";;");N[m-1]?D=N[m-1]:D+="SH33TJSERRX"}o.push(D);break}P||(P={Name:"SH33TJSERRY"}),o.push(P.Name);break;case"PtgParen":var M="(",ye=")";if(_>=0){switch(E="",n[0][_][1][0]){case 2:M=Nt(" ",n[0][_][1][1])+M;break;case 3:M=Nt("\r",n[0][_][1][1])+M;break;case 4:ye=Nt(" ",n[0][_][1][1])+ye;break;case 5:ye=Nt("\r",n[0][_][1][1])+ye;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][_][1][0])}_=-1}o.push(M+o.pop()+ye);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:y[1][1],r:y[1][0]};var me={c:t.c,r:t.r};if(r.sharedf[Ve(u)]){var ke=r.sharedf[Ve(u)];o.push(Rn(ke,a,me,r,i))}else{var Ee=!1;for(l=0;l!=r.arrayf.length;++l)if(c=r.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(Rn(c[1],a,me,r,i)),Ee=!0;break}Ee||o.push(y[1])}break;case"PtgArray":o.push("{"+cK(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&_>=0&&ce.indexOf(n[0][w][0])==-1){y=n[0][_];var q=!0;switch(y[1][0]){case 4:q=!1;case 0:E=Nt(" ",y[1][1]);break;case 5:q=!1;case 1:E=Nt("\r",y[1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}o.push((q?E:"")+o.pop()+(q?"":E)),_=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function hK(n,e,t){var r=n.l+e,i=t.biff==2?1:2,s,a=n.read_shift(i);if(a==65535)return[[],On(n,e-2)];var o=Cf(n,a,t);return e!==a+i&&(s=Af(n,e-a-i,o,t)),n.l=r,[o,s]}function dK(n,e,t){var r=n.l+e,i=t.biff==2?1:2,s,a=n.read_shift(i);if(a==65535)return[[],On(n,e-2)];var o=Cf(n,a,t);return e!==a+i&&(s=Af(n,e-a-i,o,t)),n.l=r,[o,s]}function pK(n,e,t,r){var i=n.l+e,s=Cf(n,r,t),a;return i!==n.l&&(a=Af(n,i-n.l,s,t)),[s,a]}function mK(n,e,t){var r=n.l+e,i,s=n.read_shift(2),a=Cf(n,s,t);return s==65535?[[],On(n,e-2)]:(e!==s+2&&(i=Af(n,r-s-2,a,t)),[a,i])}function gK(n){var e;if(Gi(n,n.l+6)!==65535)return[Dn(n),"n"];switch(n[n.l]){case 0:return n.l+=8,["String","s"];case 1:return e=n[n.l+2]===1,n.l+=8,[e,"b"];case 2:return e=n[n.l+2],n.l+=8,[e,"e"];case 3:return n.l+=8,["","s"]}return[]}function nm(n,e,t){var r=n.l+e,i=Ai(n);t.biff==2&&++n.l;var s=gK(n),a=n.read_shift(1);t.biff!=2&&(n.read_shift(1),t.biff>=5&&n.read_shift(4));var o=dK(n,r-n.l,t);return{cell:i,val:s[0],formula:o,shared:a>>3&1,tt:s[1]}}function J0(n,e,t){var r=n.read_shift(4),i=Cf(n,r,t),s=n.read_shift(4),a=s>0?Af(n,s,i,t):null;return[i,a]}var vK=J0,Z0=J0,_K=J0,xK=J0,yK={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},mP={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},EK={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function eI(n){return n.slice(0,3)=="of:"&&(n=n.slice(3)),n.charCodeAt(0)==61&&(n=n.slice(1),n.charCodeAt(0)==61&&(n=n.slice(1))),n=n.replace(/COM\.MICROSOFT\./g,""),n=n.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,t){return t.replace(/\./g,"")}),n=n.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),n.replace(/[;~]/g,",").replace(/\|/g,";")}function rm(n){var e=n.split(":"),t=e[0].split(".")[0];return[t,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var du={},dl={};function pu(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(t=[1,1,1,1,.5,.5]),n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function gP(n,e,t,r,i,s){try{r.cellNF&&(n.z=Ue[e])}catch(o){if(r.WTF)throw o}if(!(n.t==="z"&&!r.cellStyles)){if(n.t==="d"&&typeof n.v=="string"&&(n.v=cn(n.v)),(!r||r.cellText!==!1)&&n.t!=="z")try{if(Ue[e]==null&&za(TG[e]||"General",e),n.t==="e")n.w=n.w||xo[n.v];else if(e===0)if(n.t==="n")(n.v|0)===n.v?n.w=n.v.toString(10):n.w=Xu(n.v);else if(n.t==="d"){var a=Kn(n.v);(a|0)===a?n.w=a.toString(10):n.w=Xu(a)}else{if(n.v===void 0)return"";n.w=so(n.v,dl)}else n.t==="d"?n.w=Ur(e,Kn(n.v),dl):n.w=Ur(e,n.v,dl)}catch(o){if(r.WTF)throw o}if(r.cellStyles&&t!=null)try{n.s=s.Fills[t],n.s.fgColor&&n.s.fgColor.theme&&!n.s.fgColor.rgb&&(n.s.fgColor.rgb=i0(i.themeElements.clrScheme[n.s.fgColor.theme].rgb,n.s.fgColor.tint||0),r.WTF&&(n.s.fgColor.raw_rgb=i.themeElements.clrScheme[n.s.fgColor.theme].rgb)),n.s.bgColor&&n.s.bgColor.theme&&(n.s.bgColor.rgb=i0(i.themeElements.clrScheme[n.s.bgColor.theme].rgb,n.s.bgColor.tint||0),r.WTF&&(n.s.bgColor.raw_rgb=i.themeElements.clrScheme[n.s.bgColor.theme].rgb))}catch(o){if(r.WTF&&s.Fills)throw o}}}function TK(n,e){var t=Lt(e);t.s.r<=t.e.r&&t.s.c<=t.e.c&&t.s.r>=0&&t.s.c>=0&&(n["!ref"]=Xe(t))}var wK=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,IK=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,SK=/<(?:\w:)?hyperlink [^>]*>/mg,AK=/"(\w*:\w*)"/,CK=/<(?:\w:)?col\b[^>]*[\/]?>/g,kK=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,RK=/<(?:\w:)?pageMargins[^>]*\/>/g,vP=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,PK=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,DK=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function NK(n,e,t,r,i,s,a){if(!n)return n;r||(r={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",h=n.match(IK);h?(c=n.slice(0,h.index),u=n.slice(h.index+h[0].length)):c=u=n;var m=c.match(vP);m?T1(m[0],o,i,t):(m=c.match(PK))&&FK(m[0],m[1]||"",o,i,t);var g=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var v=c.slice(g,g+50).match(AK);v&&TK(o,v[1])}var _=c.match(DK);_&&_[1]&&UK(_[1],i);var E=[];if(e.cellStyles){var w=c.match(CK);w&&LK(E,w)}h&&BK(h[1],o,e,l,s,a);var T=u.match(kK);T&&(o["!autofilter"]=bK(T[0]));var y=[],k=u.match(wK);if(k)for(g=0;g!=k.length;++g)y[g]=Lt(k[g].slice(k[g].indexOf('"')+1));var V=u.match(SK);V&&MK(o,V,r);var L=u.match(RK);if(L&&(o["!margins"]=OK(Me(L[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Xe(l)),e.sheetRows>0&&o["!ref"]){var I=Lt(o["!ref"]);e.sheetRows<=+I.e.r&&(I.e.r=e.sheetRows-1,I.e.r>l.e.r&&(I.e.r=l.e.r),I.e.r<I.s.r&&(I.s.r=I.e.r),I.e.c>l.e.c&&(I.e.c=l.e.c),I.e.c<I.s.c&&(I.s.c=I.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Xe(I))}return E.length>0&&(o["!cols"]=E),y.length>0&&(o["!merges"]=y),o}function T1(n,e,t,r){var i=Me(n);t.Sheets[r]||(t.Sheets[r]={}),i.codeName&&(t.Sheets[r].CodeName=Ze(ut(i.codeName)))}function FK(n,e,t,r,i){T1(n.slice(0,n.indexOf(">")),t,r,i)}function MK(n,e,t){for(var r=Array.isArray(n),i=0;i!=e.length;++i){var s=Me(ut(e[i]),!0);if(!s.ref)return;var a=((t||{})["!id"]||[])[s.id];a?(s.Target=a.Target,s.location&&(s.Target+="#"+Ze(s.location))):(s.Target="#"+Ze(s.location),a={Target:s.Target,TargetMode:"Internal"}),s.Rel=a,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Lt(s.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Ve({c,r:l});r?(n[l]||(n[l]=[]),n[l][c]||(n[l][c]={t:"z",v:void 0}),n[l][c].l=s):(n[u]||(n[u]={t:"z",v:void 0}),n[u].l=s)}}}function OK(n){var e={};return["left","right","top","bottom","header","footer"].forEach(function(t){n[t]&&(e[t]=parseFloat(n[t]))}),e}function LK(n,e){for(var t=!1,r=0;r!=e.length;++r){var i=Me(e[r],!0);i.hidden&&(i.hidden=xt(i.hidden));var s=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!t&&i.width&&(t=!0,y1(i.width)),bl(i);s<=a;)n[s++]=_n(i)}}function bK(n){var e={ref:(n.match(/ref="([^"]*)"/)||[])[1]};return e}var VK=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function UK(n,e){e.Views||(e.Views=[{}]),(n.match(VK)||[]).forEach(function(t,r){var i=Me(t);e.Views[r]||(e.Views[r]={}),+i.zoomScale&&(e.Views[r].zoom=+i.zoomScale),xt(i.rightToLeft)&&(e.Views[r].RTL=!0)})}var BK=function(){var n=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,t=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,s=Qu("v"),a=Qu("f");return function(l,c,u,h,m,g){for(var v=0,_="",E=[],w=[],T=0,y=0,k=0,V="",L,I,A=0,C=0,P,D,N=0,M=0,ye=Array.isArray(g.CellXf),me,ke=[],Ee=[],ce=Array.isArray(c),q=[],he={},Ae=!1,G=!!u.sheetStubs,Y=l.split(e),K=0,W=Y.length;K!=W;++K){_=Y[K].trim();var ie=_.length;if(ie!==0){var pe=0;e:for(v=0;v<ie;++v)switch(_[v]){case">":if(_[v-1]!="/"){++v;break e}if(u&&u.cellStyles){if(I=Me(_.slice(pe,v),!0),A=I.r!=null?parseInt(I.r,10):A+1,C=-1,u.sheetRows&&u.sheetRows<A)continue;he={},Ae=!1,I.ht&&(Ae=!0,he.hpt=parseFloat(I.ht),he.hpx=tf(he.hpt)),I.hidden=="1"&&(Ae=!0,he.hidden=!0),I.outlineLevel!=null&&(Ae=!0,he.level=+I.outlineLevel),Ae&&(q[A-1]=he)}break;case"<":pe=v;break}if(pe>=v)break;if(I=Me(_.slice(pe,v),!0),A=I.r!=null?parseInt(I.r,10):A+1,C=-1,!(u.sheetRows&&u.sheetRows<A)){h.s.r>A-1&&(h.s.r=A-1),h.e.r<A-1&&(h.e.r=A-1),u&&u.cellStyles&&(he={},Ae=!1,I.ht&&(Ae=!0,he.hpt=parseFloat(I.ht),he.hpx=tf(he.hpt)),I.hidden=="1"&&(Ae=!0,he.hidden=!0),I.outlineLevel!=null&&(Ae=!0,he.level=+I.outlineLevel),Ae&&(q[A-1]=he)),E=_.slice(v).split(n);for(var Ce=0;Ce!=E.length&&E[Ce].trim().charAt(0)=="<";++Ce);for(E=E.slice(Ce),v=0;v!=E.length;++v)if(_=E[v].trim(),_.length!==0){if(w=_.match(t),T=v,y=0,k=0,_="<c "+(_.slice(0,1)=="<"?">":"")+_,w!=null&&w.length===2){for(T=0,V=w[1],y=0;y!=V.length&&!((k=V.charCodeAt(y)-64)<1||k>26);++y)T=26*T+k;--T,C=T}else++C;for(y=0;y!=_.length&&_.charCodeAt(y)!==62;++y);if(++y,I=Me(_.slice(0,y),!0),I.r||(I.r=Ve({r:A-1,c:C})),V=_.slice(y),L={t:""},(w=V.match(s))!=null&&w[1]!==""&&(L.v=Ze(w[1])),u.cellFormula){if((w=V.match(a))!=null&&w[1]!==""){if(L.f=Ze(ut(w[1])).replace(/\r\n/g,`
`),u.xlfn||(L.f=Xw(L.f)),w[0].indexOf('t="array"')>-1)L.F=(V.match(i)||[])[1],L.F.indexOf(":")>-1&&ke.push([Lt(L.F),L.F]);else if(w[0].indexOf('t="shared"')>-1){D=Me(w[0]);var _e=Ze(ut(w[1]));u.xlfn||(_e=Xw(_e)),Ee[parseInt(D.si,10)]=[D,_e,I.r]}}else(w=V.match(/<f[^>]*\/>/))&&(D=Me(w[0]),Ee[D.si]&&(L.f=QW(Ee[D.si][1],Ee[D.si][2],I.r)));var ue=zn(I.r);for(y=0;y<ke.length;++y)ue.r>=ke[y][0].s.r&&ue.r<=ke[y][0].e.r&&ue.c>=ke[y][0].s.c&&ue.c<=ke[y][0].e.c&&(L.F=ke[y][1])}if(I.t==null&&L.v===void 0)if(L.f||L.F)L.v=0,L.t="n";else if(G)L.t="z";else continue;else L.t=I.t||"n";switch(h.s.c>C&&(h.s.c=C),h.e.c<C&&(h.e.c=C),L.t){case"n":if(L.v==""||L.v==null){if(!G)continue;L.t="z"}else L.v=parseFloat(L.v);break;case"s":if(typeof L.v>"u"){if(!G)continue;L.t="z"}else P=du[parseInt(L.v,10)],L.v=P.t,L.r=P.r,u.cellHTML&&(L.h=P.h);break;case"str":L.t="s",L.v=L.v!=null?ut(L.v):"",u.cellHTML&&(L.h=c1(L.v));break;case"inlineStr":w=V.match(r),L.t="s",w!=null&&(P=x1(w[1]))?(L.v=P.t,u.cellHTML&&(L.h=P.h)):L.v="";break;case"b":L.v=xt(L.v);break;case"d":u.cellDates?L.v=cn(L.v,1):(L.v=Kn(cn(L.v,1)),L.t="n");break;case"e":(!u||u.cellText!==!1)&&(L.w=L.v),L.v=VR[L.v];break}if(N=M=0,me=null,ye&&I.s!==void 0&&(me=g.CellXf[I.s],me!=null&&(me.numFmtId!=null&&(N=me.numFmtId),u.cellStyles&&me.fillId!=null&&(M=me.fillId))),gP(L,N,M,u,m,g),u.cellDates&&ye&&L.t=="n"&&tc(Ue[N])&&(L.t="d",L.v=X0(L.v)),I.cm&&u.xlmeta){var He=(u.xlmeta.Cell||[])[+I.cm-1];He&&He.type=="XLDAPR"&&(L.D=!0)}if(ce){var H=zn(I.r);c[H.r]||(c[H.r]=[]),c[H.r][H.c]=L}else c[I.r]=L}}}}q.length>0&&(c["!rows"]=q)}}();function GK(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}var zK=_o;function HK(){}function $K(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=hz(n),t}function WK(n){var e=Gr(n);return[e]}function qK(n){var e=vo(n);return[e]}function KK(n){var e=Gr(n),t=n.read_shift(1);return[e,t,"b"]}function jK(n){var e=vo(n),t=n.read_shift(1);return[e,t,"b"]}function YK(n){var e=Gr(n),t=n.read_shift(1);return[e,t,"e"]}function XK(n){var e=vo(n),t=n.read_shift(1);return[e,t,"e"]}function QK(n){var e=Gr(n),t=n.read_shift(4);return[e,t,"s"]}function JK(n){var e=vo(n),t=n.read_shift(4);return[e,t,"s"]}function ZK(n){var e=Gr(n),t=Dn(n);return[e,t,"n"]}function _P(n){var e=vo(n),t=Dn(n);return[e,t,"n"]}function ej(n){var e=Gr(n),t=g1(n);return[e,t,"n"]}function tj(n){var e=vo(n),t=g1(n);return[e,t,"n"]}function nj(n){var e=Gr(n),t=p1(n);return[e,t,"is"]}function rj(n){var e=Gr(n),t=Fn(n);return[e,t,"str"]}function ij(n){var e=vo(n),t=Fn(n);return[e,t,"str"]}function sj(n,e,t){var r=n.l+e,i=Gr(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"b"];if(t.cellFormula){n.l+=2;var o=Z0(n,r-n.l,t);a[3]=Rn(o,null,i,t.supbooks,t)}else n.l=r;return a}function aj(n,e,t){var r=n.l+e,i=Gr(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"e"];if(t.cellFormula){n.l+=2;var o=Z0(n,r-n.l,t);a[3]=Rn(o,null,i,t.supbooks,t)}else n.l=r;return a}function oj(n,e,t){var r=n.l+e,i=Gr(n);i.r=t["!row"];var s=Dn(n),a=[i,s,"n"];if(t.cellFormula){n.l+=2;var o=Z0(n,r-n.l,t);a[3]=Rn(o,null,i,t.supbooks,t)}else n.l=r;return a}function lj(n,e,t){var r=n.l+e,i=Gr(n);i.r=t["!row"];var s=Fn(n),a=[i,s,"str"];if(t.cellFormula){n.l+=2;var o=Z0(n,r-n.l,t);a[3]=Rn(o,null,i,t.supbooks,t)}else n.l=r;return a}var cj=_o;function uj(n,e){var t=n.l+e,r=_o(n),i=m1(n),s=Fn(n),a=Fn(n),o=Fn(n);n.l=t;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function fj(){}function hj(n,e,t){var r=n.l+e,i=OR(n),s=n.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=vK(n,r-n.l,t);a[1]=o}else n.l=r;return a}function dj(n,e,t){var r=n.l+e,i=_o(n),s=[i];if(t.cellFormula){var a=xK(n,r-n.l,t);s[1]=a,n.l=r}else n.l=r;return s}var pj=["left","right","top","bottom","header","footer"];function mj(n){var e={};return pj.forEach(function(t){e[t]=Dn(n)}),e}function gj(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function vj(){}function _j(){}function xj(n,e,t,r,i,s,a){if(!n)return n;var o=e||{};r||(r={"!id":{}});var l=o.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,g,v,_,E,w,T,y,k,V,L=[];o.biff=12,o["!row"]=0;var I=0,A=!1,C=[],P={},D=o.supbooks||i.supbooks||[[]];if(D.sharedf=P,D.arrayf=C,D.SheetNames=i.SheetNames||i.Sheets.map(function(ce){return ce.name}),!o.supbooks&&(o.supbooks=D,i.Names))for(var N=0;N<i.Names.length;++N)D[0][N+1]=i.Names[N];var M=[],ye=[],me=!1;o0[16]={n:"BrtShortReal",f:_P};var ke;if(ss(n,function(q,he,Ae){if(!m)switch(Ae){case 148:c=q;break;case 0:g=q,o.sheetRows&&o.sheetRows<=g.r&&(m=!0),k=xn(E=g.r),o["!row"]=g.r,(q.hidden||q.hpt||q.level!=null)&&(q.hpt&&(q.hpx=tf(q.hpt)),ye[q.r]=q);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:q[2]},q[2]){case"n":v.v=q[1];break;case"s":y=du[q[1]],v.v=y.t,v.r=y.r;break;case"b":v.v=!!q[1];break;case"e":v.v=q[1],o.cellText!==!1&&(v.w=xo[v.v]);break;case"str":v.t="s",v.v=q[1];break;case"is":v.t="s",v.v=q[1].t;break}if((_=a.CellXf[q[0].iStyleRef])&&gP(v,_.numFmtId,null,o,s,a),w=q[0].c==-1?w+1:q[0].c,o.dense?(l[E]||(l[E]=[]),l[E][w]=v):l[Zt(w)+k]=v,o.cellFormula){for(A=!1,I=0;I<C.length;++I){var G=C[I];g.r>=G[0].s.r&&g.r<=G[0].e.r&&w>=G[0].s.c&&w<=G[0].e.c&&(v.F=Xe(G[0]),A=!0)}!A&&q.length>3&&(v.f=q[3])}if(u.s.r>g.r&&(u.s.r=g.r),u.s.c>w&&(u.s.c=w),u.e.r<g.r&&(u.e.r=g.r),u.e.c<w&&(u.e.c=w),o.cellDates&&_&&v.t=="n"&&tc(Ue[_.numFmtId])){var Y=La(v.v);Y&&(v.t="d",v.v=new Date(Y.y,Y.m-1,Y.d,Y.H,Y.M,Y.S,Y.u))}ke&&(ke.type=="XLDAPR"&&(v.D=!0),ke=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;v={t:"z",v:void 0},w=q[0].c==-1?w+1:q[0].c,o.dense?(l[E]||(l[E]=[]),l[E][w]=v):l[Zt(w)+k]=v,u.s.r>g.r&&(u.s.r=g.r),u.s.c>w&&(u.s.c=w),u.e.r<g.r&&(u.e.r=g.r),u.e.c<w&&(u.e.c=w),ke&&(ke.type=="XLDAPR"&&(v.D=!0),ke=void 0);break;case 176:L.push(q);break;case 49:ke=((o.xlmeta||{}).Cell||[])[q-1];break;case 494:var K=r["!id"][q.relId];for(K?(q.Target=K.Target,q.loc&&(q.Target+="#"+q.loc),q.Rel=K):q.relId==""&&(q.Target="#"+q.loc),E=q.rfx.s.r;E<=q.rfx.e.r;++E)for(w=q.rfx.s.c;w<=q.rfx.e.c;++w)o.dense?(l[E]||(l[E]=[]),l[E][w]||(l[E][w]={t:"z",v:void 0}),l[E][w].l=q):(T=Ve({c:w,r:E}),l[T]||(l[T]={t:"z",v:void 0}),l[T].l=q);break;case 426:if(!o.cellFormula)break;C.push(q),V=o.dense?l[E][w]:l[Zt(w)+k],V.f=Rn(q[1],u,{r:g.r,c:w},D,o),V.F=Xe(q[0]);break;case 427:if(!o.cellFormula)break;P[Ve(q[0].s)]=q[1],V=o.dense?l[E][w]:l[Zt(w)+k],V.f=Rn(q[1],u,{r:g.r,c:w},D,o);break;case 60:if(!o.cellStyles)break;for(;q.e>=q.s;)M[q.e--]={width:q.w/256,hidden:!!(q.flags&1),level:q.level},me||(me=!0,y1(q.w/256)),bl(M[q.e+1]);break;case 161:l["!autofilter"]={ref:Xe(q)};break;case 476:l["!margins"]=q;break;case 147:i.Sheets[t]||(i.Sheets[t]={}),q.name&&(i.Sheets[t].CodeName=q.name),(q.above||q.left)&&(l["!outline"]={above:q.above,left:q.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),q.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!he.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+Ae.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=Xe(c||u)),o.sheetRows&&l["!ref"]){var Ee=Lt(l["!ref"]);o.sheetRows<=+Ee.e.r&&(Ee.e.r=o.sheetRows-1,Ee.e.r>u.e.r&&(Ee.e.r=u.e.r),Ee.e.r<Ee.s.r&&(Ee.s.r=Ee.e.r),Ee.e.c>u.e.c&&(Ee.e.c=u.e.c),Ee.e.c<Ee.s.c&&(Ee.s.c=Ee.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Xe(Ee))}return L.length>0&&(l["!merges"]=L),M.length>0&&(l["!cols"]=M),ye.length>0&&(l["!rows"]=ye),l}function yj(n){var e=[],t=n.match(/^<c:numCache>/),r;(n.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var a=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=t?+a[2]:a[2])});var i=Ze((n.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(n.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){r=s.replace(/<.*?>/g,"")}),[e,i,r]}function Ej(n,e,t,r,i,s){var a=s||{"!type":"chart"};if(!n)return s;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(n.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=yj(h);u.s.r=u.s.c=0,u.e.c=o,c=Zt(o),m[0].forEach(function(g,v){a[c+xn(v)]={t:"n",v:g,z:m[1]},l=v}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=Xe(u)),a}function Tj(n,e,t,r,i){if(!n)return n;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a,o=n.match(vP);return o&&T1(o[0],s,i,t),(a=n.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=a[1]),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}function wj(n,e){n.l+=10;var t=Fn(n);return{name:t}}function Ij(n,e,t,r,i){if(!n)return n;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a=!1;return ss(n,function(l,c,u){switch(u){case 550:s["!rel"]=l;break;case 651:i.Sheets[t]||(i.Sheets[t]={}),l.name&&(i.Sheets[t].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}var xP=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Sj=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Aj=[],Cj=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function tI(n,e){for(var t=0;t!=n.length;++t)for(var r=n[t],i=0;i!=e.length;++i){var s=e[i];if(r[s[0]]==null)r[s[0]]=s[1];else switch(s[2]){case"bool":typeof r[s[0]]=="string"&&(r[s[0]]=xt(r[s[0]]));break;case"int":typeof r[s[0]]=="string"&&(r[s[0]]=parseInt(r[s[0]],10));break}}}function nI(n,e){for(var t=0;t!=e.length;++t){var r=e[t];if(n[r[0]]==null)n[r[0]]=r[1];else switch(r[2]){case"bool":typeof n[r[0]]=="string"&&(n[r[0]]=xt(n[r[0]]));break;case"int":typeof n[r[0]]=="string"&&(n[r[0]]=parseInt(n[r[0]],10));break}}}function yP(n){nI(n.WBProps,xP),nI(n.CalcPr,Cj),tI(n.WBView,Sj),tI(n.Sheets,Aj),dl.date1904=xt(n.WBProps.date1904)}var kj="][*?/\\".split("");function Rj(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return kj.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}var Pj=/<\w+:workbook/;function Dj(n,e){if(!n)throw new Error("Could not find file");var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,i="xmlns",s={},a=0;if(n.replace(Ln,function(l,c){var u=Me(l);switch(Si(u[0])){case"<?xml":break;case"<workbook":l.match(Pj)&&(i="xmlns"+l.match(/<(\w+):/)[1]),t.xmlns=u[i];break;case"</workbook>":break;case"<fileVersion":delete u[0],t.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":xP.forEach(function(h){if(u[h[0]]!=null)switch(h[2]){case"bool":t.WBProps[h[0]]=xt(u[h[0]]);break;case"int":t.WBProps[h[0]]=parseInt(u[h[0]],10);break;default:t.WBProps[h[0]]=u[h[0]]}}),u.codeName&&(t.WBProps.CodeName=ut(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],t.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Ze(ut(u.name)),delete u[0],t.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":s={},s.Name=ut(u.name),u.comment&&(s.Comment=u.comment),u.localSheetId&&(s.Sheet=+u.localSheetId),xt(u.hidden||"0")&&(s.Hidden=!0),a=c+l.length;break;case"</definedName>":s.Ref=Ze(ut(n.slice(a,c))),t.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete u[0],t.CalcPr=u;break;case"<calcPr/>":delete u[0],t.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),YG.indexOf(t.xmlns)===-1)throw new Error("Unknown Namespace: "+t.xmlns);return yP(t),t}function Nj(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=zg(n),t.name=Fn(n),t}function Fj(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?Fn(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function Mj(n,e){var t={};return n.read_shift(4),t.ArchID=n.read_shift(4),n.l+=e-8,t}function Oj(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=dz(n),a=_K(n,0,t),o=m1(n);n.l=r;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function Lj(n,e){var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],i=!1;e||(e={}),e.biff=12;var s=[],a=[[]];return a.SheetNames=[],a.XTI=[],o0[16]={n:"BrtFRTArchID$",f:Mj},ss(n,function(l,c,u){switch(u){case 156:a.SheetNames.push(l.name),t.Sheets.push(l);break;case 153:t.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Rn(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,l]):a[0]=[u,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(u),i=!0;break;case 36:r.pop(),i=!1;break;case 37:r.push(u),i=!0;break;case 38:r.pop(),i=!1;break;case 16:break;default:if(!c.T){if(!i||e.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),yP(t),t.Names=s,t.supbooks=a,t}function bj(n,e,t){return e.slice(-4)===".bin"?Lj(n,t):Dj(n,t)}function Vj(n,e,t,r,i,s,a,o){return e.slice(-4)===".bin"?xj(n,r,t,i,s,a,o):NK(n,r,t,i,s,a,o)}function Uj(n,e,t,r,i,s,a,o){return e.slice(-4)===".bin"?Ij(n,r,t,i,s):Tj(n,r,t,i,s)}function Bj(n,e,t,r,i,s,a,o){return e.slice(-4)===".bin"?jW():YW()}function Gj(n,e,t,r,i,s,a,o){return e.slice(-4)===".bin"?qW():KW()}function zj(n,e,t,r){return e.slice(-4)===".bin"?cW(n,t,r):rW(n,t,r)}function Hj(n,e,t){return aP(n,t)}function $j(n,e,t){return e.slice(-4)===".bin"?S$(n,t):w$(n,t)}function Wj(n,e,t){return e.slice(-4)===".bin"?HW(n,t):VW(n,t)}function qj(n,e,t){return e.slice(-4)===".bin"?OW(n):FW(n)}function Kj(n,e,t,r){return t.slice(-4)===".bin"?LW(n,e,t,r):void 0}function jj(n,e,t){return e.slice(-4)===".bin"?DW(n,e,t):NW(n,e,t)}var EP=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,TP=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Kr(n,e){var t=n.split(/\s+/),r=[];if(r[0]=t[0],t.length===1)return r;var i=n.match(EP),s,a,o,l;if(i)for(l=0;l!=i.length;++l)s=i[l].match(TP),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(a+1),r[o]=s[2].slice(1,s[2].length-1));return r}function Yj(n){var e=n.split(/\s+/),t={};if(e.length===1)return t;var r=n.match(EP),i,s,a,o;if(r)for(o=0;o!=r.length;++o)i=r[o].match(TP),(s=i[1].indexOf(":"))===-1?t[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?a="xmlns"+i[1].slice(6):a=i[1].slice(s+1),t[a]=i[2].slice(1,i[2].length-1));return t}var mu;function Xj(n,e){var t=mu[n]||Ze(n);return t==="General"?so(e):Ur(t,e)}function Qj(n,e,t,r){var i=r;switch((t[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=xt(r);break;case"i2":case"int":i=parseInt(r,10);break;case"r4":case"float":i=parseFloat(r);break;case"date":case"dateTime.tz":i=cn(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+t[0])}n[Ze(e)]=i}function Jj(n,e,t){if(n.t!=="z"){if(!t||t.cellText!==!1)try{n.t==="e"?n.w=n.w||xo[n.v]:e==="General"?n.t==="n"?(n.v|0)===n.v?n.w=n.v.toString(10):n.w=Xu(n.v):n.w=so(n.v):n.w=Xj(e||"General",n.v)}catch(s){if(t.WTF)throw s}try{var r=mu[e]||e||"General";if(t.cellNF&&(n.z=r),t.cellDates&&n.t=="n"&&tc(r)){var i=La(n.v);i&&(n.t="d",n.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(s){if(t.WTF)throw s}}}function Zj(n,e,t){if(t.cellStyles&&e.Interior){var r=e.Interior;r.Pattern&&(r.patternType=Q$[r.Pattern]||r.Pattern)}n[e.ID]=e}function eY(n,e,t,r,i,s,a,o,l,c){var u="General",h=r.StyleID,m={};c=c||{};var g=[],v=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&a&&(h=a.StyleID);s[h]!==void 0&&(s[h].nf&&(u=s[h].nf),s[h].Interior&&g.push(s[h].Interior),!!s[h].Parent);)h=s[h].Parent;switch(t.Type){case"Boolean":r.t="b",r.v=xt(n);break;case"String":r.t="s",r.r=Iw(Ze(n)),r.v=n.indexOf("<")>-1?Ze(e||n).replace(/<.*?>/g,""):r.r;break;case"DateTime":n.slice(-1)!="Z"&&(n+="Z"),r.v=(cn(n)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),r.v!==r.v?r.v=Ze(n):r.v<60&&(r.v=r.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+n),r.t||(r.t="n");break;case"Error":r.t="e",r.v=VR[n],c.cellText!==!1&&(r.w=n);break;default:n==""&&e==""?r.t="z":(r.t="s",r.v=Iw(e||n));break}if(Jj(r,u,c),c.cellFormula!==!1)if(r.Formula){var _=Ze(r.Formula);_.charCodeAt(0)==61&&(_=_.slice(1)),r.f=hl(_,i),delete r.Formula,r.ArrayRange=="RC"?r.F=hl("RC:RC",i):r.ArrayRange&&(r.F=hl(r.ArrayRange,i),l.push([Lt(r.F),r.F]))}else for(v=0;v<l.length;++v)i.r>=l[v][0].s.r&&i.r<=l[v][0].e.r&&i.c>=l[v][0].s.c&&i.c<=l[v][0].e.c&&(r.F=l[v][1]);c.cellStyles&&(g.forEach(function(E){!m.patternType&&E.patternType&&(m.patternType=E.patternType)}),r.s=m),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function tY(n){n.t=n.v||"",n.t=n.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),n.v=n.w=n.ixfe=void 0}function im(n,e){var t=e||{};uR();var r=Bc(u1(n));(t.type=="binary"||t.type=="array"||t.type=="base64")&&(r=ut(r));var i=r.slice(0,1024).toLowerCase(),s=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var a=_n(t);return a.type="string",Zu.to_workbook(r,a)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Et){i.indexOf("<"+Et)>=0&&(s=!0)}),s)return uY(r,t);mu={"General Number":"General","General Date":Ue[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ue[15],"Short Date":Ue[14],"Long Time":Ue[19],"Medium Time":Ue[18],"Short Time":Ue[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ue[2],Standard:Ue[4],Percent:Ue[10],Scientific:Ue[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},h=[],m=t.dense?[]:{},g="",v={},_={},E=Kr('<Data ss:Type="String">'),w=0,T=0,y=0,k={s:{r:2e6,c:2e6},e:{r:0,c:0}},V={},L={},I="",A=0,C=[],P={},D={},N=0,M=[],ye=[],me={},ke=[],Ee,ce=!1,q=[],he=[],Ae={},G=0,Y=0,K={Sheets:[],WBProps:{date1904:!1}},W={};Ju.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var ie="";o=Ju.exec(r);)switch(o[3]=(ie=o[3]).toLowerCase()){case"data":if(ie=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?eY(r.slice(w,o.index),I,E,l[l.length-1][0]=="comment"?me:v,{c:T,r:y},V,ke[T],_,q,t):(I="",E=Kr(o[0]),w=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(ye.length>0&&(v.c=ye),(!t.sheetRows||t.sheetRows>y)&&v.v!==void 0&&(t.dense?(m[y]||(m[y]=[]),m[y][T]=v):m[Zt(T)+xn(y)]=v),v.HRef&&(v.l={Target:Ze(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(G=T+(parseInt(v.MergeAcross,10)|0),Y=y+(parseInt(v.MergeDown,10)|0),C.push({s:{c:T,r:y},e:{c:G,r:Y}})),!t.sheetStubs)v.MergeAcross?T=G+1:++T;else if(v.MergeAcross||v.MergeDown){for(var pe=T;pe<=G;++pe)for(var Ce=y;Ce<=Y;++Ce)(pe>T||Ce>y)&&(t.dense?(m[Ce]||(m[Ce]=[]),m[Ce][pe]={t:"z"}):m[Zt(pe)+xn(Ce)]={t:"z"});T=G+1}else++T;else v=Yj(o[0]),v.Index&&(T=+v.Index-1),T<k.s.c&&(k.s.c=T),T>k.e.c&&(k.e.c=T),o[0].slice(-2)==="/>"&&++T,ye=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(y<k.s.r&&(k.s.r=y),y>k.e.r&&(k.e.r=y),o[0].slice(-2)==="/>"&&(_=Kr(o[0]),_.Index&&(y=+_.Index-1)),T=0,++y):(_=Kr(o[0]),_.Index&&(y=+_.Index-1),Ae={},(_.AutoFitHeight=="0"||_.Height)&&(Ae.hpx=parseInt(_.Height,10),Ae.hpt=sP(Ae.hpx),he[y]=Ae),_.Hidden=="1"&&(Ae.hidden=!0,he[y]=Ae));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));h.push(g),k.s.r<=k.e.r&&k.s.c<=k.e.c&&(m["!ref"]=Xe(k),t.sheetRows&&t.sheetRows<=k.e.r&&(m["!fullref"]=m["!ref"],k.e.r=t.sheetRows-1,m["!ref"]=Xe(k))),C.length&&(m["!merges"]=C),ke.length>0&&(m["!cols"]=ke),he.length>0&&(m["!rows"]=he),u[g]=m}else k={s:{r:2e6,c:2e6},e:{r:0,c:0}},y=T=0,l.push([o[3],!1]),c=Kr(o[0]),g=Ze(c.Name),m=t.dense?[]:{},C=[],q=[],he=[],W={name:g,Hidden:0},K.Sheets.push(W);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),ke=[],ce=!1}break;case"style":o[1]==="/"?Zj(V,L,t):L=Kr(o[0]);break;case"numberformat":L.nf=Ze(Kr(o[0]).Format||"General"),mu[L.nf]&&(L.nf=mu[L.nf]);for(var _e=0;_e!=392&&Ue[_e]!=L.nf;++_e);if(_e==392){for(_e=57;_e!=392;++_e)if(Ue[_e]==null){za(L.nf,_e);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(Ee=Kr(o[0]),Ee.Hidden&&(Ee.hidden=!0,delete Ee.Hidden),Ee.Width&&(Ee.wpx=parseInt(Ee.Width,10)),!ce&&Ee.wpx>10){ce=!0,Gn=rP;for(var ue=0;ue<ke.length;++ue)ke[ue]&&bl(ke[ue])}ce&&bl(Ee),ke[Ee.Index-1||ke.length]=Ee;for(var He=0;He<+Ee.Span;++He)ke[ke.length]=_n(Ee);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var H=Me(o[0]),ht={Name:H.Name,Ref:hl(H.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(ht.Sheet=K.Sheets.length-1),K.Names.push(ht);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?I+=r.slice(A,o.index):A=o.index+o[0].length;break;case"interior":if(!t.cellStyles)break;L.Interior=Kr(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Vz(P,ie,r.slice(N,o.index)):N=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));tY(me),ye.push(me)}else l.push([o[3],!1]),c=Kr(o[0]),me={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var $e=Kr(o[0]);m["!autofilter"]={ref:hl($e.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return lI(r,t);var tt=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:tt=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:tt=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:tt=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:tt=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(N,o.index)){case"SheetHidden":W.Hidden=1;break;case"SheetVeryHidden":W.Hidden=2;break}else N=o.index+o[0].length;break;case"header":m["!margins"]||pu(m["!margins"]={},"xlml"),isNaN(+Me(o[0]).Margin)||(m["!margins"].header=+Me(o[0]).Margin);break;case"footer":m["!margins"]||pu(m["!margins"]={},"xlml"),isNaN(+Me(o[0]).Margin)||(m["!margins"].footer=+Me(o[0]).Margin);break;case"pagemargins":var Ge=Me(o[0]);m["!margins"]||pu(m["!margins"]={},"xlml"),isNaN(+Ge.Top)||(m["!margins"].top=+Ge.Top),isNaN(+Ge.Left)||(m["!margins"].left=+Ge.Left),isNaN(+Ge.Right)||(m["!margins"].right=+Ge.Right),isNaN(+Ge.Bottom)||(m["!margins"].bottom=+Ge.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:tt=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:tt=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:tt=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:tt=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:tt=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:tt=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:tt=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:tt=!1}break;case"smarttags":break;default:tt=!1;break}if(tt||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Qj(D,ie,M,r.slice(N,o.index)):(M=o,N=o.index+o[0].length);break}if(t.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Te={};return!t.bookSheets&&!t.bookProps&&(Te.Sheets=u),Te.SheetNames=h,Te.Workbook=K,Te.SSF=_n(Ue),Te.Props=P,Te.Custprops=D,Te}function qg(n,e){switch(S1(e=e||{}),e.type||"base64"){case"base64":return im(yr(n),e);case"binary":case"buffer":case"file":return im(n,e);case"array":return im(go(n),e)}}function nY(n){var e={},t=n.content;if(t.l=28,e.AnsiUserType=t.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=gz(t),t.length-t.l<=4)return e;var r=t.read_shift(4);if(r==0||r>40||(t.l-=4,e.Reserved1=t.read_shift(0,"lpstr-ansi"),t.length-t.l<=4)||(r=t.read_shift(4),r!==1907505652)||(e.UnicodeClipboardFormat=vz(t),r=t.read_shift(4),r==0||r>40))return e;t.l-=4,e.Reserved2=t.read_shift(0,"lpwstr")}var rY=[60,1084,2066,2165,2175];function iY(n,e,t,r,i){var s=r,a=[],o=t.slice(t.l,t.l+s);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(n){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}a.push(o),t.l+=s;for(var l=Gi(t,t.l),c=Kg[l],u=0;c!=null&&rY.indexOf(l)>-1;)s=Gi(t,t.l+2),u=t.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=t.slice(u,t.l+4+s),a.push(o),t.l+=4+s,c=Kg[l=Gi(t,t.l)];var h=Is(a);gn(h,0);var m=0;h.lens=[];for(var g=0;g<a.length;++g)h.lens.push(m),m+=a[g].length;if(h.length<r)throw"XLS Record 0x"+n.toString(16)+" Truncated: "+h.length+" < "+r;return e.f(h,h.length,i)}function fi(n,e,t){if(n.t!=="z"&&n.XF){var r=0;try{r=n.z||n.XF.numFmtId||0,e.cellNF&&(n.z=Ue[r])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{n.t==="e"?n.w=n.w||xo[n.v]:r===0||r=="General"?n.t==="n"?(n.v|0)===n.v?n.w=n.v.toString(10):n.w=Xu(n.v):n.w=so(n.v):n.w=Ur(r,n.v,{date1904:!!t,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&r&&n.t=="n"&&tc(Ue[r]||String(r))){var i=La(n.v);i&&(n.t="d",n.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function Ah(n,e,t){return{v:n,ixfe:e,t}}function sY(n,e){var t={opts:{}},r={},i=e.dense?[]:{},s={},a={},o=null,l=[],c="",u={},h,m="",g,v,_,E,w={},T=[],y,k,V=[],L=[],I={Sheets:[],WBProps:{date1904:!1},Views:[{}]},A={},C=function(Be){return Be<8?Ha[Be]:Be<64&&L[Be-8]||Ha[Be]},P=function(Be,Tt,rn){var Rt=Tt.XF.data;if(!(!Rt||!Rt.patternType||!rn||!rn.cellStyles)){Tt.s={},Tt.s.patternType=Rt.patternType;var li;(li=ef(C(Rt.icvFore)))&&(Tt.s.fgColor={rgb:li}),(li=ef(C(Rt.icvBack)))&&(Tt.s.bgColor={rgb:li})}},D=function(Be,Tt,rn){if(!(Ae>1)&&!(rn.sheetRows&&Be.r>=rn.sheetRows)){if(rn.cellStyles&&Tt.XF&&Tt.XF.data&&P(Be,Tt,rn),delete Tt.ixfe,delete Tt.XF,h=Be,m=Ve(Be),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),Be.r<a.s.r&&(a.s.r=Be.r),Be.c<a.s.c&&(a.s.c=Be.c),Be.r+1>a.e.r&&(a.e.r=Be.r+1),Be.c+1>a.e.c&&(a.e.c=Be.c+1),rn.cellFormula&&Tt.f){for(var Rt=0;Rt<T.length;++Rt)if(!(T[Rt][0].s.c>Be.c||T[Rt][0].s.r>Be.r)&&!(T[Rt][0].e.c<Be.c||T[Rt][0].e.r<Be.r)){Tt.F=Xe(T[Rt][0]),(T[Rt][0].s.c!=Be.c||T[Rt][0].s.r!=Be.r)&&delete Tt.f,Tt.f&&(Tt.f=""+Rn(T[Rt][1],a,Be,q,N));break}}rn.dense?(i[Be.r]||(i[Be.r]=[]),i[Be.r][Be.c]=Tt):i[m]=Tt}},N={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:T,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(N.password=e.password);var M,ye=[],me=[],ke=[],Ee=[],ce=!1,q=[];q.SheetNames=N.snames,q.sharedf=N.sharedf,q.arrayf=N.arrayf,q.names=[],q.XTI=[];var he=0,Ae=0,G=0,Y=[],K=[],W;N.codepage=1200,ti(1200);for(var ie=!1;n.l<n.length-1;){var pe=n.l,Ce=n.read_shift(2);if(Ce===0&&he===10)break;var _e=n.l===n.length?0:n.read_shift(2),ue=Kg[Ce];if(ue&&ue.f){if(e.bookSheets&&he===133&&Ce!==133)break;if(he=Ce,ue.r===2||ue.r==12){var He=n.read_shift(2);if(_e-=2,!N.enc&&He!==Ce&&((He&255)<<8|He>>8)!==Ce)throw new Error("rt mismatch: "+He+"!="+Ce);ue.r==12&&(n.l+=10,_e-=10)}var H={};if(Ce===10?H=ue.f(n,_e,N):H=iY(Ce,ue,n,_e,N),Ae==0&&[9,521,1033,2057].indexOf(he)===-1)continue;switch(Ce){case 34:t.opts.Date1904=I.WBProps.date1904=H;break;case 134:t.opts.WriteProtect=!0;break;case 47:if(N.enc||(n.l=0),N.enc=H,!e.password)throw new Error("File is password-protected");if(H.valid==null)throw new Error("Encryption scheme unsupported");if(!H.valid)throw new Error("Password is incorrect");break;case 92:N.lastuser=H;break;case 66:var ht=Number(H);switch(ht){case 21010:ht=1200;break;case 32768:ht=1e4;break;case 32769:ht=1252;break}ti(N.codepage=ht),ie=!0;break;case 317:N.rrtabid=H;break;case 25:N.winlocked=H;break;case 439:t.opts.RefreshAll=H;break;case 12:t.opts.CalcCount=H;break;case 16:t.opts.CalcDelta=H;break;case 17:t.opts.CalcIter=H;break;case 13:t.opts.CalcMode=H;break;case 14:t.opts.CalcPrecision=H;break;case 95:t.opts.CalcSaveRecalc=H;break;case 15:N.CalcRefMode=H;break;case 2211:t.opts.FullCalc=H;break;case 129:H.fDialog&&(i["!type"]="dialog"),H.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),H.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:V.push(H);break;case 430:q.push([H]),q[q.length-1].XTI=[];break;case 35:case 547:q[q.length-1].push(H);break;case 24:case 536:W={Name:H.Name,Ref:Rn(H.rgce,a,null,q,N)},H.itab>0&&(W.Sheet=H.itab-1),q.names.push(W),q[0]||(q[0]=[],q[0].XTI=[]),q[q.length-1].push(H),H.Name=="_xlnm._FilterDatabase"&&H.itab>0&&H.rgce&&H.rgce[0]&&H.rgce[0][0]&&H.rgce[0][0][0]=="PtgArea3d"&&(K[H.itab-1]={ref:Xe(H.rgce[0][0][1][2])});break;case 22:N.ExternCount=H;break;case 23:q.length==0&&(q[0]=[],q[0].XTI=[]),q[q.length-1].XTI=q[q.length-1].XTI.concat(H),q.XTI=q.XTI.concat(H);break;case 2196:if(N.biff<8)break;W!=null&&(W.Comment=H[1]);break;case 18:i["!protect"]=H;break;case 19:H!==0&&N.WTF&&console.error("Password verifier: "+H);break;case 133:s[H.pos]=H,N.snames.push(H.name);break;case 10:{if(--Ae)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,i["!ref"]=Xe(a),e.sheetRows&&e.sheetRows<=a.e.r){var $e=a.e.r;a.e.r=e.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=Xe(a),a.e.r=$e}a.e.r++,a.e.c++}ye.length>0&&(i["!merges"]=ye),me.length>0&&(i["!objects"]=me),ke.length>0&&(i["!cols"]=ke),Ee.length>0&&(i["!rows"]=Ee),I.Sheets.push(A)}c===""?u=i:r[c]=i,i=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(N.biff===8&&(N.biff={9:2,521:3,1033:4}[Ce]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[H.BIFFVer]||8),N.biffguess=H.BIFFVer==0,H.BIFFVer==0&&H.dt==4096&&(N.biff=5,ie=!0,ti(N.codepage=28591)),N.biff==8&&H.BIFFVer==0&&H.dt==16&&(N.biff=2),Ae++)break;if(i=e.dense?[]:{},N.biff<8&&!ie&&(ie=!0,ti(N.codepage=e.codepage||1252)),N.biff<5||H.BIFFVer==0&&H.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var tt={pos:n.l-_e,name:c};s[tt.pos]=tt,N.snames.push(c)}else c=(s[pe]||{name:""}).name;H.dt==32&&(i["!type"]="chart"),H.dt==64&&(i["!type"]="macro"),ye=[],me=[],N.arrayf=T=[],ke=[],Ee=[],ce=!1,A={Hidden:(s[pe]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(e.dense?(i[H.r]||[])[H.c]:i[Ve({c:H.c,r:H.r})])&&++H.c,y={ixfe:H.ixfe,XF:V[H.ixfe]||{},v:H.val,t:"n"},G>0&&(y.z=Y[y.ixfe>>8&63]),fi(y,e,t.opts.Date1904),D({c:H.c,r:H.r},y,e);break;case 5:case 517:y={ixfe:H.ixfe,XF:V[H.ixfe],v:H.val,t:H.t},G>0&&(y.z=Y[y.ixfe>>8&63]),fi(y,e,t.opts.Date1904),D({c:H.c,r:H.r},y,e);break;case 638:y={ixfe:H.ixfe,XF:V[H.ixfe],v:H.rknum,t:"n"},G>0&&(y.z=Y[y.ixfe>>8&63]),fi(y,e,t.opts.Date1904),D({c:H.c,r:H.r},y,e);break;case 189:for(var Ge=H.c;Ge<=H.C;++Ge){var Te=H.rkrec[Ge-H.c][0];y={ixfe:Te,XF:V[Te],v:H.rkrec[Ge-H.c][1],t:"n"},G>0&&(y.z=Y[y.ixfe>>8&63]),fi(y,e,t.opts.Date1904),D({c:Ge,r:H.r},y,e)}break;case 6:case 518:case 1030:{if(H.val=="String"){o=H;break}if(y=Ah(H.val,H.cell.ixfe,H.tt),y.XF=V[y.ixfe],e.cellFormula){var Et=H.formula;if(Et&&Et[0]&&Et[0][0]&&Et[0][0][0]=="PtgExp"){var bn=Et[0][0][1][0],Yn=Et[0][0][1][1],wr=Ve({r:bn,c:Yn});w[wr]?y.f=""+Rn(H.formula,a,H.cell,q,N):y.F=((e.dense?(i[bn]||[])[Yn]:i[wr])||{}).F}else y.f=""+Rn(H.formula,a,H.cell,q,N)}G>0&&(y.z=Y[y.ixfe>>8&63]),fi(y,e,t.opts.Date1904),D(H.cell,y,e),o=H}break;case 7:case 519:if(o)o.val=H,y=Ah(H,o.cell.ixfe,"s"),y.XF=V[y.ixfe],e.cellFormula&&(y.f=""+Rn(o.formula,a,o.cell,q,N)),G>0&&(y.z=Y[y.ixfe>>8&63]),fi(y,e,t.opts.Date1904),D(o.cell,y,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{T.push(H);var ma=Ve(H[0].s);if(g=e.dense?(i[H[0].s.r]||[])[H[0].s.c]:i[ma],e.cellFormula&&g){if(!o||!ma||!g)break;g.f=""+Rn(H[1],a,H[0],q,N),g.F=Xe(H[0])}}break;case 1212:{if(!e.cellFormula)break;if(m){if(!o)break;w[Ve(o.cell)]=H[0],g=e.dense?(i[o.cell.r]||[])[o.cell.c]:i[Ve(o.cell)],(g||{}).f=""+Rn(H[0],a,h,q,N)}}break;case 253:y=Ah(l[H.isst].t,H.ixfe,"s"),l[H.isst].h&&(y.h=l[H.isst].h),y.XF=V[y.ixfe],G>0&&(y.z=Y[y.ixfe>>8&63]),fi(y,e,t.opts.Date1904),D({c:H.c,r:H.r},y,e);break;case 513:e.sheetStubs&&(y={ixfe:H.ixfe,XF:V[H.ixfe],t:"z"},G>0&&(y.z=Y[y.ixfe>>8&63]),fi(y,e,t.opts.Date1904),D({c:H.c,r:H.r},y,e));break;case 190:if(e.sheetStubs)for(var Ir=H.c;Ir<=H.C;++Ir){var fn=H.ixfe[Ir-H.c];y={ixfe:fn,XF:V[fn],t:"z"},G>0&&(y.z=Y[y.ixfe>>8&63]),fi(y,e,t.opts.Date1904),D({c:Ir,r:H.r},y,e)}break;case 214:case 516:case 4:y=Ah(H.val,H.ixfe,"s"),y.XF=V[y.ixfe],G>0&&(y.z=Y[y.ixfe>>8&63]),fi(y,e,t.opts.Date1904),D({c:H.c,r:H.r},y,e);break;case 0:case 512:Ae===1&&(a=H);break;case 252:l=H;break;case 1054:if(N.biff==4){Y[G++]=H[1];for(var Sr=0;Sr<G+163&&Ue[Sr]!=H[1];++Sr);Sr>=163&&za(H[1],G+163)}else za(H[1],H[0]);break;case 30:{Y[G++]=H;for(var dt=0;dt<G+163&&Ue[dt]!=H;++dt);dt>=163&&za(H,G+163)}break;case 229:ye=ye.concat(H);break;case 93:me[H.cmo[0]]=N.lastobj=H;break;case 438:N.lastobj.TxO=H;break;case 127:N.lastobj.ImData=H;break;case 440:for(E=H[0].s.r;E<=H[0].e.r;++E)for(_=H[0].s.c;_<=H[0].e.c;++_)g=e.dense?(i[E]||[])[_]:i[Ve({c:_,r:E})],g&&(g.l=H[1]);break;case 2048:for(E=H[0].s.r;E<=H[0].e.r;++E)for(_=H[0].s.c;_<=H[0].e.c;++_)g=e.dense?(i[E]||[])[_]:i[Ve({c:_,r:E})],g&&g.l&&(g.l.Tooltip=H[1]);break;case 28:{if(N.biff<=5&&N.biff>=2)break;g=e.dense?(i[H[0].r]||[])[H[0].c]:i[Ve(H[0])];var Vt=me[H[2]];g||(e.dense?(i[H[0].r]||(i[H[0].r]=[]),g=i[H[0].r][H[0].c]={t:"z"}):g=i[Ve(H[0])]={t:"z"},a.e.r=Math.max(a.e.r,H[0].r),a.s.r=Math.min(a.s.r,H[0].r),a.e.c=Math.max(a.e.c,H[0].c),a.s.c=Math.min(a.s.c,H[0].c)),g.c||(g.c=[]),v={a:H[1],t:Vt.TxO.t},g.c.push(v)}break;case 2173:CW(V[H.ixfe],H.ext);break;case 125:{if(!N.cellStyles)break;for(;H.e>=H.s;)ke[H.e--]={width:H.w/256,level:H.level||0,hidden:!!(H.flags&1)},ce||(ce=!0,y1(H.w/256)),bl(ke[H.e+1])}break;case 520:{var Ht={};H.level!=null&&(Ee[H.r]=Ht,Ht.level=H.level),H.hidden&&(Ee[H.r]=Ht,Ht.hidden=!0),H.hpt&&(Ee[H.r]=Ht,Ht.hpt=H.hpt,Ht.hpx=tf(H.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||pu(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Ce]]=H;break;case 161:i["!margins"]||pu(i["!margins"]={}),i["!margins"].header=H.header,i["!margins"].footer=H.footer;break;case 574:H.RTL&&(I.Views[0].RTL=!0);break;case 146:L=H;break;case 2198:M=H;break;case 140:k=H;break;case 442:c?A.CodeName=H||A.name:I.WBProps.CodeName=H||"ThisWorkbook";break}}else ue||console.error("Missing Info for XLS Record 0x"+Ce.toString(16)),n.l+=_e}return t.SheetNames=wi(s).sort(function(ar,Be){return Number(ar)-Number(Be)}).map(function(ar){return s[ar].name}),e.bookSheets||(t.Sheets=r),!t.SheetNames.length&&u["!ref"]?(t.SheetNames.push("Sheet1"),t.Sheets&&(t.Sheets.Sheet1=u)):t.Preamble=u,t.Sheets&&K.forEach(function(ar,Be){t.Sheets[t.SheetNames[Be]]["!autofilter"]=ar}),t.Strings=l,t.SSF=_n(Ue),N.enc&&(t.Encryption=N.enc),M&&(t.Themes=M),t.Metadata={},k!==void 0&&(t.Metadata.Country=k),q.names.length>0&&(I.Names=q.names),t.Workbook=I,t}var rI={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function aY(n,e,t){var r=Ye.find(n,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var i=Bw(r,wz,rI.DSI);for(var s in i)e[s]=i[s]}catch(c){if(t.WTF)throw c}var a=Ye.find(n,"/!SummaryInformation");if(a&&a.size>0)try{var o=Bw(a,Iz,rI.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(t.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(BR(e.HeadingPairs,e.TitlesOfParts,e,t),delete e.HeadingPairs,delete e.TitlesOfParts)}function wP(n,e){e||(e={}),S1(e),Jk(),e.codepage&&r1(e.codepage);var t,r;if(n.FullPaths){if(Ye.find(n,"/encryption"))throw new Error("File is password-protected");t=Ye.find(n,"!CompObj"),r=Ye.find(n,"/Workbook")||Ye.find(n,"/Book")}else{switch(e.type){case"base64":n=Zr(yr(n));break;case"binary":n=Zr(n);break;case"buffer":break;case"array":Array.isArray(n)||(n=Array.prototype.slice.call(n));break}gn(n,0),r={content:n}}var i,s;if(t&&nY(t),e.bookProps&&!e.bookSheets)i={};else{var a=Ke?"buffer":"array";if(r&&r.content)i=sY(r.content,e);else if((s=Ye.find(n,"PerfectOffice_MAIN"))&&s.content)i=hu.to_workbook(s.content,(e.type=a,e));else if((s=Ye.find(n,"NativeContent_MAIN"))&&s.content)i=hu.to_workbook(s.content,(e.type=a,e));else throw(s=Ye.find(n,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&n.FullPaths&&Ye.find(n,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=WW(n))}var o={};return n.FullPaths&&aY(n,o,e),i.Props=i.Custprops=o,e.bookFiles&&(i.cfb=n),i}var o0={0:{f:GK},1:{f:WK},2:{f:ej},3:{f:YK},4:{f:KK},5:{f:ZK},6:{f:rj},7:{f:QK},8:{f:lj},9:{f:oj},10:{f:sj},11:{f:aj},12:{f:qK},13:{f:tj},14:{f:XK},15:{f:jK},16:{f:_P},17:{f:ij},18:{f:JK},19:{f:p1},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Oj},40:{},42:{},43:{f:sW},44:{f:iW},45:{f:aW},46:{f:lW},47:{f:oW},48:{},49:{f:cz},50:{},51:{f:RW},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:JR},62:{f:nj},63:{f:MW},64:{f:vj},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:On,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:gj},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:$K},148:{f:zK,p:16},151:{f:fj},152:{},153:{f:Fj},154:{},155:{},156:{f:Nj},157:{},158:{},159:{T:1,f:I$},160:{T:-1},161:{T:1,f:_o},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:cj},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:kW},336:{T:-1},337:{f:PW,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:zg},357:{},358:{},359:{},360:{T:1},361:{},362:{f:QR},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:hj},427:{f:dj},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:mj},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:HK},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:uj},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:zg},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:zW},633:{T:1},634:{T:-1},635:{T:1,f:GW},636:{T:-1},637:{f:fz},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:wj},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:_j},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Kg={6:{f:nm},10:{f:ps},12:{f:Kt},13:{f:Kt},14:{f:Ut},15:{f:Ut},16:{f:Dn},17:{f:Ut},18:{f:Ut},19:{f:Kt},20:{f:$w},21:{f:$w},23:{f:QR},24:{f:qw},25:{f:Ut},26:{},27:{},28:{f:UH},29:{},34:{f:Ut},35:{f:Ww},38:{f:Dn},39:{f:Dn},40:{f:Dn},41:{f:Dn},42:{f:Ut},43:{f:Ut},47:{f:H$},49:{f:yH},51:{f:Kt},60:{},61:{f:vH},64:{f:Ut},65:{f:xH},66:{f:Kt},77:{},80:{},81:{},82:{},85:{f:Kt},89:{},90:{},91:{},92:{f:cH},93:{f:GH},94:{},95:{f:Ut},96:{},97:{},99:{f:Ut},125:{f:JR},128:{f:PH},129:{f:uH},130:{f:Kt},131:{f:Ut},132:{f:Ut},133:{f:fH},134:{},140:{f:KH},141:{f:Kt},144:{},146:{f:YH},151:{},152:{},153:{},154:{},155:{},156:{f:Kt},157:{},158:{},160:{f:e$},161:{f:QH},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:AH},190:{f:CH},193:{f:ps},197:{},198:{},199:{},200:{},201:{},202:{f:Ut},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Kt},220:{},221:{f:Ut},222:{},224:{f:RH},225:{f:lH},226:{f:ps},227:{},229:{f:BH},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:hH},253:{f:EH},255:{f:dH},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:WR},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ut},353:{f:ps},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:NH},431:{f:Ut},432:{},433:{},434:{},437:{},438:{f:$H},439:{f:Ut},440:{f:WH},441:{},442:{f:If},443:{},444:{f:Kt},445:{},446:{},448:{f:ps},449:{f:gH,r:2},450:{f:ps},512:{f:zw},513:{f:ZH},515:{f:DH},516:{f:TH},517:{f:Hw},519:{f:t$},520:{f:pH},523:{},545:{f:Kw},549:{f:Gw},566:{},574:{f:_H},638:{f:SH},659:{},1048:{},1054:{f:wH},1084:{},1212:{f:LH},2048:{f:qH},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:wh},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:ps},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:XH,r:12},2173:{f:AW,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ut,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:OH,r:12},2197:{},2198:{f:yW,r:12},2199:{},2200:{},2201:{},2202:{f:bH,r:12},2203:{f:ps},2204:{},2205:{},2206:{},2207:{},2211:{f:mH},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Kt},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:JH},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:jH},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:zw},1:{},2:{f:s$},3:{f:i$},4:{f:r$},5:{f:Hw},7:{f:a$},8:{},9:{f:wh},11:{},22:{f:Kt},30:{f:IH},31:{},32:{},33:{f:Kw},36:{},37:{f:Gw},50:{f:o$},62:{},52:{},67:{},68:{f:Kt},69:{},86:{},126:{},127:{f:n$},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:l$},223:{},234:{},354:{},421:{},518:{f:nm},521:{f:wh},536:{f:qw},547:{f:Ww},561:{},579:{},1030:{f:nm},1033:{f:wh},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function jr(n,e,t,r){var i=e;if(!isNaN(i)){var s=(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&NR(t)&&n.push(t)}}function iI(n,e){var t=e||{},r=t.dense?[]:{};n=n.replace(/<!--.*?-->/g,"");var i=n.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var s=n.match(/<\/table/i),a=i.index,o=s&&s.index||n.length,l=DG(n.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,h=0,m=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(a=0;a<l.length;++a){var _=l[a].trim(),E=_.slice(0,3).toLowerCase();if(E=="<tr"){if(++c,t.sheetRows&&t.sheetRows<=c){--c;break}u=0;continue}if(!(E!="<td"&&E!="<th")){var w=_.split(/<\/t[dh]>/i);for(o=0;o<w.length;++o){var T=w[o].trim();if(T.match(/<t[dh]/i)){for(var y=T,k=0;y.charAt(0)=="<"&&(k=y.indexOf(">"))>-1;)y=y.slice(k+1);for(var V=0;V<v.length;++V){var L=v[V];L.s.c==u&&L.s.r<c&&c<=L.e.r&&(u=L.e.c+1,V=-1)}var I=Me(T.slice(0,T.indexOf(">")));m=I.colspan?+I.colspan:1,((h=+I.rowspan)>1||m>1)&&v.push({s:{r:c,c:u},e:{r:c+(h||1)-1,c:u+m-1}});var A=I.t||I["data-t"]||"";if(!y.length){u+=m;continue}if(y=xR(y),g.s.r>c&&(g.s.r=c),g.e.r<c&&(g.e.r=c),g.s.c>u&&(g.s.c=u),g.e.c<u&&(g.e.c=u),!y.length){u+=m;continue}var C={t:"s",v:y};t.raw||!y.trim().length||A=="s"||(y==="TRUE"?C={t:"b",v:!0}:y==="FALSE"?C={t:"b",v:!1}:isNaN(ai(y))?isNaN(Ll(y).getDate())||(C={t:"d",v:cn(y)},t.cellDates||(C={t:"n",v:Kn(C.v)}),C.z=t.dateNF||Ue[14]):C={t:"n",v:ai(y)}),t.dense?(r[c]||(r[c]=[]),r[c][u]=C):r[Ve({r:c,c:u})]=C,u+=m}}}}return r["!ref"]=Xe(g),v.length&&(r["!merges"]=v),r}function oY(n,e,t,r){for(var i=n["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>t||i[c].s.c>a)&&!(i[c].e.r<t||i[c].e.c<a)){if(i[c].s.r<t||i[c].s.c<a){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var u=Ve({r:t,c:a}),h=r.dense?(n[t]||[])[a]:n[u],m=h&&h.v!=null&&(h.h||c1(h.w||(ts(h),h.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),r.editable?m='<span contenteditable="true">'+m+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),g.id=(r.id||"sjs")+"-"+u,s.push(KG("td",m,g))}}var v="<tr>";return v+s.join("")+"</tr>"}var lY='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',cY="</body></html>";function uY(n,e){var t=n.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!t||t.length==0)throw new Error("Invalid HTML: could not find <table>");if(t.length==1)return pa(iI(t[0],e),e);var r=C1();return t.forEach(function(i,s){k1(r,iI(i,e),"Sheet"+(s+1))}),r}function fY(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function hY(n,e){var t=e||{},r=t.header!=null?t.header:lY,i=t.footer!=null?t.footer:cY,s=[r],a=nc(n["!ref"]);t.dense=Array.isArray(n),s.push(fY(n,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(oY(n,a,o,t));return s.push("</table>"+i),s.join("")}function IP(n,e,t){var r=t||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var a=typeof r.origin=="string"?zn(r.origin):r.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var u=nc(n["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),i==-1&&(c.e.r=i=u.e.r+1)}var h=[],m=0,g=n["!rows"]||(n["!rows"]=[]),v=0,_=0,E=0,w=0,T=0,y=0;for(n["!cols"]||(n["!cols"]=[]);v<o.length&&_<l;++v){var k=o[v];if(sI(k)){if(r.display)continue;g[_]={hidden:!0}}var V=k.children;for(E=w=0;E<V.length;++E){var L=V[E];if(!(r.display&&sI(L))){var I=L.hasAttribute("data-v")?L.getAttribute("data-v"):L.hasAttribute("v")?L.getAttribute("v"):xR(L.innerHTML),A=L.getAttribute("data-z")||L.getAttribute("z");for(m=0;m<h.length;++m){var C=h[m];C.s.c==w+s&&C.s.r<_+i&&_+i<=C.e.r&&(w=C.e.c+1-s,m=-1)}y=+L.getAttribute("colspan")||1,((T=+L.getAttribute("rowspan")||1)>1||y>1)&&h.push({s:{r:_+i,c:w+s},e:{r:_+i+(T||1)-1,c:w+s+(y||1)-1}});var P={t:"s",v:I},D=L.getAttribute("data-t")||L.getAttribute("t")||"";I!=null&&(I.length==0?P.t=D||"z":r.raw||I.trim().length==0||D=="s"||(I==="TRUE"?P={t:"b",v:!0}:I==="FALSE"?P={t:"b",v:!1}:isNaN(ai(I))?isNaN(Ll(I).getDate())||(P={t:"d",v:cn(I)},r.cellDates||(P={t:"n",v:Kn(P.v)}),P.z=r.dateNF||Ue[14]):P={t:"n",v:ai(I)})),P.z===void 0&&A!=null&&(P.z=A);var N="",M=L.getElementsByTagName("A");if(M&&M.length)for(var ye=0;ye<M.length&&!(M[ye].hasAttribute("href")&&(N=M[ye].getAttribute("href"),N.charAt(0)!="#"));++ye);N&&N.charAt(0)!="#"&&(P.l={Target:N}),r.dense?(n[_+i]||(n[_+i]=[]),n[_+i][w+s]=P):n[Ve({c:w+s,r:_+i})]=P,c.e.c<w+s&&(c.e.c=w+s),w+=y}}++_}return h.length&&(n["!merges"]=(n["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,_-1+i),n["!ref"]=Xe(c),_>=l&&(n["!fullref"]=Xe((c.e.r=o.length-v+_-1+i,c))),n}function SP(n,e){var t=e||{},r=t.dense?[]:{};return IP(r,n,e)}function dY(n,e){return pa(SP(n,e),e)}function sI(n){var e="",t=pY(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function pY(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function mY(n){var e=n.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),t=Ze(e.replace(/<[^>]*>/g,""));return[t]}var aI={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function AP(n,e){var t=e||{},r=u1(n),i=[],s,a,o={name:""},l="",c=0,u,h,m={},g=[],v=t.dense?[]:{},_,E,w={value:""},T="",y=0,k=[],V=-1,L=-1,I={s:{r:1e6,c:1e7},e:{r:0,c:0}},A=0,C={},P=[],D={},N=0,M=0,ye=[],me=1,ke=1,Ee=[],ce={Names:[]},q={},he=["",""],Ae=[],G={},Y="",K=0,W=!1,ie=!1,pe=0;for(Ju.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");_=Ju.exec(r);)switch(_[3]=_[3].replace(/_.*$/,"")){case"table":case"":_[1]==="/"?(I.e.c>=I.s.c&&I.e.r>=I.s.r?v["!ref"]=Xe(I):v["!ref"]="A1:A1",t.sheetRows>0&&t.sheetRows<=I.e.r&&(v["!fullref"]=v["!ref"],I.e.r=t.sheetRows-1,v["!ref"]=Xe(I)),P.length&&(v["!merges"]=P),ye.length&&(v["!rows"]=ye),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),g.push(u.name),m[u.name]=v,ie=!1):_[0].charAt(_[0].length-2)!=="/"&&(u=Me(_[0],!1),V=L=-1,I.s.r=I.s.c=1e7,I.e.r=I.e.c=0,v=t.dense?[]:{},P=[],ye=[],ie=!0);break;case"table-row-group":_[1]==="/"?--A:++A;break;case"table-row":case"":if(_[1]==="/"){V+=me,me=1;break}if(h=Me(_[0],!1),h.?V=h.-1:V==-1&&(V=0),me=+h["number-rows-repeated"]||1,me<10)for(pe=0;pe<me;++pe)A>0&&(ye[V+pe]={level:A});L=-1;break;case"covered-table-cell":_[1]!=="/"&&++L,t.sheetStubs&&(t.dense?(v[V]||(v[V]=[]),v[V][L]={t:"z"}):v[Ve({r:V,c:L})]={t:"z"}),T="",k=[];break;case"table-cell":case"":if(_[0].charAt(_[0].length-2)==="/")++L,w=Me(_[0],!1),ke=parseInt(w["number-columns-repeated"]||"1",10),E={t:"z",v:null},w.formula&&t.cellFormula!=!1&&(E.f=eI(Ze(w.formula))),(w.||w["value-type"])=="string"&&(E.t="s",E.v=Ze(w["string-value"]||""),t.dense?(v[V]||(v[V]=[]),v[V][L]=E):v[Ve({r:V,c:L})]=E),L+=ke-1;else if(_[1]!=="/"){++L,T="",y=0,k=[],ke=1;var Ce=me?V+me-1:V;if(L>I.e.c&&(I.e.c=L),L<I.s.c&&(I.s.c=L),V<I.s.r&&(I.s.r=V),Ce>I.e.r&&(I.e.r=Ce),w=Me(_[0],!1),Ae=[],G={},E={t:w.||w["value-type"],v:null},t.cellFormula)if(w.formula&&(w.formula=Ze(w.formula)),w["number-matrix-columns-spanned"]&&w["number-matrix-rows-spanned"]&&(N=parseInt(w["number-matrix-rows-spanned"],10)||0,M=parseInt(w["number-matrix-columns-spanned"],10)||0,D={s:{r:V,c:L},e:{r:V+N-1,c:L+M-1}},E.F=Xe(D),Ee.push([D,E.F])),w.formula)E.f=eI(w.formula);else for(pe=0;pe<Ee.length;++pe)V>=Ee[pe][0].s.r&&V<=Ee[pe][0].e.r&&L>=Ee[pe][0].s.c&&L<=Ee[pe][0].e.c&&(E.F=Ee[pe][1]);switch((w["number-columns-spanned"]||w["number-rows-spanned"])&&(N=parseInt(w["number-rows-spanned"],10)||0,M=parseInt(w["number-columns-spanned"],10)||0,D={s:{r:V,c:L},e:{r:V+N-1,c:L+M-1}},P.push(D)),w["number-columns-repeated"]&&(ke=parseInt(w["number-columns-repeated"],10)),E.t){case"boolean":E.t="b",E.v=xt(w["boolean-value"]);break;case"float":E.t="n",E.v=parseFloat(w.value);break;case"percentage":E.t="n",E.v=parseFloat(w.value);break;case"currency":E.t="n",E.v=parseFloat(w.value);break;case"date":E.t="d",E.v=cn(w["date-value"]),t.cellDates||(E.t="n",E.v=Kn(E.v)),E.z="m/d/yy";break;case"time":E.t="n",E.v=kG(w["time-value"])/86400,t.cellDates&&(E.t="d",E.v=X0(E.v)),E.z="HH:MM:SS";break;case"number":E.t="n",E.v=parseFloat(w.);break;default:if(E.t==="string"||E.t==="text"||!E.t)E.t="s",w["string-value"]!=null&&(T=Ze(w["string-value"]),k=[]);else throw new Error("Unsupported value type "+E.t)}}else{if(W=!1,E.t==="s"&&(E.v=T||"",k.length&&(E.R=k),W=y==0),q.Target&&(E.l=q),Ae.length>0&&(E.c=Ae,Ae=[]),T&&t.cellText!==!1&&(E.w=T),W&&(E.t="z",delete E.v),(!W||t.sheetStubs)&&!(t.sheetRows&&t.sheetRows<=V))for(var _e=0;_e<me;++_e){if(ke=parseInt(w["number-columns-repeated"]||"1",10),t.dense)for(v[V+_e]||(v[V+_e]=[]),v[V+_e][L]=_e==0?E:_n(E);--ke>0;)v[V+_e][L+ke]=_n(E);else for(v[Ve({r:V+_e,c:L})]=E;--ke>0;)v[Ve({r:V+_e,c:L+ke})]=_n(E);I.e.c<=L&&(I.e.c=L)}ke=parseInt(w["number-columns-repeated"]||"1",10),L+=ke-1,ke=0,E={},T="",k=[]}q={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(_[1]==="/"){if((s=i.pop())[0]!==_[3])throw"Bad state: "+s}else _[0].charAt(_[0].length-2)!=="/"&&i.push([_[3],!0]);break;case"annotation":if(_[1]==="/"){if((s=i.pop())[0]!==_[3])throw"Bad state: "+s;G.t=T,k.length&&(G.R=k),G.a=Y,Ae.push(G)}else _[0].charAt(_[0].length-2)!=="/"&&i.push([_[3],!1]);Y="",K=0,T="",y=0,k=[];break;case"creator":_[1]==="/"?Y=r.slice(K,_.index):K=_.index+_[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(_[1]==="/"){if((s=i.pop())[0]!==_[3])throw"Bad state: "+s}else _[0].charAt(_[0].length-2)!=="/"&&i.push([_[3],!1]);T="",y=0,k=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(_[1]==="/"){if(C[o.name]=l,(s=i.pop())[0]!==_[3])throw"Bad state: "+s}else _[0].charAt(_[0].length-2)!=="/"&&(l="",o=Me(_[0],!1),i.push([_[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":a=Me(_[0],!1),l+=aI[_[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":a=Me(_[0],!1),l+=aI[_[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(_[0].slice(-2)==="/>")break;if(_[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":l+=r.slice(c,_.index);break}else c=_.index+_[0].length;break;case"named-range":a=Me(_[0],!1),he=rm(a["cell-range-address"]);var ue={Name:a.name,Ref:he[0]+"!"+he[1]};ie&&(ue.Sheet=g.length),ce.Names.push(ue);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(_[1]==="/"&&(!w||!w["string-value"])){var He=mY(r.slice(y,_.index));T=(T.length>0?T+`
`:"")+He[0]}else Me(_[0],!1),y=_.index+_[0].length;break;case"s":break;case"database-range":if(_[1]==="/")break;try{he=rm(Me(_[0])["target-range-address"]),m[he[0]]["!autofilter"]={ref:he[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(_[1]!=="/"){if(q=Me(_[0],!1),!q.href)break;q.Target=Ze(q.href),delete q.href,q.Target.charAt(0)=="#"&&q.Target.indexOf(".")>-1?(he=rm(q.Target.slice(1)),q.Target="#"+he[0]+"!"+he[1]):q.Target.match(/^\.\.[\\\/]/)&&(q.Target=q.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(_[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(t.WTF)throw new Error(_)}}var H={Sheets:m,SheetNames:g,Workbook:ce};return t.bookSheets&&delete H.Sheets,H}function oI(n,e){e=e||{},kr(n,"META-INF/manifest.xml")&&Dz(qt(n,"META-INF/manifest.xml"),e);var t=fr(n,"content.xml");if(!t)throw new Error("Missing content.xml in ODS / UOF file");var r=AP(ut(t),e);return kr(n,"meta.xml")&&(r.Props=UR(qt(n,"meta.xml"))),r}function lI(n,e){return AP(n,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function w1(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function jg(n){return typeof TextDecoder<"u"?new TextDecoder().decode(n):ut(go(n))}function Yg(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function cI(n){return n-=n>>1&1431655765,n=(n&858993459)+(n>>2&858993459),(n+(n>>4)&252645135)*16843009>>>24}function gY(n,e){for(var t=(n[e+15]&127)<<7|n[e+14]>>1,r=n[e+14]&1,i=e+13;i>=e;--i)r=r*256+n[i];return(n[e+15]&128?-r:r)*Math.pow(10,t-6176)}function nf(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function en(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function Nn(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=nf(n,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=t[0];n[t[0]++]>=128;);o=n.slice(l,t[0])}break;case 5:a=4,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=nf(n,t),o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var c={data:o,type:s};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function I1(n,e){return(n==null?void 0:n.map(function(t){return e(t.data)}))||[]}function vY(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=nf(n,r),s=Nn(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:en(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=Nn(o.data),c=en(l[3][0].data);a.messages.push({meta:l,data:n.slice(r[0],r[0]+c)}),r[0]+=c}),(e=s[3])!=null&&e[0]&&(a.merge=en(s[3][0].data)>>>0>0),t.push(a)}return t}function _Y(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=nf(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var l=0,c=0;if(s==1?(c=(e[t[0]]>>2&7)+4,l=(e[t[0]++]&224)<<3,l|=e[t[0]++]):(c=(e[t[0]++]>>2)+1,s==2?(l=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(l=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[Yg(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var u=Yg(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function xY(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(_Y(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return Yg(e)}function yY(n,e,t,r){var i=w1(n),s=i.getUint32(4,!0),a=(r>1?12:8)+cI(s&(r>1?3470:398))*4,o=-1,l=-1,c=NaN,u=new Date(2001,0,1);s&512&&(o=i.getUint32(a,!0),a+=4),a+=cI(s&(r>1?12288:4096))*4,s&16&&(l=i.getUint32(a,!0),a+=4),s&32&&(c=i.getFloat64(a,!0),a+=8),s&64&&(u.setTime(u.getTime()+i.getFloat64(a,!0)*1e3),a+=8);var h;switch(n[2]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:c>0};break;case 7:h={t:"n",v:c/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:t[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(c))h={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(n.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(n.slice(0,4)))}return h}function EY(n,e,t){var r=w1(n),i=r.getUint32(8,!0),s=12,a=-1,o=-1,l=NaN,c=NaN,u=new Date(2001,0,1);i&1&&(l=gY(n,s),s+=16),i&2&&(c=r.getFloat64(s,!0),s+=8),i&4&&(u.setTime(u.getTime()+r.getFloat64(s,!0)*1e3),s+=8),i&8&&(o=r.getUint32(s,!0),s+=4),i&16&&(a=r.getUint32(s,!0),s+=4);var h;switch(n[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:c>0};break;case 7:h={t:"n",v:c/86400};break;case 8:h={t:"e",v:0};break;case 9:if(a>-1)h={t:"s",v:t[a]};else throw new Error("Unsupported cell type ".concat(n[1]," : ").concat(i&31," : ").concat(n.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(n[1]," : ").concat(i&31," : ").concat(n.slice(0,4)))}return h}function TY(n,e,t){switch(n[0]){case 0:case 1:case 2:case 3:return yY(n,e,t,n[0]);case 5:return EY(n,e,t);default:throw new Error("Unsupported payload version ".concat(n[0]))}}function $s(n){var e=Nn(n);return nf(e[1][0].data)}function uI(n,e){var t=Nn(e.data),r=en(t[1][0].data),i=t[3],s=[];return(i||[]).forEach(function(a){var o=Nn(a.data),l=en(o[1][0].data)>>>0;switch(r){case 1:s[l]=jg(o[3][0].data);break;case 8:{var c=n[$s(o[9][0].data)][0],u=Nn(c.data),h=n[$s(u[1][0].data)][0],m=en(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var g=Nn(h.data);s[l]=g[3].map(function(v){return jg(v.data)}).join("")}break}}),s}function wY(n,e){var t,r,i,s,a,o,l,c,u,h,m,g,v,_,E=Nn(n),w=en(E[1][0].data)>>>0,T=en(E[2][0].data)>>>0,y=((r=(t=E[8])==null?void 0:t[0])==null?void 0:r.data)&&en(E[8][0].data)>0||!1,k,V;if((s=(i=E[7])==null?void 0:i[0])!=null&&s.data&&e!=0)k=(o=(a=E[7])==null?void 0:a[0])==null?void 0:o.data,V=(c=(l=E[6])==null?void 0:l[0])==null?void 0:c.data;else if((h=(u=E[4])==null?void 0:u[0])!=null&&h.data&&e!=1)k=(g=(m=E[4])==null?void 0:m[0])==null?void 0:g.data,V=(_=(v=E[3])==null?void 0:v[0])==null?void 0:_.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var L=y?4:1,I=w1(k),A=[],C=0;C<k.length/2;++C){var P=I.getUint16(C*2,!0);P<65535&&A.push([C,P])}if(A.length!=T)throw"Expected ".concat(T," cells, found ").concat(A.length);var D=[];for(C=0;C<A.length-1;++C)D[A[C][0]]=V.subarray(A[C][1]*L,A[C+1][1]*L);return A.length>=1&&(D[A[A.length-1][0]]=V.subarray(A[A.length-1][1]*L)),{R:w,cells:D}}function IY(n,e){var t,r=Nn(e.data),i=(t=r==null?void 0:r[7])!=null&&t[0]?en(r[7][0].data)>>>0>0?1:0:-1,s=I1(r[5],function(a){return wY(a,i)});return{nrows:en(r[4][0].data)>>>0,data:s.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function SY(n,e,t){var r,i=Nn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(en(i[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(s.e.c=(en(i[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));t["!ref"]=Xe(s);var a=Nn(i[4][0].data),o=uI(n,n[$s(a[4][0].data)][0]),l=(r=a[17])!=null&&r[0]?uI(n,n[$s(a[17][0].data)][0]):[],c=Nn(a[3][0].data),u=0;c[1].forEach(function(h){var m=Nn(h.data),g=n[$s(m[2][0].data)][0],v=en(g.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var _=IY(n,g);_.data.forEach(function(E,w){E.forEach(function(T,y){var k=Ve({r:u+w,c:y}),V=TY(T,o,l);V&&(t[k]=V)})}),u+=_.nrows})}function AY(n,e){var t=Nn(e.data),r={"!ref":"A1"},i=n[$s(t[2][0].data)],s=en(i[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return SY(n,i[0],r),r}function CY(n,e){var t,r=Nn(e.data),i={name:(t=r[1])!=null&&t[0]?jg(r[1][0].data):"",sheets:[]},s=I1(r[2],$s);return s.forEach(function(a){n[a].forEach(function(o){var l=en(o.meta[1][0].data);l==6e3&&i.sheets.push(AY(n,o))})}),i}function kY(n,e){var t=C1(),r=Nn(e.data),i=I1(r[1],$s);if(i.forEach(function(s){n[s].forEach(function(a){var o=en(a.meta[1][0].data);if(o==2){var l=CY(n,a);l.sheets.forEach(function(c,u){k1(t,c,u==0?l.name:l.name+"_"+u,!0)})}})}),t.SheetNames.length==0)throw new Error("Empty NUMBERS file");return t}function sm(n){var e,t,r,i,s={},a=[];if(n.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),n.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=xY(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var u;try{u=vY(c)}catch(h){return console.log("## "+(h.message||h))}u.forEach(function(h){s[h.id]=h.messages,a.push(h.id)})}}),!a.length)throw new Error("File has no messages");var o=((i=(r=(t=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:t.meta)==null?void 0:r[1])==null?void 0:i[0].data)&&en(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||a.forEach(function(l){s[l].forEach(function(c){var u=en(c.meta[1][0].data)>>>0;if(u==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return kY(s,o)}function RY(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function S1(n){RY([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(n)}function PY(n){return el.WS.indexOf(n)>-1?"sheet":n==el.CS?"chart":n==el.DS?"dialog":n==el.MS?"macro":n&&n.length?n:"sheet"}function DY(n,e){if(!n)return 0;try{n=e.map(function(r){return r.id||(r.id=r.strRelID),[r.name,n["!id"][r.id].Target,PY(n["!id"][r.id].Type)]})}catch{return null}return!n||n.length===0?null:n}function NY(n,e,t,r,i,s,a,o,l,c,u,h){try{s[r]=uu(fr(n,t,!0),e);var m=qt(n,e),g;switch(o){case"sheet":g=Vj(m,e,i,l,s[r],c,u,h);break;case"chart":if(g=Uj(m,e,i,l,s[r],c,u,h),!g||!g["!drawel"])break;var v=zc(g["!drawel"].Target,e),_=Hg(v),E=bW(fr(n,v,!0),uu(fr(n,_,!0),v)),w=zc(E,v),T=Hg(w);g=Ej(fr(n,w,!0),w,l,uu(fr(n,T,!0),w),c,g);break;case"macro":g=Bj(m,e,i,l,s[r],c,u,h);break;case"dialog":g=Gj(m,e,i,l,s[r],c,u,h);break;default:throw new Error("Unrecognized sheet type "+o)}a[r]=g;var y=[];s&&s[r]&&wi(s[r]).forEach(function(k){var V="";if(s[r][k].Type==el.CMNT){V=zc(s[r][k].Target,e);var L=Wj(qt(n,V,!0),V,l);if(!L||!L.length)return;Yw(g,L,!1)}s[r][k].Type==el.TCMNT&&(V=zc(s[r][k].Target,e),y=y.concat(UW(qt(n,V,!0),l)))}),y&&y.length&&Yw(g,y,!0,l.people||[])}catch(k){if(l.WTF)throw k}}function Ar(n){return n.charAt(0)=="/"?n.slice(1):n}function FY(n,e){if(uR(),e=e||{},S1(e),kr(n,"META-INF/manifest.xml")||kr(n,"objectdata.xml"))return oI(n,e);if(kr(n,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof sm<"u"){if(n.FileIndex)return sm(n);var t=Ye.utils.cfb_new();return Tw(n).forEach(function(ye){MG(t,ye,FG(n,ye))}),sm(t)}throw new Error("Unsupported NUMBERS file")}if(!kr(n,"[Content_Types].xml"))throw kr(n,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):kr(n,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=Tw(n),i=Rz(fr(n,"[Content_Types].xml")),s=!1,a,o;if(i.workbooks.length===0&&(o="xl/workbook.xml",qt(n,o,!0)&&i.workbooks.push(o)),i.workbooks.length===0){if(o="xl/workbook.bin",!qt(n,o,!0))throw new Error("Could not find workbook");i.workbooks.push(o),s=!0}i.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(du=[],i.sst)try{du=$j(qt(n,Ar(i.sst)),i.sst,e)}catch(ye){if(e.WTF)throw ye}e.cellStyles&&i.themes.length&&(l=Hj(fr(n,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],e)),i.style&&(c=zj(qt(n,Ar(i.style)),i.style,l,e))}i.links.map(function(ye){try{var me=uu(fr(n,Hg(Ar(ye))),ye);return Kj(qt(n,Ar(ye)),me,ye,e)}catch{}});var u=bj(qt(n,Ar(i.workbooks[0])),i.workbooks[0],e),h={},m="";i.coreprops.length&&(m=qt(n,Ar(i.coreprops[0]),!0),m&&(h=UR(m)),i.extprops.length!==0&&(m=qt(n,Ar(i.extprops[0]),!0),m&&Mz(m,h,e)));var g={};(!e.bookSheets||e.bookProps)&&i.custprops.length!==0&&(m=fr(n,Ar(i.custprops[0]),!0),m&&(g=Lz(m,e)));var v={};if((e.bookSheets||e.bookProps)&&(u.Sheets?a=u.Sheets.map(function(me){return me.name}):h.Worksheets&&h.SheetNames.length>0&&(a=h.SheetNames),e.bookProps&&(v.Props=h,v.Custprops=g),e.bookSheets&&typeof a<"u"&&(v.SheetNames=a),e.bookSheets?v.SheetNames:e.bookProps))return v;a={};var _={};e.bookDeps&&i.calcchain&&(_=qj(qt(n,Ar(i.calcchain)),i.calcchain));var E=0,w={},T,y;{var k=u.Sheets;h.Worksheets=k.length,h.SheetNames=[];for(var V=0;V!=k.length;++V)h.SheetNames[V]=k[V].name}var L=s?"bin":"xml",I=i.workbooks[0].lastIndexOf("/"),A=(i.workbooks[0].slice(0,I+1)+"_rels/"+i.workbooks[0].slice(I+1)+".rels").replace(/^\//,"");kr(n,A)||(A="xl/_rels/workbook."+L+".rels");var C=uu(fr(n,A,!0),A.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(e.xlmeta=jj(qt(n,Ar(i.metadata[0])),i.metadata[0],e)),(i.people||[]).length>=1&&(e.people=BW(qt(n,Ar(i.people[0])),e)),C&&(C=DY(C,u.Sheets));var P=qt(n,"xl/worksheets/sheet.xml",!0)?1:0;e:for(E=0;E!=h.Worksheets;++E){var D="sheet";if(C&&C[E]?(T="xl/"+C[E][1].replace(/[\/]?xl\//,""),kr(n,T)||(T=C[E][1]),kr(n,T)||(T=A.replace(/_rels\/.*$/,"")+C[E][1]),D=C[E][2]):(T="xl/worksheets/sheet"+(E+1-P)+"."+L,T=T.replace(/sheet0\./,"sheet.")),y=T.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(E!=e.sheets)continue e;break;case"string":if(h.SheetNames[E].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var N=!1,M=0;M!=e.sheets.length;++M)typeof e.sheets[M]=="number"&&e.sheets[M]==E&&(N=1),typeof e.sheets[M]=="string"&&e.sheets[M].toLowerCase()==h.SheetNames[E].toLowerCase()&&(N=1);if(!N)continue e}}NY(n,T,y,h.SheetNames[E],E,w,a,D,e,u,l,c)}return v={Directory:i,Workbook:u,Props:h,Custprops:g,Deps:_,Sheets:a,SheetNames:h.SheetNames,Strings:du,Styles:c,Themes:l,SSF:_n(Ue)},e&&e.bookFiles&&(n.files?(v.keys=r,v.files=n.files):(v.keys=[],v.files={},n.FullPaths.forEach(function(ye,me){ye=ye.replace(/^Root Entry[\/]/,""),v.keys.push(ye),v.files[ye]=n.FileIndex[me]}))),e&&e.bookVBA&&(i.vba.length>0?v.vbaraw=qt(n,Ar(i.vba[0]),!0):i.defaults&&i.defaults.bin===$W&&(v.vbaraw=qt(n,"xl/vbaProject.bin",!0))),v}function MY(n,e){var t=e||{},r="Workbook",i=Ye.find(n,r);try{if(r="/!DataSpaces/Version",i=Ye.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(A$(i.content),r="/!DataSpaces/DataSpaceMap",i=Ye.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var s=k$(i.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=Ye.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=R$(i.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=Ye.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);D$(i.content)}catch{}if(r="/EncryptionInfo",i=Ye.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=N$(i.content);if(r="/EncryptedPackage",i=Ye.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,t.password||"",t);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,t.password||"",t);throw new Error("File is password-protected")}function A1(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=yr(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function OY(n,e){return Ye.find(n,"EncryptedPackage")?MY(n,e):wP(n,e)}function LY(n,e){var t,r=n,i=e||{};return i.type||(i.type=Ke&&Buffer.isBuffer(n)?"buffer":"base64"),t=gR(r,i),FY(t,i)}function CP(n,e){var t=0;e:for(;t<n.length;)switch(n.charCodeAt(t)){case 10:case 13:case 32:++t;break;case 60:return qg(n.slice(t),e);default:break e}return Zu.to_workbook(n,e)}function bY(n,e){var t="",r=A1(n,e);switch(e.type){case"base64":t=yr(n);break;case"binary":t=n;break;case"buffer":t=n.toString("binary");break;case"array":t=ao(n);break;default:throw new Error("Unrecognized type "+e.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(t=ut(t)),e.type="binary",CP(t,e)}function VY(n,e){var t=n;return e.type=="base64"&&(t=yr(t)),t=Yu.utils.decode(1200,t.slice(2),"str"),e.type="binary",CP(t,e)}function UY(n){return n.match(/[^\x00-\x7F]/)?Hc(n):n}function am(n,e,t,r){return r?(t.type="string",Zu.to_workbook(n,t)):Zu.to_workbook(e,t)}function Xg(n,e){Jk();var t=e||{};if(typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer)return Xg(new Uint8Array(n),(t=_n(t),t.type="array",t));typeof Uint8Array<"u"&&n instanceof Uint8Array&&!t.type&&(t.type=typeof Deno<"u"?"buffer":"array");var r=n,i=[0,0,0,0],s=!1;if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),dl={},t.dateNF&&(dl.dateNF=t.dateNF),t.type||(t.type=Ke&&Buffer.isBuffer(n)?"buffer":"base64"),t.type=="file"&&(t.type=Ke?"buffer":"binary",r=AG(n),typeof Uint8Array<"u"&&!Ke&&(t.type="array")),t.type=="string"&&(s=!0,t.type="binary",t.codepage=65001,r=UY(n)),t.type=="array"&&typeof Uint8Array<"u"&&n instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return t=_n(t),t.type="array",Xg(i1(r),t)}switch((i=A1(r,t))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return OY(Ye.read(r,t),t);break;case 9:if(i[1]<=8)return wP(r,t);break;case 60:return qg(r,t);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return d$(r,t);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return f$.to_workbook(r,t);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?LY(r,t):am(n,r,t,s);case 239:return i[3]===60?qg(r,t):am(n,r,t,s);case 255:if(i[1]===254)return VY(r,t);if(i[1]===0&&i[2]===2&&i[3]===0)return hu.to_workbook(r,t);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return hu.to_workbook(r,t);break;case 3:case 131:case 139:case 140:return jw.to_workbook(r,t);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return $$.to_workbook(r,t);break;case 10:case 13:case 32:return bY(r,t);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return c$.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?jw.to_workbook(r,t):am(n,r,t,s)}function BY(n,e,t,r,i,s,a,o){var l=xn(t),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,m=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:t,enumerable:!1})}catch{m.__rowNum__=t}else m.__rowNum__=t;if(!a||n[t])for(var g=e.s.c;g<=e.e.c;++g){var v=a?n[t][g]:n[r[g]+l];if(v===void 0||v.t===void 0){if(c===void 0)continue;s[g]!=null&&(m[s[g]]=c);continue}var _=v.v;switch(v.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[g]!=null){if(_==null)if(v.t=="e"&&_===null)m[s[g]]=null;else if(c!==void 0)m[s[g]]=c;else if(u&&_===null)m[s[g]]=null;else continue;else m[s[g]]=u&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?_:ts(v,_,o);_!=null&&(h=!1)}}return{row:m,isempty:h}}function Qg(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:n["!ref"];switch(c.header===1?r=1:c.header==="A"?r=2:Array.isArray(c.header)?r=3:c.header==null&&(r=0),typeof u){case"string":l=Lt(u);break;case"number":l=Lt(n["!ref"]),l.s.r=u;break;default:l=u}r>0&&(i=0);var h=xn(l.s.r),m=[],g=[],v=0,_=0,E=Array.isArray(n),w=l.s.r,T=0,y={};E&&!n[w]&&(n[w]=[]);var k=c.skipHidden&&n["!cols"]||[],V=c.skipHidden&&n["!rows"]||[];for(T=l.s.c;T<=l.e.c;++T)if(!(k[T]||{}).hidden)switch(m[T]=Zt(T),t=E?n[w][T]:n[m[T]+h],r){case 1:s[T]=T-l.s.c;break;case 2:s[T]=m[T];break;case 3:s[T]=c.header[T-l.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=ts(t,null,c),_=y[a]||0,!_)y[a]=1;else{do o=a+"_"+_++;while(y[o]);y[a]=_,y[o]=1}s[T]=o}for(w=l.s.r+i;w<=l.e.r;++w)if(!(V[w]||{}).hidden){var L=BY(n,l,w,m,r,s,E,c);(L.isempty===!1||(r===1?c.blankrows!==!1:c.blankrows))&&(g[v++]=L.row)}return g.length=v,g}var fI=/"/g;function GY(n,e,t,r,i,s,a,o){for(var l=!0,c=[],u="",h=xn(t),m=e.s.c;m<=e.e.c;++m)if(r[m]){var g=o.dense?(n[t]||[])[m]:n[r[m]+h];if(g==null)u="";else if(g.v!=null){l=!1,u=""+(o.rawNumbers&&g.t=="n"?g.v:ts(g,null,o));for(var v=0,_=0;v!==u.length;++v)if((_=u.charCodeAt(v))===i||_===s||_===34||o.forceQuotes){u='"'+u.replace(fI,'""')+'"';break}u=="ID"&&(u='"ID"')}else g.f!=null&&!g.F?(l=!1,u="="+g.f,u.indexOf(",")>=0&&(u='"'+u.replace(fI,'""')+'"')):u="";c.push(u)}return o.blankrows===!1&&l?null:c.join(a)}function kP(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=Lt(n["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),u="",h=[];r.dense=Array.isArray(n);for(var m=r.skipHidden&&n["!cols"]||[],g=r.skipHidden&&n["!rows"]||[],v=i.s.c;v<=i.e.c;++v)(m[v]||{}).hidden||(h[v]=Zt(v));for(var _=0,E=i.s.r;E<=i.e.r;++E)(g[E]||{}).hidden||(u=GY(n,i,E,h,a,l,s,r),u!=null&&(r.strip&&(u=u.replace(c,"")),(u||r.blankrows!==!1)&&t.push((_++?o:"")+u)));return delete r.dense,t.join("")}function zY(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=kP(n,e);return t}function HY(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=Lt(n["!ref"]),s="",a=[],o,l=[],c=Array.isArray(n);for(o=i.s.c;o<=i.e.c;++o)a[o]=Zt(o);for(var u=i.s.r;u<=i.e.r;++u)for(s=xn(u),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=c?(n[u]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}l[l.length]=e+"="+r}return l}function RP(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?zn(r.origin):r.origin;a=l.r,o=l.c}var c,u={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var h=Lt(s["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),a==-1&&(a=h.e.r+1,u.e.r=a+e.length-1+i)}else a==-1&&(a=0,u.e.r=e.length-1+i);var m=r.header||[],g=0;e.forEach(function(_,E){wi(_).forEach(function(w){(g=m.indexOf(w))==-1&&(m[g=m.length]=w);var T=_[w],y="z",k="",V=Ve({c:o+g,r:a+E+i});c=rf(s,V),T&&typeof T=="object"&&!(T instanceof Date)?s[V]=T:(typeof T=="number"?y="n":typeof T=="boolean"?y="b":typeof T=="string"?y="s":T instanceof Date?(y="d",r.cellDates||(y="n",T=Kn(T)),k=r.dateNF||Ue[14]):T===null&&r.nullError&&(y="e",T=0),c?(c.t=y,c.v=T,delete c.w,delete c.R,k&&(c.z=k)):s[V]=c={t:y,v:T},k&&(c.z=k))})}),u.e.c=Math.max(u.e.c,o+m.length-1);var v=xn(a);if(i)for(g=0;g<m.length;++g)s[Zt(g+o)+v]={t:"s",v:m[g]};return s["!ref"]=Xe(u),s}function $Y(n,e){return RP(null,n,e)}function rf(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=zn(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?rf(n,Ve(e)):rf(n,Ve({r:e,c:t||0}))}function WY(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function C1(){return{SheetNames:[],Sheets:{}}}function k1(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=a+i)!=-1;++i);}if(Rj(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function qY(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=WY(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function KY(n,e){return n.z=e,n}function PP(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function jY(n,e,t){return PP(n,"#"+e,t)}function YY(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function XY(n,e,t,r){for(var i=typeof e!="string"?e:Lt(e),s=typeof e=="string"?e:Xe(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=rf(n,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=t,r&&(l.D=!0))}return n}var QY={encode_col:Zt,encode_row:xn,encode_cell:Ve,encode_range:Xe,decode_col:d1,decode_row:h1,split_cell:lz,decode_cell:zn,decode_range:nc,format_cell:ts,sheet_add_aoa:MR,sheet_add_json:RP,sheet_add_dom:IP,aoa_to_sheet:rc,json_to_sheet:$Y,table_to_sheet:SP,table_to_book:dY,sheet_to_csv:kP,sheet_to_txt:zY,sheet_to_json:Qg,sheet_to_html:hY,sheet_to_formulae:HY,sheet_to_row_object_array:Qg,sheet_get_cell:rf,book_new:C1,book_append_sheet:k1,book_set_sheet_visibility:qY,cell_set_number_format:KY,cell_set_hyperlink:PP,cell_set_internal_link:jY,cell_add_comment:YY,sheet_set_array_formula:XY,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const DP="AIzaSyCT8cjpHixIO65fm-GtMtrpZQDN4Q334to",zr="gemini-3-flash-preview",Eo=!DP;function Hr(){return new K7({apiKey:DP})}function ic(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result.split(",")[1];e({mimeType:n.type,data:i})},r.onerror=t,r.readAsDataURL(n)})}function $r(n){const e=(n==null?void 0:n.message)||String(n);return e.includes("429")||e.toLowerCase().includes("rate limit")?new Error("Rate limited. Retry after a short wait."):e.toLowerCase().includes("safety")?new Error("Content blocked by Safety. Please upload academic materials only."):new Error("AI service error: "+e)}async function TX(n){var e,t,r,i;try{const s=await ic(n),a=Hr(),{response:o}=await a.models.generateContent({model:zr,contents:[{role:"user",parts:[{text:"Perform OCR and produce 5-8 bullet points summarizing this document for university study."},{inlineData:s}]}]});return(((i=(r=(t=(e=o==null?void 0:o.candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:i.map(c=>c.text).join(`
`))||"").split(/\n+/).map(c=>c.replace(/^[-]\s?/,"")).filter(Boolean)}catch(s){throw $r(s)}}async function wX(n){var e,t,r,i;try{const s=await ic(n),a=Hr(),{response:o}=await a.models.generateContent({model:zr,contents:[{role:"user",parts:[{text:"Perform OCR and generate a 5-question multiple choice quiz as JSON array with keys question, options[4], answerIndex."},{inlineData:s}]}]}),l=((i=(r=(t=(e=o==null?void 0:o.candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:i.map(g=>g.text).join(""))||"[]",c=l.indexOf("["),u=l.lastIndexOf("]"),h=c>=0?l.slice(c,u+1):"[]";return JSON.parse(h)}catch(s){throw $r(s)}}async function IX(n){var e,t,r,i;try{let s=[{text:"Extract assignments with keys: title, moduleCode, dueDate (YYYY-MM-DD), description. Return JSON array."}];if(typeof n!="string"){const m=await ic(n);s.push({inlineData:m})}else s.push({text:n});const a=Hr(),{response:o}=await a.models.generateContent({model:zr,contents:[{role:"user",parts:s}]}),l=((i=(r=(t=(e=o==null?void 0:o.candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:i.map(m=>m.text).join(""))||"[]",c=l.indexOf("["),u=l.lastIndexOf("]"),h=c>=0?l.slice(c,u+1):"[]";return JSON.parse(h)}catch(s){throw $r(s)}}async function SX(n){const e=await n.arrayBuffer(),t=Xg(e,{type:"array"}),r=t.Sheets[t.SheetNames[0]];return QY.sheet_to_json(r).map(s=>({title:s.title||s.assignment||s.Assignment||"",moduleCode:s.moduleCode||s.code||s.Module||"",dueDate:s.dueDate||s.DueDate||s.due||"",description:s.description||s.Details||""})).filter(s=>s.title&&s.moduleCode&&s.dueDate)}async function AX(n){var e,t,r,i;try{const s=await ic(n),a=Hr(),{response:o}=await a.models.generateContent({model:zr,contents:[{role:"user",parts:[{text:"From this registration PDF, list modules as JSON array with code, title, credits, and a one-sentence summary suitable for a syllabus card."},{inlineData:s}]}]}),l=((i=(r=(t=(e=o==null?void 0:o.candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:i.map(g=>g.text).join(""))||"[]",c=l.indexOf("["),u=l.lastIndexOf("]"),h=c>=0?l.slice(c,u+1):"[]";return JSON.parse(h)}catch(s){throw $r(s)}}async function JY(n){var e,t,r,i;try{const s=Hr(),{response:a}=await s.models.generateContent({model:zr,contents:[{role:"user",parts:[{text:"Summarize the following academic text into 5-8 concise bullet points:"},{text:n}]}]});return(((i=(r=(t=(e=a==null?void 0:a.candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:i.map(l=>l.text).join(`
`))||"").split(/\n+/).map(l=>l.replace(/^[-]\s?/,"")).filter(Boolean)}catch(s){throw $r(s)}}async function CX(n){var e,t,r,i;try{const s=Hr(),{response:a}=await s.models.generateContent({model:zr,contents:[{role:"user",parts:[{text:"You are an academic writing assistant. Review the essay for grammar, clarity, structure, and evidence. Return 6-10 bullet-point suggestions (actionable, concise)."},{text:n}]}]});return(((i=(r=(t=(e=a==null?void 0:a.candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:i.map(l=>l.text).join(`
`))||"").split(/\n+/).map(l=>l.replace(/^[-]\s?/,"")).filter(Boolean)}catch(s){throw $r(s)}}async function kX(n,e){var t,r,i,s;try{const a=Hr(),{response:o}=await a.models.generateContent({model:zr,contents:[{role:"user",parts:[{text:"Explain the concept to a beginner using the Feynman Technique. Use clear, simple language and 6-10 bullet points."},{text:`Topic: ${n}`},{text:e?`Context: ${e}`:""}]}]});return(((s=(i=(r=(t=o==null?void 0:o.candidates)==null?void 0:t[0])==null?void 0:r.content)==null?void 0:i.parts)==null?void 0:s.map(c=>c.text).join(`
`))||"").split(/\n+/).map(c=>c.replace(/^[-]\s?/,"")).filter(Boolean)}catch(a){throw $r(a)}}async function RX(n,e,t){var r,i,s,a;try{const o=Hr(),{response:l}=await o.models.generateContent({model:zr,contents:[{role:"user",parts:[{text:`Generate ${t} ${e} multiple-choice questions (JSON array) with keys question, options[4], answerIndex from the following text:`},{text:n}]}]}),c=((a=(s=(i=(r=l==null?void 0:l.candidates)==null?void 0:r[0])==null?void 0:i.content)==null?void 0:s.parts)==null?void 0:a.map(h=>h.text).join(""))||"[]",u=c.slice(c.indexOf("["),c.lastIndexOf("]")+1);return JSON.parse(u||"[]")}catch(o){throw $r(o)}}async function PX(n){var e,t,r,i;try{const s=await ic(n),a=Hr(),{response:o}=await a.models.generateContent({model:zr,contents:[{role:"user",parts:[{text:"Perform OCR and classify the document. Return JSON object with keys: subject (concise topic/area), moduleCode (if present, else omit), keywords (array of 5-10 important terms), title (short, inferred title)."},{inlineData:s}]}]}),l=((i=(r=(t=(e=o==null?void 0:o.candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:i.map(u=>u.text).join(""))||"{}",c=l.slice(l.indexOf("{"),l.lastIndexOf("}")+1);return JSON.parse(c||"{}")}catch(s){throw $r(s)}}async function DX(n){var e,t,r,i;try{const s=Hr(),{response:a}=await s.models.generateContent({model:zr,contents:[{role:"user",parts:[{text:"Classify the following academic text and return JSON with subject, optional moduleCode, keywords[5-10], and short title."},{text:n}]}]}),o=((i=(r=(t=(e=a==null?void 0:a.candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:i.map(c=>c.text).join(""))||"{}",l=o.slice(o.indexOf("{"),o.lastIndexOf("}")+1);return JSON.parse(l||"{}")}catch(s){throw $r(s)}}async function NX(n){var e,t,r,i;try{const s=await ic(n),a=Hr(),{response:o}=await a.models.generateContent({model:zr,contents:[{role:"user",parts:[{text:"From this academic document (PDF/Image), extract modules/course entries as JSON array with keys code (short code if available or inferred), title, credits (integer, 0 if unknown)."},{inlineData:s}]}]}),l=((i=(r=(t=(e=o==null?void 0:o.candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:i.map(u=>u.text).join(""))||"[]",c=l.slice(l.indexOf("["),l.lastIndexOf("]")+1);return JSON.parse(c||"[]")}catch(s){throw $r(s)}}async function FX(n){var e,t,r,i;try{const s=Hr(),{response:a}=await s.models.generateContent({model:zr,contents:[{role:"user",parts:[{text:"From the following academic text, extract modules/course entries as JSON array with keys code (short code if available or inferred), title, credits (integer, 0 if unknown)."},{text:n}]}]}),o=((i=(r=(t=(e=a==null?void 0:a.candidates)==null?void 0:e[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:i.map(c=>c.text).join(""))||"[]",l=o.slice(o.indexOf("["),o.lastIndexOf("]")+1);return JSON.parse(l||"[]")}catch(s){throw $r(s)}}function ZY(){const[n,e]=ae.useState(null),[t,r]=ae.useState(""),[i,s]=ae.useState(null),[a,o]=ae.useState(""),[l]=ae.useState(()=>{const h=[["VITE_GOOGLE_API_KEY","AIzaSyCT8cjpHixIO65fm-GtMtrpZQDN4Q334to"],["VITE_FIREBASE_PROJECT_ID","bookster-f0347"],["VITE_FIREBASE_STORAGE_BUCKET","bookster-f0347.appspot.com"]].filter(([m,g])=>!g).map(([m])=>m);return h.length?`Missing env: ${h.join(", ")}`:"Env OK"});ae.useEffect(()=>{var h;const u=(h=Br.currentUser)==null?void 0:h.uid;u?(async()=>{try{const m=await Xh("modules",u);s(!0),o(`Modules: ${m}`)}catch(m){s(!1),o(m.message)}})():(s(!1),o("Sign in to test Firestore"))},[]);async function c(){e(null),r("Running...");try{const u=await JY("Photosynthesis converts light energy into chemical energy in plants.");e(!0),r(`${u.length} bullets returned`)}catch(u){e(!1),r(u.message)}}return j.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-sm",children:[j.jsx("div",{className:"font-semibold mb-2",children:"System Health"}),j.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[j.jsxs("div",{className:"rounded-2xl border p-3",children:[j.jsx("div",{className:"text-gray-500",children:"Env"}),j.jsx("div",{children:l})]}),j.jsxs("div",{className:"rounded-2xl border p-3",children:[j.jsxs("div",{className:"flex items-center justify-between",children:[j.jsx("div",{className:"text-gray-500",children:"AI (Gemini)"}),j.jsx("button",{className:"px-2 py-1 rounded-lg bg-black text-white",onClick:c,children:"Run Test"})]}),j.jsx("div",{className:n===!1?"text-red-600":n===!0?"text-emerald-600":"text-gray-600",children:t||"Idle"})]}),j.jsxs("div",{className:"rounded-2xl border p-3",children:[j.jsx("div",{className:"text-gray-500",children:"Firestore"}),j.jsx("div",{className:i===!1?"text-red-600":i===!0?"text-emerald-600":"text-gray-600",children:a||"Idle"})]})]})]})}const eX=ae.lazy(()=>Ks(()=>import("./vendor-lottie-BKil9D5R.js").then(n=>n.i),[]));function tX(){const[n,e]=ae.useState(0),[t,r]=ae.useState(0),[i,s]=ae.useState(0),[a,o]=ae.useState([]),[l,c]=ae.useState(0),[u,h]=ae.useState(0);return ae.useEffect(()=>{var g;const m=(g=Br.currentUser)==null?void 0:g.uid;m&&(async()=>(e(await Xh("modules",m)),r(await Xh("assignments",m)),s(await Xh("quizzes",m)),o(await f5(m)),c(await h5(m)),h(await d5(m))))()},[]),j.jsxs(Ef,{children:[j.jsxs("div",{className:"space-y-6",children:[j.jsxs("div",{children:[j.jsx("div",{className:"text-xs text-indigo-600 font-medium",children:"AI-Powered Learning"}),j.jsx("h1",{className:"text-3xl font-semibold",children:"Study Dashboard"}),j.jsx("p",{className:"text-sm text-gray-600",children:"Track your progress and access AI study tools"})]}),j.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[j.jsxs("div",{className:"rounded-3xl p-6 text-white bg-gradient-to-br from-indigo-600 to-indigo-500",children:[j.jsx("div",{className:"text-sm opacity-90",children:"Enrolled Modules"}),j.jsx("div",{className:"text-3xl font-semibold mt-1",children:n}),j.jsx("div",{className:"text-xs opacity-80",children:"Active courses"})]}),j.jsxs("div",{className:"rounded-3xl p-6 text-white bg-gradient-to-br from-orange-500 to-amber-400",children:[j.jsx("div",{className:"text-sm opacity-90",children:"Pending Tasks"}),j.jsx("div",{className:"text-3xl font-semibold mt-1",children:t}),j.jsx("div",{className:"text-xs opacity-80",children:"Due soon"})]}),j.jsxs("div",{className:"rounded-3xl p-6 bg-white border",children:[j.jsx("div",{className:"text-sm text-gray-500",children:"Quizzes Completed"}),j.jsx("div",{className:"text-3xl font-semibold mt-1",children:i}),j.jsx("div",{className:"text-xs text-gray-500",children:"Active recall practice"})]}),j.jsxs("div",{className:"rounded-3xl p-6 bg-white border flex items-center gap-3",children:[j.jsx(ae.Suspense,{fallback:j.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100"}),children:j.jsx(eX,{animationData:A5,loop:!0,autoplay:!0,style:{height:60}})}),j.jsxs("div",{children:[j.jsx("div",{className:"text-sm text-gray-500",children:"Study Streak"}),j.jsxs("div",{className:"text-3xl font-semibold mt-1",children:[l,"d"]}),j.jsx("div",{className:"text-xs text-gray-500",children:"Keep the momentum going"})]})]})]}),j.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[j.jsxs(Hi,{to:"/lab",className:"rounded-3xl bg-white p-6 shadow-sm border hover:border-indigo-200",children:[j.jsx("h3",{className:"font-semibold mb-2",children:"AI Study Lab"}),j.jsx("p",{className:"text-sm text-gray-600",children:"Check essays, write summaries, generate quizzes."})]}),j.jsxs(Hi,{to:"/scanner",className:"rounded-3xl bg-white p-6 shadow-sm border hover:border-indigo-200",children:[j.jsx("h3",{className:"font-semibold mb-2",children:"Assignment Scanner"}),j.jsx("p",{className:"text-sm text-gray-600",children:"Parse briefs or Excel schedules into drafts."})]}),j.jsxs(Hi,{to:"/import",className:"rounded-3xl bg-white p-6 shadow-sm border hover:border-indigo-200",children:[j.jsx("h3",{className:"font-semibold mb-2",children:"Module Import"}),j.jsx("p",{className:"text-sm text-gray-600",children:"Scan registration PDFs and create modules."})]})]})]}),j.jsx(ZY,{}),!!a.length&&j.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-sm mt-6",children:[j.jsxs("div",{className:"flex items-center justify-between",children:[j.jsx("h3",{className:"font-semibold",children:"Upcoming Deadlines"}),j.jsxs("div",{className:"text-xs text-gray-500",children:["Total study: ",(u/60).toFixed(1),"h"]})]}),j.jsx("div",{className:"mt-3 grid md:grid-cols-2 gap-3",children:a.slice(0,6).map(m=>j.jsxs("div",{className:"rounded-2xl border p-4 flex items-center justify-between",children:[j.jsxs("div",{children:[j.jsx("div",{className:"text-sm text-gray-500",children:m.moduleCode}),j.jsx("div",{className:"font-medium",children:m.title})]}),j.jsxs("div",{className:"text-xs",children:["Due ",m.dueDate]})]},m.id))})]})]})}function nX(){const[n,e]=ae.useState(null),[t,r]=ae.useState("student"),i=Hl();return ae.useEffect(()=>a5(e),[]),j.jsx(Ef,{children:j.jsxs("div",{className:"rounded-3xl bg-white p-8 shadow-sm",children:[j.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Welcome to AcademeMate"}),n?j.jsxs("div",{className:"space-y-6",children:[j.jsx("p",{className:"text-gray-600",children:"Select your role"}),j.jsxs("div",{className:"flex gap-4",children:[j.jsx("button",{onClick:()=>r("student"),className:`px-4 py-2 rounded-full border ${t==="student"?"border-student-600 text-student-600":"border-gray-300 text-gray-700"}`,children:"Student"}),j.jsx("button",{onClick:()=>r("learner"),className:`px-4 py-2 rounded-full border ${t==="learner"?"border-learner-500 text-learner-500":"border-gray-300 text-gray-700"}`,children:"Learner"})]}),j.jsx("button",{className:"px-4 py-2 rounded-full bg-indigo-600 text-white",onClick:async()=>{await o5(n.uid,t),localStorage.setItem("role",t),i("/")},children:"Continue"})]}):j.jsx("button",{className:"px-4 py-2 rounded-full bg-black text-white",onClick:()=>Vk(),children:"Sign in with Google"})]})})}function rX(){const[n,e]=ae.useState(""),[t,r]=ae.useState(""),[i,s]=ae.useState(""),a=Hl();async function o(){s("");try{await i5(n,t),a("/")}catch(c){s(c.message)}}async function l(){s("");try{await Vk(),a("/")}catch(c){s(c.message)}}return j.jsx(Ef,{children:j.jsxs("div",{className:"max-w-md mx-auto rounded-3xl bg-white p-8 shadow-sm",children:[j.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Log in"}),j.jsxs("div",{className:"space-y-3",children:[j.jsx("input",{className:"w-full rounded-2xl border p-3",placeholder:"Email",value:n,onChange:c=>e(c.target.value)}),j.jsx("input",{type:"password",className:"w-full rounded-2xl border p-3",placeholder:"Password",value:t,onChange:c=>r(c.target.value)}),j.jsx("button",{className:"w-full px-4 py-2 rounded-full bg-black text-white",onClick:o,children:"Log in"}),j.jsx("button",{className:"w-full px-4 py-2 rounded-full bg-indigo-600 text-white",onClick:l,children:"Continue with Google"}),i&&j.jsx("div",{className:"text-red-600 text-sm",children:i}),j.jsxs("div",{className:"text-sm text-gray-600",children:["No account? ",j.jsx(Hi,{to:"/signup",className:"underline",children:"Sign up"})]})]})]})})}function iX(){const[n,e]=ae.useState(""),[t,r]=ae.useState(""),[i,s]=ae.useState(""),[a,o]=ae.useState(""),l=Hl();async function c(){o("");try{await r5(n,t,i),l("/onboarding")}catch(u){o(u.message)}}return j.jsx(Ef,{children:j.jsxs("div",{className:"max-w-md mx-auto rounded-3xl bg-white p-8 shadow-sm",children:[j.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Create account"}),j.jsxs("div",{className:"space-y-3",children:[j.jsx("input",{className:"w-full rounded-2xl border p-3",placeholder:"Name",value:i,onChange:u=>s(u.target.value)}),j.jsx("input",{className:"w-full rounded-2xl border p-3",placeholder:"Email",value:n,onChange:u=>e(u.target.value)}),j.jsx("input",{type:"password",className:"w-full rounded-2xl border p-3",placeholder:"Password",value:t,onChange:u=>r(u.target.value)}),j.jsx("button",{className:"w-full px-4 py-2 rounded-full bg-black text-white",onClick:c,children:"Sign up"}),a&&j.jsx("div",{className:"text-red-600 text-sm",children:a}),j.jsxs("div",{className:"text-sm text-gray-600",children:["Have an account? ",j.jsx(Hi,{to:"/login",className:"underline",children:"Log in"})]})]})]})})}function sX(){const n=Br.currentUser,e=Hl();return j.jsx(Ef,{children:j.jsxs("div",{className:"max-w-md mx-auto rounded-3xl bg-white p-8 shadow-sm",children:[j.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Profile"}),n?j.jsxs("div",{className:"space-y-3",children:[j.jsxs("div",{className:"text-sm text-gray-600",children:["UID: ",n.uid]}),j.jsxs("div",{className:"text-sm",children:["Name: ",n.displayName||""]}),j.jsxs("div",{className:"text-sm",children:["Email: ",n.email]}),j.jsx("button",{className:"w-full px-4 py-2 rounded-full bg-black text-white",onClick:async()=>{await s5(),e("/login")},children:"Sign out"})]}):j.jsx("div",{className:"text-sm",children:"Not signed in"})]})})}function Rc({children:n}){var t;return((t=Br.currentUser)==null?void 0:t.uid)?j.jsx(j.Fragment,{children:n}):j.jsx(SA,{to:"/login"})}const aX=ae.lazy(()=>Ks(()=>import("./AIDocTool-DcdqYj1h.js"),__vite__mapDeps([3,1,4]))),oX=ae.lazy(()=>Ks(()=>import("./AssignmentScanner-BlHg3JPr.js"),__vite__mapDeps([5,1,4]))),lX=ae.lazy(()=>Ks(()=>import("./ModuleImport-DWBzHt9D.js"),__vite__mapDeps([6,1,4]))),cX=ae.lazy(()=>Ks(()=>import("./AIStudyLab-BJtJGrxo.js"),__vite__mapDeps([7,1])));function uX(){return j.jsx(ae.Suspense,{fallback:j.jsx("div",{className:"p-6",children:"Loading"}),children:j.jsxs(QF,{children:[j.jsx(Yr,{path:"/",element:j.jsx(tX,{})}),j.jsx(Yr,{path:"/onboarding",element:j.jsx(nX,{})}),j.jsx(Yr,{path:"/doc",element:j.jsx(Rc,{children:j.jsx(aX,{})})}),j.jsx(Yr,{path:"/scanner",element:j.jsx(Rc,{children:j.jsx(oX,{})})}),j.jsx(Yr,{path:"/import",element:j.jsx(Rc,{children:j.jsx(lX,{})})}),j.jsx(Yr,{path:"/lab",element:j.jsx(Rc,{children:j.jsx(cX,{})})}),j.jsx(Yr,{path:"/login",element:j.jsx(rX,{})}),j.jsx(Yr,{path:"/signup",element:j.jsx(iX,{})}),j.jsx(Yr,{path:"/profile",element:j.jsx(Rc,{children:j.jsx(sX,{})})}),j.jsx(Yr,{path:"*",element:j.jsx(SA,{to:"/"})})]})})}mA(document.getElementById("root")).render(j.jsx(XP.StrictMode,{children:j.jsx(s4,{children:j.jsx(uX,{})})}));export{Ef as L,Br as a,JY as b,xX as c,DX as d,yX as e,FX as f,_X as g,TX as h,PX as i,j,NX as k,IX as l,EX as m,AX as n,vX as o,SX as p,u5 as q,gX as r,Ng as s,wX as t,mX as u,RX as v,CX as w,kX as x};
